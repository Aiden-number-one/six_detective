define(function(require,exports,module){window.App=require("app");var a=require("./kweb");require("js/layouts/layout.min"),require("js/layouts/demo.min"),require("plugins/jquery-validation/js/jquery.validate"),require("plugins/jquery-validation/js/additional-methods.js"),require("plugins/jquery-validation/js/localization/messages_zh.min.js"),require("plugins/fullcalendar/fullcalendar"),require("plugins/fullcalendar/lib/moment.min"),require("plugins/fullcalendar/lang/zh-cn"),require("assets/plugins/colresizable/colResizable-1.6");var i=[],c=(a.kingdom.kconfig().theme,a.kingdom.kconfig().root);$.kingdom.kconfig().developer&&(console.log=function(){});function e(i,a){i=i||"index",history.pushState&&("common-page"==!i?history.pushState("","","index.html#"+i):"index"==i&&history.pushState("","","index.html")),$(".loading").remove(),$("#js_page_row,#index_page").hide(),$(".page-container").show();var t="",n="";if(-1<i.indexOf("common-page")&&!a){t="common-page";var e=i.substr(i.indexOf("?")+1,i.length);e=e.split("&");for(var s="{",l=0;l<e.length;l++){var o=e[l].split("=");"page"==o[0]?n=o[1]:s+='"'+o[0]+'":"'+o[1]+'",'}s=s.substr(0,s.length-1),s+="}",s=JSON.parse(s),$("#local-data").data("params",s)}else t=i.replace("#",""),n=a||t;var d=c+t+"/"+n;(new Date).getTime(),$.ajax({url:d+".html",dataType:"html",beforeSend:function(){App.blockUI({target:".page-content",overlayColor:"none",cenrerY:!0,animate:!0})},success:function(a){if(window.x_trace_page_id=$.kingdom.uuid(),null==a.match("<!DOCTYPE html>")){if(-1<i.indexOf("common-page"))$(".margin-top-20").fadeOut(),$("#js_page_common").html(a),$("#js_page_common").removeAttr("class").addClass("margin-top-20 page-"+t+" page-common-"+n),$("#js_page_common").fadeIn();else{if($("#js_page_common").hide(),$(".margin-top-20").hide(),$(".page-tabs-content a").removeClass("active"),0<$(".page-tabs-content a[data-titleId='"+t+"']").length)$(".page-tabs-content a[data-titleId='"+t+"']").addClass("active"),$("#"+t).show();else if("index"==i)$(".page-tabs-content a").eq(0).addClass("active"),$("#js_page_row").removeAttr("class").addClass("margin-top-20 page-"+t).html(a).show();else if(0===$(".page-tabs-content a[data-titleId='"+t+"']").length){var e=$("a[href=#"+i+"] span").html();"indexInformation"==i&&(e="信息统计"),$(".page-tabs-content").append('<a href="javascript:;" class="active J_menuTab" data-titleId="'+t+'">'+e+' <i class="fa fa-times-circle"></i></a>'),$(".page-content").append('<div id="'+t+'" class="margin-top-20 J_htmlTab page-'+t+'" style="display:none;"></div>'),$("#"+t).html(a).show()}g(),App.runResizeHandlers()}require.async(d+".js",function(a){a&&a.load&&(a.load(),h(".page-"+t),p(".page-"+t),$(".page-"+t+" .table").colResizable({liveDrag:!0,draggingClass:"dragging",resizeMode:"flex"}))}),r()}else toastr.info("请刷新当前页面重新登录。","登录失效！")},error:function(){var a='<div class="row"><div class="col-md-12 page-404"><div class="number font-red"> 404 </div><div class="details"><h3>啊唷，您要找的页面发生了意外。</h3><p>我们无法找到这个页面。<br/><p><a href="" class="btn red btn-outline"> 刷新试试 </a> 或<a href="index.html" class="btn red btn-outline"> 返回首页 </a><br> </p></div></div></div>';"common-page"==i?$("#js_page_common").removeAttr("class").addClass("margin-top-20 page-"+t).html(a).show():$("#js_page_row").removeAttr("class").addClass("margin-top-20 page-"+t).html(a).show()},complete:function(){App.unblockUI(".page-content")}})}var r=function(){$(".page-breadcrumb").empty(),$(".page-breadcrumb").append('<li><a href="index.html" style="color: #0C95E8;">主页</a></li>'),$(".active.open>a .title").each(function(a,e){i[a]=$(e).html(),$(".page-breadcrumb").append('<li><i class="fa fa-angle-right"></i><span></span></li>'),$(".page-breadcrumb li").eq(a+1).find("span").html($(e).html())})},g=function(){var a=navigator.userAgent.toLowerCase();if(-1<a.indexOf("ipad")||-1<a.indexOf("iphone")||-1<a.indexOf("android")||-1<a.indexOf("Android")||-1<a.indexOf("iPhone")){$("#head-navBtn").find("span").hide(),$("#head-navBtn").find("span").hide(),$(".tourist-wide a").each(function(){var a=$(this).find("i");$(this).html(a)})}else{var e;if(window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e<800){$("#head-navBtn").find("span").hide();$(".tourist-wide a")}else $("#head-navBtn").find("span").show();$(window).resize(function(){$(this).width()<800?($("#head-navBtn").find("span").hide(),$("#head-navBtn").find("span").hide()):$("#head-navBtn").find("span").show()})}},h=function(a){if(0!==$(a+" .slide-toggle").length){$("body").width();var e=$(a+" .left-side").width(),i=($(".page-logo").outerWidth(),$(a+" .slide-toggle").position().left);$(a+" .right-content").css("width","calc(100% - "+(e+10)+"px)"),$(a+" .slide-toggle").click(function(){0<$(this).find(".fa-angle-left").length?($(this).siblings(".left-side").width(0),$(this).css({left:0}),$(this).siblings(".right-content").css("width","100%"),$(this).html('<i class="slide-icon fa fa-angle-right"></i>')):($(this).siblings(".left-side").width(e),$(this).css({left:i}),$(this).siblings(".right-content").css("width","calc(100% - "+(e+10)+"px)"),$(this).html('<i class="slide-icon fa fa-angle-left"></i>'))})}},p=function(a){if(0!==$(a+" .slide-toggle1").length){var e=$(a+" .left-side").width();$(a+" .right-content").css("width","calc(100% - "+(e+10)+"px)");var i=$(a+" .drag_bar").position().left;$(a).on("click",".slide-toggle1",function(){0<$(this).find(".fa-angle-left").length?($(".drag_bar").siblings(".left-side").width(0),$(".drag_bar").css({left:0}),$(".drag_bar").siblings(".right-content").css("width","100%"),$(this).html('<i class="slide-icon fa fa-angle-right"></i>'),$(this).css({left:0})):($(".drag_bar").siblings(".left-side").width(e),$(".drag_bar").css({left:i}),$(this).css("left",i-20),$(".drag_bar").siblings(".right-content").css("width","calc(100% - "+(e+10)+"px)"),$(this).html('<i class="slide-icon fa fa-angle-left"></i>'))})}};$(function(){var a=window.location.hash.substr(1).split("?")[0];e(a),$("body").on("click","[data-toggle=collapse].collapse-control",function(){0<$(this).find(".fa-sort-desc").length?$(this).html('<i class="fa fa-sort-asc"></i><span>'+$.i18n.map.Collapse+"</span>"):$(this).html('<i class="fa fa-sort-desc"></i><span>'+$.i18n.map["Search-More"]+"</span>")}),$("body").on("click","[data-toggle=collapse] span, [data-toggle=collapse] i",function(a){a.stopPropagation(),$(this).parent().click()})})});