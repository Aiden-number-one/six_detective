$.extend({kd:{kdTimeout:null,kdInterval:null,kdLoadImage:function(e,a,s,t){var n=this;this.src=a,this.width=0,this.height=0,this.onLoaded=t,this.loaded=!1,this.image=null,this.load=function(){if(!this.loaded){this.image=new Image,this.image.src=this.src;var t=setInterval(function(){(/msie/.test(navigator.userAgent.toLowerCase())&&28!=n.width&&30!=n.height&&0!=n.width&&0!=n.height||!/msie/.test(navigator.userAgent.toLowerCase())&&0!=n.width&&0!=n.height)&&(clearTimeout(i),clearInterval(t),n.loaded=!0,e.attr("src",a),"function"==typeof n.onLoaded&&n.onLoaded(a)),n.width=n.image.width,n.height=n.image.height},100),i=setTimeout(function(){clearInterval(t),e.attr("src",s),"function"==typeof n.onLoaded&&n.onLoaded(s)},5e3)}}},kdValidateNull:function(t,i){if(t){var e=$("#"+t);if(0<e.size()&&""==e.eq(0).val().replace(/^ +| +$/g,""))return $.kd.kdMsg(i,"error"),!0}},kdEllipsis:function(t){t.each(function(t){var a=/(\s)*([a-zA-Z0-9]+|\W)(\.\.\.)?$/,s=$("p",$(this)).eq(0),i=s.text(),n=$(this).height();!function t(i){var e=i.substr(0,parseInt(i.length/2));if(s.text(e.replace(a,"...")),s.outerHeight()>n)t(e);else for(s.text(i);s.outerHeight()>n;)s.text(s.text().replace(a,"..."))}(i)})},kdPager:{pager:"page-area",currentPage:1,totalPage:1,totalRecords:0,isGoPage:!0,isChangeSize:!0,isShowTotalPage:!0,isShowTotalRecords:!0,prefix:"",suffix:"",tagurl:"",getLink:function(t){var i="";return("function"==typeof this.prefix?this.prefix(t):this.prefix)+((i="function"==typeof this.suffix?this.suffix(t):this.suffix)?"?"+i:"")},inpage:function(){$("#btn_go_input").attr("hideFocus",!0),$("#go_page_wrap").css("border-color","#F50")},outpage:function(){},gopage:function(t,i,e){var a=t.parentNode.children.btn_go_input.value;if(isNaN(a))t.parentNode.children.btn_go_input.value="1";else{var s=parseInt(a);s<1||i<s?t.parentNode.children.btn_go_input.value="1":isNaN(e)?window.location.href=e+s:window.location.href=this.getLink(s)}},init:function(t){return this.currentPage=isNaN(t.currentPage)?1:parseInt(t.currentPage),this.totalPage=isNaN(t.totalPage)?1:parseInt(t.totalPage),this.totalRecords=isNaN(t.totalRecords)?0:parseInt(t.totalRecords),t.pager&&(this.pager=t.pager),t.isShowTotalPage&&(this.isShowTotalPage=t.isShowTotalPage),t.isShowTotalRecords&&(this.isShowTotalRecords=t.isShowTotalRecords),void 0!==t.isGoPage&&(this.isGoPage=t.isGoPage),void 0!==t.isChangeSize&&(this.isChangeSize=t.isChangeSize),this.prefix=t.prefix||"",this.suffix=t.suffix||"",this.tagurl=t.tagurl||"",this.currentPage<1&&(this.currentPage=1),this.totalPage=this.totalPage<=1?1:this.totalPage,this.currentPage>this.totalPage&&(this.currentPage=this.totalPage),this.prv=this.currentPage<=2?1:this.currentPage-1,this.next=this.currentPage>=this.totalPage-1?this.totalPage:this.currentPage+1,this.hasPrv=1<this.currentPage,this.hasNext=this.currentPage<this.totalPage,this.inited=!0,$.kd.kdPager.generPageHtml(),this},checkKey:function(t){return 13==t.keyCode?($.kd.kdPager.gopage(),!0):!(t.keyCode<48||57<t.keyCode)&&void 0},generPageHtml:function(){if(this.inited){var t=[],i=[];this.hasPrv?t.push("<li class='prev'><a href='",this.getLink(this.prv),"' title='上一页'><i class='fa fa-angle-left'></i></a></li>"):t.push("<li class='disabled prev'><span><i class='fa fa-angle-left'></i></span></li>"),this.hasNext?i.push("<li class='next'><a href='",this.getLink(this.next),"' title='下一页'><i class='fa fa-angle-right'></i></a></li>"):i.push("<li class='next disabled'><span><i class='fa fa-angle-right'></i></span></li>");var e=[],a="<li><span>...</span></li>",s=[];(this.isShowTotalPage||this.isShowTotalRecords)&&(s.push("<span class='normalsize'>"+$.i18n.map.total),this.isShowTotalPage&&(s.push(this.totalPage,$.i18n.map.Page),this.isShowTotalRecords&&s.push("&nbsp;/&nbsp;")),this.isShowTotalRecords&&s.push(this.totalRecords,$.i18n.map["records-in-total"]),s.push("</span>"));var n=[];if(this.isGoPage&&n.push("<label class='inline-block' style='vertical-align: top;line-height: 50px;margin: 0 10px;'> "+$.i18n.map["Jump-to"]+" <input name='pager_number' value="+this.currentPage+" type='text' style='height: 26px;width: 45px;text-align: center;'> "+$.i18n.map.Page+" </label><button name='pager_number_btn' class='btn green' style='vertical-align: top;margin-top: 10px;'>"+$.i18n.map.CONFIRM+"</button></div>"),this.totalPage<=8)for(var o=1;o<=this.totalPage;o++)this.currentPage==o?e.push("<li class='active'><span>",o,"</span></li>"):e.push("<li><a href='",this.getLink(o),"' title='第",o,"页'>",o,"</a></li>");else if(this.currentPage<=5){for(o=1;o<=7;o++)this.currentPage==o?e.push("<li class='active'><span>",o,"</span></li>"):e.push("<li><a href='",this.getLink(o),"' title='第",o,"页'>",o,"</a></li>");e.push(a),e.push("<li><a href='",this.getLink(this.totalPage),"' title='第",this.totalPage,"页'>",this.totalPage,"</a></li>")}else{e.push("<li><a href='",this.getLink(1),"' title='第1页'>1</a></li>"),e.push(a);var l=this.currentPage-2,h=this.currentPage+2;h>this.totalPage?(l=(h=this.totalPage)-4,this.currentPage-l<2&&(l-=1)):h+1==this.totalPage&&(h=this.totalPage);for(o=l;o<=h;o++)this.currentPage==o?e.push("<li class='active'><span>",o,"</span></li>"):e.push("<li><a href='",this.getLink(o),"' title='第",o,"页'>",o,"</a></li>");h!=this.totalPage&&(e.push(a),e.push("<li><a href='",this.getLink(this.totalPage),"' title='第",this.totalPage,"页'>",this.totalPage,"</a></li>"))}this.isChangeSize?$("#"+this.pager).html("<div class='col-md-4 col-sm-12' style='padding-top:8px;'><label style='padding-left:0px'>"+$.i18n.map["records-per-page"]+"<select name='pager_size' style='margin-right: 5px;height: 26px;margin-top: 5px;width: 49px;'><option value='10'>10</option><option value='20'>20</option><option value='50'>50</option><option value='100'>100</option><option value='200'>200</option></select></label>"+s.join("")+"</div><div class='col-md-8 col-sm-12 text-right'><ul class='pagination pagination-sm'>"+t.join("")+e.join("")+i.join("")+"</ul>"+n.join("")):$("#"+this.pager).html("<div class='col-md-4 col-sm-12' style='padding-top:8px;'>"+s.join("")+n.join("")+"</div><div class='col-md-8 col-sm-12 text-right'><ul class='pagination'>"+t.join("")+e.join("")+i.join("")+"</ul></div>")}}},showLoading:function(t,i){t.after('<span id="kd-ui-loading" class="kdValidform_loading">'+(i||"Processing...")+'<span style="min-width: 15px"></span></span>'),$.kd.kdInterval=setInterval(function(){$("#kd-ui-loading>span").text().length<4?$("#kd-ui-loading>span").append("."):$("#kd-ui-loading>span").text("")},500)},closeLoading:function(){clearInterval($.kd.kdInterval),$("#kd-ui-loading").remove(),$("#iframepage").contents().find("#kd-ui-loading").remove()},tableShowLoading:function(t){$(t).each(function(){var t='<tr><td colspan="'+$(this).parents("table").find("thead th").size()+'"><div class="kd-loading"><div class="kd-loading-center"><div class="kd-loading-center-absolute"><div class="kd-object kd-object_one" ></div><div class="kd-object kd-object_two" ></div><div class="kd-object kd-object_three"></div></div></div></div></td></tr>';$(this).html(t)})}}});