!function(M){jQuery.fn.extend({slimScroll:function(C){var H=M.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px",animate:!0},C);return this.each(function(){function e(e){if(a){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;M(i).closest("."+H.wrapperClass).is(b.parent())&&o(t,!0),e.preventDefault&&!v&&e.preventDefault(),v||(e.returnValue=!1)}}function o(e,t,i){v=!1;var o=e,a=b.outerHeight()-E.outerHeight();if(t&&(o=parseInt(E.css("top"))+e*parseInt(H.wheelStep)/100*E.outerHeight(),o=Math.min(Math.max(o,0),a),o=0<e?Math.ceil(o):Math.floor(o),E.css({top:o+"px"})),o=(d=parseInt(E.css("top"))/(b.outerHeight()-E.outerHeight()))*(b[0].scrollHeight-b.outerHeight()),i){var r=(o=e)/b[0].scrollHeight*b.outerHeight();r=Math.min(Math.max(r,0),a),E.css({top:r+"px"})}"scrollTo"in H&&H.animate?b.animate({scrollTop:o}):b.scrollTop(o),b.trigger("slimscrolling",~~o),s(),n()}function i(){h=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),f),E.css({height:h+"px"});var e=h==b.outerHeight()?"none":"block";E.css({display:e})}function s(){if(i(),clearTimeout(c),d==~~d){if(v=H.allowPageScroll,p!=d){var e=0==~~d?"top":"bottom";b.trigger("slimscroll",e)}}else v=!1;return p=d,h>=b.outerHeight()?void(v=!0):(E.stop(!0,!0).fadeIn("fast"),void(H.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function n(){H.alwaysVisible||(c=setTimeout(function(){H.disableFadeOut&&a||r||l||(E.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var a,r,l,c,u,h,d,p,g="<div></div>",f=30,v=!1,b=M(this);if("ontouchstart"in window&&window.navigator.msPointerEnabled&&b.css("-ms-touch-action","none"),b.parent().hasClass(H.wrapperClass)){var w=b.scrollTop();if(E=b.parent().find("."+H.barClass),S=b.parent().find("."+H.railClass),i(),M.isPlainObject(C)){if("height"in C&&"auto"==C.height){b.parent().css("height","auto"),b.css("height","auto");var m=b.parent().parent().height();b.parent().css("height",m),b.css("height",m)}if("scrollTo"in C)w=parseInt(H.scrollTo);else if("scrollBy"in C)w+=parseInt(H.scrollBy);else if("destroy"in C)return E.remove(),S.remove(),void b.unwrap();o(w,!1,!0)}}else{H.height="auto"==C.height?b.parent().height():C.height;var y=M(g).addClass(H.wrapperClass).css({position:"relative",overflow:"hidden",width:H.width,height:H.height});b.css({overflow:"hidden",width:H.width,height:H.height});var S=M(g).addClass(H.railClass).css({width:H.size,height:"100%",position:"absolute",top:0,display:H.alwaysVisible&&H.railVisible?"block":"none","border-radius":H.railBorderRadius,background:H.railColor,opacity:H.railOpacity,zIndex:90}),E=M(g).addClass(H.barClass).css({background:H.color,width:H.size,position:"absolute",top:0,opacity:H.opacity,display:H.alwaysVisible?"block":"none","border-radius":H.borderRadius,BorderRadius:H.borderRadius,MozBorderRadius:H.borderRadius,WebkitBorderRadius:H.borderRadius,zIndex:99}),x="right"==H.position?{right:H.distance}:{left:H.distance};S.css(x),E.css(x),b.wrap(y),b.parent().append(E),b.parent().append(S),H.railDraggable&&E.bind("mousedown",function(e){var i=M(document);return l=!0,t=parseFloat(E.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,E.css("top",currTop),o(0,E.position().top,!1)}),i.bind("mouseup.slimscroll",function(){l=!1,n(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),"ontouchstart"in window&&window.navigator.msPointerEnabled&&(b.bind("MSPointerDown",function(e){u=e.originalEvent.pageY}),b.bind("MSPointerMove",function(e){e.originalEvent.preventDefault(),o((u-e.originalEvent.pageY)/H.touchScrollStep,!0),u=e.originalEvent.pageY})),S.hover(function(){s()},function(){n()}),E.hover(function(){r=!0},function(){r=!1}),b.hover(function(){a=!0,s(),n()},function(){a=!1,n()}),b.bind("touchstart",function(e){e.originalEvent.touches.length&&(u=e.originalEvent.touches[0].pageY)}),b.bind("touchmove",function(e){v||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(o((u-e.originalEvent.touches[0].pageY)/H.touchScrollStep,!0),u=e.originalEvent.touches[0].pageY)}),i(),"bottom"===H.start?(E.css({top:b.outerHeight()-E.outerHeight()}),o(0,!0)):"top"!==H.start&&(o(M(H.start).position().top,null,!0),H.alwaysVisible||E.hide()),function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",e,!1),this.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);