!function($){jQuery.fn.extend({slimScroll:function(C){var H=$.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px",animate:!0},C);return this.each(function(){var o,e,a,i,r,s,n,l,c="<div></div>",u=30,h=!1,d=$(this);if("ontouchstart"in window&&window.navigator.msPointerEnabled&&d.css("-ms-touch-action","none"),d.parent().hasClass(H.wrapperClass)){var p=d.scrollTop();if(b=d.parent().find("."+H.barClass),v=d.parent().find("."+H.railClass),S(),$.isPlainObject(C)){if("height"in C&&"auto"==C.height){d.parent().css("height","auto"),d.css("height","auto");var g=d.parent().parent().height();d.parent().css("height",g),d.css("height",g)}if("scrollTo"in C)p=parseInt(H.scrollTo);else if("scrollBy"in C)p+=parseInt(H.scrollBy);else if("destroy"in C)return b.remove(),v.remove(),void d.unwrap();y(p,!1,!0)}}else{H.height="auto"==C.height?d.parent().height():C.height;var f=$(c).addClass(H.wrapperClass).css({position:"relative",overflow:"hidden",width:H.width,height:H.height});d.css({overflow:"hidden",width:H.width,height:H.height});var v=$(c).addClass(H.railClass).css({width:H.size,height:"100%",position:"absolute",top:0,display:H.alwaysVisible&&H.railVisible?"block":"none","border-radius":H.railBorderRadius,background:H.railColor,opacity:H.railOpacity,zIndex:90}),b=$(c).addClass(H.barClass).css({background:H.color,width:H.size,position:"absolute",top:0,opacity:H.opacity,display:H.alwaysVisible?"block":"none","border-radius":H.borderRadius,BorderRadius:H.borderRadius,MozBorderRadius:H.borderRadius,WebkitBorderRadius:H.borderRadius,zIndex:99}),w="right"==H.position?{right:H.distance}:{left:H.distance};v.css(w),b.css(w),d.wrap(f),d.parent().append(b),d.parent().append(v),H.railDraggable&&b.bind("mousedown",function(e){var i=$(document);return a=!0,t=parseFloat(b.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,b.css("top",currTop),y(0,b.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){a=!1,x(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),"ontouchstart"in window&&window.navigator.msPointerEnabled&&(d.bind("MSPointerDown",function(e,t){r=e.originalEvent.pageY}),d.bind("MSPointerMove",function(e){e.originalEvent.preventDefault(),y((r-e.originalEvent.pageY)/H.touchScrollStep,!0),r=e.originalEvent.pageY})),v.hover(function(){E()},function(){x()}),b.hover(function(){e=!0},function(){e=!1}),d.hover(function(){o=!0,E(),x()},function(){o=!1,x()}),d.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(r=e.originalEvent.touches[0].pageY)}),d.bind("touchmove",function(e){h||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(y((r-e.originalEvent.touches[0].pageY)/H.touchScrollStep,!0),r=e.originalEvent.touches[0].pageY)}),S(),"bottom"===H.start?(b.css({top:d.outerHeight()-b.outerHeight()}),y(0,!0)):"top"!==H.start&&(y($(H.start).position().top,null,!0),H.alwaysVisible||b.hide()),function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",m,!1),this.addEventListener("mousewheel",m,!1)):document.attachEvent("onmousewheel",m)}()}function m(e){if(o){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;$(i).closest("."+H.wrapperClass).is(d.parent())&&y(t,!0),e.preventDefault&&!h&&e.preventDefault(),h||(e.returnValue=!1)}}function y(e,t,i){h=!1;var o=e,a=d.outerHeight()-b.outerHeight();if(t&&(o=parseInt(b.css("top"))+e*parseInt(H.wheelStep)/100*b.outerHeight(),o=Math.min(Math.max(o,0),a),o=0<e?Math.ceil(o):Math.floor(o),b.css({top:o+"px"})),o=(n=parseInt(b.css("top"))/(d.outerHeight()-b.outerHeight()))*(d[0].scrollHeight-d.outerHeight()),i){var r=(o=e)/d[0].scrollHeight*d.outerHeight();r=Math.min(Math.max(r,0),a),b.css({top:r+"px"})}"scrollTo"in H&&H.animate?d.animate({scrollTop:o}):d.scrollTop(o),d.trigger("slimscrolling",~~o),E(),x()}function S(){s=Math.max(d.outerHeight()/d[0].scrollHeight*d.outerHeight(),u),b.css({height:s+"px"});var e=s==d.outerHeight()?"none":"block";b.css({display:e})}function E(){if(S(),clearTimeout(i),n==~~n){if(h=H.allowPageScroll,l!=n){var e=0==~~n?"top":"bottom";d.trigger("slimscroll",e)}}else h=!1;l=n,s>=d.outerHeight()?h=!0:(b.stop(!0,!0).fadeIn("fast"),H.railVisible&&v.stop(!0,!0).fadeIn("fast"))}function x(){H.alwaysVisible||(i=setTimeout(function(){H.disableFadeOut&&o||e||a||(b.fadeOut("slow"),v.fadeOut("slow"))},1e3))}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);