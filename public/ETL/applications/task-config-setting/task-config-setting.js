var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e};define(function(require,exports,module){var y=require("./task-config-settingShow"),s=location.hash.split("?")[0].replace("#",".page-"),e={load:function(){y._load(),y.sftpSecretword="";var e=document.getElementById("J_drag_bar1"),t=document.getElementById("J_drag_bar1");startDrag(e,t,".left-side-config",".right-content-config",function(){})}};$(function(){var b=new App.handleParams("#J_store_params");y.haddleParams=b,$("body").on("click",s+" #J_foldname_tree .jstree-ocl",function(){App.treeEllipsis("#J_foldname_tree")}),$("body").on("click",s+" #J_foldname_tree .jstree-anchor",function(){y.getTaskList()}),$("body").on("click",s+" #J_task_search",function(){y.getTaskList()}),$("body").on("change",s+" [name=userPassword]",function(){$(this).attr("changed","changed")}),$("body").on("click",s+" .J_save",function(){var e=$(this).data("type"),t=$(this).data("tasktype"),a=$(this).data("formid"),o=$(this).data("modalid");if($("#"+a).valid()){var i=App.getFormParams(a);if(i.taskType=t,i.creator="admin","J_modal_TE"===o){if(!$("#J_select2_multi_tab_1_1").val())return toastr.info("Please select source table."),!1;if(!$("#J_select2_multi_tab_1_3").val())return toastr.info("Please select target table."),!1;i.transScript=$("#J_cm_TE").val(),i.createTableScript=$("#J_cm_TE_2").val(),i.sourceTables=$("#J_select2_multi_tab_1_1").select2("data")[0].text.replace(/\(.+\)/g,""),i.targetTable=$("#J_select2_multi_tab_1_3").select2("data")[0].text.replace(/\(.+\)/g,"");var l=$("#J_select2_multi_tab_1_3").data("origin"),n=!1;if(0<l.length){var r=!0,s=!1,d=void 0;try{for(var c,_=l[Symbol.iterator]();!(r=(c=_.next()).done);r=!0){var p=c.value.text;i.targetTable===p&&(n=!0)}}catch(e){s=!0,d=e}finally{try{!r&&_.return&&_.return()}finally{if(s)throw d}}}if(i.mappingInfo=y.haddleDataField.getData(),0===JSON.parse(i.mappingInfo).mappingColumn.length&&n)return toastr.info("Mapping field is missing."),!1}else if("J_modal_TP"===o){var f=!0;if(b.getData(function(e){e||(toastr.info("params is missing."),f=!1);var t=App.getFormParamsFakeName("#J_success_condition"),a={returnmessage:{rvariable:$("[fakename=rvariable]").val()},parameters:e,successcondition:t};i.taskParameters=JSON.stringify(a)}),!f)return!1}else if("J_modal_TM"===o)$("[name=userPassword]").attr("changed")&&(i.userPassword=$.des.getDes(i.userPassword),$("[name=userPassword]").removeAttr("changed"));else if("J_modal_TI"===o){if("0"===$("#"+o+" [name=importType]:checked").val()&&""==$("#"+o+" .fileinput [name=fileUrl]").val())return void toastr.info("Please upload a file.");i.fileUrl=$("[data-importtype="+i.importType+"] [name=fileUrl]").val(),i.fileType=$("[data-importtype="+i.importType+"] [name=fileType]").val(),i.fileName=$("[data-importtype="+i.importType+"] [name=fileName]").val(),"0"===i.importType&&-1===i.fileUrl.indexOf(".")&&(i.fileUrl=i.fileUrl),"2"===i.importType&&("add"===e?i.sftpSecretword=$.des.getDes(i.sftpSecretword):y.sftpSecretword&&y.sftpSecretword!==i.sftpSecretword&&(i.sftpSecretword=$.des.getDes(i.sftpSecretword))),i.targetTable=$("#J_select2_multi_tab_1_9").select2("data")[0].text.replace(/\(.+\)/g,""),i.mappingInfo=y.haddleDataField_2.getData()}else if("J_modal_DQ"===o){var u=$("#J_select2_multi_tab_11_1").select2("val"),m=$("#J_select2_multi_tab_11_1").data("obj"),h=u.map(function(e,t){var a=!0,o=!1,i=void 0;try{for(var l,n=m[Symbol.iterator]();!(a=(l=n.next()).done);a=!0){var r=l.value;if(r.ruleId===e)return r}}catch(e){o=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw i}}});i.applyParam=JSON.stringify(h)}else"J_modal_DR"===o?i.sourceUrl&&"0"===i.sourceUrl&&(i.sourceUrl=$("[name=a1006FilesPath]").val()):"J_modal_TFP"===o&&(i.dbTable=$("#J_select2_multi_tab_13_1").select2("data")[0].text.replace(/\(.+\)/g,""));App.blockUI({boxed:!0,message:"Processing..."}),y.setTaskInfo(i,e,function(e){$("#J_foldname_tree [folderid="+i.folderId+"]>.jstree-anchor").click(),$("#"+o).modal("hide")})}else toastr.info("Please check the invalid fields")}),$("body").on("click",s+" #J_task_option_1 li a",function(){var e=$(this).data("id"),t=$(this).attr("data-target"),a=$("#J_foldname_tree [aria-selected=true]").attr("folderid");$(t+" .J_save").data("tasktype",e).data("type","add"),y.clearData(),"DQ"===e?y.getRuleFolder():y.getDataSourceList(),$(t+" [type=jstree]").jstree().open_all(),$(t+" [type=jstree] [folderid="+a+"]>.jstree-anchor").click()}),$("body").on("click",s+" #J_task_edit",function(){var e=$("#J_task_table tbody input:checked"),t=e.data("tasktype"),a=e.data("taskid");1===e.length?(y.clearData(),"DQ"!==t?y.getDataSourceList(function(){y.getTaskInfo({taskId:a,taskType:t})}):y.getRuleFolder(function(){y.getTaskInfo({taskId:a,taskType:t})})):toastr.info("Please select one job only")}),$("body").on("click",s+" #J_task_move",function(){var e=$("#J_task_table tbody input:checked"),t=e.eq(0).data("folderid"),a=[];0!==e.length?($.each(e,function(){var e=$(this).data("taskid"),t=$(this).data("tasktype");a.push({taskId:e,taskType:t})}),$(s+" #J_task_move_modal [data-type=confirm]").data("arr",a),$("#J_task_move_modal [type=jstree]").jstree(!0).open_all(),$("#J_task_move_modal [type=jstree] [folderid="+t+"]>.jstree-anchor").click(),$("#J_task_move_modal").modal("show")):toastr.info("Please select one job at least")}),$("body").on("click",s+" #J_task_move_modal [data-type=confirm]",function(){var a=$("#J_task_move_modal [name=folderId]").val();if(a){var e=$(this).data("arr").map(function(e,t){return _extends(e,{targetFolderId:a})});$("#J_task_move_modal").modal("show"),y.moveTaskInfo({taskInfo:JSON.stringify(e)})}else toastr.info("Please select the target file")}),$("body").on("click",s+" #J_task_del",function(){var e=$("#J_task_table tbody input:checked"),a=[];0!==e.length?($.each(e,function(){var e=$(this).data("taskid"),t=$(this).data("tasktype");a.push({taskId:e,taskType:t})}),bootbox.confirm("Please confirm that you want to delete this task.",function(e){e&&(App.blockUI({boxed:!0,message:"Processing..."}),y.delTaskInfo({taskList:JSON.stringify(a)}))})):toastr.info("Please select one job at least")}),$("body").on("click",s+" #J_copy_task",function(){var e=$("#J_task_table tbody input:checked");if(1===e.length){App.blockUI({boxed:!0,message:"Processing..."});var t=e.data("taskid"),a=e.data("tasktype");y.copyTaskInfo({taskId:t,taskType:a})}else toastr.info("Please select one job only")}),$("body").on("click",s+" #J_check_relate_job",function(){var e=$("#J_task_table tbody input:checked");if(1===e.length){var t=e.data("taskid");y.checkRelateJob({taskId:t}),$("#J_relate_job_modal").modal("show")}else toastr.info("Please select one job only")}),$("body").on("click",s+" #J_relate_job_list a",function(){var e=$(this).data("obj").jobId,t=$(this).data("obj").jobName,a=$(this).data("obj").folderId;e&&window.open("/retl-process/design.html?jobId="+e+"&jobName="+t+"&folderId="+a)}),$("body").on("click",s+" #J_get_sql",function(){if($("#J_select2_multi_tab_1_1").val()){var e=$("#J_select2_multi_tab_1_1").val();y.getSQL({tableId:e})}else toastr.info("Source object is missing.")}),$("body").on("click",s+" #J_preview_sql",function(){var e=$("#J_select2_single_tab_1_1").val(),t=$("#J_cm_TE").val().replace(/[\n]/g," ").replace(/[\t]/g," ");e?t?y.getPreviewSQL({connectionId:e,previewStatement:t,previewNum:"10"}):toastr.info("Source SQL is missing."):toastr.info("Please select source data.")}),$("body").on("click",s+" #J_crate_build_table_sql",function(){if($("#J_select2_single_tab_1_1").val())if($("#J_select2_single_tab_1_3").val())if($("#J_select2_multi_tab_1_1").val())if($("#J_select2_multi_tab_1_3").val()){var e=$("#J_select2_single_tab_1_1").val(),t=$("#J_select2_single_tab_1_3").val(),a=$("#J_select2_multi_tab_1_1").val(),o=$("#J_select2_multi_tab_1_3").select2("data")[0].text,i=$("#J_select2_multi_tab_1_3").data("origin"),l=!0,n=!0,r=!1,s=void 0;try{for(var d,c=i[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){d.value.text===o.replace(/\(.+\)/g,"")&&(l=!1)}}catch(e){r=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw s}}l?y.getBuildTableSQL({sourceConnectionId:e,targetConnectionId:t,targetTableName:o,soureTableId:a}):toastr.info("Generation only allowed when target object is customized")}else toastr.info("Please select target table.");else toastr.info("Please select source table.");else toastr.info("Please selecct target data source.");else toastr.info("Please select source data source.")}),$("body").on("click",s+" #J_get_data_btns [data-type]",function(){if($("#J_select2_multi_tab_1_1").val())if($("#J_select2_multi_tab_1_3").val()){var e=$(this).data("type"),t=$("#J_select2_multi_tab_1_1").val(),a=$("#J_select2_multi_tab_1_3").val();if("refresh"===e)y.getDataField({targetTableId:a,soureTableId:t,searchType:"1",sortType:"1"},e);else if("del"===e)y.haddleDataField.delCheckedRow();else if("get"===e){var o=$(this).data("search-type").toString();y.getDataField({targetTableId:a,soureTableId:t,searchType:o,sortType:"1"},e)}}else toastr.info("Please select target table.");else toastr.info("Please select source table.")}),$("body").on("click",s+" #J_haddle_new_data .close",function(){$("#J_haddle_new_data").css({height:"0",opacity:"0",padding:"0 10px",transition:"0s"}),$(s+" #J_haddle_new_data [type=radio]").prop("checked",!1),jQuery.uniform.update()}),$("body").on("click",s+" #J_haddle_new_data [type=radio]",function(){var e=$(this).val();"0"===e?y.haddleDataField.appendNew():"1"===e?y.haddleDataField.appendAll():"2"===e&&y.haddleDataField.clearAppendAll(),$("#J_haddle_new_data").css({height:"0",opacity:"0",transition:"0s"}),$(s+" #J_haddle_new_data [type=radio]").prop("checked",!1),jQuery.uniform.update()}),$("body").on("change",s+" [name=beforeRule]",function(){"5"==$(this).val()?($(this).parents(".form-group").siblings(".J_show_delete_sql").show(),$(this).parents(".form-group").siblings(".J_show_delete_sql").find("[name=deleteSql]").removeAttr("type"),y.cm_TE_3&&setTimeout(function(){y.cm_TE_3.refresh()},0),y.cm_TI&&setTimeout(function(){y.cm_TI.refresh()},0)):($(this).parents(".form-group").siblings(".J_show_delete_sql").hide(),$(this).parents(".form-group").siblings(".J_show_delete_sql").find("[name=deleteSql]").attr("type","hidden"))}),$("body").on("change",s+" [name=importType]",function(){var e=$(this).val();if($(".fileinput-filename").html(""),$("[data-dismiss=fileinput]").click(),$("[data-importtype="+e+"]").show().find(".form-control:not([ignore])").attr("type","text"),$("[data-importtype="+e+"]").siblings("[data-importtype]").hide().find(".form-control:not([ignore])").attr("type","hidden"),$("[data-filetype-index="+e+"]").change(),"0"===e)$("#J_import_task_separator").css("display","none");else if("1"===e){var t=$("#J_import_path").val().replace($("[data-importtype=1] [name=fileName]").val(),"");$("#J_import_path").val(t);var a=$("[data-importtype=1] [name=fileName]").val().match(/.+\./)[0],o=a.substring(0,a.length-1);$("[data-importtype=1] [name=fileName]").val(o)}else"2"===e&&$("[data-importtype=2] [name=sftpSecretword]").attr("type","password")}),$("body").on("change",s+" select[name=fileType]",function(){var e=$(this).val();"xls"===e||"xlsx"===e||"csv"===e?($("#J_import_txt_start_line_wrap").show().find(".form-control").attr("type","text"),$("[name=startImportLine]").hide().attr("type","hidden")):$("#J_import_txt_start_line_wrap").hide().find(".form-control").attr("type","hidden"),"txt"===e||"dbf"===e||"dat"===e?($("#J_import_task_separator").show().find(".form-control").attr("type","text"),"dbf"===e&&($("#J_import_task_separator [name=taskSeparator]").val("1"),$("#J_import_task_separator").css("display","none"))):$("#J_import_task_separator").hide().find(".form-control").attr("type","hidden")}),$("body").on("change",s+" #J_import_txt_start_line input",function(){var e=$(this).val();"1"===e?$("[name=startImportLine]").hide().attr("type","hidden"):$("[name=startImportLine]").show().attr("type","text").val(e)}),$("body").on("change",s+" #J_TZ_file_range input",function(){"0"===$(this).val()?$("[name=a1005FilesPath]").show().attr("type","text"):$("[name=a1005FilesPath]").hide().attr("type","hidden")}),$("body").on("change",s+" #J_sync_rangge input",function(){"0"===$(this).val()?($("[name=a1006FilesPath]").show().attr("type","text"),$("#modify_file_content").show().find("input").attr("type","text"),$("#tab_12_3 .row > .form-group:nth-child(2)").show().find("input").attr("type","radio")):($("[name=a1006FilesPath]").hide().attr("type","hidden"),$("#modify_file_content").hide().find("input").attr("type","hidden"),$("#tab_12_3 .row > .form-group:nth-child(2)").hide().find("input").attr("type","hidden"))}),$("body").on("change",s+" #J_is_modify_file input",function(){"0"===$(this).val()?($("[name=targetFileName]").hide().attr("type","hidden"),$("[name=sourceFileName]").hide().attr("type","hidden"),$("#modify_file_content").hide()):($("[name=targetFileName]").show().attr("type","text"),$("[name=sourceFileName]").show().attr("type","text"),$("#modify_file_content").show())}),$("body").on("blur",s+" #tab_12_3 input[name=targetFileName]",function(){var a=$(s+" #tab_12_3 input[name=sourceFileName]").val().split(","),o=$(s+" #tab_12_3 input[name=targetFileName]").val().split(","),i=[];o.length===a.length?($.each(o,function(e,t){i.push({newValue:o[e],oldValue:a[e]})}),require.async("./template/modify-filename-list.handlebars",function(e){$("#J_modify_filename").html(e(i))})):(toastr.error("The number of modified files is inconsistent with the number of original files."),$("#J_modify_filename").html(""))}),$("body").on("change","#J_select2_single_tab_1_1",function(e){y.getTableList({connection_id:e.currentTarget.value},"#J_select2_multi_tab_1_1",!1,function(){if(y.sourceTables){var e=$("#J_select2_multi_tab_1_1").data("origin"),t=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var n=i.value,r=n.id;n.text===y.sourceTables&&$("#J_select2_multi_tab_1_1").val(r).change()}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}y.sourceTables=""})}),$("body").on("change","#J_select2_single_tab_1_3",function(e){y.getTableList({connection_id:e.currentTarget.value},"#J_select2_multi_tab_1_3",!0,function(){var e=!1;if(y.targetTable){var t=$("#J_select2_multi_tab_1_3").data("origin"),a=!0,o=!1,i=void 0;try{for(var l,n=t[Symbol.iterator]();!(a=(l=n.next()).done);a=!0){var r=l.value,s=r.id;r.text===y.targetTable&&($("#J_select2_multi_tab_1_3").val(s).change(),e=!0)}}catch(e){o=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw i}}}else $("#J_select2_multi_tab_1_3").change();y.targetTable&&!e&&($("#J_select2_multi_tab_1_3").append('<option value="'+y.targetTable+'" selected>'+y.targetTable+"</option>"),$("#J_select2_multi_tab_1_3").change()),y.targetTable=""})}),$("body").on("change","#J_data_source_select2",function(e){y.getStoredProcedure({connectionId:e.currentTarget.value,objectType:"PROCEDURE"},function(){var e=!0;if(y.procedureName){var t=$("#J_stored_procedure_select2").data("origin"),a=!0,o=!1,i=void 0;try{for(var l,n=t[Symbol.iterator]();!(a=(l=n.next()).done);a=!0){l.value.text===y.procedureName&&($("#J_stored_procedure_select2").val(y.procedureName).change(),e=!1)}}catch(e){o=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw i}}}y.procedureName&&e&&($("#J_stored_procedure_select2").append('<option value="'+y.procedureName+'" selected>'+y.procedureName+"</option>"),$("#J_stored_procedure_select2").change()),y.procedureName=""})}),$("body").on("click","#J_test_store",function(e){var t=$("#J_data_source_select2").val(),a=$("#J_stored_procedure_select2").val(),o=App.getTableParamsFakeName("#J_store_params");t?a?o?(App.blockUI({boxed:!0,message:"Processing..."}),y.testStore({dbConnection:t,procedureName:a,parameters:JSON.stringify(o)})):toastr.info("params is missing."):toastr.info("Please select SP."):toastr.info("Please select data source.")}),$("body").on("change","#J_stored_procedure_select2",function(e){y.getStoredProcedurePreview({dbConnection:$("#J_data_source_select2").val(),procedureName:e.currentTarget.value,procType:"1"},function(e){var t=e.bcjson.items,a="";if(t&&0<t.length){var o=!0,i=!1,l=void 0;try{for(var n,r=t[Symbol.iterator]();!(o=(n=r.next()).done);o=!0){a+=n.value.TEXT}}catch(e){i=!0,l=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw l}}y.cm_TP.setValue(a),$("[name=procLastUpdate]").val(t[0].LASTTIME)}}),y.procedureName||(b.delAllRow(),y.getStoredProcedurePreview({dbConnection:$("#J_data_source_select2").val(),procedureName:e.currentTarget.value,procType:"2"},function(e){var t=e.bcjson.items,a=[];if(t&&0<t.length){var o=!0,i=!1,l=void 0;try{for(var n,r=t[Symbol.iterator]();!(o=(n=r.next()).done);o=!0){var s=n.value,d=s.POSITION,c=s.ARGUMENT_NAME,_=s.IN_OUT,p=s.DATA_TYPE;a.push({no:d,name:c,direction:_,type:p,value:""})}}catch(e){i=!0,l=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw l}}b.setData(a),y.setOptions()}}))}),$("body").on("click",s+" #J_query_datafield",function(){var e=$("#J_modal_TV [name=dbConnection]").val(),t=$("#J_modal_TV [name=variableScript]").val().replace(/[\n]/g," ").replace(/[\t]/g," ");e?t?y.getPreviewSQL({connectionId:e,previewStatement:t,previewNum:"10"}):toastr.info("Source SQL is missing."):toastr.info("Please select source data.")}),$("body").on("change","#J_select2_single_tab_1_9",function(e){y.getTableList({connection_id:e.currentTarget.value},"#J_select2_multi_tab_1_9",!1,function(){if(y.targetTable){var e=$("#J_select2_multi_tab_1_9").data("origin"),t=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var n=i.value,r=n.id;n.text===y.targetTable&&$("#J_select2_multi_tab_1_9").val(r).change()}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}else $("#J_select2_multi_tab_1_9").change();y.targetTable=""})}),$("body").on("change","#J_select2_single_tab_13_1",function(e){y.getTableList({connection_id:e.currentTarget.value},"#J_select2_multi_tab_13_1",!1,function(){if(y.dbTable){var e=$("#J_select2_multi_tab_13_1").data("origin"),t=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var n=i.value,r=n.id;n.text===y.dbTable&&$("#J_select2_multi_tab_13_1").val(r).change()}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}}y.dbTable="",$("[name=columnFileName],[name=columnFileData]").empty().clearInputs()})}),$("body").on("change","#J_select2_multi_tab_13_1",function(e){$("[name=columnFileName],[name=columnFileData]").empty().clearInputs(),y.getDataField_3({table_id:e.currentTarget.value},"[name=columnFileName],[name=columnFileData]",function(){$("[name=columnFileName]").val(y.columnFileName),$("[name=columnFileData]").val(y.columnFileData)})}),$("body").on("change","#J_select2_single_tab_11_1",function(e){y.getRuleList({folderId:e.currentTarget.value,pageNumber:"1",pageSize:"9999"},function(){if(y.applyParam){var e=JSON.parse(y.applyParam).map(function(e,t){return e.ruleId});$("#J_select2_multi_tab_11_1").val(e).change(),y.applyParam=""}})}),$("body").on("select2:open","#J_select2_single_tab_1_1, #J_select2_multi_tab_1_1, #J_select2_multi_tab_11_1, #J_select2_single_tab_1_3, #J_select2_multi_tab_1_3, #J_select2_single_tab_1_9, #J_select2_multi_tab_1_9, #J_select2_single_tab_13_1, #J_select2_multi_tab_13_1, #J_stored_procedure_select2, #J_data_source_select2",function(e){var t=e.currentTarget.dataset.searchplaceholder;$(".select2-search__field").attr("placeholder",t)}),$("body").on("change","#J_store_params [fakename=name], #J_store_params [fakename=direction]",function(){y.setOptions()}),$("body").on("click",s+" #J_modal_TP [name=oparate]",function(){var e=$(this).data("type");"add"===e?b.addRow():"batchAdd"===e?b.batchAddRow():"delAll"===e?(b.delAllRow(),y.setOptions()):"del"===e&&(b.delRow($(this)),y.setOptions())}),$("body").on("change","[name=headFlag]",function(){"N"==$(this).val()?$("#J_header_content").hide().find("[name=headerContent]").attr("type","hidden"):$("#J_header_content").show().find("[name=headerContent]").attr("type","text")}),$("body").on("click",s+" #J_get_data_btns_2 [data-type]",function(){if($("#J_select2_multi_tab_1_9").val()){var e=$(this).data("type"),t=$("#J_select2_multi_tab_1_9").val();"refresh"===e||"get"===e?y.getDataField_2({table_id:t}):"del"===e&&y.haddleDataField_2.delCheckedRow()}else toastr.info("Please select target table.")}),$("body").on("change",s+" [data-type=target] select",function(){var t=$(this).closest("tbody").find("[data-type=target] select").data("v","");t.find("option").removeAttr("disabled"),$.each(t,function(){var e=$(this).val();e&&(t.find("option[value="+e+"]").attr("disabled",""),$(this).data("v",e))})}),$("body").on("blur",s+" [data-type=source] input",function(){var e=$(this).val(),t=$(this).attr("second");if(t||""==t)if(e){if($(this).hide(),""==t){var a="<option value="+e+" second="+e+">"+e+"</option>";return $(this).hide(),$(s+" [data-type=source] select").append(a).show(),void $(this).closest("td").find("select").val(e)}if(0<$(this).closest("td").find("select option[second="+t+"]").length)$(s+" [data-type=source]").find("select option[second="+t+"]").val(e).text(e).attr("second",e),$(this).closest("td").find("select").show();else{var o="<option value="+e+" second="+e+">"+e+"</option>";$(s+" [data-type=source] select").append(o),$(this).closest("td").find("select").val(e),$(this).closest("td").find("select").show()}}else{$(this).hide();var i=$(this).closest("td").find("select").val();$(s+" [data-type=source] select option[value="+i+"]").remove(),$(this).attr("isOptionClick","1"),$(this).closest("td").find("select").show()}else if(e){$(this).hide();var l="<option value="+e+" second="+e+">"+e+"</option>",n='<input class="form-control" type="text" second='+e+">";$(s+" [data-type=source] select").append(l);var r='<select class="form-control input-sm source-add-select">'+$(s+" [data-type=source] select").html()+"</select>";$(this).closest("td").append(r),$(this).closest("td").find("select").val(e),$("body").on("dblclick",s+" .source-add-select",function(){($(this).find("option:selected").attr("second")||$(this).closest("td").find("input").attr("isOptionClick"))&&($(this).closest("td").find("input").attr("isOptionClick")&&$(this).closest("td").find("input").removeAttr("isOptionClick"),$(this).closest("td").find("input").attr("second")?($(this).hide(),$(this).closest("td").find("input").show().val($(this).val()).attr("second",$(this).val())):($(this).closest("td").find("input").remove(),$(this).closest("td").append(n),$(this).closest("td").find("input").show().val($(this).val()).attr("second",$(this).val()),$(this).hide()))})}})}),module.exports=e});