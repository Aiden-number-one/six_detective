define(function(require,exports,module){var t=require("./data-drivenShow");require("plugins/jquery-validation/js/jquery.validate.js"),require("plugins/jquery-validation/js/additional-methods.js");var d={load:function(){t._load();var d=document.getElementById("J_drag_bar6"),e=document.getElementById("J_drag_bar6");startDrag(d,e,".left-side-driven",".right-content-driven",function(){LFWIDTH=$(".left-side").width()})}};$(function(){$("body").on("keydown","#data-driven #J_dd_list_search",function(d){13==d.keyCode&&$("#data-driven #dd-search").click()}),$("body").on("click","#data-driven #dd-search",function(){var d=$(this).siblings("input").val();t.get_Driven_List(d)}),$("body").on("click","#data-driven #dd-clear-button",function(){$("#driven_Data_View_Detail").html('<tr><td colspan="4" class="t-c">暂无</td></tr>'),App.clearForm("driven-datatable-view")}),$("body").on("click","#dd-driven-add-modal",function(){t.fileNameAdd="",t.typeAdd="",t.currentAddressAdd="";var d=$("#dd-inputfile-add").parent("div");$("#dd-inputfile-add").remove(),d.append('<input id="dd-inputfile-add" type="file" name="file">'),t.setAddressList(t.currentAddressAdd,"addtrue"),$("#data-driven-add").modal("show")}),$("body").on("click","#data-driven-menu li",function(){App.clearForm("datatable_update"),t.fileName="",t.type="",t.currentAddress="",t.driverId="";var d=$("#dd-inputfile").parent("div");$("#dd-inputfile").remove(),d.append('<input id="dd-inputfile" type="file" name="file">');var e=$(this),a=e.find("strong").html();$(".r-container-header").find("h5").html(a),$(".r-container-header img").attr("src",e.find("img").attr("src")),$(this).addClass("click-add-background"),$(this).siblings().removeClass("click-add-background"),$.each(t.list,function(d,e){a==e.driverName&&($("#resourceType").val(e.databasetype),$("#driver_category").val(e.driver_category),$("#driven-datatable-view input[name=driver_name]").val(e.driverName),$("#driven-datatable-view input[name=class_name]").val(e.className),$("#driven-datatable-view input[name=url_info]").val(e.urlInfo),$("#driven-datatable-view input[name=db_port]").val(e.dbPort),$("#driven-datatable-view input[name=maxtime]").val(e.maxtime),t.driverId=e.driverId,t.currentAddress=e.address,t.setAddressList(e.address))})}),$("body").on("click","#driven_add_submit",function(){if($("#driven-Add-Form").validate().form()){if(!t.currentAddressAdd)return void toastr.info("请添加jar包");$("#data-driven-add").modal("hide");var d=App.getFormParams("driven-Add-Form");d.address=t.currentAddressAdd,App.blockUI({boxed:!0,message:"新增中..."}),t.addDrivenlist(d)}}),$("body").on("click","#data-driven-menu  li span",function(){var e={opType:"del"};e.driver_id=$(this).attr("driver_id"),bootbox.confirm("确定删除吗?",function(d){d&&(App.blockUI({boxed:!0,message:"删除中..."}),t.deleteDriven(e))})}),$("body").on("click","#dd-jaradd-btn-add",function(){$("#data-driven-add-file-add").modal("show")}),$("body").on("change","#dd-inputfile-add",function(d){t.fileNameAdd=d.currentTarget.files[0].name,t.typeAdd=t.fileNameAdd.substring(t.fileNameAdd.length-3,t.fileNameAdd.length)}),$("body").on("click","#dd-upfilejar-btn-add",function(){return t.typeAdd?"jar"!==t.typeAdd?(toastr.info("文件类型不正确,请上传jar包类型!"),!1):(App.blockUI({boxed:!0,message:"上传中..."}),void t.upLoad(t.fileNameAdd,"addtrue")):(toastr.info("上传jar包不能为空!"),!1)}),$("body").on("click","#data_Table02_Detail .delete-jar",function(){var i=$(this);bootbox.confirm("确定删除吗？",function(d){if(d){var e=i.parent("td").data("index"),a=t.currentAddressAdd.split(",");a.splice(e-1,1),t.currentAddressAdd=a.join(","),t.setAddressList(t.currentAddressAdd,"addtrue")}})}),$("body").on("click","#dd-jaradd-btn",function(){$("#data-driven-add-file").modal("show")}),$("body").on("change","#dd-inputfile",function(d){t.fileName=d.currentTarget.files[0].name,t.type=t.fileName.substring(t.fileName.length-3,t.fileName.length)}),$("body").on("click","#dd-upfilejar-btn",function(){return t.type?"jar"!==t.type?(toastr.info("文件类型不正确,请上传jar包类型!"),!1):(App.blockUI({boxed:!0,message:"上传中..."}),void t.upLoad(t.fileName)):(toastr.info("上传jar包不能为空!"),!1)}),$("body").on("click","#driven_Data_View_Detail .delete-jar",function(){var i=$(this);bootbox.confirm("确定删除吗？",function(d){if(d){var e=i.closest("td").data("index"),a=t.currentAddress.split(",");a.splice(e-1,1),t.currentAddress=a.join(","),t.setAddressList(t.currentAddress)}})}),$("body").on("click","#dd-update-button",function(d){if($("#driven-datatable-view").validate().form()){var e=App.getFormParams("datatable_update");if(e.address=t.currentAddress,!e.address)return void toastr.info("请添加jAR包");e.driver_id=t.driverId,t.updateDriven(e)}})}),module.exports=d});