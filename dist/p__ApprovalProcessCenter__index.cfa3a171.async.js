(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"2Cab":function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=r(a("qIgq")),u=l(a("q1tI")),d=a("Hx5s"),o=r(a("c2Ae")),c=r(a("ifr9")),i=r(a("mR9m"));function s(){var e=(0,u.useState)(null),t=(0,n.default)(e,2),a=t[0],l=t[1],r=(0,u.useState)("all"),s=(0,n.default)(r,2),f=s[0],p=s[1];return u.default.createElement(d.PageHeaderWrapper,null,u.default.createElement("div",{className:i.default["list-container"]},u.default.createElement(c.default,{getTask:function(e){return l(e)},setCurrentTaskType:function(e){return p(e)}}),a&&u.default.createElement(o.default,{task:a,currentTaskType:f})))}},"9ICW":function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("qIgq"));a("7Kak");var u=r(a("9yH6"));a("y8nQ");var d=r(a("Vl3Y"));a("OaEy");var o=r(a("2fM7"));a("5NDa");var c=r(a("5rEg")),i=l(a("q1tI")),s=r(a("wd/R")),f=c.default.TextArea,p=o.default.Option;function m(e){var t=e.detailData,a=e.getFieldDecorator,l=e.isShowForm;return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default.Item,{label:"Market",labelCol:{span:9},wrapperCol:{span:12}},a("market",{initialValue:t.market})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"EP Code",labelCol:{span:9},wrapperCol:{span:12}},a("epCode",{initialValue:t.epCode})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"EP Name",labelCol:{span:9},wrapperCol:{span:12}},a("epName",{rules:[{required:!!l,message:"Please input epName!"}],initialValue:t.epName})(i.default.createElement(c.default,{disabled:!l}))))}function C(e){var t=e.detailData,a=e.getFieldDecorator,l=e.setRadioCurrentValue,r=e.radioPdValue,n=e.setRadioPdValue,s=e.isShowForm;return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default.Item,{label:"Market",labelCol:{span:9},wrapperCol:{span:12}},a("market",{initialValue:t.market})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"HKEX DCASS Code",labelCol:{span:9},wrapperCol:{span:12}},a("HKEX DCASS Code",{initialValue:t.hkexDcassCode})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Is CA Code ?",labelCol:{span:9},wrapperCol:{span:12}},a("isCaCode",{rules:[{required:!!s}],initialValue:t.isCaCode})(s?i.default.createElement(u.default.Group,{onChange:function(e){return l(e.target.value)}},i.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),i.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Product code",labelCol:{span:9},wrapperCol:{span:12}},a("Product code",{initialValue:t.productCode})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Product Description",labelCol:{span:9},wrapperCol:{span:12}},a("productDesc",{rules:[{required:!!s,message:"Please input Product Description!"}],initialValue:t.productDesc})(i.default.createElement(c.default,{disabled:!s}))),i.default.createElement(d.default.Item,{label:"Product Category",labelCol:{span:9},wrapperCol:{span:12}},a("productCategory",{rules:[{required:!!s,message:"Please select your Product Category!"}],initialValue:t.productCategory})(s?i.default.createElement(o.default,null,t.productCategoryInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Futures or Option",labelCol:{span:9},wrapperCol:{span:12}},a("contractNature",{rules:[{required:!!s,message:"Please select Futures or Option!"}],initialValue:t.contractNature})(s?i.default.createElement(o.default,null,t.contractNatureInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Product Group",labelCol:{span:9},wrapperCol:{span:12}},a("productGroup",{rules:[{required:!!s,message:"Please select Product Group!"}],initialValue:t.productGroup})(s?i.default.createElement(o.default,null,t.productGroupInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Template Code(Last Trade Day)",labelCol:{span:9},wrapperCol:{span:12}},a("ltdTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Last Trade Day)"}],initialValue:t.ltdTmplCode})(s?i.default.createElement(o.default,null,t.ltdTmplCodeInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Template Code(Position Limit)",labelCol:{span:9},wrapperCol:{span:12}},a("plTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Position Limit)!"}],initialValue:t.plTmplCode})(s?i.default.createElement(o.default,null,t.plTmplCodeInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Template Code(Reportable Limit)",labelCol:{span:9},wrapperCol:{span:12}},a("rlTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Reportable Limit)!"}],initialValue:t.rlTmplCode})(s?i.default.createElement(o.default,null,t.rlTmplCodeInit.split(",").map(function(e){return i.default.createElement(p,{value:e,key:e},e)})):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Is Calculate PD ?",labelCol:{span:9},wrapperCol:{span:12}},a("isCalculatePd",{rules:[{required:!!s}],initialValue:t.isCalculatePd})(s?i.default.createElement(u.default.Group,{onChange:function(e){return n(e.target.value)},disabled:!s},i.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),i.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):i.default.createElement(c.default,{disabled:!0}))),"Yes"===r?i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default.Item,{label:"Size Factor for Calculate PD",labelCol:{span:9},wrapperCol:{span:12}},a("sizeFactor",{rules:[{required:!!s,message:"Please input Size Factor for Calculate PD!"}],initialValue:t.sizeFactor})(i.default.createElement(c.default,{type:"number",disabled:!s}))),i.default.createElement(d.default.Item,{label:"Weighting Factor for Calculate PD",labelCol:{span:9},wrapperCol:{span:12}},a("weightFactor",{rules:[{required:!!s,message:"Please input Weighting Factor for Calculate PD!"}],initialValue:t.weightFactor})(i.default.createElement(c.default,{type:"number",disabled:!s})))):null)}function g(e){var t=e.detailData,a=e.getFieldDecorator,l=e.setRadioCurrentValue,r=e.isShowForm;return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default.Item,{label:"Market",labelCol:{span:9},wrapperCol:{span:12}},a("market",{initialValue:t.market})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"HKEX DCASS Code",labelCol:{span:9},wrapperCol:{span:12}},a("hkexDcassCode",{initialValue:t.hkexDcassCode})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Is CA Code ?",labelCol:{span:9},wrapperCol:{span:12}},a("isCaCode",{initialValue:t.isCaCode})(r?i.default.createElement(u.default.Group,{onChange:function(e){return l(e.target.value)}},i.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),i.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Original Product code",labelCol:{span:9},wrapperCol:{span:12}},a("originalProductCode",{initialValue:t.originalProductCode})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Effective Date",labelCol:{span:9},wrapperCol:{span:12}},a("effectiveDate",{initialValue:t.effectiveDate&&(0,s.default)(t.effectiveDate).format("DD-MMM-YYYY HH:mm:ss")})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Expiry Date\xa0",labelCol:{span:9},wrapperCol:{span:12}},a("expiryDate",{initialValue:t.expiryDate&&(0,s.default)(t.expiryDate).format("DD-MMM-YYYY HH:mm:ss")})(i.default.createElement(c.default,{disabled:!0}))),i.default.createElement(d.default.Item,{label:"Remark\xa0",labelCol:{span:9},wrapperCol:{span:12}},a("remark",{rules:[{required:!!r,message:"Please input Remark!"}],initialValue:t.remark})(r?i.default.createElement(f,null):i.default.createElement(c.default,{disabled:!0}))))}function E(e){var t=e.form,a=e.detailItem,l=e.task,r=t.getFieldDecorator,u=(0,i.useState)("No"),o=(0,n.default)(u,2),c=o[0],s=o[1],f=(0,i.useState)("Yes"),p=(0,n.default)(f,2),E=p[0],v=p[1],y=l&&a&&a[0]||{},b=y&&y.alertType,h=y&&y.isStarter,k=y&&y.isEditing;return console.log("alertType----\x3e",b,y,h),(0,i.useEffect)(function(){s(y.isCaCode)},[y.isCaCode]),(0,i.useEffect)(function(){v(y.isCalculatePd)},[y.isCalculatePd]),i.default.createElement(i.default.Fragment,null,y&&i.default.createElement(d.default,null,"301"===b&&i.default.createElement(m,{detailData:y,getFieldDecorator:r,isShowForm:k}),"302"===b&&("No"===c?i.default.createElement(C,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,radioPdValue:E,setRadioPdValue:v,isShowForm:k}):i.default.createElement(g,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,isShowForm:k})),"303"===b&&("Yes"===c?i.default.createElement(g,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,isShowForm:k}):i.default.createElement(C,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,radioPdValue:E,setRadioPdValue:v,isShowForm:k}))))}var v=d.default.create()(E);t.default=v},BCHC:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=C,a("Q9mQ");var r=l(a("diRs"));a("14J3");var n=l(a("BMrR"));a("jCWc");var u=l(a("kPKH"));a("tU7J");var d=l(a("wFql")),o=l(a("q1tI")),c=a("LLXN"),i=l(a("wd/R")),s=l(a("BN5G")),f=d.default.Paragraph,p=d.default.Text;function m(e){var t=e.attachments;return o.default.createElement(r.default,{placement:"bottomRight",title:o.default.createElement(c.FormattedMessage,{id:"alert-center.attachement-list"}),content:o.default.createElement(n.default,{style:{padding:"6px 14px",width:240,maxHeight:150,overflowY:"auto"}},t.map(function(e,t){var a=e.name,l=e.url;return o.default.createElement(u.default,{key:l},o.default.createElement(p,{ellipsis:!0,style:{width:"100%"},title:a},o.default.createElement("a",{download:!0,href:"/download?filePath=".concat(l),style:{marginBottom:20}},t+1,". ",a)))}))},o.default.createElement(s.default,{type:"iconbiezhen"}),t.length)}function C(e){var t=e.comment,a=t.id,l=t.commentTime,r=t.commentContent,d=t.commentUserName,c=t.attachment,s=c?c.split(","):[],p=(0,i.default)(l).format("DD-MMM-YYYY HH:mm:ss");return s=s.map(function(e){var t=e.split("/"),a=t.slice(-1)[0];return{name:a,url:e}}),o.default.createElement("li",{key:a},o.default.createElement(n.default,null,o.default.createElement(u.default,{span:18,style:{color:"#0D87D4"}},p),o.default.createElement(u.default,{span:5,offset:1,align:"right"},s.length>0&&o.default.createElement(m,{attachments:s}))),o.default.createElement(n.default,null,o.default.createElement(f,{ellipsis:{rows:3,expandable:!0}},r,"(",d,")")))}},GybK:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmModel=u,a("2qtc");var r=l(a("kLXV")),n=l(a("q1tI"));function u(e){var t=e.title,a=e.confirmVisible,l=e.comfirm,u=e.content,d=e.closeModel;return n.default.createElement(r.default,{title:t,visible:a,onOk:l,onCancel:d},n.default.createElement("p",null,u))}},Qmke:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=l(a("q1tI")),n=a("LLXN"),u=l(a("BN5G")),d=l(a("mR9m"));function o(e){var t=e.attachments,a=e.onRemove,l=e.onRemoveAll;return r.default.createElement("div",{className:d.default["up-attachments"]},r.default.createElement("div",{className:d.default["file-desc"]},r.default.createElement("span",null,(0,n.formatMessage)({id:"alert-center.attachment-des"},{count:t.length,size:(t.reduce(function(e,t){return e+t.size},0)/1024).toFixed(2)})),r.default.createElement("span",{onClick:l},(0,n.formatMessage)({id:"alert-center.delete-all"}))),r.default.createElement("ul",null,t.map(function(e){return r.default.createElement("li",{key:e.uid},r.default.createElement("span",{className:d.default["icon-btns"]},r.default.createElement("a",{download:!0,href:"/download?filePath=".concat(e.url)},r.default.createElement(u.default,{type:"icondownload",className:d.default.icon})),r.default.createElement(u.default,{type:"icondelete",className:d.default.icon,onClick:function(){return a(e)}})),r.default.createElement("span",null,e.name))})))}},c2Ae:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DZo9");var n=r(a("8z0m"));a("T2oS");var u=r(a("W9HT"));a("jCWc");var d=r(a("kPKH"));a("bbsP");var o=r(a("/wGt"));a("+L6B");var c=r(a("2/Rp"));a("7Kak");var i=r(a("9yH6")),s=r(a("p0pE")),f=r(a("gWZ8")),p=r(a("qIgq"));a("14J3");var m=r(a("BMrR"));a("R9oj");var C=r(a("ECub"));a("5NDa");var g=r(a("5rEg"));a("Znn+");var E=r(a("ZTPi")),v=l(a("q1tI")),y=a("MuoO"),b=r(a("BN5G")),h=a("GybK"),k=r(a("mR9m")),w=r(a("vog5")),T=r(a("Qmke")),P=r(a("BCHC")),D=r(a("vzoP")),S=r(a("9ICW")),I=r(a("/PE8")),x=E.default.TabPane,N=g.default.TextArea;function F(e){var t=e.className,a=void 0===t?"":t,l=e.style,r=void 0===l?{}:l;return v.default.createElement(m.default,{className:a,style:r,type:"flex",align:"middle",justify:"center"},v.default.createElement(C.default,null))}function M(e){var t=e.dispatch,a=e.loading,l=e.task,r=e.detailItems,C=e.nextUsers,g=e.taskHistoryList,y=e.logList,M=e.currentTaskType,R=(0,v.useState)(!1),A=(0,p.default)(R,2),V=A[0],L=A[1],Y=(0,v.useState)(!1),G=(0,p.default)(Y,2),q=G[0],H=G[1],O=(0,v.useState)(""),j=(0,p.default)(O,2),z=j[0],B=j[1],_=(0,v.useState)(""),K=(0,p.default)(_,2),U=K[0],W=K[1],J=(0,v.useState)(""),X=(0,p.default)(J,2),Q=X[0],Z=X[1],$=(0,v.useState)(!1),ee=(0,p.default)($,2),te=ee[0],ae=ee[1],le=(0,v.useState)(!1),re=(0,p.default)(le,2),ne=re[0],ue=re[1],de=(0,v.useState)([]),oe=(0,p.default)(de,2),ce=oe[0],ie=oe[1],se=(0,v.useState)(!0),fe=(0,p.default)(se,2),pe=fe[0],me=fe[1],Ce=v.default.createRef(),ge=function(e){return e/1024/1024<5};function Ee(e){if(W(e),"reject"!==e){if("submit"===e){var t=!0;if(Ce.current.validateFields(function(e){t=!e}),!t)return}console.log("(nextUsers.length---\x3e",C),C.length<1?ve(e):H(!0)}else ae(!0)}function ve(e){var a={},n=!0,u={taskCode:l.taskCode.toString(),type:e,userId:z.toString(),comment:Q,attachment:ce.map(function(e){return e.url}).join(",")};"submit"===e&&Ce.current.validateFields(function(e,t){var l=r[0].alertType;n=!e,e||("301"===l?a={epName:t.epName}:"302"===l?a="No"===t.isCaCode?{isCaCode:t.isCaCode,productDesc:t.productDesc,productCategory:t.productCategory,contractNature:t.contractNature,productGroup:t.productGroup,ltdTmplCode:t.ltdTmplCode,plTmplCode:t.plTmplCode,rlTmplCode:t.rlTmplCode,pdCalculateFlag:t.isCalculatePd,sizeFactor:"Yes"===t.isCalculatePd?t.sizeFactor.toString():"",weightFactor:"Yes"===t.isCalculatePd?t.weightFactor.toString():""}:{isCaCode:t.isCaCode,remark:t.remark}:"303"===l&&(a="Yes"===t.isCaCode?{isCaCode:t.isCaCode,remark:t.remark}:{isCaCode:t.isCaCode,productDesc:t.productDesc,productCategory:t.productCategory,contractNature:t.contractNature,productGroup:t.productGroup,ltdTmplCode:t.ltdTmplCode,plTmplCode:t.plTmplCode,rlTmplCode:t.rlTmplCode,pdCalculateFlag:t.isCalculatePd,sizeFactor:"Yes"===t.isCalculatePd?t.sizeFactor.toString():"",weightFactor:"Yes"===t.isCalculatePd?t.weightFactor.toString():""}),Object.assign(u,a),console.log("Received values of form: ",t,a,u))}),"reject"===e&&ae(!1),n&&t({type:"approvalCenter/approveAndReject",payload:u,callback:function(){t({type:"approvalCenter/fetch",payload:{type:M}}),ie([])}}),H(!1)}function ye(){console.log("comment----",Q),t({type:"approvalCenter/setTaskWithdraw",payload:{taskCode:l.taskCode,comment:Q},callback:function(){t({type:"approvalCenter/fetch",payload:{type:M,taskCode:l.taskCode}})}}),ue(!1)}function be(){var e={},a=!0,n={taskCode:l.taskCode.toString()};Ce.current.validateFields(function(t,l){var u=r[0].alertType;a=!t,t||("301"===u?e={epName:l.epName}:"302"===u?e="No"===l.isCaCode?{isCaCode:l.isCaCode,productDesc:l.productDesc,productCategory:l.productCategory,contractNature:l.contractNature,productGroup:l.productGroup,ltdTmplCode:l.ltdTmplCode,plTmplCode:l.plTmplCode,rlTmplCode:l.rlTmplCode,pdCalculateFlag:l.isCalculatePd,sizeFactor:"Yes"===l.isCalculatePd?l.sizeFactor.toString():"",weightFactor:"Yes"===l.isCalculatePd?l.weightFactor.toString():""}:{isCaCode:l.isCaCode,remark:l.remark}:"303"===u&&(e="Yes"===l.isCaCode?{isCaCode:l.isCaCode,remark:l.remark}:{isCaCode:l.isCaCode,productDesc:l.productDesc,productCategory:l.productCategory,contractNature:l.contractNature,productGroup:l.productGroup,ltdTmplCode:l.ltdTmplCode,plTmplCode:l.plTmplCode,rlTmplCode:l.rlTmplCode,pdCalculateFlag:l.isCalculatePd,sizeFactor:"Yes"===l.isCalculatePd?l.sizeFactor.toString():"",weightFactor:"Yes"===l.isCalculatePd?l.weightFactor.toString():""}),Object.assign(n,e),console.log("Received values of form: ",l,e,n))}),a&&t({type:"approvalCenter/saveTask",payload:n})}function he(e){var t=(0,f.default)(e.fileList);t=t.slice(-5),t=t.map(function(e){var t=e.response||{},a=t.bcjson,l=a||{},r=l.flag,n=l.items,u=void 0===n?{}:n;return"1"===r&&u?(0,s.default)({url:u.relativeUrl},e):e}),console.log("fileList---\x3e",t),ie(t)}function ke(e){ie(ce.filter(function(t){return t.uid!==e.uid}))}return(0,v.useEffect)(function(){l&&t({type:"approvalCenter/fetchTaskDetail",payload:{taskCode:l.taskCode}})},[l]),(0,v.useEffect)(function(){var e=localStorage.getItem("loginName"),t=r&&r[0]&&r[0].ownerId;me(t===e)},[r]),(0,v.useEffect)(function(){l&&"his"!==M&&t({type:"approvalCenter/featchTaskGroup",payload:{taskCode:l.taskCode}})},[l]),(0,v.useEffect)(function(){l&&t({type:"approvalCenter/getApprovalTaskHistory",payload:{taskCode:l.taskCode}})},[l]),v.default.createElement(v.default.Fragment,null,v.default.createElement(h.ConfirmModel,{title:"CONFIRM",content:"Do you comfirm to reject this task?",closeModel:function(){return ae(!1)},confirmVisible:te,comfirm:function(){return ve(U)}}),v.default.createElement(h.ConfirmModel,{title:"CONFIRM",content:"Do you comfirm to withdraw this task?",closeModel:function(){return ue(!1)},confirmVisible:ne,comfirm:ye}),v.default.createElement(m.default,{className:k.default["detail-container"],gutter:16},v.default.createElement(d.default,{span:16,className:V?k.default.fullscreen:""},v.default.createElement(E.default,{hideAdd:!0,className:k.default["detail-des"],defaultActiveKey:"1",tabBarExtraContent:v.default.createElement(b.default,{type:V?"iconfullscreen-exit":"iconfull-screen",className:k.default["fullscreen-icon"],onClick:function(){return L(!V)}})},v.default.createElement(x,{className:k.default["tab-content"],closable:!1,tab:"Task Detail",key:""},v.default.createElement(S.default,{ref:Ce,saveTask:be,detailItem:r,task:l}),v.default.createElement(o.default,{title:"Assign to",width:500,visible:q,onClose:function(){return H(!1)},bodyStyle:{paddingBottom:80}},v.default.createElement(i.default.Group,{options:C,onChange:function(e){return B(e.target.value)},value:z}),v.default.createElement("div",{className:I.default["bottom-btns"]},v.default.createElement(c.default,{onClick:function(){return ve(U)},type:"primary"},"Confirm"),v.default.createElement(c.default,{onClick:function(){return H(!1)},style:{marginRight:12}},"Cancel")))))),v.default.createElement(d.default,{span:8},v.default.createElement(E.default,{defaultActiveKey:"1",className:k.default["detail-comment"]},v.default.createElement(x,{tab:"Approval History",key:"1"},v.default.createElement(u.default,{spinning:a["approvalCenter/getApprovalTaskHistory"]},g.length>0?v.default.createElement("ul",{className:k.default["comment-list"]},g.map(function(e){return v.default.createElement(P.default,{comment:e,key:e.id})})):v.default.createElement(F,{className:k.default["comment-list"]})),"his"!==M&&pe?v.default.createElement("div",{className:k.default["comment-box"]},v.default.createElement(N,{placeholder:"COMMENT",className:k.default.txt,value:Q,onChange:function(e){var t=e.target.value;return Z(t)}}),v.default.createElement(m.default,{className:k.default["comment-commit"],type:"flex",align:"middle",justify:"space-between"},v.default.createElement(d.default,{span:4},v.default.createElement(w.default,{postComment:function(e){return Z("".concat(Q).concat(e," "))}})),v.default.createElement(d.default,{span:20,align:"right"},v.default.createElement(b.default,{type:"iconicon_withdraw1",onClick:function(){return ue(!0)},className:k.default["btn-icon"],style:{marginRight:"8px"}}),v.default.createElement(n.default,{action:"/upload?fileClass=WORKFLOW",showUploadList:!1,beforeUpload:function(e){return ge(e.size)},fileList:ce,onChange:he},v.default.createElement(b.default,{type:"iconbiezhen",style:{cursor:"pointer",marginRight:4},title:"please select a file"}),ce.length>0&&ce.length),r[0]&&r[0].isStarter?v.default.createElement(v.default.Fragment,null,v.default.createElement(c.default,{style:{marginRight:"10px"},type:"primary",onClick:be},"Save"),v.default.createElement(c.default,{type:"primary",onClick:function(){return Ee("submit")}},"Submit")):v.default.createElement(v.default.Fragment,null,v.default.createElement(c.default,{style:{marginRight:"10px"},type:"primary",onClick:function(){return Ee("reject")}},"Reject"),v.default.createElement(c.default,{type:"primary",onClick:function(){return Ee("pass")}},"Approve")))),!!ce.length&&v.default.createElement(T.default,{attachments:ce,onRemove:ke,onRemoveAll:function(){return ie([])}})):null),v.default.createElement(x,{tab:"Task Lifecycle",key:"2"},v.default.createElement(u.default,{spinning:a["approvalCenter/getApprovalTaskHistory"]},v.default.createElement("div",{style:{height:370,overflowY:"auto",padding:"0 18px"}},y.length>0?y.map(function(e){return v.default.createElement(D.default,{log:e,key:e.id})}):v.default.createElement(F,{className:k.default["comment-list"],style:{height:370}}))))))))}var R=(0,y.connect)(function(e){var t=e.loading,a=e.approvalCenter,l=a.detailItems,r=a.userList,n=a.taskHistoryList,u=a.logList,d=a.nextUsers;return{detailItems:l,userList:r,taskHistoryList:n,logList:u,nextUsers:d,loading:t.effects}})(M);t.default=R},ifr9:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_PAGE_SIZE=t.DEFAULT_PAGE=void 0;var n=r(a("d6i3"));a("bbsP");var u=r(a("/wGt"));a("+L6B");var d=r(a("2/Rp")),o=r(a("1l/V")),c=r(a("qIgq"));a("14J3");var i=r(a("BMrR"));a("jCWc");var s=r(a("kPKH"));a("7Kak");var f=r(a("9yH6"));a("5NDa");var p=r(a("5rEg"));a("g9YV");var m=r(a("wCAj")),C=l(a("q1tI")),g=a("MuoO"),E=a("LLXN"),v=r(a("usdK")),y=r(a("wd/R")),b=a("8Br5"),h=r(a("BN5G")),k=a("GybK"),w=a("+n12"),T=r(a("mR9m")),P=r(a("H7wn")),D=r(a("/PE8")),S=m.default.Column,I=p.default.Search,x=1;t.DEFAULT_PAGE=x;var N=10;function F(e){var t=e.changeTab,a=e.selectedCurrentTask;return C.default.createElement(i.default,{className:T.default.btns,style:{marginBottom:"15px"}},C.default.createElement(s.default,{span:12},C.default.createElement(f.default.Group,{key:a,defaultValue:a,buttonStyle:"solid",onChange:function(e){return t(e.target.value)}},C.default.createElement(f.default.Button,{value:"all"},"All Tasks"),C.default.createElement(f.default.Button,{value:"my"},"My Tasks"),C.default.createElement(f.default.Button,{value:"his"},"History"))))}function M(e){var t=e.selectedKeys,a=e.selectedCurrentTask,l=e.searchTask,r=e.checkOwner,n=e.checkAssign,u=e.urlTaskCode,d=e.exportAlert;return C.default.createElement(i.default,{className:P.default.btns},C.default.createElement(s.default,{span:12},"his"!==a&&C.default.createElement(C.default.Fragment,null,C.default.createElement("button",{type:"button",disabled:!t.length,onClick:function(){return r(t)}},C.default.createElement(h.default,{type:"iconqizhi",className:P.default["btn-icon"]}),C.default.createElement(E.FormattedMessage,{id:"alert-center.claim"})),C.default.createElement("button",{type:"button",disabled:!t.length,onClick:function(){return n(t)}},C.default.createElement(h.default,{type:"iconicon_assign-copy",className:P.default["btn-icon"]}),"Assign")),C.default.createElement("button",{type:"button",disabled:!t.length,onClick:d},C.default.createElement(h.default,{type:"iconexport",className:P.default["btn-icon"]}),C.default.createElement(E.FormattedMessage,{id:"alert-center.export"}))),C.default.createElement(s.default,{span:6},C.default.createElement(I,{key:u,placeholder:"search",defaultValue:u,onSearch:function(e){return l(a,e)},style:{width:264,height:36}})))}function R(e){var t=e.dispatch,a=e.loading,l=e.tasks,r=e.currentUsers,s=e.total,p=e.getTask,g=e.setCurrentTaskType,P=(0,C.useState)([]),I=(0,c.default)(P,2),N=I[0],R=I[1],A=(0,C.useState)("my"),V=(0,c.default)(A,2),L=V[0],Y=V[1],G=(0,C.useState)("1"),q=(0,c.default)(G,2),H=q[0],O=q[1],j=(0,C.useState)("1"),z=(0,c.default)(j,2),B=z[0],_=z[1],K=(0,C.useState)(!1),U=(0,c.default)(K,2),W=U[0],J=U[1],X=(0,C.useState)(""),Q=(0,c.default)(X,2),Z=Q[0],$=Q[1],ee=(0,C.useState)(!1),te=(0,c.default)(ee,2),ae=te[0],le=te[1],re=(0,C.useState)(""),ne=(0,c.default)(re,2),ue=ne[0],de=ne[1],oe=(0,C.useState)(""),ce=(0,c.default)(oe,2),ie=ce[0],se=ce[1],fe=(0,C.useState)(""),pe=(0,c.default)(fe,2),me=pe[0],Ce=pe[1],ge=(0,C.useState)(!1),Ee=(0,c.default)(ge,2),ve=Ee[0],ye=Ee[1],be=(0,w.GetQueryString)("taskCode"),he=(0,w.GetQueryString)("isEnd");function ke(e){return we.apply(this,arguments)}function we(){return we=(0,o.default)(n.default.mark(function e(a){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"approvalCenter/fetchJudgeDetail",payload:{taskCode:a},callback:function(e){e[0].ownerId?(ye(!1),de(a),se("This task has been claimed by [".concat(e[0].ownerId,"]\n          Do you confirm to re-claim?")),le(!0)):De(a)}});case 2:case"end":return e.stop()}},e)})),we.apply(this,arguments)}function Te(e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,o.default)(n.default.mark(function e(a){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"approvalCenter/fetchJudgeDetail",payload:{taskCode:a},callback:function(e){var t=e.find(function(e){return e.ownerId});t?(ye(!0),se("some alerts has been claimed,\n      Do you confirm to re-claim?"),le(!0)):De(a)}});case 2:case"end":return e.stop()}},e)})),Pe.apply(this,arguments)}function De(e){t({type:"approvalCenter/claim",payload:{taskCode:e},callback:function(){le(!1),O(x),t({type:"approvalCenter/fetch",payload:{type:L}})}})}function Se(e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,o.default)(n.default.mark(function e(a){var l;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=localStorage.getItem("loginName"),e.next=3,t({type:"approvalCenter/fetchJudgeDetail",payload:{taskCode:a},callback:function(e){var t=e.find(function(e){return e.ownerId!==l});if(t){if(e.length>1)throw new Error("Some tasks have not been claimed, please claim them and try again");throw new Error("The task have not been claimed, please claim it and try again")}J(!0)}});case 3:case"end":return e.stop()}},e)})),Ie.apply(this,arguments)}function xe(e){J(!1),t({type:"approvalCenter/setTaskAssign",payload:{taskCode:e,userId:Z},callback:function(){$(""),t({type:"approvalCenter/fetch",payload:{type:L}})}})}function Ne(e,a){t({type:"approvalCenter/fetch",payload:{taskCode:a,type:e}}),O(x)}return(0,C.useEffect)(function(){Ce(be),"1"===he&&Y("his"),v.default.push({pathname:"/homepage/Approval-Process-Center"}),t({type:"approvalCenter/fetch",payload:{type:"1"===he?"his":L,taskCode:be}})},[]),(0,C.useEffect)(function(){if(l&&l.length>0){var e=(0,c.default)(l,1),t=e[0];p(t),_(t),g(L)}else p(!1)},[l]),C.default.createElement("div",{className:T.default.list},C.default.createElement(k.ConfirmModel,{title:"CONFIRM",content:ie,closeModel:function(){return le(!1)},confirmVisible:ae,comfirm:function(){return De(ve?N:ue)}}),C.default.createElement(u.default,{title:"Assign to",width:500,visible:W,onClose:function(){return J(!1)},bodyStyle:{paddingBottom:80}},C.default.createElement(f.default.Group,{options:r,onChange:function(e){return $(e.target.value)},value:Z}),C.default.createElement("div",{className:D.default["bottom-btns"]},C.default.createElement(d.default,{onClick:function(){return xe(N)},type:"primary"},"Confirm"),C.default.createElement(d.default,{onClick:function(){return J(!1)},style:{marginRight:12}},"Cancel"))),C.default.createElement(F,{changeTab:function(e){Ce(""),R([]),Y(e),g(e),t({type:"approvalCenter/fetch",payload:{type:e}})},selectedCurrentTask:L}),C.default.createElement(M,{selectedKeys:N,selectedCurrentTask:L,searchTask:Ne,claimOk:De,checkOwner:Te,setTaskAssign:xe,checkAssign:Se,setVisible:J,urlTaskCode:me}),C.default.createElement(m.default,{border:!0,dataSource:l,rowKey:"taskCode",loading:a["approvalCenter/fetch"],rowClassName:function(e){return e.taskCode===B.taskCode?"active":""},rowSelection:{selectedRowKeys:N,onChange:function(e){R(e)}},pagination:{total:s,showSizeChanger:!0,current:H,showTotal:function(e){return"Page ".concat(H," of ").concat(Math.ceil(e/10).toString())},onChange:function(e,a){O(e),t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:L}})},onShowSizeChange:function(e,a){O(e),t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:L}})}},onRow:function(e){return{onClick:function(){p(e),_(e)}}}},C.default.createElement(S,{align:"center",dataIndex:"taskCode",title:"TASK CODE"}),C.default.createElement(S,{align:"center",dataIndex:"classification",title:"CLASSIFICATION"}),C.default.createElement(S,{align:"center",dataIndex:"submitterName",title:"SUBMITTER NAME"}),C.default.createElement(S,{align:"center",dataIndex:"details",title:"DETAILS"}),C.default.createElement(S,{align:"center",dataIndex:"updateDate",title:"UPDATE DATE",render:function(e,t){return(0,y.default)(t.updateDate).format(b.timestampFormat)}}),C.default.createElement(S,{dataIndex:"owner",title:"OWNER"}),C.default.createElement(S,{align:"center",dataIndex:"statusDesc",title:"STATUS"}),"his"!==L?C.default.createElement(S,{align:"center",dataIndex:"action",title:C.default.createElement(E.FormattedMessage,{id:"alert-center.actions"}),render:function(e,t){return C.default.createElement(i.default,{className:T.default.btns},C.default.createElement(h.default,{type:"iconqizhi",className:T.default.icon,title:(0,E.formatMessage)({id:"alert-center.claim"}),onClick:function(){ke([t.taskCode])}}))}}):null))}t.DEFAULT_PAGE_SIZE=N;var A=(0,g.connect)(function(e){var t=e.loading,a=e.approvalCenter,l=a.tasks,r=a.currentUsers,n=a.page,u=a.total;return{tasks:l,page:n,total:u,currentUsers:r,loading:t.effects}})(R);t.default=A},mR9m:function(e,t,a){e.exports={"list-container":"antd-pro-pages-approval-process-center-index-list-container",list:"antd-pro-pages-approval-process-center-index-list",btns:"antd-pro-pages-approval-process-center-index-btns","btn-icon":"antd-pro-pages-approval-process-center-index-btn-icon",icon:"antd-pro-pages-approval-process-center-index-icon","detail-container":"antd-pro-pages-approval-process-center-index-detail-container","tab-content":"antd-pro-pages-approval-process-center-index-tab-content",fullscreen:"antd-pro-pages-approval-process-center-index-fullscreen",ListBox:"antd-pro-pages-approval-process-center-index-ListBox",ListItem:"antd-pro-pages-approval-process-center-index-ListItem","detail-des":"antd-pro-pages-approval-process-center-index-detail-des","fullscreen-icon":"antd-pro-pages-approval-process-center-index-fullscreen-icon","detail-comment":"antd-pro-pages-approval-process-center-index-detail-comment","comment-list":"antd-pro-pages-approval-process-center-index-comment-list","loading-more":"antd-pro-pages-approval-process-center-index-loading-more","comment-box":"antd-pro-pages-approval-process-center-index-comment-box",txt:"antd-pro-pages-approval-process-center-index-txt","comment-commit":"antd-pro-pages-approval-process-center-index-comment-commit","up-attachments":"antd-pro-pages-approval-process-center-index-up-attachments","file-desc":"antd-pro-pages-approval-process-center-index-file-desc"}},vzoP:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,a("14J3");var r=l(a("BMrR"));a("jCWc");var n=l(a("kPKH"));a("tU7J");var u=l(a("wFql")),d=l(a("q1tI")),o=l(a("wd/R")),c=u.default.Paragraph;function i(e){var t=e.log,a=t.operateTime,l=t.operateMsg,u=(0,o.default)(a).format("DD-MMM-YYYY HH:mm:ss");return d.default.createElement(r.default,null,d.default.createElement(n.default,{span:11},u),d.default.createElement(n.default,{span:12,offset:1},d.default.createElement(c,{ellipsis:{rows:3,expandable:!0}},l)))}}}]);