(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"0CQy":function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var s=n(a("2/Rp"));a("14J3");var u=n(a("BMrR"));a("jCWc");var l=n(a("kPKH"));a("sRBo");var o=n(a("kaz8"));a("miYZ");var d=n(a("tsqr"));a("y8nQ");var c=n(a("Vl3Y"));a("5NDa");var i,m,f,p=n(a("5rEg")),g=n(a("2Taf")),h=n(a("vZ4D")),v=n(a("l4Ni")),y=n(a("ujKo")),I=n(a("MhPg")),M=r(a("q1tI")),E=a("LLXN"),N=a("MuoO"),k=n(a("IyuI")),U=function(e){function t(){var e;return(0,g.default)(this,t),e=(0,v.default)(this,(0,y.default)(t).call(this)),e.state={},e}return(0,I.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.NewFlag,n=t.userInfo;return M.default.createElement(M.Fragment,null,M.default.createElement(c.default,null,M.default.createElement(c.default.Item,{label:(0,E.formatMessage)({id:"app.common.username"}),labelCol:{span:4},wrapperCol:{span:7}},e("userName",{rules:[{required:!0,message:"".concat((0,E.formatMessage)({id:"app.common.username"})," should not be empty")}],initialValue:n&&n.userName})(M.default.createElement(p.default,{placeholder:"Please Input ".concat((0,E.formatMessage)({id:"app.common.username"}))}))),a&&M.default.createElement(c.default.Item,{label:(0,E.formatMessage)({id:"app.common.password"}),labelCol:{span:4},wrapperCol:{span:7}},e("userPwd",{rules:[{required:!0,message:"Please input ".concat((0,E.formatMessage)({id:"app.common.password"}))}]})(M.default.createElement(p.default.Password,{placeholder:"Please Input ".concat((0,E.formatMessage)({id:"app.common.password"}))})))))}}]),t}(M.Component),C=c.default.create()(U),b=(i=(0,N.connect)(function(e){var t=e.userManagement,a=e.loading;return{loading:a.effects,newUserData:t.saveUser,menuUserGroup:t.menuData,alertUserGroups:t.alertData,modifyUserData:t.updateData}}),i((f=function(e){function t(e){var a;return(0,g.default)(this,t),a=(0,v.default)(this,(0,y.default)(t).call(this,e)),a.newUserRef=M.default.createRef(),a.queryLog=function(){var e=a.props.dispatch,t={};e({type:"userManagement/getMenuUserGroup",payload:t})},a.getAlertUserGroup=function(){var e=a.props.dispatch,t={};e({type:"userManagement/getAlertUserGroup",payload:t})},a.getRoalId=function(e){var t=a.props.dispatch,n={operType:"queryById",userId:e};t({type:"userManagement/updateUserModelDatas",payload:n,callback:function(){var e=a.props.modifyUserData.map(function(e){var t="";return"menu"===e.userGroupType&&(t=e.groupId),t}),t=a.props.modifyUserData.map(function(e){var t="";return"alert"===e.userGroupType&&(t=e.groupId),t});a.setState({groupIds:e,alertIds:t})}})},a.setRoleIds=function(e){if(!(e.length<=0)){var t=[];t.push(e[0].groupId),a.setState({groupIds:t})}},a.onCancel=function(){a.props.onCancel()},a.onChangeLocked=function(e){e.target.checked?a.setState({accountLock:"L",locedChecked:!0}):a.setState({accountLock:"0",locedChecked:!1})},a.onChangeMenuUserGroup=function(e){a.setState({groupIds:e})},a.onChangeAlertUserGroup=function(e){a.setState({alertIds:e})},a.onSave=function(){var e=a.state,t=e.accountLock,n=e.groupIds,r=e.alertIds,s=a.props,u=s.NewFlag,l=s.userInfo;a.newUserRef.current.validateFields(function(e,s){if(!e)if(n.length<=0)d.default.warning("Please checked Menu User Group");else if(r.length<=0)d.default.warning("Please checked Alert User Group");else{var o=a.props.dispatch;if(u){var c={userName:s.userName,userPwd:window.kddes.getDes(s.userPwd),groupIds:n.join(","),alertIds:r.join(","),accountLock:t};o({type:"userManagement/newUser",payload:c,callback:function(){d.default.success({content:"save success",duration:2}),a.props.onSave(!0)}})}else{var i={operType:"updateUserById",userName:s.userName,groupIds:n.join(","),userId:l.userId,alertIds:r.join(","),accountLock:t};o({type:"userManagement/updateUserModelDatas",payload:i,callback:function(){d.default.success({content:"save success",duration:2}),a.props.onSave(!1)}})}}})},a.state={accountLock:"0",locedChecked:!1,groupIds:[],alertIds:[]},a}return(0,I.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.userInfo,t=!1;e.accountLock&&"L"===e.accountLock&&(t=!0),this.queryLog(),this.getAlertUserGroup(),this.setState({locedChecked:t}),e.userId&&this.getRoalId(e.userId)}},{key:"render",value:function(){var e=this.props,t=e.menuUserGroup,a=e.NewFlag,n=e.userInfo,r=e.alertUserGroups,d=this.state,c=d.locedChecked,i=d.groupIds,m=d.alertIds;return M.default.createElement(M.Fragment,null,M.default.createElement(C,{ref:this.newUserRef,NewFlag:a,userInfo:n}),M.default.createElement(u.default,null,M.default.createElement(l.default,{offset:4},M.default.createElement(o.default,{onChange:this.onChangeLocked,checked:c},"User Account Locked"))),M.default.createElement("ul",{className:k.default.userGroup},M.default.createElement("li",null,M.default.createElement("h3",{className:k.default.groupTitle},(0,E.formatMessage)({id:"systemManagement.userMaintenance.menuUserGroup"})),M.default.createElement(o.default.Group,{options:t,defaultValue:["Operator"],onChange:this.onChangeMenuUserGroup,value:i}))),M.default.createElement("ul",{className:k.default.userGroup},M.default.createElement("li",null,M.default.createElement("h3",{className:k.default.groupTitle},(0,E.formatMessage)({id:"systemManagement.userMaintenance.alertUserGroup"})),M.default.createElement(o.default.Group,{options:r,defaultValue:["Future Maker","Future Checker"],onChange:this.onChangeAlertUserGroup,value:m}))),M.default.createElement(u.default,{type:"flex",justify:"end",style:{position:"absolute",right:0,bottom:0,width:"100%",padding:"10px 16px",background:"#fff",textAlign:"right"}},M.default.createElement(l.default,null,M.default.createElement(s.default,{onClick:this.onCancel},"CANCEL"),M.default.createElement(s.default,{type:"primary",onClick:this.onSave},"SAVE"))))}}]),t}(M.Component),m=f))||m);t.default=b},IyuI:function(e,t,a){e.exports={clearfix:"antd-pro-pages-system-management-user-management-user-management-clearfix",fl:"antd-pro-pages-system-management-user-management-user-management-fl",fr:"antd-pro-pages-system-management-user-management-user-management-fr",formWrap:"antd-pro-pages-system-management-user-management-user-management-formWrap","login-name":"antd-pro-pages-system-management-user-management-user-management-login-name",header:"antd-pro-pages-system-management-user-management-user-management-header",inputValue:"antd-pro-pages-system-management-user-management-user-management-inputValue",content:"antd-pro-pages-system-management-user-management-user-management-content",tableTop:"antd-pro-pages-system-management-user-management-user-management-tableTop",userGroup:"antd-pro-pages-system-management-user-management-user-management-userGroup",groupTitle:"antd-pro-pages-system-management-user-management-user-management-groupTitle","btn-icon":"antd-pro-pages-system-management-user-management-user-management-btn-icon",modifyBtn:"antd-pro-pages-system-management-user-management-user-management-modifyBtn"}},Qxgk:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var s=n(a("NUBc"));a("g9YV");var u=n(a("wCAj"));a("+L6B");var l=n(a("2/Rp"));a("2qtc");var o=n(a("kLXV"));a("bbsP");var d=n(a("/wGt"));a("miYZ");var c=n(a("tsqr")),i=n(a("2Taf")),m=n(a("vZ4D")),f=n(a("l4Ni")),p=n(a("ujKo")),g=n(a("MhPg"));a("y8nQ");var h,v,y,I=n(a("Vl3Y")),M=r(a("q1tI")),E=a("Hx5s"),N=a("LLXN"),k=a("MuoO"),U=n(a("IyuI")),C=a("fwgp"),b=n(a("BN5G")),w=n(a("aTQR")),S=n(a("0CQy")),L=I.default.create({})(w.default),x=(h=(0,k.connect)(function(e){var t=e.userManagement,a=e.loading;return{loading:a.effects,userManagementData:t.data,modifyUserData:t.updateData}}),h((y=function(e){function t(){var e,a;(0,i.default)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,userTitle:"New User",NewFlag:!0,deleteVisible:!1,searchUserId:void 0,searchUserName:void 0,editIconActive:!1,deleteIconActive:!1,activeIndex:void 0,userInfo:{userId:"",userName:""},columns:[{title:(0,N.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index",align:"center",minWidth:60,render:function(e,t,n){return M.default.createElement("span",null,(a.state.page.pageNumber-1)*a.state.page.pageSize+n+1)}},{title:(0,N.formatMessage)({id:"app.common.username"}),dataIndex:"userName",key:"userName",align:"center"},{title:(0,N.formatMessage)({id:"systemManagement.userMaintenance.lockedStatus"}),dataIndex:"accountLock",key:"accountLock",align:"center",render:function(e,t){return M.default.createElement("div",null,M.default.createElement("span",null,(0,C.lockedFormat)(t.accountLock)))}},{title:(0,N.formatMessage)({id:"systemManagement.userMaintenance.LastUpdateTime"}),dataIndex:"updateTime",key:"updateTime",align:"center",render:function(e,t){return M.default.createElement("div",null,M.default.createElement("span",null,t.updateTime&&(0,C.timeFormat)(t.updateTime).t1),M.default.createElement("br",null),M.default.createElement("span",null,t.updateTime&&(0,C.timeFormat)(t.updateTime).t2))}},{title:(0,N.formatMessage)({id:"systemManagement.userMaintenance.LastUpdateUser"}),dataIndex:"updateBy",key:"updateBy",align:"center"},{title:(0,N.formatMessage)({id:"app.common.operation"}),dataIndex:"operation",key:"operation",align:"center",render:function(e,t,n){return M.default.createElement("span",{className:U.default.operation},M.default.createElement("a",{href:"#",onClick:function(){return a.updateUser(e,t)},onMouseEnter:function(){return a.editMouseEnter(n)},onMouseLeave:a.editMouseLeave},M.default.createElement(b.default,{type:a.state.editIconActive&&a.state.activeIndex===n?"icon-edit-hover":"icon-edit",className:U.default["btn-icon"]})),M.default.createElement("span",{className:"interval-padding"}),M.default.createElement("a",{href:"#",onClick:function(){return a.deleteUser(e,t)},onMouseEnter:function(){return a.deleteMouseEnter(n)},onMouseLeave:a.deleteMouseLeave},M.default.createElement(b.default,{type:a.state.deleteIconActive&&a.state.activeIndex===n?"icon-delete-hover":"icon-delete",className:U.default["btn-icon"]})))}}],page:{pageNumber:1,pageSize:10}},a.newDepartmentId="",a.searchForm=M.default.createRef(),a.formRef=M.default.createRef(),a.updateFormRef=M.default.createRef(),a.passwordFormRef=M.default.createRef(),a.resetPasswordFormRef=M.default.createRef(),a.editMouseEnter=function(e){a.setState({editIconActive:!0,activeIndex:e})},a.editMouseLeave=function(){a.setState({editIconActive:!1})},a.deleteMouseEnter=function(e){a.setState({deleteIconActive:!0,activeIndex:e})},a.deleteMouseLeave=function(){a.setState({deleteIconActive:!1})},a.queryUserList=function(){var e=a.props.dispatch,t=a.state,n=t.searchUserId,r=t.searchUserName,s={userId:n,userName:r,operType:"queryAllList",pageNumber:a.state.page.pageNumber.toString(),pageSize:a.state.page.pageSize.toString()};e({type:"userManagement/userManagemetDatas",payload:s})},a.newUser=function(){a.setState({visible:!0,userTitle:"New User",NewFlag:!0,userInfo:{}})},a.addConfrim=function(){a.setState({visible:!1,searchUserId:void 0,searchUserName:void 0}),a.searchForm.current.resetFields();var e=a.state.page.pageSize,t={pageNumber:1,pageSize:e};a.setState({page:t},function(){a.queryUserList()})},a.addCancel=function(){a.setState({visible:!1})},a.updateUser=function(e,t){console.log("res, obj===",e,t);var n={userName:t.userName,userId:t.userId,accountLock:t.accountLock};a.setState({visible:!0,userTitle:"Modify User",NewFlag:!1,userInfo:n})},a.deleteUser=function(e,t){var n={userName:t.userName,userId:t.userId,accountLock:t.accountLock};a.setState({deleteVisible:!0,userInfo:n})},a.deleteConfirm=function(){var e=a.props.dispatch,t={operType:"deleteUserById",userId:a.state.userInfo.userId};e({type:"userManagement/updateUserModelDatas",payload:t,callback:function(){c.default.success({content:"delete success",duration:2}),a.queryUserList(),a.setState({deleteVisible:!1})}})},a.deleteCancel=function(){a.setState({deleteVisible:!1})},a.queryLog=function(){var e=a.state.page,t={pageNumber:1,pageSize:e.pageSize};a.setState({page:t}),a.searchForm.current.validateFields(function(e,t){a.setState({searchUserId:t.userId,searchUserName:t.userName},function(){a.queryUserList()})})},a.pageChange=function(e,t){var n={pageNumber:e,pageSize:t};a.setState({page:n},function(){a.queryUserList()})},a.onShowSizeChange=function(e,t){var n={pageNumber:e,pageSize:t};a.setState({page:n},function(){a.queryUserList()})},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.queryUserList()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.userManagementData,n=this.state,r=n.userInfo,c=n.page,i=n.userTitle,m=n.NewFlag;return M.default.createElement(E.PageHeaderWrapper,null,M.default.createElement("div",null,M.default.createElement("div",null,M.default.createElement(L,{search:this.queryLog,newUser:this.newUser,ref:this.searchForm})),M.default.createElement("div",null,M.default.createElement(d.default,{closable:!1,title:i,width:700,onClose:this.addCancel,visible:this.state.visible},this.state.visible&&M.default.createElement(S.default,{onCancel:this.addCancel,onSave:this.addConfrim,NewFlag:m,userInfo:r})),M.default.createElement(o.default,{title:(0,N.formatMessage)({id:"app.common.confirm"}),visible:this.state.deleteVisible,onOk:this.deleteConfirm,onCancel:this.deleteCancel,cancelText:(0,N.formatMessage)({id:"app.common.cancel"}),okText:(0,N.formatMessage)({id:"app.common.confirm"})},M.default.createElement("span",null,"Please confirm that you want to delete this record?"))),M.default.createElement("div",{className:U.default.content},M.default.createElement("div",{className:U.default.tableTop},M.default.createElement(l.default,{onClick:this.newUser,type:"primary",className:"btn_usual"},"+ New User")),M.default.createElement(u.default,{loading:t["userManagement/userManagemetDatas"],dataSource:a.items,columns:this.state.columns,pagination:!1}),a.items&&a.items.length>0&&M.default.createElement(s.default,{current:c.pageNumber,showSizeChanger:!0,showTotal:function(){return"Page ".concat(a.totalCount?c.pageNumber:0," of ").concat(Math.ceil((a.totalCount||0)/c.pageSize))},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:a.totalCount,pageSize:c.pageSize}))))}}]),t}(M.Component),v=y))||v),T=x;t.default=T},aTQR:function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var s=r(a("BMrR"));a("+L6B");var u=r(a("2/Rp"));a("jCWc");var l=r(a("kPKH"));a("y8nQ");var o=r(a("Vl3Y"));a("5NDa");var d=r(a("5rEg")),c=r(a("2Taf")),i=r(a("vZ4D")),m=r(a("l4Ni")),f=r(a("ujKo")),p=r(a("MhPg")),g=n(a("q1tI")),h=a("LLXN"),v=r(a("IyuI")),y=r(a("BN5G")),I=function(e){function t(){var e,a;(0,c.default)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=(0,m.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(r))),a.state={},a}return(0,p.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.search;return g.default.createElement(o.default,{className:"ant-advanced-search-form search-wraper",layout:"vertical"},g.default.createElement(s.default,{gutter:{xs:0,sm:8,md:10,lg:20,xl:24},align:"bottom",type:"flex"},g.default.createElement(l.default,{xs:24,sm:12,xl:7,xxl:5},g.default.createElement(o.default.Item,{label:(0,h.formatMessage)({id:"app.common.username"})},e("userName",{})(g.default.createElement(d.default,{className:v.default.inputvalue,placeholder:"Please input"})))),g.default.createElement(l.default,{xs:24,sm:12,xl:7,xxl:5},g.default.createElement(o.default.Item,null,g.default.createElement(u.default,{type:"primary",onClick:t},g.default.createElement(y.default,{type:"iconsousuo",style:{color:"#fff"}}),(0,h.formatMessage)({id:"app.common.search"}))))))}}]),t}(g.Component);t.default=I}}]);