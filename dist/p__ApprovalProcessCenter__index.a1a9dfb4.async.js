(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"2Cab":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(a("qIgq")),c=l(a("q1tI")),d=a("Hx5s"),u=n(a("c2Ae")),o=n(a("ifr9")),f=n(a("mR9m"));function i(){var e=(0,c.useState)(null),t=(0,r.default)(e,2),a=t[0],l=t[1];return c.default.createElement(d.PageHeaderWrapper,null,c.default.createElement("div",{className:f.default["list-container"]},c.default.createElement(o.default,{getTask:function(e){return l(e)}}),a&&c.default.createElement(u.default,{task:a})))}},c2Ae:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=n(a("2/Rp")),c=n(a("qIgq"));a("Q9mQ");var d=n(a("diRs"));a("14J3");var u=n(a("BMrR"));a("jCWc");var o=n(a("kPKH"));a("y8nQ");var f=n(a("Vl3Y"));a("tU7J");var i=n(a("wFql"));a("5NDa");var s=n(a("5rEg"));a("Znn+");var m=n(a("ZTPi")),p=l(a("q1tI")),E=a("LLXN"),g=a("MuoO"),v=n(a("BN5G")),y=n(a("mR9m")),h=m.default.TabPane,k=s.default.TextArea,C=i.default.Paragraph,x=i.default.Text;function b(e){var t=e.form,a=e.detailItem,l=t.getFieldDecorator,n=a.data||[];return console.log("detailItem----\x3e",a.data),p.default.createElement(f.default,null,n.length&&n.map(function(e){return p.default.createElement(f.default.Item,{label:e.key,labelCol:{span:5},wrapperCol:{span:16}},l(e.key,{initialValue:e.oldValue})(p.default.createElement(s.default,{disabled:!e.isEdit})))}))}var T=f.default.create()(b);function I(e){var t=e.attachments;return p.default.createElement(d.default,{placement:"bottomRight",title:p.default.createElement(E.FormattedMessage,{id:"alert-center.attachement-list"}),content:p.default.createElement(u.default,{style:{padding:"6px 14px",width:240,maxHeight:150,overflowY:"auto"}},t.map(function(e,t){var a=e.name,l=e.url;return p.default.createElement(o.default,{key:l},p.default.createElement(x,{ellipsis:!0,style:{width:"100%"},title:a},p.default.createElement("a",{download:!0,href:"/download?filePath=".concat(l),style:{marginBottom:20}},t+1,". ",a)))}))},p.default.createElement(v.default,{type:"iconbiezhen"}),t.length)}function A(e){var t=e.comment,a=t.time,l=t.text,n=t.attachments;return p.default.createElement("li",{key:"".concat(a,"-").concat(l)},p.default.createElement(u.default,null,p.default.createElement(o.default,{span:18,style:{color:"#0D87D4"}},a),p.default.createElement(o.default,{span:5,offset:1,align:"right"},n&&p.default.createElement(I,{attachments:n}))),p.default.createElement(u.default,null,p.default.createElement(C,{ellipsis:{rows:3,expandable:!0}},l)))}function w(e){var t=e.log,a=t.time,l=t.text;return p.default.createElement(p.default.Fragment,null,p.default.createElement(o.default,{span:9},a),p.default.createElement(o.default,{span:15},p.default.createElement(C,{ellipsis:{rows:3,expandable:!0}},l)))}function N(e){var t=e.dispatch,a=e.task,l=e.detailItems,n=(0,p.useState)(!1),d=(0,c.default)(n,2),f=d[0],i=d[1],s=p.default.createRef();function E(){s.current.validateFields(function(e,l){var n="";e||console.log("Received values of form: ",l),t({type:"approvalCenter/saveTask",payload:{taskCode:a.taskCode,epCname:n}})})}return console.log("detailItem----\x3e",l),(0,p.useEffect)(function(){t({type:"approvalCenter/fetchTaskDetail",payload:{taskCode:a.taskCode}})},[a]),p.default.createElement(u.default,{className:y.default["detail-container"],gutter:16},p.default.createElement(o.default,{span:16,className:f?y.default.fullscreen:""},p.default.createElement(m.default,{hideAdd:!0,className:y.default["detail-des"],defaultActiveKey:"1",tabBarExtraContent:p.default.createElement(v.default,{type:f?"iconfullscreen-exit":"iconfull-screen",className:y.default["fullscreen-icon"],onClick:function(){return i(!f)}})},p.default.createElement(h,{className:y.default["tab-content"],closable:!1,tab:"Task Detail",key:""},p.default.createElement(T,{ref:s,saveTask:E,detailItem:l})))),p.default.createElement(o.default,{span:8},p.default.createElement(m.default,{defaultActiveKey:"1",className:y.default["detail-comment"]},p.default.createElement(h,{tab:"Approval History",key:"1"},p.default.createElement("ul",{className:y.default["comment-ul"]},alert.comments&&alert.comments.map(function(e){return p.default.createElement(A,{comment:e,key:e.time})})),p.default.createElement("div",{className:y.default["comment-box"]},p.default.createElement(k,{placeholder:"COMMENT",className:y.default.txt}),p.default.createElement(u.default,{className:y.default["comment-commit"],type:"flex",align:"middle",justify:"space-between"},p.default.createElement(o.default,{span:6},p.default.createElement(r.default,{type:"primary"},"Submit")),p.default.createElement(o.default,{span:6,align:"right"},p.default.createElement(r.default,{type:"primary",onClick:E},"Save"))))),p.default.createElement(h,{className:y.default["tab-content"],tab:"Task Lifecycle",key:"2"},p.default.createElement(u.default,{gutter:[10,10],style:{height:440,overflowY:"auto"}},alert.logs&&alert.logs.map(function(e){return p.default.createElement(w,{log:e,key:e.time})}))))))}var S=(0,g.connect)(function(e){var t=e.loading,a=e.approvalCenter.detailItems;return{detailItems:a,loading:t.effects}})(N);t.default=S},ifr9:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_PAGE_SIZE=t.DEFAULT_PAGE=void 0;var r=n(a("d6i3")),c=n(a("1l/V")),d=n(a("qIgq"));a("+L6B");var u=n(a("2/Rp"));a("2qtc");var o=n(a("kLXV"));a("14J3");var f=n(a("BMrR"));a("jCWc");var i=n(a("kPKH"));a("7Kak");var s=n(a("9yH6"));a("5NDa");var m=n(a("5rEg"));a("g9YV");var p=n(a("wCAj")),E=l(a("q1tI")),g=a("MuoO"),v=a("LLXN"),y=n(a("BN5G")),h=n(a("mR9m")),k=p.default.Column,C=m.default.Search,x=1;t.DEFAULT_PAGE=x;var b=10;function T(e){var t=e.changeTab;return E.default.createElement(f.default,{className:h.default.btns},E.default.createElement(i.default,{span:12},E.default.createElement(s.default.Group,{defaultValue:"all",onChange:function(e){return t(e.target.value)}},E.default.createElement(s.default.Button,{value:"all"},"All Task"),E.default.createElement(s.default.Button,{value:"my"},"My task"))))}function I(e){var t=e.selectedKeys,a=e.selectedCurrentTask,l=e.searchTask,n=e.claimOk,r=e.closeAlert,c=e.exportAlert;return E.default.createElement(f.default,{className:h.default.btns},E.default.createElement(i.default,{span:12},E.default.createElement(u.default,{type:"primary",disabled:!t.length,onClick:function(){return o.default.confirm({title:"Confirm",content:"Are you sure claim these tasks?",okText:"Sure",cancelText:"Cancel",onOk:function(){return n(t)}})}},E.default.createElement(y.default,{type:"iconqizhi",className:h.default["btn-icon"]}),E.default.createElement(v.FormattedMessage,{id:"alert-center.claim"})),E.default.createElement(u.default,{disabled:!t.length,onClick:r},"Assign"),E.default.createElement(u.default,{disabled:!t.length,onClick:r},E.default.createElement(y.default,{type:"iconic_circle_close",className:h.default["btn-icon"]}),"Withdraw"),E.default.createElement(u.default,{disabled:!t.length,onClick:c},E.default.createElement(y.default,{type:"iconbatch-export",className:h.default["btn-icon"]}),E.default.createElement(v.FormattedMessage,{id:"alert-center.export"}))),E.default.createElement(i.default,{span:6},E.default.createElement(C,{placeholder:"search",onSearch:function(e){return l(a,e)},style:{width:264,height:36}})))}function A(e){var t=e.dispatch,a=e.loading,l=e.tasks,n=e.detailItems,u=e.total,i=e.getTask,s=(0,E.useState)([]),m=(0,d.default)(s,2),g=m[0],C=m[1],x=(0,E.useState)("all"),b=(0,d.default)(x,2),A=b[0],w=b[1];function N(e){return S.apply(this,arguments)}function S(){return S=(0,c.default)(r.default.mark(function e(a){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"approvalCenter/fetchTaskDetail",payload:{taskCode:a}});case 2:a?o.default.confirm({title:"Confirm",content:"This task has been claimed by [".concat(n.ownerId,"]\n      Do you confirm to re-claim"),okText:"Sure",cancelText:"Cancel",onOk:function(){D(a)}}):D(a);case 3:case"end":return e.stop()}},e)})),S.apply(this,arguments)}function D(e){t({type:"approvalCenter/claim",payload:{taskCode:e},callback:function(){t({type:"approvalCenter/fetch",payload:{type:A}})}})}function M(e,a){t({type:"approvalCenter/fetch",payload:{taskCode:a,type:e}})}return(0,E.useEffect)(function(){t({type:"approvalCenter/fetch"})},[]),(0,E.useEffect)(function(){if(l&&l.length>0){var e=(0,d.default)(l,1),t=e[0];i(t)}},[l]),E.default.createElement("div",{className:h.default.list},E.default.createElement(T,{changeTab:function(e){w(e),t({type:"approvalCenter/fetch",payload:{type:e}})}}),E.default.createElement(I,{selectedKeys:g,selectedCurrentTask:A,searchTask:M,claimOk:D}),E.default.createElement(p.default,{border:!0,dataSource:l,rowKey:"taskCode",loading:a["approvalCenter/fetch"],rowSelection:{onChange:function(e){C(e)}},pagination:{total:u,showSizeChanger:!0,showTotal:function(e){return"Total ".concat(e," items")},onChange:function(e,a){t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:A}})},onShowSizeChange:function(e,a){t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:A}})}},onRow:function(e){return{onClick:function(){i(e)}}}},E.default.createElement(k,{align:"center",dataIndex:"taskCode",title:"TASK CODE"}),E.default.createElement(k,{align:"center",dataIndex:"classification",title:"CLASSIFICATION"}),E.default.createElement(k,{align:"center",dataIndex:"submitterName",title:"SUBMITTER NAME"}),E.default.createElement(k,{align:"center",dataIndex:"details",title:"DETAILS"}),E.default.createElement(k,{align:"center",dataIndex:"updateDate",title:"UPDATE DATE"}),E.default.createElement(k,{dataIndex:"owner",title:"OWNER"}),E.default.createElement(k,{align:"center",dataIndex:"status",title:"STATUS"}),E.default.createElement(k,{align:"center",dataIndex:"action",title:E.default.createElement(v.FormattedMessage,{id:"alert-center.action"}),render:function(e,t){return E.default.createElement(f.default,{className:h.default.btns},E.default.createElement(y.default,{type:"iconqizhi",className:h.default.icon,title:(0,v.formatMessage)({id:"alert-center.claim"}),onClick:function(){N([t.taskCode])}}))}})))}t.DEFAULT_PAGE_SIZE=b;var w=(0,g.connect)(function(e){var t=e.loading,a=e.approvalCenter,l=a.tasks,n=a.detailItems,r=a.page,c=a.total;return{tasks:l,page:r,total:c,detailItems:n,loading:t.effects}})(A);t.default=w},mR9m:function(e,t,a){e.exports={"list-container":"antd-pro-pages-approval-process-center-index-list-container",list:"antd-pro-pages-approval-process-center-index-list",btns:"antd-pro-pages-approval-process-center-index-btns","btn-icon":"antd-pro-pages-approval-process-center-index-btn-icon",icon:"antd-pro-pages-approval-process-center-index-icon","detail-container":"antd-pro-pages-approval-process-center-index-detail-container","tab-content":"antd-pro-pages-approval-process-center-index-tab-content",fullscreen:"antd-pro-pages-approval-process-center-index-fullscreen","detail-des":"antd-pro-pages-approval-process-center-index-detail-des","fullscreen-icon":"antd-pro-pages-approval-process-center-index-fullscreen-icon","detail-comment":"antd-pro-pages-approval-process-center-index-detail-comment","comment-ul":"antd-pro-pages-approval-process-center-index-comment-ul","comment-box":"antd-pro-pages-approval-process-center-index-comment-box",txt:"antd-pro-pages-approval-process-center-index-txt","comment-commit":"antd-pro-pages-approval-process-center-index-comment-commit"}}}]);