(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"2drZ":function(e,t,a){"use strict";var l=a("g09b"),o=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("bbsP");var d=l(a("/wGt"));a("DZo9");var r=l(a("8z0m"));a("+L6B");var i=l(a("2/Rp"));a("Pwec");var s=l(a("CtXQ"));a("miYZ");var p=l(a("tsqr"));a("y8nQ");var c=l(a("Vl3Y")),u=l(a("2Taf")),f=l(a("vZ4D")),m=l(a("l4Ni")),g=l(a("ujKo")),h=l(a("MhPg"));a("5NDa");var v,y,M,w=l(a("5rEg")),b=o(a("q1tI")),C=a("Hx5s"),D=a("MuoO"),E=a("LLXN"),I=l(a("YOzA")),k=l(a("U+i4")),x=w.default.TextArea,F=function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(0,g.default)(t).apply(this,arguments))}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return b.default.createElement(c.default,{onSubmit:this.handleSubmit},b.default.createElement(c.default.Item,{label:"Name",labelCol:{span:5},wrapperCol:{span:16}},e("name",{rules:[{required:!0,message:"Please input your name!"}]})(b.default.createElement(w.default,{placeholder:""}))),b.default.createElement(c.default.Item,{label:"Description:",labelCol:{span:5},wrapperCol:{span:16}},e("description",{rules:[{required:!0,message:"Please input your description!"}]})(b.default.createElement(x,{rows:4}))))}}]),t}(b.Component),N=c.default.create({})(F),P=(v=(0,D.connect)(function(e){var t=e.approvalDesign;return{modelList:t.data,chooseModelId:t.chooseModelId,modelImage:t.modelImage}}),v((M=function(e){function t(){var e,a;(0,u.default)(this,t);for(var l=arguments.length,o=new Array(l),n=0;n<l;n++)o[n]=arguments[n];return a=(0,m.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(o))),a.state={visible:!1,deleteVisible:!1},a.newFlowChartForm=b.default.createRef(),a.getModelList=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=a.props.dispatch;o({type:"approvalDesign/modelListDatas",payload:{pageNumber:e,pageSize:t},callback:function(e){return a.getModelImage(e)},callback2:l?a.goProcessPage:null})},a.getModelImage=function(e){var t=a.props.dispatch;t({type:"approvalDesign/modelImageDatas",payload:{modelId:e}})},a.createModel=function(e){var t=a.props.dispatch;t({type:"approvalDesign/createModel",payload:e,callback:function(e,t){return a.getModelList(e,t,!0)}})},a.goProcessPage=function(){var e=a.props.chooseModelId,t="/process/modeler.html?modelId=".concat(e);window.location.href=t},a.deleteModel=function(e){var t=a.props.dispatch;t({type:"approvalDesign/deleteModel",payload:e,callback:function(e,t){return a.getModelList(e,t)}})},a.deployModel=function(){var e=a.props,t=e.dispatch,l=e.chooseModelId;t({type:"approvalDesign/deployModel",payload:{modelId:l}})},a.importModel=function(e){var t=a.props.dispatch;t({type:"approvalDesign/importModel",payload:e,callback:function(e,t){return a.getModelList(e,t)}})},a.deleteOpenModel=function(){a.setState({deleteVisible:!0})},a.handleDeleteOk=function(){var e=a.props.chooseModelId,t={modelId:e};a.deleteModel(t),a.setState({deleteVisible:!1})},a.handleCloseModelCancel=function(){a.setState({deleteVisible:!1})},a.importFileStatus=function(e){if("done"===e.file.status){var t=e.file.response.bcjson.items.relativeUrl;a.importModel({filename:t})}else"error"===e.file.status&&p.default.error("".concat(e.file.name," file upload failed."))},a.exportModel=function(){var e=a.props,t=e.dispatch,l=e.chooseModelId;t({type:"approvalDesign/exportModel",payload:{modelId:l,type:"xml"},callback:function(e){return a.downloadHerf(e)}})},a.downloadHerf=function(e){var t=document.createElement("a");t.href="/download?filePath=".concat(e),t.download=!0,t.click()},a.uploadFile=function(e){var t=a.props.dispatch;t({type:"approvalDesign/uploadFile",payload:{param:e}})},a.chooseTab=function(e){if(e!==a.props.chooseModelId){var t=a.props.dispatch;t({type:"approvalDesign/changeModelId",payload:{chooseModelId:e}}),a.getModelImage(e)}},a.AddNewFlowChart=function(){a.newFlowChartForm.current.validateFields(function(e,t){e||(console.log("Received values of form: ",t),a.createModel(t),a.setState({visible:!1}))})},a.showDrawer=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.getModelList("1","10")}},{key:"render",value:function(){var e=this,t=this.props,a=t.modelList,l=t.chooseModelId,o=t.modelImage,p=this.state.deleteVisible;return b.default.createElement(b.Fragment,null,b.default.createElement(C.PageHeaderWrapper,null,b.default.createElement("div",{className:k.default.approvalDesign},b.default.createElement("div",{className:k.default.contentBox},b.default.createElement("div",{className:k.default.leftBox},b.default.createElement(s.default,{type:"file-add",onClick:this.showDrawer,style:{marginRight:"15px",marginTop:"8px",float:"right"}}),b.default.createElement(I.default,{listData:a,chooseId:l,currentId:"id",chooseTab:this.chooseTab,title:"Flow Chart List"})),b.default.createElement("div",{className:k.default.rightBox},b.default.createElement("div",null,b.default.createElement(i.default,{className:"btn_usual",onClick:this.deployModel,type:"primary",icon:"deployment-unit"},(0,E.formatMessage)({id:"systemManagement.flowDesign.flowRelease"})),b.default.createElement(i.default,{className:"btn_usual",onClick:this.goProcessPage,type:"primary",icon:"edit"},(0,E.formatMessage)({id:"systemManagement.flowDesign.flowModify"})),b.default.createElement(i.default,{className:"btn_usual",type:"primary",icon:"delete",onClick:this.deleteOpenModel},(0,E.formatMessage)({id:"systemManagement.flowDesign.flowDelete"})),b.default.createElement(i.default,{className:"btn_usual",onClick:this.exportModel,type:"primary",icon:"export"},(0,E.formatMessage)({id:"systemManagement.flowDesign.flowExport"})),b.default.createElement(r.default,{onChange:function(t){return e.importFileStatus(t)},action:"/upload"},b.default.createElement(i.default,{className:"btn_usual",type:"primary",icon:"import"},(0,E.formatMessage)({id:"systemManagement.flowDesign.flowImport"})))),b.default.createElement("div",null,o?b.default.createElement("img",{src:o,alt:""}):null))),b.default.createElement(d.default,{title:"New Flow Chart",width:500,onClose:this.handleCancel,visible:this.state.visible,bodyStyle:{paddingBottom:80}},b.default.createElement(N,{ref:this.newFlowChartForm}),b.default.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},b.default.createElement(i.default,{onClick:this.handleCancel,style:{marginRight:8}},"Cancel"),b.default.createElement(i.default,{onClick:this.AddNewFlowChart,type:"primary"},"Save"))),b.default.createElement(n.default,{title:"delete",visible:p,onOk:this.handleDeleteOk,onCancel:this.handleCloseModelCancel},b.default.createElement("p",null,"Are you sure delete this model?")))))}}]),t}(b.PureComponent),y=M))||y),L=P;t.default=L},"U+i4":function(e,t,a){e.exports={approvalDesign:"antd-pro-pages-approval-approval-design-approval-design-approvalDesign",contentBox:"antd-pro-pages-approval-approval-design-approval-design-contentBox",leftBox:"antd-pro-pages-approval-approval-design-approval-design-leftBox",rightBox:"antd-pro-pages-approval-approval-design-approval-design-rightBox"}}}]);