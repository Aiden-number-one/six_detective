(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"2Cab":function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=r(a("qIgq")),u=l(a("q1tI")),d=a("Hx5s"),o=r(a("c2Ae")),i=r(a("ifr9")),c=r(a("mR9m"));function s(){var e=(0,u.useState)(null),t=(0,n.default)(e,2),a=t[0],l=t[1],r=(0,u.useState)("all"),s=(0,n.default)(r,2),f=s[0],p=s[1];return u.default.createElement(d.PageHeaderWrapper,null,u.default.createElement("div",{className:c.default["list-container"]},u.default.createElement(i.default,{getTask:function(e){return l(e)},setCurrentTaskType:function(e){return p(e)}}),a&&u.default.createElement(o.default,{task:a,currentTaskType:f})))}},"9ICW":function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("qIgq"));a("7Kak");var u=r(a("9yH6"));a("y8nQ");var d=r(a("Vl3Y"));a("OaEy");var o=r(a("2fM7"));a("5NDa");var i=r(a("5rEg")),c=l(a("q1tI")),s=i.default.TextArea,f=o.default.Option;function p(e){var t=e.detailData,a=e.getFieldDecorator,l=e.isShowForm;return c.default.createElement(c.default.Fragment,null,c.default.createElement(d.default.Item,{label:"Market",labelCol:{span:8},wrapperCol:{span:12}},a("market",{initialValue:t.market})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"EP Code",labelCol:{span:8},wrapperCol:{span:12}},a("epCode",{initialValue:t.epCode})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"EP Name",labelCol:{span:8},wrapperCol:{span:12}},a("epName",{rules:[{required:!!l,message:"Please input epName!"}],initialValue:t.epName})(c.default.createElement(i.default,{disabled:!l}))))}function m(e){var t=e.detailData,a=e.getFieldDecorator,l=e.setRadioCurrentValue,r=e.radioPdValue,n=e.setRadioPdValue,s=e.isShowForm;return c.default.createElement(c.default.Fragment,null,c.default.createElement(d.default.Item,{label:"Market",labelCol:{span:8},wrapperCol:{span:12}},a("market",{initialValue:t.market})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"HKEX DCASS Code",labelCol:{span:8},wrapperCol:{span:12}},a("HKEX DCASS Code",{initialValue:t.hkexDcassCode})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Is CA Code ?",labelCol:{span:8},wrapperCol:{span:12}},a("isCaCode",{rules:[{required:!!s}],initialValue:t.isCaCode})(s?c.default.createElement(u.default.Group,{onChange:function(e){return l(e.target.value)}},c.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),c.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Product code",labelCol:{span:8},wrapperCol:{span:12}},a("Product code",{initialValue:t.productCode})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Product Description",labelCol:{span:8},wrapperCol:{span:12}},a("productDesc",{rules:[{required:!!s,message:"Please input Product Description!"}],initialValue:t.productDesc})(c.default.createElement(i.default,{disabled:!s}))),c.default.createElement(d.default.Item,{label:"Product Category",labelCol:{span:8},wrapperCol:{span:12}},a("productCategory",{rules:[{required:!!s,message:"Please select your Product Category!"}],initialValue:t.productCategory})(s?c.default.createElement(o.default,null,t.productCategoryInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Futures or Option",labelCol:{span:8},wrapperCol:{span:12}},a("contractNature",{rules:[{required:!!s,message:"Please select Futures or Option!"}],initialValue:t.contractNature})(s?c.default.createElement(o.default,null,t.contractNatureInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Product Group",labelCol:{span:8},wrapperCol:{span:12}},a("productGroup",{rules:[{required:!!s,message:"Please select Product Group!"}],initialValue:t.productGroup})(s?c.default.createElement(o.default,null,t.productGroupInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Template Code(Last Trade Day)",labelCol:{span:8},wrapperCol:{span:12}},a("ltdTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Last Trade Day)"}],initialValue:t.ltdTmplCode})(s?c.default.createElement(o.default,null,t.ltdTmplCodeInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Template Code(Position Limit)",labelCol:{span:8},wrapperCol:{span:12}},a("plTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Position Limit)!"}],initialValue:t.plTmplCode})(s?c.default.createElement(o.default,null,t.plTmplCodeInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Template Code(Reportable Limit)",labelCol:{span:8},wrapperCol:{span:12}},a("rlTmplCode",{rules:[{required:!!s,message:"Please select Template Code(Reportable Limit)!"}],initialValue:t.rlTmplCode})(s?c.default.createElement(o.default,null,t.rlTmplCodeInit.split(",").map(function(e){return c.default.createElement(f,{value:e,key:e},e)})):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Is Calculate PD ?",labelCol:{span:8},wrapperCol:{span:12}},a("isCalculatePd",{rules:[{required:!!s}],initialValue:t.isCalculatePd})(s?c.default.createElement(u.default.Group,{onChange:function(e){return n(e.target.value)},disabled:!s},c.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),c.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):c.default.createElement(i.default,{disabled:!0}))),"Yes"===r?c.default.createElement(c.default.Fragment,null,c.default.createElement(d.default.Item,{label:"Size Factor for Calculate PD",labelCol:{span:8},wrapperCol:{span:12}},a("sizeFactor",{rules:[{required:!!s,message:"Please input Size Factor for Calculate PD!"}],initialValue:t.sizeFactor})(c.default.createElement(i.default,{type:"number",disabled:!s}))),c.default.createElement(d.default.Item,{label:"Weighting Factor for Calculate PD",labelCol:{span:8},wrapperCol:{span:12}},a("weightFactor",{rules:[{required:!!s,message:"Please input Weighting Factor for Calculate PD!"}],initialValue:t.weightFactor})(c.default.createElement(i.default,{type:"number",disabled:!s})))):null)}function C(e){var t=e.detailData,a=e.getFieldDecorator,l=e.setRadioCurrentValue,r=e.isShowForm;return c.default.createElement(c.default.Fragment,null,c.default.createElement(d.default.Item,{label:"Market",labelCol:{span:8},wrapperCol:{span:12}},a("market",{initialValue:t.market})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"HKEX DCASS Code",labelCol:{span:8},wrapperCol:{span:12}},a("hkexDcassCode",{initialValue:t.hkexDcassCode})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Is CA Code ?",labelCol:{span:8},wrapperCol:{span:12}},a("isCaCode",{initialValue:t.isCaCode})(r?c.default.createElement(u.default.Group,{onChange:function(e){return l(e.target.value)}},c.default.createElement(u.default,{style:{display:"inline"},value:"Yes"},"yes"),c.default.createElement(u.default,{style:{display:"inline"},value:"No"},"no")):c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Original Product code",labelCol:{span:8},wrapperCol:{span:12}},a("originalProductCode",{initialValue:t.originalProductCode})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Effective Date",labelCol:{span:8},wrapperCol:{span:12}},a("effectiveDate",{initialValue:t.effectiveDate})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Expiry Date\xa0",labelCol:{span:8},wrapperCol:{span:12}},a("expiryDate",{initialValue:t.expiryDate})(c.default.createElement(i.default,{disabled:!0}))),c.default.createElement(d.default.Item,{label:"Remark\xa0",labelCol:{span:8},wrapperCol:{span:12}},a("remark",{rules:[{required:!!r,message:"Please input Remark!"}],initialValue:t.remark})(r?c.default.createElement(s,null):c.default.createElement(i.default,{disabled:!0}))))}function g(e){var t=e.form,a=e.detailItem,l=e.task,r=t.getFieldDecorator,u=(0,c.useState)("No"),o=(0,n.default)(u,2),i=o[0],s=o[1],f=(0,c.useState)("Yes"),g=(0,n.default)(f,2),E=g[0],v=g[1],y=l&&a&&a[0]||{},b=y&&y.alertType,k=y&&y.isStarter;return console.log("alertType----\x3e",b,y,k),console.log("radioCurrentValue----\x3e",i),(0,c.useEffect)(function(){s(y.isCaCode)},[y.isCaCode]),(0,c.useEffect)(function(){v(y.isCalculatePd)},[y.isCalculatePd]),c.default.createElement(c.default.Fragment,null,y&&c.default.createElement(d.default,null,"301"===b&&c.default.createElement(p,{detailData:y,getFieldDecorator:r,isShowForm:k}),"302"===b&&("No"===i?c.default.createElement(m,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,radioPdValue:E,setRadioPdValue:v,isShowForm:k}):c.default.createElement(C,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,isShowForm:k})),"303"===b&&("Yes"===i?c.default.createElement(C,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,isShowForm:k}):c.default.createElement(m,{detailData:y,getFieldDecorator:r,setRadioCurrentValue:s,radioPdValue:E,setRadioPdValue:v,isShowForm:k}))))}var E=d.default.create()(g);t.default=E},BCHC:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=C,a("Q9mQ");var r=l(a("diRs"));a("14J3");var n=l(a("BMrR"));a("jCWc");var u=l(a("kPKH"));a("tU7J");var d=l(a("wFql")),o=l(a("q1tI")),i=a("LLXN"),c=l(a("wd/R")),s=l(a("BN5G")),f=d.default.Paragraph,p=d.default.Text;function m(e){var t=e.attachments;return o.default.createElement(r.default,{placement:"bottomRight",title:o.default.createElement(i.FormattedMessage,{id:"alert-center.attachement-list"}),content:o.default.createElement(n.default,{style:{padding:"6px 14px",width:240,maxHeight:150,overflowY:"auto"}},t.map(function(e,t){var a=e.name,l=e.url;return o.default.createElement(u.default,{key:l},o.default.createElement(p,{ellipsis:!0,style:{width:"100%"},title:a},o.default.createElement("a",{download:!0,href:"/download?filePath=".concat(l),style:{marginBottom:20}},t+1,". ",a)))}))},o.default.createElement(s.default,{type:"iconbiezhen"}),t.length)}function C(e){var t=e.comment,a=t.id,l=t.commentTime,r=t.commentContent,d=t.commentUserName,i=t.attachment,s=i?i.split(","):[],p=(0,c.default)(l).format("DD-MMM-YYYY HH:mm:ss");return s=s.map(function(e){var t=e.split("/"),a=t.slice(-1)[0];return{name:a,url:e}}),o.default.createElement("li",{key:a},o.default.createElement(n.default,null,o.default.createElement(u.default,{span:18,style:{color:"#0D87D4"}},p),o.default.createElement(u.default,{span:5,offset:1,align:"right"},s.length>0&&o.default.createElement(m,{attachments:s}))),o.default.createElement(n.default,null,o.default.createElement(f,{ellipsis:{rows:3,expandable:!0}},r,"(",d,")")))}},GybK:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmModel=u,a("2qtc");var r=l(a("kLXV")),n=l(a("q1tI"));function u(e){var t=e.title,a=e.confirmVisible,l=e.comfirm,u=e.content,d=e.closeModel;return n.default.createElement(r.default,{title:t,visible:a,onOk:l,onCancel:d},n.default.createElement("p",null,u))}},MAxD:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,a("Q9mQ");var n=r(a("diRs"));a("+L6B");var u=r(a("2/Rp")),d=r(a("qIgq")),o=l(a("q1tI")),i=r(a("H7wn")),c=a("pAS7");function s(e){var t=e.postComment,a=(0,o.useState)(!1),l=(0,d.default)(a,2),r=l[0],s=l[1];function f(e){s(!1),t(e)}return o.default.createElement(n.default,{visible:r,placement:"topRight",trigger:"click",content:o.default.createElement("ul",{className:i.default.phase},c.PHASES.map(function(e,t){return o.default.createElement("li",{key:e,onClick:function(){return f(e)}},t+1,". ",e)}))},o.default.createElement(u.default,{type:"primary",onClick:function(){return s(!0)}},"Phase"))}},Qmke:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=l(a("q1tI")),n=a("LLXN"),u=l(a("BN5G")),d=l(a("mR9m"));function o(e){var t=e.attachments,a=e.onRemove,l=e.onRemoveAll;return r.default.createElement("div",{className:d.default["up-attachments"]},r.default.createElement("div",{className:d.default["file-desc"]},r.default.createElement("span",null,(0,n.formatMessage)({id:"alert-center.attachment-des"},{count:t.length,size:(t.reduce(function(e,t){return e+t.size},0)/1024).toFixed(2)})),r.default.createElement("span",{onClick:l},(0,n.formatMessage)({id:"alert-center.delete-all"}))),r.default.createElement("ul",null,t.map(function(e){return r.default.createElement("li",{key:e.uid},r.default.createElement("span",{className:d.default["icon-btns"]},r.default.createElement("a",{download:!0,href:"/download?filePath=".concat(e.url)},r.default.createElement(u.default,{type:"icondownload",className:d.default.icon})),r.default.createElement(u.default,{type:"icondelete",className:d.default.icon,onClick:function(){return a(e)}})),r.default.createElement("span",null,e.name))})))}},c2Ae:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DZo9");var n=r(a("8z0m"));a("T2oS");var u=r(a("W9HT"));a("jCWc");var d=r(a("kPKH"));a("bbsP");var o=r(a("/wGt"));a("+L6B");var i=r(a("2/Rp"));a("7Kak");var c=r(a("9yH6")),s=r(a("p0pE")),f=r(a("gWZ8"));a("miYZ");var p=r(a("tsqr")),m=r(a("qIgq"));a("14J3");var C=r(a("BMrR"));a("R9oj");var g=r(a("ECub"));a("5NDa");var E=r(a("5rEg"));a("Znn+");var v=r(a("ZTPi")),y=l(a("q1tI")),b=a("MuoO"),k=r(a("BN5G")),h=a("GybK"),T=r(a("mR9m")),w=r(a("MAxD")),P=r(a("Qmke")),S=r(a("BCHC")),I=r(a("vzoP")),x=r(a("9ICW")),D=v.default.TabPane,N=E.default.TextArea;function F(e){var t=e.className,a=void 0===t?"":t,l=e.style,r=void 0===l?{}:l;return y.default.createElement(C.default,{className:a,style:r,type:"flex",align:"middle",justify:"center"},y.default.createElement(g.default,null))}function R(e){var t=e.dispatch,a=e.loading,l=e.task,r=e.detailItems,g=e.taskGroup,E=e.submitRadioList,b=e.taskHistoryList,R=e.logList,A=e.currentTaskType,M=(0,y.useState)(!1),V=(0,m.default)(M,2),L=V[0],q=V[1],G=(0,y.useState)(!1),H=(0,m.default)(G,2),O=H[0],Y=H[1],j=(0,y.useState)(""),_=(0,m.default)(j,2),B=_[0],z=_[1],K=(0,y.useState)(""),U=(0,m.default)(K,2),W=U[0],X=U[1],J=(0,y.useState)(""),Q=(0,m.default)(J,2),Z=Q[0],$=Q[1],ee=(0,y.useState)(!1),te=(0,m.default)(ee,2),ae=te[0],le=te[1],re=(0,y.useState)(!1),ne=(0,m.default)(re,2),ue=ne[0],de=ne[1],oe=(0,y.useState)([]),ie=(0,m.default)(oe,2),ce=ie[0],se=ie[1],fe=y.default.createRef(),pe=function(e){return e/1024/1024<5};function me(e){if(X(e),"reject"!==e){if("submit"===e){var t=!0;if(fe.current.validateFields(function(e){t=!e}),!t)return}if(!g||g.nextRelateNo)return g?(Y(!0),void Ee()):void p.default.error("submit failure");Ce(e)}else le(!0)}function Ce(e){var a={},n=!0,u={taskCode:l.taskCode.toString(),type:e,userId:B.toString(),comment:Z,attachment:ce.map(function(e){return e.url}).join(",")};"submit"===e&&fe.current.validateFields(function(e,t){var l=r[0].alertType;n=!e,e||("301"===l?a={epName:t.epName}:"302"===l?a="No"===t.isCaCode?{isCaCode:t.isCaCode,productDesc:t.productDesc,productCategory:t.productCategory,contractNature:t.contractNature,productGroup:t.productGroup,ltdTmplCode:t.ltdTmplCode,plTmplCode:t.plTmplCode,rlTmplCode:t.rlTmplCode,pdCalculateFlag:t.isCalculatePd,sizeFactor:"Yes"===t.isCalculatePd?t.sizeFactor.toString():"",weightFactor:"Yes"===t.isCalculatePd?t.weightFactor.toString():""}:{isCaCode:t.isCaCode,remark:t.remark}:"303"===l&&(a="Yes"===t.isCaCode?{isCaCode:t.isCaCode,remark:t.remark}:{isCaCode:t.isCaCode,productDesc:t.productDesc,productCategory:t.productCategory,contractNature:t.contractNature,productGroup:t.productGroup,ltdTmplCode:t.ltdTmplCode,plTmplCode:t.plTmplCode,rlTmplCode:t.rlTmplCode,pdCalculateFlag:t.isCalculatePd,sizeFactor:"Yes"===t.isCalculatePd?t.sizeFactor.toString():"",weightFactor:"Yes"===t.isCalculatePd?t.weightFactor.toString():""}),Object.assign(u,a),console.log("Received values of form: ",t,a,u))}),"reject"===e&&le(!1),n&&t({type:"approvalCenter/approveAndReject",payload:u,callback:function(){t({type:"approvalCenter/fetch",payload:{type:A}}),se([])}}),Y(!1)}function ge(){console.log("comment----",Z),t({type:"approvalCenter/setTaskWithdraw",payload:{taskCode:l.taskCode,comment:Z},callback:function(){t({type:"approvalCenter/fetch",payload:{type:A,taskCode:l.taskCode}})}}),de(!1)}function Ee(){t({type:"approvalCenter/fetchUserList",payload:{operType:"queryByAlertGroupId",groupId:g.nextRelateNo}})}function ve(){var e={},a=!0,n={taskCode:l.taskCode.toString()};fe.current.validateFields(function(t,l){var u=r[0].alertType;a=!t,t||("301"===u?e={epName:l.epName}:"302"===u?e="No"===l.isCaCode?{isCaCode:l.isCaCode,productDesc:l.productDesc,productCategory:l.productCategory,contractNature:l.contractNature,productGroup:l.productGroup,ltdTmplCode:l.ltdTmplCode,plTmplCode:l.plTmplCode,rlTmplCode:l.rlTmplCode,pdCalculateFlag:l.isCalculatePd,sizeFactor:"Yes"===l.isCalculatePd?l.sizeFactor.toString():"",weightFactor:"Yes"===l.isCalculatePd?l.weightFactor.toString():""}:{isCaCode:l.isCaCode,remark:l.remark}:"303"===u&&(e="Yes"===l.isCaCode?{isCaCode:l.isCaCode,remark:l.remark}:{isCaCode:l.isCaCode,productDesc:l.productDesc,productCategory:l.productCategory,contractNature:l.contractNature,productGroup:l.productGroup,ltdTmplCode:l.ltdTmplCode,plTmplCode:l.plTmplCode,rlTmplCode:l.rlTmplCode,pdCalculateFlag:l.isCalculatePd,sizeFactor:"Yes"===l.isCalculatePd?l.sizeFactor.toString():"",weightFactor:"Yes"===l.isCalculatePd?l.weightFactor.toString():""}),Object.assign(n,e),console.log("Received values of form: ",l,e,n))}),a&&t({type:"approvalCenter/saveTask",payload:n})}function ye(e){var t=(0,f.default)(e.fileList);t=t.slice(-5),t=t.map(function(e){var t=e.response||{},a=t.bcjson,l=a||{},r=l.flag,n=l.items,u=void 0===n?{}:n;return"1"===r&&u?(0,s.default)({url:u.relativeUrl},e):e}),console.log("fileList---\x3e",t),se(t)}function be(e){se(ce.filter(function(t){return t.uid!==e.uid}))}return(0,y.useEffect)(function(){l&&t({type:"approvalCenter/fetchTaskDetail",payload:{taskCode:l.taskCode}})},[l]),(0,y.useEffect)(function(){l&&t({type:"approvalCenter/featchTaskGroup",payload:{taskCode:l.taskCode}})},[l]),(0,y.useEffect)(function(){l&&t({type:"approvalCenter/getApprovalTaskHistory",payload:{taskCode:l.taskCode}})},[l]),y.default.createElement(y.default.Fragment,null,y.default.createElement(h.ConfirmModel,{title:"CONFIRM",content:"Do you comfirm to reject this task?",closeModel:function(){return le(!1)},confirmVisible:ae,comfirm:function(){return Ce(W)}}),y.default.createElement(h.ConfirmModel,{title:"CONFIRM",content:"Do you comfirm to withdraw this task?",closeModel:function(){return de(!1)},confirmVisible:ue,comfirm:ge}),y.default.createElement(C.default,{className:T.default["detail-container"],gutter:16},y.default.createElement(d.default,{span:16,className:L?T.default.fullscreen:""},y.default.createElement(v.default,{hideAdd:!0,className:T.default["detail-des"],defaultActiveKey:"1",tabBarExtraContent:y.default.createElement(k.default,{type:L?"iconfullscreen-exit":"iconfull-screen",className:T.default["fullscreen-icon"],onClick:function(){return q(!L)}})},y.default.createElement(D,{className:T.default["tab-content"],closable:!1,tab:"Task Detail",key:""},y.default.createElement(x.default,{ref:fe,saveTask:ve,detailItem:r,task:l}),y.default.createElement(o.default,{title:"Assign to",width:500,visible:O,onClose:function(){return Y(!1)},bodyStyle:{paddingBottom:80}},y.default.createElement(c.default.Group,{options:E,onChange:function(e){return z(e.target.value)},value:B}),y.default.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},y.default.createElement(i.default,{onClick:function(){return Ce(W)},type:"primary"},"Save"),y.default.createElement(i.default,{onClick:function(){return Y(!1)},style:{marginRight:12}},"Cancel")))))),y.default.createElement(d.default,{span:8},y.default.createElement(v.default,{defaultActiveKey:"1",className:T.default["detail-comment"]},y.default.createElement(D,{tab:"Approval History",key:"1"},y.default.createElement(u.default,{spinning:a["approvalCenter/getApprovalTaskHistory"]},b.length>0?y.default.createElement("ul",{className:T.default["comment-list"]},b.map(function(e){return y.default.createElement(S.default,{comment:e,key:e.id})})):y.default.createElement(F,{className:T.default["comment-list"]})),"his"!==A?y.default.createElement("div",{className:T.default["comment-box"]},y.default.createElement(N,{placeholder:"COMMENT",className:T.default.txt,value:Z,onChange:function(e){var t=e.target.value;return $(t)}}),y.default.createElement(C.default,{className:T.default["comment-commit"],type:"flex",align:"middle",justify:"space-between"},y.default.createElement(d.default,{span:4},y.default.createElement(w.default,{postComment:function(e){return $("".concat(Z).concat(e," "))}})),y.default.createElement(d.default,{span:20,align:"right"},y.default.createElement(k.default,{type:"iconicon_withdraw1",onClick:function(){return de(!0)},className:T.default["btn-icon"],style:{marginRight:"8px"}}),y.default.createElement(n.default,{action:"/upload",showUploadList:!1,beforeUpload:function(e){return pe(e.size)},fileList:ce,onChange:ye},y.default.createElement(k.default,{type:"iconbiezhen",style:{cursor:"pointer",marginRight:4},title:"please select a file"}),ce.length>0&&ce.length),r[0]&&r[0].isStarter?y.default.createElement(y.default.Fragment,null,y.default.createElement(i.default,{type:"primary",onClick:ve},"Save"),y.default.createElement(i.default,{type:"primary",onClick:function(){return me("submit")}},"Submit")):y.default.createElement(y.default.Fragment,null,y.default.createElement(i.default,{type:"primary",onClick:function(){return me("reject")}},"Reject"),y.default.createElement(i.default,{type:"primary",onClick:function(){return me("pass")}},"Approve")))),!!ce.length&&y.default.createElement(P.default,{attachments:ce,onRemove:be,onRemoveAll:function(){return se([])}})):null),y.default.createElement(D,{tab:"Task Lifecycle",key:"2"},y.default.createElement(u.default,{spinning:a["approvalCenter/getApprovalTaskHistory"]},y.default.createElement("div",{style:{height:370,overflowY:"auto",padding:"0 18px"}},R.length>0?R.map(function(e){return y.default.createElement(I.default,{log:e,key:e.id})}):y.default.createElement(F,{className:T.default["comment-list"],style:{height:370}}))))))))}var A=(0,b.connect)(function(e){var t=e.loading,a=e.approvalCenter,l=a.detailItems,r=a.userList,n=a.submitRadioList,u=a.taskHistoryList,d=a.logList,o=a.taskGroup;return{detailItems:l,userList:r,submitRadioList:n,taskHistoryList:u,logList:d,taskGroup:o,loading:t.effects}})(R);t.default=A},ifr9:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_PAGE_SIZE=t.DEFAULT_PAGE=void 0;var n=r(a("d6i3"));a("bbsP");var u=r(a("/wGt"));a("+L6B");var d=r(a("2/Rp")),o=r(a("1l/V")),i=r(a("qIgq"));a("14J3");var c=r(a("BMrR"));a("jCWc");var s=r(a("kPKH"));a("7Kak");var f=r(a("9yH6"));a("5NDa");var p=r(a("5rEg"));a("g9YV");var m=r(a("wCAj")),C=l(a("q1tI")),g=a("MuoO"),E=a("LLXN"),v=r(a("wd/R")),y=a("8Br5"),b=r(a("BN5G")),k=a("GybK"),h=a("+n12"),T=r(a("mR9m")),w=r(a("H7wn")),P=m.default.Column,S=p.default.Search,I=1;t.DEFAULT_PAGE=I;var x=10;function D(e){var t=e.changeTab;return C.default.createElement(c.default,{className:T.default.btns,style:{marginBottom:"15px"}},C.default.createElement(s.default,{span:12},C.default.createElement(f.default.Group,{defaultValue:"my",buttonStyle:"solid",onChange:function(e){return t(e.target.value)}},C.default.createElement(f.default.Button,{value:"all"},"All Tasks"),C.default.createElement(f.default.Button,{value:"my"},"My Tasks"),C.default.createElement(f.default.Button,{value:"his"},"History"))))}function N(e){var t=e.selectedKeys,a=e.selectedCurrentTask,l=e.searchTask,r=e.claimOk,n=e.setVisible,u=e.urlTaskCode,d=e.exportAlert;return C.default.createElement(c.default,{className:w.default.btns},C.default.createElement(s.default,{span:12},"his"!==a&&C.default.createElement(C.default.Fragment,null,C.default.createElement("button",{type:"button",disabled:!t.length,onClick:function(){return r(t)}},C.default.createElement(b.default,{type:"iconqizhi",className:w.default["btn-icon"]}),C.default.createElement(E.FormattedMessage,{id:"alert-center.claim"})),C.default.createElement("button",{type:"button",disabled:!t.length,onClick:function(){return n(!0)}},C.default.createElement(b.default,{type:"iconicon_assign-copy",className:w.default["btn-icon"]}),"Assign")),C.default.createElement("button",{type:"button",disabled:!t.length,onClick:d},C.default.createElement(b.default,{type:"iconexport",className:w.default["btn-icon"]}),C.default.createElement(E.FormattedMessage,{id:"alert-center.export"}))),C.default.createElement(s.default,{span:6},C.default.createElement(S,{placeholder:"search",defaultValue:u,onSearch:function(e){return l(a,e)},style:{width:264,height:36}})))}function F(e){var t=e.dispatch,a=e.loading,l=e.tasks,r=e.detailItems,s=e.assignRadioList,p=e.total,g=e.getTask,w=e.setCurrentTaskType,S=(0,C.useState)([]),I=(0,i.default)(S,2),x=I[0],F=I[1],R=(0,C.useState)("my"),A=(0,i.default)(R,2),M=A[0],V=A[1],L=(0,C.useState)("1"),q=(0,i.default)(L,2),G=q[0],H=q[1],O=(0,C.useState)("1"),Y=(0,i.default)(O,2),j=Y[0],_=Y[1],B=(0,C.useState)(!1),z=(0,i.default)(B,2),K=z[0],U=z[1],W=(0,C.useState)(""),X=(0,i.default)(W,2),J=X[0],Q=X[1],Z=(0,C.useState)(!1),$=(0,i.default)(Z,2),ee=$[0],te=$[1],ae=(0,C.useState)(""),le=(0,i.default)(ae,2),re=le[0],ne=le[1],ue=(0,h.GetQueryString)("taskCode");function de(e){return oe.apply(this,arguments)}function oe(){return oe=(0,o.default)(n.default.mark(function e(a){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"approvalCenter/fetchTaskDetail",payload:{taskCode:a}});case 2:r[0].ownerId?(ne(a),te(!0)):ie(a);case 3:case"end":return e.stop()}},e)})),oe.apply(this,arguments)}function ie(e){t({type:"approvalCenter/claim",payload:{taskCode:e},callback:function(){te(!1),t({type:"approvalCenter/fetch",payload:{type:M}})}})}function ce(e){U(!1),t({type:"approvalCenter/setTaskAssign",payload:{taskCode:e,userId:J},callback:function(){Q(""),t({type:"approvalCenter/fetch",payload:{type:M}})}})}function se(e,a){t({type:"approvalCenter/fetch",payload:{taskCode:a,type:e}})}return(0,C.useEffect)(function(){t({type:"approvalCenter/fetch",payload:{type:M,taskCode:ue}}),t({type:"approvalCenter/getUserListByUserId",payload:{}})},[]),(0,C.useEffect)(function(){if(l&&l.length>0){var e=(0,i.default)(l,1),t=e[0];g(t),_(t),w(M)}else g(!1)},[l]),C.default.createElement("div",{className:T.default.list},C.default.createElement(k.ConfirmModel,{title:"CONFIRM",content:"This task has been claimed by [".concat(r[0]&&r[0].ownerId,"]\n        Do you confirm to re-claim"),closeModel:function(){return te(!1)},confirmVisible:ee,comfirm:function(){return ie(re)}}),C.default.createElement(u.default,{title:"Assign to",width:500,visible:K,onClose:function(){return U(!1)},bodyStyle:{paddingBottom:80}},C.default.createElement(f.default.Group,{options:s,onChange:function(e){return Q(e.target.value)},value:J}),C.default.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},C.default.createElement(d.default,{onClick:function(){return ce(x)},type:"primary"},"Save"),C.default.createElement(d.default,{onClick:function(){return U(!1)},style:{marginRight:12}},"Cancel"))),C.default.createElement(D,{changeTab:function(e){V(e),w(e),t({type:"approvalCenter/fetch",payload:{type:e}})}}),C.default.createElement(N,{selectedKeys:x,selectedCurrentTask:M,searchTask:se,claimOk:ie,setTaskAssign:ce,setVisible:U,urlTaskCode:ue}),C.default.createElement(m.default,{border:!0,dataSource:l,rowKey:"taskCode",loading:a["approvalCenter/fetch"],rowClassName:function(e){return e.taskCode===j.taskCode?"active":""},rowSelection:{onChange:function(e){F(e)}},pagination:{total:p,showSizeChanger:!0,showTotal:function(e){return"Page ".concat(G," of ").concat(Math.ceil(e/10).toString())},onChange:function(e,a){H(e),t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:M}})},onShowSizeChange:function(e,a){H(e),t({type:"approvalCenter/fetch",payload:{page:e,pageSize:a,type:M}})}},onRow:function(e){return{onClick:function(){g(e),_(e)}}}},C.default.createElement(P,{align:"center",dataIndex:"taskCode",title:"TASK CODE"}),C.default.createElement(P,{align:"center",dataIndex:"classification",title:"CLASSIFICATION"}),C.default.createElement(P,{align:"center",dataIndex:"submitterName",title:"SUBMITTER NAME"}),C.default.createElement(P,{align:"center",dataIndex:"details",title:"DETAILS"}),C.default.createElement(P,{align:"center",dataIndex:"updateDate",title:"UPDATE DATE",render:function(e,t){return(0,v.default)(t.updateDate).format(y.timestampFormat)}}),C.default.createElement(P,{dataIndex:"owner",title:"OWNER"}),C.default.createElement(P,{align:"center",dataIndex:"statusDesc",title:"STATUS"}),"his"!==M?C.default.createElement(P,{align:"center",dataIndex:"action",title:C.default.createElement(E.FormattedMessage,{id:"alert-center.actions"}),render:function(e,t){return C.default.createElement(c.default,{className:T.default.btns},C.default.createElement(b.default,{type:"iconqizhi",className:T.default.icon,title:(0,E.formatMessage)({id:"alert-center.claim"}),onClick:function(){de([t.taskCode])}}))}}):null))}t.DEFAULT_PAGE_SIZE=x;var R=(0,g.connect)(function(e){var t=e.loading,a=e.approvalCenter,l=a.tasks,r=a.detailItems,n=a.assignRadioList,u=a.page,d=a.total;return{tasks:l,page:u,total:d,detailItems:r,assignRadioList:n,loading:t.effects}})(F);t.default=R},mR9m:function(e,t,a){e.exports={"list-container":"antd-pro-pages-approval-process-center-index-list-container",list:"antd-pro-pages-approval-process-center-index-list",btns:"antd-pro-pages-approval-process-center-index-btns","btn-icon":"antd-pro-pages-approval-process-center-index-btn-icon",icon:"antd-pro-pages-approval-process-center-index-icon","detail-container":"antd-pro-pages-approval-process-center-index-detail-container","tab-content":"antd-pro-pages-approval-process-center-index-tab-content",fullscreen:"antd-pro-pages-approval-process-center-index-fullscreen",ListBox:"antd-pro-pages-approval-process-center-index-ListBox",ListItem:"antd-pro-pages-approval-process-center-index-ListItem","detail-des":"antd-pro-pages-approval-process-center-index-detail-des","fullscreen-icon":"antd-pro-pages-approval-process-center-index-fullscreen-icon","detail-comment":"antd-pro-pages-approval-process-center-index-detail-comment","comment-list":"antd-pro-pages-approval-process-center-index-comment-list","loading-more":"antd-pro-pages-approval-process-center-index-loading-more","comment-box":"antd-pro-pages-approval-process-center-index-comment-box",txt:"antd-pro-pages-approval-process-center-index-txt","comment-commit":"antd-pro-pages-approval-process-center-index-comment-commit","up-attachments":"antd-pro-pages-approval-process-center-index-up-attachments","file-desc":"antd-pro-pages-approval-process-center-index-file-desc"}},pAS7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PHASES=void 0;var l=["All the data is problematic.","Data correct,can be turned off.","Remember to download all the attachments.","Statistics are collected every Friday.","Emai me before you turn off alert."];t.PHASES=l},vzoP:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=c,a("14J3");var r=l(a("BMrR"));a("jCWc");var n=l(a("kPKH"));a("tU7J");var u=l(a("wFql")),d=l(a("q1tI")),o=l(a("wd/R")),i=u.default.Paragraph;function c(e){var t=e.log,a=t.operateTime,l=t.operateMsg,u=(0,o.default)(a).format("DD-MMM-YYYY HH:mm:ss");return d.default.createElement(r.default,null,d.default.createElement(n.default,{span:11},u),d.default.createElement(n.default,{span:12,offset:1},d.default.createElement(i,{ellipsis:{rows:3,expandable:!0}},l)))}}}]);