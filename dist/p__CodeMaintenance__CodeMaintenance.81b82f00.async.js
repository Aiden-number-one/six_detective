(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"3rS4":function(e,t,a){"use strict";var n=a("g09b"),d=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=n(a("kLXV")),i=n(a("jehZ"));a("bbsP");var c=n(a("/wGt"));a("DjyN");var l=n(a("NUBc"));a("g9YV");var m=n(a("wCAj"));a("+L6B");var s=n(a("2/Rp"));a("y8nQ");var r=n(a("Vl3Y"));a("5NDa");var u,f,p,I=n(a("5rEg")),g=n(a("2Taf")),C=n(a("vZ4D")),h=n(a("l4Ni")),N=n(a("ujKo")),y=n(a("MhPg")),b=d(a("q1tI")),v=a("Hx5s"),S=a("MuoO"),M=a("LLXN"),E=n(a("RR/9")),L=function(e){function t(){var e,a;(0,g.default)(this,t);for(var n=arguments.length,d=new Array(n),o=0;o<n;o++)d[o]=arguments[o];return a=(0,h.default)(this,(e=(0,N.default)(t)).call.apply(e,[this].concat(d))),a.state={},a}return(0,y.default)(t,e),(0,C.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.codeId,n=t.dictItemId,d=t.dictItemIdName,o=t.sortNo;return b.default.createElement("div",null,b.default.createElement(r.default,{layout:"inline",className:E.default.formWrap},b.default.createElement(r.default.Item,{label:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.codeID"})},e("codeId",{initialValue:a||void 0})(b.default.createElement(I.default,{className:E.default.inputValue,disabled:!0}))),b.default.createElement(r.default.Item,{label:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.subitemID"})},e("dictItemId",{initialValue:n||void 0})(b.default.createElement(I.default,{className:E.default.inputValue}))),b.default.createElement(r.default.Item,{label:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.subitemName"})},e("dictItemIdName",{initialValue:d||void 0})(b.default.createElement(I.default,{className:E.default.inputValue}))),b.default.createElement(r.default.Item,{label:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.sequence"})},e("sortNo",{initialValue:o||void 0})(b.default.createElement(I.default,{className:E.default.inputValue})))))}}]),t}(b.Component),V=r.default.create({})(L),k=(u=(0,S.connect)(function(e){var t=e.codeList,a=e.loading;return{loading:a.effects,getCodeListData:t.data,getCodeItemListData:t.itemData}}),u((p=function(e){function t(){var e,a;(0,g.default)(this,t);for(var n=arguments.length,d=new Array(n),o=0;o<n;o++)d[o]=arguments[o];return a=(0,h.default)(this,(e=(0,N.default)(t)).call.apply(e,[this].concat(d))),a.state={codeVisible:!1,updateCodeItemVisible:!1,deleteCodeItemVisible:!1,itemNameValue:"",columns:[{title:(0,M.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index"},{title:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.subitemID"}),dataIndex:"dictItemId",key:"dictItemId"},{title:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.subitemName"}),dataIndex:"dictItemIdName",key:"dictItemIdName"},{title:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.sequence"}),dataIndex:"sortNo",key:"sortNo"},{title:(0,M.formatMessage)({id:"app.common.operation"}),dataIndex:"operation",key:"operation",render:function(e,t,n,d){return b.default.createElement("span",{className:E.default.operation},b.default.createElement("a",{href:"#",onClick:function(){a.updateCode(e,t,n,d)}},(0,M.formatMessage)({id:"app.common.modify"})),b.default.createElement("a",{href:"#",onClick:function(){a.deleteCodeItem(e,t)}},(0,M.formatMessage)({id:"app.common.delete"})))}}],codeColumns:[{title:(0,M.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index"},{title:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.codeID"}),dataIndex:"codeId",key:"codeId"},{title:(0,M.formatMessage)({id:"systemManagement.codeMaintenance.codeName"}),dataIndex:"codeName",key:"codeName"}],page:{pageNumber:1,pageSize:10},codeId:"",itemPage:{pageNumber:"1",pageSize:"10"},updateCodeItemParams:{codeId:"",dictItemId:"",dictItemIdName:"",sortNo:""}},a.codeFormRef=b.default.createRef(),a.addCode=function(){a.setState({codeVisible:!0})},a.codeConfirm=function(){var e=a.props.dispatch;a.codeFormRef.current.validateFields(function(t,n){var d={codeId:a.state.codeId,dictItemId:n.dictItemId,dictItemIdName:n.dictItemIdName,sortNo:n.sortNo};e({type:"codeList/addCodeItem",payload:d,callback:function(){a.queryCodeItemList()}})}),a.setState({codeVisible:!1})},a.codeCancel=function(){a.setState({codeVisible:!1})},a.handleChange=function(){},a.updateCode=function(e,t){var n={codeId:"".concat(a.state.codeId),dictItemId:t.dictItemId,dictItemIdName:t.dictItemIdName,sortNo:t.sortNo};a.setState({updateCodeItemVisible:!0,updateCodeItemParams:n})},a.updateCodeItemConfirm=function(){var e=a.props.dispatch;a.codeFormRef.current.validateFields(function(t,n){var d={codeId:a.state.codeId,dictItemId:a.state.updateCodeItemParams.dictItemId,updDictItemId:n.dictItemId,dictItemIdName:n.dictItemIdName,sortNo:n.sortNo};e({type:"codeList/updateCodeItem",payload:d,callback:function(){a.queryCodeItemList()}})}),a.setState({updateCodeItemVisible:!1})},a.updateCodeItemCancel=function(){a.setState({updateCodeItemVisible:!1})},a.deleteCodeItem=function(e,t){var n={dictItemId:t.dictItemId};a.setState({deleteCodeItemVisible:!0,updateCodeItemParams:n})},a.deleteCodeItemConfirm=function(){var e=a.props.dispatch,t={codeId:a.state.codeId,dictItemId:a.state.updateCodeItemParams.dictItemId};e({type:"codeList/deleteCodeItem",payload:t,callback:function(){a.queryCodeItemList(),a.setState({deleteCodeItemVisible:!1})}})},a.deleteCodeItemCancel=function(){a.setState({deleteCodeItemVisible:!1})},a.setServer=function(){},a.handleSubmit=function(){},a.queryCodeList=function(){var e=a.props.dispatch,t=a.state.page,n={pageNumber:t.pageNumber.toString(),pageSize:t.pageSize.toString(),operType:"codeQuery"};e({type:"codeList/getCodeList",payload:n,callback:function(){a.setState({codeId:a.props.getCodeListData.items[0]&&a.props.getCodeListData.items[0].codeId},function(){a.queryCodeItemList()})}})},a.itemNameChange=function(e){a.setState({itemNameValue:e.target.value})},a.queryCode=function(){a.queryCodeList()},a.onShowSizeChange=function(e,t){var n={pageNumber:e,pageSize:t};a.setState({page:n},function(){a.queryCodeList()})},a.connectCodeList=function(e){a.setState({codeId:e.codeId},function(){a.queryCodeItemList()})},a.queryCodeItemList=function(){var e=a.props.dispatch,t={operType:"subitemQueryBycodeId",pageNumber:"".concat(a.state.itemPage.pageNumber)||"1",pageSize:"".concat(a.state.itemPage.pageSize)||"10",codeId:"".concat(a.state.codeId)};e({type:"codeList/getCodeList",payload:t})},a}return(0,y.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){this.queryCodeList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.getCodeListData,d=t.getCodeItemListData,r=n&&n.totalCount,u=d&&d.totalCount,f=this.state,p=f.page,g=f.itemPage,C=f.updateCodeItemParams,h=n&&n.items,N=d&&d.items;return h&&h.forEach(function(t,a){t.index=(e.state.page.pageNumber-1)*e.state.page.pageSize+a+1}),N&&N.forEach(function(t,a){t.index=(e.state.itemPage.pageNumber-1)*e.state.itemPage.pageSize+a+1}),b.default.createElement(v.PageHeaderWrapper,null,b.default.createElement(b.Fragment,null,b.default.createElement("div",null,b.default.createElement("div",null,b.default.createElement("ul",{className:E.default.clearfix},b.default.createElement("li",{className:E.default.fl},b.default.createElement("span",null,(0,M.formatMessage)({id:"systemManagement.codeMaintenance.codeName"}),"\uff1a"),b.default.createElement(I.default,{className:E.default["login-name"],onChange:this.itemNameChange})),b.default.createElement("li",{className:E.default.fl},b.default.createElement(s.default,{type:"primary",icon:"search",onClick:this.queryCode})))),b.default.createElement("div",null,b.default.createElement(m.default,{loading:a["codeList/getCodeList"],dataSource:h,columns:this.state.codeColumns,pagination:!1,onRow:function(t){return{onClick:function(){e.connectCodeList(t)}}}}),b.default.createElement(l.default,{showSizeChanger:!0,current:p.pageNumber,showTotal:function(){return"Page ".concat(r?p.pageNumber:0," of ").concat(Math.ceil((r||0)/p.pageSize).toString())},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:r,pageSize:p.pageSize}))),b.default.createElement("div",null,b.default.createElement("div",null,b.default.createElement(c.default,{closable:!1,title:"\u65b0\u589e\u5b57\u5178\u5b50\u9879",width:700,onClose:this.codeCancel,visible:this.state.codeVisible},this.state.codeVisible&&b.default.createElement(V,{ref:this.codeFormRef,codeId:this.state.codeId})),b.default.createElement(o.default,{title:"\u4fee\u6539\u5b57\u5178\u5b50\u9879",visible:this.state.updateCodeItemVisible,onOk:this.updateCodeItemConfirm,onCancel:this.updateCodeItemCancel,cancelText:(0,M.formatMessage)({id:"app.common.cancel"}),okText:(0,M.formatMessage)({id:"app.common.save"})},b.default.createElement(V,(0,i.default)({ref:this.codeFormRef},C))),b.default.createElement(o.default,{title:"\u63d0\u793a",visible:this.state.deleteCodeItemVisible,onOk:this.deleteCodeItemConfirm,onCancel:this.deleteCodeItemCancel,cancelText:(0,M.formatMessage)({id:"app.common.cancel"}),okText:(0,M.formatMessage)({id:"app.common.save"})},b.default.createElement("div",null,b.default.createElement("span",null,"\u786e\u5b9a\u5220\u9664\u5417\uff1f")))),b.default.createElement("div",{className:E.default.content},b.default.createElement("div",{className:E.default.tableTop},b.default.createElement(s.default,{onClick:this.addCode,type:"primary",className:"btn_usual"},"+ Add")),b.default.createElement(m.default,{loading:a["codeList/getCodeItemList"],dataSource:N,pagination:!1,columns:this.state.columns}),b.default.createElement(l.default,{showSizeChanger:!0,current:g.pageNumber,showTotal:function(){return"Page ".concat(u?g.pageNumber:0," of ").concat(Math.ceil((u||0)/g.pageSize).toString())},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:u,pageSize:g.pageSize})))))}}]),t}(b.Component),f=p))||f),x=k;t.default=x},"RR/9":function(e,t,a){e.exports={clearfix:"antd-pro-pages-code-maintenance-code-maintenance-clearfix",fl:"antd-pro-pages-code-maintenance-code-maintenance-fl",fr:"antd-pro-pages-code-maintenance-code-maintenance-fr","login-name":"antd-pro-pages-code-maintenance-code-maintenance-login-name",header:"antd-pro-pages-code-maintenance-code-maintenance-header",formWrap:"antd-pro-pages-code-maintenance-code-maintenance-formWrap",operation:"antd-pro-pages-code-maintenance-code-maintenance-operation",inputValue:"antd-pro-pages-code-maintenance-code-maintenance-inputValue",content:"antd-pro-pages-code-maintenance-code-maintenance-content",tableTop:"antd-pro-pages-code-maintenance-code-maintenance-tableTop"}}}]);