(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{dQiY:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.getApprovalTaskList=i,t.getTaskDetail=l,t.claimTask=f,t.setTaskSave=v,t.setTaskSubmit=h,t.approveAndReject=y,t.getTaskGroup=g,t.getUserList=_,t.default=void 0,a("miYZ");var n=r(a("tsqr")),s=r(a("d6i3")),u=r(a("p0pE")),p=r(a("1l/V")),o=a("jveU");function i(e){return c.apply(this,arguments)}function c(){return c=(0,p.default)(s.default.mark(function e(t){var a,r,n,u,p,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.page,r=void 0===a?1:a,n=t.pageSize,u=void 0===n?10:n,p=t.taskCode,i=t.type,e.abrupt("return",(0,o.request)("get_approval_task_list_page",{data:{pageNumber:r.toString(),pageSize:u.toString(),taskCode:p?p.toString():"",type:i}}));case 2:case"end":return e.stop()}},e)})),c.apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return d=(0,p.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,e.abrupt("return",(0,o.request)("get_approval_task_detail",{data:{taskCode:a.toString()}}));case 2:case"end":return e.stop()}},e)})),d.apply(this,arguments)}function f(e){return k.apply(this,arguments)}function k(){return k=(0,p.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,e.abrupt("return",(0,o.request)("set_task_claim",{data:{taskCode:a.join(",")}}));case 2:case"end":return e.stop()}},e)})),k.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=(0,p.default)(s.default.mark(function e(t){var a,r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,r=t.epCname,e.abrupt("return",(0,o.request)("set_approval_task_data_save",{data:{taskCode:a.toString(),epCname:r}}));case 2:case"end":return e.stop()}},e)})),w.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=(0,p.default)(s.default.mark(function e(t){var a,r,n;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,r=t.userId,n=t.epCname,e.abrupt("return",(0,o.request)("set_task_submit",{data:{taskCode:a.toString(),userId:r.toString(),epCname:n}}));case 2:case"end":return e.stop()}},e)})),m.apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return C=(0,p.default)(s.default.mark(function e(t){var a,r,n,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,r=t.userId,n=t.type,u=t.epCname,e.abrupt("return",(0,o.request)("set_task_approve_and_reject",{data:{taskCode:a.toString(),userId:r.toString(),type:n,epCname:u}}));case 2:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return x=(0,p.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.taskCode,e.abrupt("return",(0,o.request)("get_approval_task_node_group",{data:{taskCode:a.toString()}}));case 2:case"end":return e.stop()}},e)})),x.apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return b=(0,p.default)(s.default.mark(function e(t){var a,r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.operType,r=t.groupId,e.abrupt("return",(0,o.request)("get_user_list_information",{data:{operType:a,groupId:r}}));case 2:case"end":return e.stop()}},e)})),b.apply(this,arguments)}var I={namespace:"approvalCenter",state:{tasks:[],alertItems:[],detailItems:{},total:0,alertOwner:"",userList:[],submitRadioList:[],taskGroup:""},reducers:{save:function(e,t){var a=t.payload,r=a.tasks,n=a.page,s=a.total;return(0,u.default)({},e,{tasks:r,page:n,total:s})},saveDetail:function(e,t){var a=t.payload,r=a.detailItems;return(0,u.default)({},e,{detailItems:r})},saveTaskGroup:function(e,t){var a=t.payload,r=a.taskGroup;return(0,u.default)({},e,{taskGroup:r})},saveUserList:function(e,t){var a=t.payload,r=a.userList,n=r.map(function(e){return{label:e.userName,value:e.userId}});return(0,u.default)({},e,{userList:r,submitRadioList:n})}},effects:{fetch:s.default.mark(function e(t,a){var r,n,u,p,o,c,l,d,f,k,v,w;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,u=a.put,p=r||{},o=p.page,c=p.pageSize,l=p.taskCode,d=p.type,e.next=5,n(i,{page:o,pageSize:c,taskCode:l,type:d});case 5:if(f=e.sent,k=f.items,v=f.totalCount,w=f.err,!w){e.next=11;break}throw new Error(w);case 11:return e.next=13,u({type:"save",payload:{tasks:k,page:o,total:v}});case 13:case"end":return e.stop()}},e)}),fetchTaskDetail:s.default.mark(function e(t,a){var r,n,u,p,o,i,c,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,u=a.put,p=r||{},o=p.taskCode,e.next=5,n(l,{taskCode:o});case 5:if(i=e.sent,c=i.items,d=i.err,!d){e.next=10;break}throw new Error(d);case 10:return e.next=12,u({type:"saveDetail",payload:{detailItems:c}});case 12:case"end":return e.stop()}},e)}),claim:s.default.mark(function e(t,a){var r,u,p,o,i,c,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=t.callback,p=a.call,o=r||[],i=o.taskCode,e.next=5,p(f,{taskCode:i});case 5:c=e.sent,l=c.err,l?n.default.error("claim failure"):(n.default.success("claim success"),u());case 8:case"end":return e.stop()}},e)}),saveTask:s.default.mark(function e(t,a){var r,u,p,o,i,c,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.call,p=r||[],o=p.taskCode,i=p.epCname,e.next=5,u(v,{taskCode:o,epCname:i});case 5:c=e.sent,l=c.err,l?n.default.error("save failure"):n.default.success("save success");case 8:case"end":return e.stop()}},e)}),submitTask:s.default.mark(function e(t,a){var r,u,p,o,i,c,l,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.call,p=r||[],o=p.taskCode,i=p.userId,c=p.epCname,e.next=5,u(h,{taskCode:o,userId:i,epCname:c});case 5:l=e.sent,d=l.err,d?n.default.error("submit failure"):n.default.success("submit success");case 8:case"end":return e.stop()}},e)}),approveAndReject:s.default.mark(function e(t,a){var r,u,p,o,i,c,l,d,f,k;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=t.callback,p=a.call,o=r||[],i=o.taskCode,c=o.userId,l=o.type,d=o.epCname,e.next=5,p(y,{taskCode:i,userId:c,type:l,epCname:d});case 5:f=e.sent,k=f.err,k?n.default.error("failure"):(n.default.success("success"),u());case 8:case"end":return e.stop()}},e)}),featchTaskGroup:s.default.mark(function e(t,a){var r,u,p,o,i,c,l,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,u=a.call,p=a.put,o=r||[],i=o.taskCode,e.next=5,u(g,{taskCode:i});case 5:return c=e.sent,l=c.items,d=c.err,d&&n.default.error("getTaskGroup failure"),e.next=11,p({type:"saveTaskGroup",payload:{taskGroup:l}});case 11:case"end":return e.stop()}},e)}),fetchUserList:s.default.mark(function e(t,a){var r,n,u,p,o,i,c,l,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,u=a.put,p=r||[],o=p.operType,i=p.groupId,e.next=5,n(_,{operType:o,groupId:i});case 5:if(c=e.sent,l=c.items,d=c.err,!d){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,u({type:"saveUserList",payload:{userList:l}});case 12:case"end":return e.stop()}},e)})}};t.default=I}}]);