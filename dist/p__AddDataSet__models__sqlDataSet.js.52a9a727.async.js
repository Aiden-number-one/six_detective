(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{SBTA:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.changeActive=a.funcData=void 0;var n=[{func:"SUM",text:"SUM(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u4e2d\u6240\u6709\u503c\u7684\u603b\u548c\u3002SUM \u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u5b57\u6bb5\u3002",example:"SUM([\u9500\u552e\u989d])"},{func:"AVG",text:"AVG(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u4e2d\u6240\u6709\u503c\u7684\u5e73\u5747\u503c\u3002AVG \u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u5b57\u6bb5\u3002",example:"AVG([\u6210\u672c])\u3002"},{func:"COUNT",text:"COUNT(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u7ec4\u4e2d\u7684\u9879\u76ee\u6570\u3002",example:"COUNT([\u5ba2\u6237\u540d\u79f0])\u3002"},{func:"COUNTD",text:"COUNTD(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u7ec4\u4e2d\u7684\u4e0d\u540c\u9879\u76ee\u6570\u3002",example:"COUNTD([\u4ea7\u54c1\u540d\u79f0])"},{func:"MEDIAN",text:"MEDIAN(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u4e2d\u6240\u6709\u503c\u7684\u4e2d\u4f4d\u6570\u3002MEDIAN \u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u5b57\u6bb5\u3002",example:'MEDIAN([\u5229\u6da6]) \u5f53\u524d\u6570\u636e\u6e90\u4e0d\u652f\u6301\u6b64\u51fd\u6570"'},{func:"PERCENTILE",text:"PERCENTILE(\u8868\u8fbe\u5f0f, \u767e\u5206\u4f4d)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u4e2d\u6240\u6709\u503c\u7684\u767e\u5206\u4f4d\u6570\u3002PERCENTILE \u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u5b57\u6bb5\u3002",example:"PERCENTILE([\u5229\u6da6], 75) \u5f53\u524d\u6570\u636e\u6e90\u4e0d\u652f\u6301\u6b64\u51fd\u6570"},{func:"MAX",text:"MAX(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u5728\u6240\u6709\u8bb0\u5f55\u4e2d\u7684\u6700\u5927\u503c\u3002MAX\u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u3001\u65e5\u671f\u3001\u65e5\u671f\u65f6\u95f4\u5b57\u6bb5\u3002",example:"MAX([\u8bbf\u95ee\u91cf])"},{func:"MIN",text:"MIN(\u8868\u8fbe\u5f0f)",des:"\u8fd4\u56de\u8868\u8fbe\u5f0f\u5728\u6240\u6709\u8bb0\u5f55\u4e2d\u7684\u6700\u5c0f\u503c\u3002MIN\u53ea\u80fd\u7528\u4e8e\u6570\u5b57\u3001\u65e5\u671f\u3001\u65e5\u671f\u65f6\u95f4\u5b57\u6bb5\u3002",example:"MIN([\u8bbf\u95ee\u91cf])"}];a.funcData=n;var r=function e(a){return a.map(function(a){return a.visible=!0,a.active=!1,a.children&&(a.children=e(a.children)),a})};a.changeActive=r},dIcj:function(e,a,t){"use strict";var n=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t("p0pE")),s=n(t("Y/ft"));t("miYZ");var c=n(t("tsqr")),l=n(t("d6i3")),o=(t("LLXN"),n(t("ywRk"))),u=(n(t("+n12")),t("SBTA"),n(t("usdK"))),d=o.default.getFolderMenu,i=o.default.setDbMetadata,f=o.default.getMetadataTablePerform,p=o.default.getMetadataTableInfo,m=o.default.getSqlParserInfo,b=o.default.getMetadataColumnInfo,x={namespace:"addSqlDataSet",state:{treeData:[],sqlTableName:"",sql:"select * from AAA",isShare:!1,defaultPageSize:10,tableData:[],column1:[],tableData2:[],column2:[{value:"caption",width:300},{value:"comments",width:200},{value:"colType",width:200},{value:"isHidden",width:100},{value:"metadata",width:300}]},effects:{getMetadataTablePerform:l.default.mark(function e(a,t){var n,r,s,c,o,u;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.params,r=t.call,s=t.put,e.next=4,r(f,{param:n});case 4:if(c=e.sent,!c||"1"!==c.bcjson.flag){e.next=14;break}return o=c.bcjson.items[0]?c.bcjson.items[0]:{},u=Object.keys(o).map(function(e,a){return{value:e,type:isNaN(Number(o[e]))?"dimension":"measure",width:150}}),e.next=10,s({type:"changeColumn",payload:u});case 10:return e.next=12,s({type:"addMetadataTablePerform",payload:c.bcjson.items});case 12:e.next=16;break;case 14:return e.next=16,s({type:"addMetadataTablePerform",payload:[]});case 16:case"end":return e.stop()}},e)}),getFolderMenu:l.default.mark(function e(a,t){var n,r,s,c,o;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.params,r=t.call,s=t.put,e.next=4,r(d,{param:n});case 4:if(c=e.sent,o=[],!c||"1"!==c.bcjson.flag){e.next=10;break}return c.bcjson.items,e.next=10,s({type:"changeTreeActive",payload:o});case 10:case"end":return e.stop()}},e)}),addMetaData:l.default.mark(function e(a,t){var n,r,s;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,t.put,e.next=4,r(i,{param:n});case 4:s=e.sent,s&&"1"===s.bcjson.flag?(u.default.goBack(),c.default.success("\u4fdd\u5b58\u6210\u529f")):c.default.error(s.bcjson.msg.substring(0,1e3));case 6:case"end":return e.stop()}},e)}),getMetadataTableInfo:l.default.mark(function e(a,t){var n,r,s,o,u;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.payload,r=t.call,s=t.put,!n.tableId){e.next=25;break}return e.next=5,r(p,{param:n});case 5:if(o=e.sent,!o||"1"!==o.bcjson.flag||!o.bcjson.items[0]){e.next=24;break}if(u=o.bcjson.items[0].queryScript,!JSON.parse(u).dataSetJson){e.next=17;break}return e.next=11,s({type:"sqlDataSetJoin/echoJson",payload:{json:JSON.parse(JSON.parse(u).dataSetJson).jsonContent}});case 11:return e.next=13,s({type:"sqlFilter/saveFilter",payload:JSON.parse(JSON.parse(u).dataSetJson).jsonContent.filterList||[]});case 13:return e.next=15,s({type:"getMetadataTablePerform",params:{connection_id:n.connection_id,pageSize:"1000000",dataSetJson:JSON.stringify(JSON.parse(JSON.parse(u).dataSetJson))}});case 15:e.next=20;break;case 17:if(!JSON.parse(u).viewSql){e.next=20;break}return e.next=20,s({type:"sqlKeydown/changeSql",payload:JSON.parse(u).viewSql});case 20:return e.next=22,s({type:"changeDataSetName",payload:o.bcjson.items[0].tableName});case 22:e.next=25;break;case 24:c.default.error(o.bcjson.msg.substring(0,1e3));case 25:case"end":return e.stop()}},e)}),getSqlParserInfo:l.default.mark(function e(a,t){var n,r,o,u,d,i,f,p,x,y;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,o=t.put,u=t.all,d=n.connection_id,i=(0,s.default)(n,["connection_id"]),e.next=5,r(m,{param:i});case 5:if(f=e.sent,!f||"1"!==f.bcjson.flag){e.next=17;break}return p=f.bcjson.items[0].table,e.next=10,u(p.map(function(e,a){return r(b,{param:{connectionId:d,schemaName:e.split(".")[0],tableName:e.split(".")[1]}})}));case 10:return x=e.sent,y=[],p.forEach(function(e,a){if("1"===x[a].bcjson.flag){var t=!0;y.forEach(function(a){a.key===e&&(t=!1)}),t&&y.push({key:e,type:"icon-biaoge",caption:e.split(".")[1],comments:e.split(".")[1],children:[],isShow:!0});var n="";y.forEach(function(a,t){a.key===e&&(n=t)});var r=y[n].children;x[a].bcjson.items.forEach(function(a){r.push({key:a.columnId,type:"icon-icon-str",caption:a.columnName,comments:a.columnDesc,colType:a.columnType,isHidden:!a.isHidden||0===a.isHidden,metadata:e.split(".")[1]+"."+a.columnName})})}}),e.next=15,o({type:"saveTableData2",payload:y});case 15:e.next=18;break;case 17:c.default.error(f.bcjson.msg.substring(0,1e3));case 18:case"end":return e.stop()}},e)})},reducers:{changeColumn:function(e,a){return(0,r.default)({},e,{column1:a.payload})},changeColumn1:function(e,a){return(0,r.default)({},e,{column2:a.payload})},changeDataSetName:function(e,a){return(0,r.default)({},e,{sqlTableName:a.payload})},changeIsShare:function(e,a){return(0,r.default)({},e,{isShare:a.payload})},changeDefaultPageSize:function(e,a){var t=a.payload;return(0,r.default)({},e,{defaultPageSize:t})},addMetadataTablePerform:function(e,a){var t=a.payload;return(0,r.default)({},e,{tableData:t})},saveTableData2:function(e,a){var t=a.payload;return(0,r.default)({},e,{tableData2:t})}}};a.default=x}}]);