(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"97vF":function(e,t,a){"use strict";var o=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var i=o(a("/wGt"));a("+L6B");var n=o(a("2/Rp"));a("sRBo");var s,d,l,p=o(a("kaz8")),u=o(a("d6i3")),c=o(a("1l/V")),f=o(a("2Taf")),v=o(a("vZ4D")),h=o(a("l4Ni")),g=o(a("ujKo")),y=o(a("MhPg")),m=r(a("q1tI")),D=a("Hx5s"),x=a("MuoO"),w=o(a("YOzA")),A=o(a("FS8v")),b=(s=(0,x.connect)(function(e){var t=e.ApprovalAuditor;return{deployedModelDatas:t.deployedModelDatas,processDefinitionId:t.processDefinitionId,groupList:t.GroupList,checkboxData:t.checkboxData,auditorData:t.auditorData}}),s((l=function(e){function t(){var e,a;(0,f.default)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return a=(0,h.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,stepId:"",checkedValues:[]},a.showDrawer=function(){var e=(0,c.default)(u.default.mark(function e(t,o){var r,i,n;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.getAuditorData(t,o);case 2:r=a.props.auditorData,i=r.length>0&&r[0].relateNo||[],n=i.length&&i.split(","),a.setState({visible:!0,stepId:o,checkedValues:n}),console.log("auditorData--\x3e",a.props.auditorData,a.state.checkedValues);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.saveConfig=function(e){var t=a.props.dispatch;t({type:"ApprovalAuditor/setAuditorConfigDatas",payload:e})},a.onSave=function(){var e=a.state,t=e.checkedValues,o=e.stepId,r=[];r.push({stepId:o,auditIds:t.join(),auditType:"0"});var i={processUuid:a.props.processDefinitionId,auditInfo:JSON.stringify(r)};console.log("param---\x3e",i),a.saveConfig(i),a.setState({visible:!1})},a.getQueryMenu=(0,c.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,e.next=3,t({type:"ApprovalAuditor/getQueryMenuDatas",payload:{}});case 3:case"end":return e.stop()}},e)})),a.getAuditorData=function(){var e=(0,c.default)(u.default.mark(function e(t,o){var r;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.props.dispatch,e.next=3,r({type:"ApprovalAuditor/getAuditorlistDatas",payload:{processUuid:t,stepId:o}});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.deployedModelList=function(e){var t=a.props.dispatch;t({type:"ApprovalAuditor/deployedModelListDatas",payload:e})},a.chooseTab=function(e){e!==a.props.processDefinitionId&&a.changeProcessDefinitionId(e)},a.changeProcessDefinitionId=function(e){var t=a.props.dispatch;t({type:"ApprovalAuditor/chooseProcessDefinitionId",payload:{processDefinitionId:e}})},a.onClose=function(){a.setState({visible:!1})},a.selectAuditor=function(e){a.setState({checkedValues:e})},a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.deployedModelList({pageNumber:"1",pageSize:"10"}),this.getQueryMenu(),window.showAudit=function(t,a){e.showDrawer(t,a)}}},{key:"render",value:function(){var e=this.props,t=e.deployedModelDatas,a=e.processDefinitionId,o=e.checkboxData,r=this.state.checkedValues;console.log("checkboxData---",o,r);var s="/process/diagram-viewer/index.html?isClick=1&processDefinitionId=".concat(a);return m.default.createElement(m.Fragment,null,m.default.createElement(D.PageHeaderWrapper,null,m.default.createElement("div",{className:A.default.approvalAuditor},m.default.createElement("div",{className:A.default.contentBox},m.default.createElement("div",{className:A.default.leftBox},m.default.createElement(w.default,{listData:t,chooseId:a,currentId:"processDefinitionId",chooseTab:this.chooseTab,title:"List of deployed models"})),m.default.createElement("div",{className:A.default.rightBox},m.default.createElement("iframe",{title:"diagram",width:"100%",height:"300px",src:s})),m.default.createElement(i.default,{title:"Auditor",width:500,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},m.default.createElement(p.default.Group,{options:o,value:r,onChange:this.selectAuditor}),m.default.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},m.default.createElement(n.default,{onClick:this.onSave,type:"primary"},"Save"),m.default.createElement(n.default,{onClick:this.onClose,style:{marginRight:12}},"Cancel")))))))}}]),t}(m.PureComponent),d=l))||d),k=b;t.default=k},FS8v:function(e,t,a){e.exports={approvalAuditor:"antd-pro-pages-approval-approval-auditor-approval-auditor-approvalAuditor",contentBox:"antd-pro-pages-approval-approval-auditor-approval-auditor-contentBox",leftBox:"antd-pro-pages-approval-approval-auditor-approval-auditor-leftBox",rightBox:"antd-pro-pages-approval-approval-auditor-approval-auditor-rightBox"}}}]);