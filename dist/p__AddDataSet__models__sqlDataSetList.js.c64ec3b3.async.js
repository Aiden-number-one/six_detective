(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{s5Ey:function(t,e,a){"use strict";var n=a("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("p0pE")),c=n(a("gWZ8")),r=n(a("d6i3"));a("miYZ");var s=n(a("tsqr")),u=n(a("Y/ft")),i=n(a("ywRk")),l=i.default.getDataSourceList,d=i.default.getTableData,f={namespace:"sqlDataSetList",state:{activeKey:"",totalCount:0,metaDataTableList:[],dataSourceList:[],connectionId:""},effects:{getDataSourceConfig:r.default.mark(function t(e,a){var n,o,c,i,d,f;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,o=a.call,c=a.put,i=n.connectionId,d=(0,u.default)(n,["connectionId"]),t.next=5,o(l,{param:d});case 5:if(f=t.sent,!f||"1"!==f.bcjson.flag){t.next=15;break}return t.next=9,c({type:"setDataSourceList",payload:f.bcjson.items});case 9:return t.next=11,c({type:"clear",payload:[]});case 11:return t.next=13,c({type:"getMetadataTableInfo",payload:{connection_id:i||f.bcjson.items[0]&&f.bcjson.items[0].connectionId,pageNumber:"1",pageSize:"30",ignoreMdType:"U"}});case 13:t.next=16;break;case 15:s.default.error(f.bcjson.msg.substring(0,1e3));case 16:case"end":return t.stop()}},t)}),getMetadataTableInfo:r.default.mark(function t(e,a){var n,o,u,i,l,f;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,o=a.call,u=a.put,i=a.select,t.next=4,i(function(t){var e=t.sqlDataSetList;return e.metaDataTableList});case 4:return l=t.sent,t.next=7,o(d,{param:n});case 7:if(f=t.sent,!f||"1"!==f.bcjson.flag){t.next=13;break}return t.next=11,u({type:"setDataTableList",payload:{list:[].concat((0,c.default)(l),(0,c.default)(f.bcjson.items.map(function(t){return{id:t.tableId,name:"".concat(t.schemName,".").concat(t.tableName),icon:"icon-biao",otherInfo:t}}))),totalCount:f.bcjson.totalCount}});case 11:t.next=14;break;case 13:s.default.error(f.bcjson.msg.substring(0,1e3));case 14:case"end":return t.stop()}},t)})},reducers:{changeActive:function(t,e){return(0,o.default)({},t,{activeKey:e.payload})},clear:function(t){return(0,o.default)({},t,{metaDataTableList:[]})},setDataTableList:function(t,e){var a=e.payload,n=a.list,c=a.totalCount;return(0,o.default)({},t,{metaDataTableList:n,totalCount:c})},setDataSourceList:function(t,e){return(0,o.default)({},t,{dataSourceList:e.payload})},saveConnectionId:function(t,e){return(0,o.default)({},t,{connectionId:e.payload.connectionId})}}};e.default=f}}]);