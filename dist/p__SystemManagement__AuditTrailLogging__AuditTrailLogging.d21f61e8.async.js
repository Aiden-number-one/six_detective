(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{AFb5:function(e,t,a){"use strict";var i=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=i(a("kLXV"));a("sRBo");var o=i(a("kaz8"));a("DjyN");var s=i(a("NUBc"));a("g9YV");var u=i(a("wCAj"));a("14J3");var d=i(a("BMrR"));a("jCWc");var r=i(a("kPKH")),m=i(a("2Taf")),c=i(a("vZ4D")),f=i(a("l4Ni")),g=i(a("ujKo")),p=i(a("MhPg"));a("y8nQ");var y,v,h,b=i(a("Vl3Y")),x=n(a("q1tI")),M=a("Hx5s"),k=a("MuoO"),L=a("LLXN"),D=i(a("wd/R")),C=i(a("gQU8")),E=a("fwgp"),N=i(a("HN7/")),T=i(a("BN5G")),w=b.default.create({})(N.default),S=(y=(0,k.connect)(function(e){var t=e.auditLog,a=e.loading;return{loading:a.effects,getAuditLogListData:t.data}}),y((h=function(e){function t(){var e,a;(0,m.default)(this,t);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return a=(0,f.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.state={page:{pageNumber:1,pageSize:10},customizeVisible:!1,logStartDate:void 0,logEndDate:void 0,functionName:void 0,updatedBy:void 0,exportDataVisible:!1,functionNameOptions:[{key:"",value:"",title:"All"},{key:"1",value:"1",title:"Name One"},{key:"2",value:"2",title:"Name Two"},{key:"3",value:"3",title:"Name Three"}],options:[{value:"functionName",label:(0,L.formatMessage)({id:"systemManagement.auditLog.functionName"})},{value:"tableName",label:(0,L.formatMessage)({id:"systemManagement.auditLog.tableName"})},{value:"biToCode",label:(0,L.formatMessage)({id:"systemManagement.auditLog.BITOCode"})},{value:"productCode",label:(0,L.formatMessage)({id:"systemManagement.auditLog.productCode"})},{value:"effectiveTime",label:(0,L.formatMessage)({id:"systemManagement.auditLog.effectiveDate"})},{value:"filedUpdated",label:(0,L.formatMessage)({id:"systemManagement.auditLog.fieldUpdated"})},{value:"updateType",label:(0,L.formatMessage)({id:"systemManagement.auditLog.updateType"})},{value:"logTime",label:(0,L.formatMessage)({id:"systemManagement.auditLog.logDate"})},{value:"updatedBy",label:(0,L.formatMessage)({id:"systemManagement.auditLog.updatedBy"})},{value:"before",label:(0,L.formatMessage)({id:"systemManagement.auditLog.before"})},{value:"after",label:(0,L.formatMessage)({id:"systemManagement.auditLog.after"})}],checkedValues:[],tempColumns:[],cuscomizeColumns:[{key:"index",visible:!0},{key:"functionName",visible:!0},{key:"tableName",visible:!0},{key:"biToCode",visible:!1},{key:"productCode",visible:!0},{key:"effectiveTime",visible:!0,className:"columnsnone"},{key:"filedUpdated",visible:!1},{key:"updateType",visible:!1},{key:"logTime",visible:!0},{key:"updatedBy",visible:!0},{key:"before",visible:!1},{key:"after",visible:!1}],columns:[{index:0,title:(0,L.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index",width:"5%",render:function(e,t,i){return x.default.createElement("span",null,(a.state.page.pageNumber-1)*a.state.page.pageSize+i+1)}},{index:1,title:(0,L.formatMessage)({id:"systemManagement.auditLog.functionName"}),dataIndex:"functionName",key:"functionName",ellipsis:!0,width:"18%"},{index:2,title:(0,L.formatMessage)({id:"systemManagement.auditLog.tableName"}),dataIndex:"tableName",key:"tableName",ellipsis:!0,width:"18%",colSpan:1},{index:3,title:(0,L.formatMessage)({id:"systemManagement.auditLog.BITOCode"}),dataIndex:"biToCode",key:"biToCode",width:"10%"},{index:4,title:(0,L.formatMessage)({id:"systemManagement.auditLog.productCode"}),dataIndex:"productCode",key:"productCode",width:"15%"},{index:5,title:(0,L.formatMessage)({id:"systemManagement.auditLog.effectiveDate"}),dataIndex:"effectiveTime",key:"effectiveTime",width:"20%",render:function(e,t){return x.default.createElement("div",null,x.default.createElement("span",null,t.effectiveTime&&(0,E.timeFormat)(t.effectiveTime)))}},{index:6,title:(0,L.formatMessage)({id:"systemManagement.auditLog.fieldUpdated"}),dataIndex:"filedUpdated",key:"filedUpdated",width:"10%"},{index:7,title:(0,L.formatMessage)({id:"systemManagement.auditLog.updateType"}),dataIndex:"updateType",key:"updateType",width:"15%"},{index:8,title:(0,L.formatMessage)({id:"systemManagement.auditLog.logDate"}),dataIndex:"logTime",key:"logTime",align:"center",width:"18%",render:function(e,t){return x.default.createElement("span",null,t.logTime&&(0,E.timeFormat)(t.logTime))}},{index:9,title:(0,L.formatMessage)({id:"systemManagement.auditLog.updatedBy"}),dataIndex:"updatedBy",key:"updatedBy",width:"15%"},{index:10,title:(0,L.formatMessage)({id:"systemManagement.auditLog.before"}),dataIndex:"before",key:"before",width:"10%"},{index:11,title:(0,L.formatMessage)({id:"systemManagement.auditLog.after"}),dataIndex:"after",key:"after",width:"10%"}],getAuditLogList:[]},a.auditLogForm=x.default.createRef(),a.filterColumns=function(){var e=a.state,t=e.columns,i=e.cuscomizeColumns,n=t.map(function(e,t){var a=Object.assign({},e);return i.filter(function(n){n.key===e.key&&(a.visible=n.visible,t<2&&(a.fixed="left"),t===i.length-1&&(a.fixed="right"))}),a}),l=[],o=[];n.forEach(function(e,t){e.visible?o.push(e.key):l.push(t)}),l.forEach(function(e,t){n.splice(e-t,1)}),a.setState({tempColumns:t,columns:n,checkedValues:o})},a.getAuditLog=function(){var e=a.state,t=e.logStartDate,i=e.logEndDate,n=e.functionName,l=e.updatedBy,o=e.page,s={pageNumber:o.pageNumber.toString(),pageSize:o.pageSize.toString(),functionName:n,startTime:t,endTime:i,updatedBy:l},u=a.props.dispatch;u({type:"auditLog/getAuditLogList",payload:s,callback:function(){}})},a.pageChange=function(e,t){var i={pageNumber:e,pageSize:t};a.setState({page:i},function(){a.getAuditLog()})},a.changeBeginDate=function(){},a.changeEndDate=function(){},a.queryLog=function(){a.auditLogForm.current.validateFields(function(e,t){if(!e){var i,n,l=t.logDate;l&&l.length>0&&(i="".concat((0,D.default)(l[0]).format("YYYY-MM-DD")," 00:00:00"),n="".concat((0,D.default)(l[1]).format("YYYY-MM-DD")," 23:59:59")),a.setState({logStartDate:i,logEndDate:n,functionName:t.functionName,updatedBy:t.updatedBy},function(){a.getAuditLog()})}})},a.exportData=function(){a.setState({exportDataVisible:!0})},a.exportDataConfirm=function(){var e=a.props.dispatch,t={fileType:"1",apiVersion:"v2.0",isPage:"true",apiName:"bayconnect.superlop.get_system_log_list"};e({type:"auditLog/getDataExport",payload:t},function(){a.setState({exportDataVisible:!1})})},a.exportDataCancel=function(){a.setState({exportDataVisible:!1})},a.customizeDisplay=function(){a.setState({customizeVisible:!0})},a.customizeConfirm=function(){var e=a.state,t=e.tempColumns,i=e.columns,n=e.checkedValues;a.setState({customizeVisible:!1});var l=i.map(function(e){return e.key}),o=Object.assign([],i);n.map(function(e){l.includes(e)||o.push(t.filter(function(t){return t.key===e})[0])}),l.map(function(e){e&&!n.includes(e)&&"index"!==e&&o.splice(o.indexOf(o.filter(function(t){return t.key===e})[0]),1)}),o.sort(function(e,t){return e.index-t.index}),o.forEach(function(e,t){Object.hasOwnProperty(e.fixed)&&delete e.fixed,t<2&&(e.fixed="left"),t===o.length-1&&(e.fixed="right")}),a.setState({columns:o,checkedValues:n}),console.log("newColumns===",o)},a.customizeCancel=function(){var e=a.state.columns,t=e.map(function(e){return e.key});a.setState({customizeVisible:!1,checkedValues:t})},a.onChangeCheckbox=function(e){a.setState({checkedValues:e})},a.operatorReset=function(){a.auditLogForm.current.resetFields()},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.filterColumns(),this.getAuditLog()}},{key:"render",value:function(){var e=this.props.loading,t=this.state.getAuditLogList,a=this.state,i=a.page,n=a.functionNameOptions,m=a.exportDataVisible,c=a.options,f=a.checkedValues,g=a.tempColumns;t=this.props.getAuditLogListData.items;var p=this.props.getAuditLogListData&&this.props.getAuditLogListData.totalCount;return x.default.createElement(M.PageHeaderWrapper,null,x.default.createElement(w,{search:this.queryLog,exportData:this.exportData,ref:this.auditLogForm,functionNameOptions:n}),x.default.createElement("div",{className:C.default.content},x.default.createElement(d.default,{type:"flex",justify:"end"},x.default.createElement(r.default,null,x.default.createElement("span",{onClick:this.customizeDisplay},x.default.createElement("span",{className:C.default.customizeDisplay},"Customize Display"),x.default.createElement(T.default,{type:"icon-setting",className:C.default["btn-icon"]})))),x.default.createElement(u.default,{loading:e["auditLog/getAuditLogList"],dataSource:t,pagination:!1,columns:this.state.columns,rowKey:Math.random().toString(),scroll:{x:1300}}),t&&t.length>0&&x.default.createElement(s.default,{showSizeChanger:!0,current:i.pageNumber,showTotal:function(){return"Total ".concat(p," items")},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:p,pageSize:i.pageSize})),x.default.createElement(l.default,{closable:!1,wrapClassName:C.default.customizeDisplayModal,title:"Customize Display",visible:this.state.customizeVisible,onOk:this.customizeConfirm,onCancel:this.customizeCancel,cancelText:(0,L.formatMessage)({id:"app.common.cancel"}),okText:(0,L.formatMessage)({id:"app.common.submit"})},x.default.createElement("div",null,x.default.createElement("p",null,"Alter the display of the orders table by selecting up to"," ",x.default.createElement("font",{style:{color:"#0D87D4"}},g.length-1)," Cloumns"),x.default.createElement(o.default.Group,{options:c,value:f,onChange:this.onChangeCheckbox}))),x.default.createElement(l.default,{closable:!1,title:"Select Export Format",visible:m,onOk:this.exportDataConfirm,onCancel:this.exportDataCancel,cancelText:(0,L.formatMessage)({id:"app.common.cancel"}),okText:(0,L.formatMessage)({id:"app.common.save"})},x.default.createElement("div",null,x.default.createElement(o.default.Group,null,x.default.createElement(o.default,{value:1},"csv"),x.default.createElement(o.default,{value:2},"xlsx"),x.default.createElement(o.default,{value:3},"docx"),x.default.createElement(o.default,{value:4},"pdf")))))}}]),t}(x.Component),v=h))||v),z=S;t.default=z},"HN7/":function(e,t,a){"use strict";var i=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var l=n(a("BMrR"));a("+L6B");var o=n(a("2/Rp"));a("5NDa");var s=n(a("5rEg"));a("jCWc");var u=n(a("kPKH"));a("y8nQ");var d=n(a("Vl3Y")),r=n(a("2Taf")),m=n(a("vZ4D")),c=n(a("l4Ni")),f=n(a("ujKo")),g=n(a("MhPg"));a("iQDF");var p=n(a("+eQT")),y=i(a("q1tI")),v=a("LLXN"),h=n(a("BN5G")),b=p.default.RangePicker,x=function(e){function t(){var e,a;(0,r.default)(this,t);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return a=(0,c.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.search,i=t.exportData;return y.default.createElement(d.default,{className:"ant-advanced-search-form search-wraper",layout:"vertical"},y.default.createElement(l.default,{gutter:{xs:0,sm:8,md:10,lg:20,xl:24},align:"bottom",type:"flex"},y.default.createElement(u.default,{xs:24,sm:12,xl:10,xxl:8},y.default.createElement(d.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.logDate"})},e("logDate",{})(y.default.createElement(b,{format:"DD-MMM-YYYY",placeholder:["Start Date","End Date"]})))),y.default.createElement(u.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(d.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.updatedBy"})},e("updatedBy",{})(y.default.createElement(s.default,{placeholder:"Please input"})))),y.default.createElement(u.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(d.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.functionName"})},e("functionName",{})(y.default.createElement(s.default,{placeholder:"Please input"})))),y.default.createElement(u.default,{xs:24,sm:12,xl:8,xxl:6},y.default.createElement(d.default.Item,null,y.default.createElement(o.default,{type:"primary",onClick:a},y.default.createElement(h.default,{type:"iconsousuo",style:{color:"#fff"}}),(0,v.formatMessage)({id:"app.common.search"})),y.default.createElement(o.default,{style:{marginLeft:"10px"},type:"primary",onClick:i,className:"btn-usual",icon:"export"},(0,v.formatMessage)({id:"app.common.export"}))))))}}]),t}(y.Component);t.default=x},gQU8:function(e,t,a){e.exports={inputValue:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-inputValue",content:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-content",customizeDisplay:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-customizeDisplay",tableTop:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-tableTop","btn-icon":"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-btn-icon",columnsnone:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-columnsnone",customizeDisplayModal:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-customizeDisplayModal"}}}]);