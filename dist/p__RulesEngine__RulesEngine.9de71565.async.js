(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"+Edv":function(e,t,a){e.exports={rulesEngine:"antd-pro-pages-rules-engine-rules-engine-rulesEngine",conditionSelect:"antd-pro-pages-rules-engine-rules-engine-conditionSelect",contentCollection:"antd-pro-pages-rules-engine-rules-engine-contentCollection",content:"antd-pro-pages-rules-engine-rules-engine-content",item:"antd-pro-pages-rules-engine-rules-engine-item",color:"antd-pro-pages-rules-engine-rules-engine-color",last:"antd-pro-pages-rules-engine-rules-engine-last",radius:"antd-pro-pages-rules-engine-rules-engine-radius",fillLine:"antd-pro-pages-rules-engine-rules-engine-fillLine",noRadius:"antd-pro-pages-rules-engine-rules-engine-noRadius",icon:"antd-pro-pages-rules-engine-rules-engine-icon"}},CkQt:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=n(a("kLXV"));a("5NDa");var u=n(a("5rEg"));a("Mwp2");var i=n(a("VXEj"));a("7Kak");var s=n(a("9yH6"));a("Pwec");var c=n(a("CtXQ")),d=n(a("2Taf")),r=n(a("vZ4D")),f=n(a("l4Ni")),h=n(a("ujKo")),p=n(a("MhPg"));a("OaEy");var g,m,v,y=n(a("2fM7")),E=l(a("q1tI")),D=a("MuoO"),C=n(a("TSYQ")),k=n(a("+Edv")),S=y.default.Option,T={">=":"\u5927\u4e8e\u6216\u7b49\u4e8e",">":"\u5927\u4e8e","=":"\u7b49\u4e8e","<":"\u5c0f\u4e8e","<=":"\u5c0f\u4e8e\u6216\u7b49\u4e8e"},V=["\u5e74\u9f84","\u6027\u522b","\u5a5a\u5426"],w=[">=",">","=","<","<="],N=(g=(0,D.connect)(function(e){return{rulesEngine:e.rulesEngine}}),g((v=function(e){function t(){var e,a;(0,d.default)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return a=(0,f.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(l))),a.state={visible:!1,chooseData:[],childData:{},chooseType:"",isShowRadio:!1,radioValue:"select",inputValue:""},a.modifyData=function(e){var t=a.props.dispatch;t({type:"rulesEngine/addNode",payload:{children:e}})},a.deleteData=function(e,t){var n=a.props.dispatch;n({type:"rulesEngine/deleteNode",payload:{deleteDom:e,place:t}})},a.onChange=function(e){var t=a.state.childData;"select"!==e.target.value||t.valueEnum||(t.valueEnum=["\u662f","\u5426"],a.setState({chooseData:t.valueEnum})),t.valueType=e.target.value,a.setState({radioValue:e.target.value,chooseType:e.target.value})},a.chooseCar=function(e,t){a.chooseType(e,t)},a.judge=function(e,t){a.chooseType(e,t)},a.chooseValue=function(e,t){a.chooseType(e,t)},a.chooseType=function(e,t){var n=e.keyField,l=e.valueType,o=e.valueEnum;switch(t){case l:a.setState({chooseData:o,chooseType:t,isShowRadio:!0,radioValue:t});break;case n:a.setState({chooseData:V,chooseType:t,isShowRadio:!1});break;default:a.setState({chooseData:w,chooseType:t,isShowRadio:!1})}a.setState({childData:e}),a.showModal()},a.chooseItem=function(e){var t=a.state,n=t.childData,l=t.chooseType,o=a.props.dispatch;o({type:"rulesEngine/selectItem",payload:{chooseType:l,item:e,childData:n}}),a.handleOk()},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){var e=a.state,t=e.childData,n=e.inputValue,l=e.chooseType;"input"===l&&(t.value=n),a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.onChangeValue=function(e){a.setState({inputValue:e.target.value})},a}return(0,p.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.rulesEngine,a=t.ruleData,n=this.state,l=n.visible,c=n.chooseData,d=n.radioValue,r=n.isShowRadio,f="select"===d;return E.default.createElement(E.Fragment,null,E.default.createElement(b,{data:a,modifyData:this.modifyData,deleteData:this.deleteData,chooseCar:this.chooseCar,judge:this.judge,chooseValue:this.chooseValue}),E.default.createElement(o.default,{title:"\u8bf7\u9009\u62e9\u9009\u9879",visible:l,onOk:this.handleOk,onCancel:this.handleCancel},r?E.default.createElement(s.default.Group,{onChange:this.onChange,value:d},E.default.createElement(s.default,{value:"select"},"\u4e0b\u62c9\u9009\u9879"),E.default.createElement(s.default,{value:"input"},"\u8f93\u5165\u6846")):null,!r||r&&f?E.default.createElement(i.default,{size:"small",bordered:!0,dataSource:c,renderItem:function(t){return E.default.createElement(i.default.Item,{onClick:function(){e.chooseItem(t)}},t)}}):E.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u503c",onChange:this.onChangeValue})))}}]),t}(E.PureComponent),m=v))||m);t.default=N;var b=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(0,h.default)(t).apply(this,arguments))}return(0,p.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,a=e.data,n=e.modifyData,l=e.deleteData,o=e.chooseCar,u=e.judge,i=e.chooseValue,s=e.index,d=e.length,r=a.op,f=a.children;return E.default.createElement("div",{className:k.default.rulesEngine},s&&E.default.createElement(R,{index:s,length:d,needFill:!0}),E.default.createElement(y.default,{ref:this.selectRef,defaultValue:r,className:k.default.conditionSelect},E.default.createElement(S,{value:"and"},"\u5e76\u4e14"),E.default.createElement(S,{value:"or"},"\u6216\u8005")),E.default.createElement("div",{className:k.default.contentCollection},f.map(function(e,a){if("set"===e.actionType)return E.default.createElement(t,{data:e,modifyData:n,deleteData:l,index:a,length:f.length,chooseCar:o,judge:u,chooseValue:i});var s="".concat(e.keyEntityName,".").concat(e.keyFiledName),c=e.op,d=e.value;return E.default.createElement(j,{left:s,op:c,right:d,index:a,length:f.length,chooseData:e,chooseCar:o,judge:u,chooseValue:i,childrenData:f,deleteData:l})}),E.default.createElement(c.default,{type:"plus-circle",style:{fontSize:16},onClick:function(){n(f)}})))}}]),t}(E.Component);function j(e){var t=e.left,a=e.op,n=e.right,l=e.index,o=e.length,u=e.deleteData,i=e.childrenData,s=e.chooseData,d=e.chooseCar,r=e.judge,f=e.chooseValue;return E.default.createElement("div",{className:k.default.content},E.default.createElement(R,{index:l,length:o}),E.default.createElement("span",{className:k.default.item,style:{color:"blue"},onClick:function(){d(s,s.keyField)}},t),E.default.createElement("span",{className:k.default.item,style:{color:"red"},onClick:function(){r(s,s.opType)}},T[a]),E.default.createElement("span",{className:k.default.item,style:{color:"#4B0091"},onClick:function(){f(s,s.valueType)}},n),E.default.createElement(c.default,{type:"delete",onClick:function(){u(i,l)}}))}function R(e){var t=e.index,a=e.needFill,n=0===t;return E.default.createElement(E.Fragment,null,E.default.createElement("div",{className:(0,C.default)(n?k.default.noRadius:k.default.radius)}),a&&E.default.createElement("div",{className:k.default.fillLine}))}}}]);