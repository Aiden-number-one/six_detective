(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{GM2d:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var i=n(a("BMrR"));a("+L6B");var o=n(a("2/Rp"));a("5NDa");var u=n(a("5rEg"));a("jCWc");var d=n(a("kPKH"));a("y8nQ");var s=n(a("Vl3Y")),r=n(a("2Taf")),c=n(a("vZ4D")),m=n(a("l4Ni")),f=n(a("ujKo")),p=n(a("MhPg"));a("iQDF");var g=n(a("+eQT")),y=l(a("q1tI")),v=a("LLXN"),b=n(a("BN5G")),h=g.default.RangePicker,x=function(e){function t(){var e,a;(0,r.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,m.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.search,l=t.exportData;return y.default.createElement(s.default,{className:"ant-advanced-search-form search-wraper",layout:"vertical"},y.default.createElement(i.default,{gutter:{xs:0,sm:8,md:10,lg:20,xl:24},align:"bottom",type:"flex"},y.default.createElement(d.default,{xs:24,sm:12,xl:10,xxl:8},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.logDate"})},e("logDate",{})(y.default.createElement(h,{format:"DD-MMM-YYYY",placeholder:["Start Date","End Date"]})))),y.default.createElement(d.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.updatedBy"})},e("updatedBy",{})(y.default.createElement(u.default,{placeholder:"Please input"})))),y.default.createElement(d.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.functionName"})},e("functionName",{})(y.default.createElement(u.default,{placeholder:"Please input"})))),y.default.createElement(d.default,{xs:24,sm:12,xl:8,xxl:6},y.default.createElement(s.default.Item,null,y.default.createElement(o.default,{type:"primary",onClick:a},y.default.createElement(b.default,{type:"iconsousuo",style:{color:"#fff"}}),(0,v.formatMessage)({id:"app.common.search"})),y.default.createElement(o.default,{style:{marginLeft:"10px"},type:"primary",onClick:l,className:"btn_usual",icon:"export"},(0,v.formatMessage)({id:"app.common.export"}))))))}}]),t}(y.Component);t.default=x},MDp7:function(e,t,a){e.exports={inputValue:"antd-pro-pages-system-management-audit-log-audit-log-inputValue",content:"antd-pro-pages-system-management-audit-log-audit-log-content",customizeDisplay:"antd-pro-pages-system-management-audit-log-audit-log-customizeDisplay",tableTop:"antd-pro-pages-system-management-audit-log-audit-log-tableTop","btn-icon":"antd-pro-pages-system-management-audit-log-audit-log-btn-icon",columnsnone:"antd-pro-pages-system-management-audit-log-audit-log-columnsnone",customizeDisplayModal:"antd-pro-pages-system-management-audit-log-audit-log-customizeDisplayModal"}},"PCT/":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("sRBo");var o=l(a("kaz8"));a("DjyN");var u=l(a("NUBc"));a("g9YV");var d=l(a("wCAj"));a("14J3");var s=l(a("BMrR"));a("jCWc");var r=l(a("kPKH")),c=l(a("2Taf")),m=l(a("vZ4D")),f=l(a("l4Ni")),p=l(a("ujKo")),g=l(a("MhPg"));a("y8nQ");var y,v,b,h=l(a("Vl3Y")),x=n(a("q1tI")),D=a("Hx5s"),k=a("MuoO"),M=a("LLXN"),C=l(a("wd/R")),E=l(a("MDp7")),L=a("fwgp"),N=l(a("GM2d")),T=l(a("BN5G")),S=h.default.create({})(N.default),z=(y=(0,k.connect)(function(e){var t=e.auditLog,a=e.loading;return{loading:a.effects,getAuditLogListData:t.data}}),y((b=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(n))),a.state={page:{pageNumber:1,pageSize:10},customizeVisible:!1,logStartDate:void 0,logEndDate:void 0,functionName:void 0,updatedBy:void 0,exportDataVisible:!1,functionNameOptions:[{key:"",value:"",title:"All"},{key:"1",value:"1",title:"Name One"},{key:"2",value:"2",title:"Name Two"},{key:"3",value:"3",title:"Name Three"}],options:[{label:"functionName",value:"functionName"},{label:"tableName",value:"tableName"},{label:"biToCode",value:"biToCode"},{label:"productCode",value:"productCode"},{label:"effectiveTime",value:"effectiveTime"},{label:"filedUpdated",value:"filedUpdated"},{label:"updateType",value:"updateType"},{label:"logTime",value:"logTime"},{label:"updatedBy",value:"updatedBy"},{label:"before",value:"before"},{label:"after",value:"after"}],checkedValues:[],tempColumns:[],cuscomizeColumns:[{key:"index",visible:!0},{key:"functionName",visible:!0},{key:"tableName",visible:!0},{key:"biToCode",visible:!1},{key:"productCode",visible:!0},{key:"effectiveTime",visible:!0,className:"columnsnone"},{key:"filedUpdated",visible:!1},{key:"updateType",visible:!1},{key:"logTime",visible:!0},{key:"updatedBy",visible:!0},{key:"before",visible:!1},{key:"after",visible:!1}],columns:[{index:0,title:(0,M.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index",width:60,render:function(e,t,l){return x.default.createElement("span",null,(a.state.page.pageNumber-1)*a.state.page.pageSize+l+1)}},{index:1,title:(0,M.formatMessage)({id:"systemManagement.auditLog.functionName"}),dataIndex:"functionName",key:"functionName",ellipsis:!0,width:120},{index:2,title:(0,M.formatMessage)({id:"systemManagement.auditLog.tableName"}),dataIndex:"tableName",key:"tableName",ellipsis:!0,width:120,colSpan:1},{index:3,title:(0,M.formatMessage)({id:"systemManagement.auditLog.BITOCode"}),dataIndex:"biToCode",key:"biToCode"},{index:4,title:(0,M.formatMessage)({id:"systemManagement.auditLog.productCode"}),dataIndex:"productCode",key:"productCode"},{index:5,title:(0,M.formatMessage)({id:"systemManagement.auditLog.effectiveDate"}),dataIndex:"effectiveTime",key:"effectiveTime",render:function(e,t){return x.default.createElement("div",null,x.default.createElement("span",null,t.operateDate&&(0,C.default)(t.operateDate).format("DD/MM/YYYY")))}},{index:6,title:(0,M.formatMessage)({id:"systemManagement.auditLog.fieldUpdated"}),dataIndex:"filedUpdated",key:"filedUpdated"},{index:7,title:(0,M.formatMessage)({id:"systemManagement.auditLog.updateType"}),dataIndex:"updateType",key:"updateType"},{index:8,title:(0,M.formatMessage)({id:"systemManagement.auditLog.logDate"}),dataIndex:"logTime",key:"logTime",align:"center",render:function(e,t){return x.default.createElement("div",null,x.default.createElement("span",null,t.logTime&&(0,L.timeFormat)(t.logTime).t1),x.default.createElement("br",null),x.default.createElement("span",null,t.logTime&&(0,L.timeFormat)(t.logTime).t2))}},{index:9,title:(0,M.formatMessage)({id:"systemManagement.auditLog.updatedBy"}),dataIndex:"updatedBy",key:"updatedBy"},{index:10,title:(0,M.formatMessage)({id:"systemManagement.auditLog.before"}),dataIndex:"before",key:"before"},{index:11,title:(0,M.formatMessage)({id:"systemManagement.auditLog.after"}),dataIndex:"after",key:"after"}],getAuditLogList:[]},a.auditLogForm=x.default.createRef(),a.filterColumns=function(){var e=a.state,t=e.columns,l=e.cuscomizeColumns,n=t.map(function(e){var t=Object.assign({},e);return l.filter(function(a){a.key===e.key&&(t.visible=a.visible)}),t}),i=[],o=[];n.forEach(function(e,t){e.visible?o.push(e.key):i.push(t)}),i.forEach(function(e,t){n.splice(e-t,1)}),a.setState({tempColumns:t,columns:n,checkedValues:o})},a.getAuditLog=function(){var e=a.state,t=e.logStartDate,l=e.logEndDate,n=e.functionName,i=e.updatedBy,o=e.page,u={pageNumber:o.pageNumber.toString(),pageSize:o.pageSize.toString(),functionName:n,startTime:t,endTime:l,updatedBy:i},d=a.props.dispatch;d({type:"auditLog/getAuditLogList",payload:u,callback:function(){}})},a.pageChange=function(e,t){var l={pageNumber:e,pageSize:t};a.setState({page:l},function(){a.getAuditLog()})},a.changeBeginDate=function(){},a.changeEndDate=function(){},a.queryLog=function(){a.auditLogForm.current.validateFields(function(e,t){if(!e){var l,n,i=t.logDate;i&&i.length>0&&(l="".concat((0,C.default)(i[0]).format("YYYY-MM-DD")," 00:00:00"),n="".concat((0,C.default)(i[1]).format("YYYY-MM-DD")," 23:59:59")),a.setState({logStartDate:l,logEndDate:n,functionName:t.functionName,updatedBy:t.updatedBy},function(){a.getAuditLog()})}})},a.exportData=function(){a.setState({exportDataVisible:!0})},a.exportDataConfirm=function(){var e=a.props.dispatch,t={fileType:"1",apiVersion:"v2.0",isPage:"true",apiName:"bayconnect.superlop.get_system_log_list"};e({type:"auditLog/getDataExport",payload:t},function(){a.setState({exportDataVisible:!1})})},a.exportDataCancel=function(){a.setState({exportDataVisible:!1})},a.customizeDisplay=function(){a.setState({customizeVisible:!0})},a.customizeConfirm=function(){var e=a.state,t=e.tempColumns,l=e.columns,n=e.checkedValues;a.setState({customizeVisible:!1});var i=l.map(function(e){return e.key}),o=Object.assign([],l);n.map(function(e){i.includes(e)||o.push(t.filter(function(t){return t.key===e})[0])}),i.map(function(e){e&&!n.includes(e)&&"index"!==e&&o.splice(o.indexOf(o.filter(function(t){return t.key===e})[0]),1)}),o.sort(function(e,t){return e.index-t.index}),o.forEach(function(e,t){t<2&&Object.defineProperty(e,"fixed",{value:"left",configurable:!0,writable:!0}),t===o.length-1&&Object.defineProperty(e,"fixed",{value:"right",configurable:!0,writable:!0})}),a.setState({columns:o,checkedValues:n}),console.log("newColumns===",o)},a.customizeCancel=function(){var e=a.state.columns,t=e.map(function(e){return e.key});a.setState({customizeVisible:!1,checkedValues:t})},a.onChangeCheckbox=function(e){a.setState({checkedValues:e})},a.operatorReset=function(){a.auditLogForm.current.resetFields()},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.filterColumns(),this.getAuditLog()}},{key:"render",value:function(){var e=this.props.loading,t=this.state.getAuditLogList,a=this.state,l=a.page,n=a.functionNameOptions,c=a.exportDataVisible,m=a.options,f=a.checkedValues,p=a.tempColumns;t=this.props.getAuditLogListData.items;var g=this.props.getAuditLogListData&&this.props.getAuditLogListData.totalCount;return x.default.createElement(D.PageHeaderWrapper,null,x.default.createElement(S,{search:this.queryLog,exportData:this.exportData,ref:this.auditLogForm,functionNameOptions:n}),x.default.createElement("div",{className:E.default.content},x.default.createElement(s.default,{type:"flex",justify:"end"},x.default.createElement(r.default,null,x.default.createElement("span",{onClick:this.customizeDisplay},x.default.createElement("span",{className:E.default.customizeDisplay},"Customize Display"),x.default.createElement(T.default,{type:"icon-setting",className:E.default["btn-icon"]})))),x.default.createElement(d.default,{loading:e["auditLog/getAuditLogList"],dataSource:t,pagination:!1,columns:this.state.columns,rowKey:Math.random().toString(),scroll:{x:1300}}),t&&t.length>0&&x.default.createElement(u.default,{showSizeChanger:!0,current:l.pageNumber,showTotal:function(){return"Page ".concat(g?l.pageNumber.toString():0," of ").concat(Math.ceil((g||0)/l.pageSize).toString())},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:g,pageSize:l.pageSize})),x.default.createElement(i.default,{closable:!1,wrapClassName:E.default.customizeDisplayModal,title:"Customize Display",visible:this.state.customizeVisible,onOk:this.customizeConfirm,onCancel:this.customizeCancel,cancelText:(0,M.formatMessage)({id:"app.common.cancel"}),okText:(0,M.formatMessage)({id:"app.common.submit"})},x.default.createElement("div",null,x.default.createElement("p",null,"Alter the display of the orders table by selecting up to"," ",x.default.createElement("font",{style:{color:"#0D87D4"}},p.length-1)," Cloumns"),x.default.createElement(o.default.Group,{options:m,value:f,onChange:this.onChangeCheckbox}))),x.default.createElement(i.default,{closable:!1,title:"Select Export Format",visible:c,onOk:this.exportDataConfirm,onCancel:this.exportDataCancel,cancelText:(0,M.formatMessage)({id:"app.common.cancel"}),okText:(0,M.formatMessage)({id:"app.common.save"})},x.default.createElement("div",null,x.default.createElement(o.default.Group,null,x.default.createElement(o.default,{value:1},"csv"),x.default.createElement(o.default,{value:2},"xlsx"),x.default.createElement(o.default,{value:3},"docx"),x.default.createElement(o.default,{value:4},"pdf")))))}}]),t}(x.Component),v=b))||v),w=z;t.default=w}}]);