(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{AFb5:function(e,t,a){"use strict";var i=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=i(a("kLXV"));a("sRBo");var o=i(a("kaz8"));a("DjyN");var u=i(a("NUBc"));a("g9YV");var d=i(a("wCAj"));a("14J3");var s=i(a("BMrR"));a("jCWc");var r=i(a("kPKH")),c=i(a("2Taf")),m=i(a("vZ4D")),f=i(a("l4Ni")),g=i(a("ujKo")),p=i(a("MhPg"));a("y8nQ");var y,v,h,b=i(a("Vl3Y")),x=l(a("q1tI")),k=a("Hx5s"),D=a("MuoO"),C=a("LLXN"),M=i(a("wd/R")),E=i(a("gQU8")),L=a("fwgp"),N=i(a("HN7/")),T=i(a("BN5G")),S=b.default.create({})(N.default),z=(y=(0,D.connect)(function(e){var t=e.auditLog,a=e.loading;return{loading:a.effects,getAuditLogListData:t.data}}),y((h=function(e){function t(){var e,a;(0,c.default)(this,t);for(var i=arguments.length,l=new Array(i),n=0;n<i;n++)l[n]=arguments[n];return a=(0,f.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(l))),a.state={page:{pageNumber:1,pageSize:10},customizeVisible:!1,logStartDate:void 0,logEndDate:void 0,functionName:void 0,updatedBy:void 0,exportDataVisible:!1,functionNameOptions:[{key:"",value:"",title:"All"},{key:"1",value:"1",title:"Name One"},{key:"2",value:"2",title:"Name Two"},{key:"3",value:"3",title:"Name Three"}],options:[{label:"functionName",value:"functionName"},{label:"tableName",value:"tableName"},{label:"biToCode",value:"biToCode"},{label:"productCode",value:"productCode"},{label:"effectiveTime",value:"effectiveTime"},{label:"filedUpdated",value:"filedUpdated"},{label:"updateType",value:"updateType"},{label:"logTime",value:"logTime"},{label:"updatedBy",value:"updatedBy"},{label:"before",value:"before"},{label:"after",value:"after"}],checkedValues:[],tempColumns:[],cuscomizeColumns:[{key:"index",visible:!0,fixed:"left"},{key:"functionName",visible:!0,fixed:"left"},{key:"tableName",visible:!0},{key:"biToCode",visible:!1},{key:"productCode",visible:!0},{key:"effectiveTime",visible:!0,className:"columnsnone"},{key:"filedUpdated",visible:!1},{key:"updateType",visible:!1},{key:"logTime",visible:!0},{key:"updatedBy",visible:!0},{key:"before",visible:!1},{key:"after",visible:!1,fixed:"right"}],columns:[{index:0,title:(0,C.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index",width:"5%",render:function(e,t,i){return x.default.createElement("span",null,(a.state.page.pageNumber-1)*a.state.page.pageSize+i+1)}},{index:1,title:(0,C.formatMessage)({id:"systemManagement.auditLog.functionName"}),dataIndex:"functionName",key:"functionName",ellipsis:!0,width:"20%"},{index:2,title:(0,C.formatMessage)({id:"systemManagement.auditLog.tableName"}),dataIndex:"tableName",key:"tableName",ellipsis:!0,width:"20%",colSpan:1},{index:3,title:(0,C.formatMessage)({id:"systemManagement.auditLog.BITOCode"}),dataIndex:"biToCode",key:"biToCode",width:"10%"},{index:4,title:(0,C.formatMessage)({id:"systemManagement.auditLog.productCode"}),dataIndex:"productCode",key:"productCode",width:"15%"},{index:5,title:(0,C.formatMessage)({id:"systemManagement.auditLog.effectiveDate"}),dataIndex:"effectiveTime",key:"effectiveTime",width:"20%",render:function(e,t){return x.default.createElement("div",null,x.default.createElement("span",null,t.effectiveTime&&(0,L.timeFormat)(t.effectiveTime)))}},{index:6,title:(0,C.formatMessage)({id:"systemManagement.auditLog.fieldUpdated"}),dataIndex:"filedUpdated",key:"filedUpdated"},{index:7,title:(0,C.formatMessage)({id:"systemManagement.auditLog.updateType"}),dataIndex:"updateType",key:"updateType"},{index:8,title:(0,C.formatMessage)({id:"systemManagement.auditLog.logDate"}),dataIndex:"logTime",key:"logTime",align:"center",width:"20%",render:function(e,t){return x.default.createElement("span",null,t.logTime&&(0,L.timeFormat)(t.logTime))}},{index:9,title:(0,C.formatMessage)({id:"systemManagement.auditLog.updatedBy"}),dataIndex:"updatedBy",key:"updatedBy"},{index:10,title:(0,C.formatMessage)({id:"systemManagement.auditLog.before"}),dataIndex:"before",key:"before"},{index:11,title:(0,C.formatMessage)({id:"systemManagement.auditLog.after"}),dataIndex:"after",key:"after",width:100,fixed:"right"}],getAuditLogList:[]},a.auditLogForm=x.default.createRef(),a.filterColumns=function(){var e=a.state,t=e.columns,i=e.cuscomizeColumns,l=t.map(function(e){var t=Object.assign({},e);return i.filter(function(a){a.key===e.key&&(t.visible=a.visible,Object.hasOwnProperty("fixed")&&(t.fixed=a.fixed))}),t}),n=[],o=[];l.forEach(function(e,t){e.visible?o.push(e.key):n.push(t)}),n.forEach(function(e,t){l.splice(e-t,1)}),a.setState({tempColumns:t,columns:l,checkedValues:o})},a.getAuditLog=function(){var e=a.state,t=e.logStartDate,i=e.logEndDate,l=e.functionName,n=e.updatedBy,o=e.page,u={pageNumber:o.pageNumber.toString(),pageSize:o.pageSize.toString(),functionName:l,startTime:t,endTime:i,updatedBy:n},d=a.props.dispatch;d({type:"auditLog/getAuditLogList",payload:u,callback:function(){}})},a.pageChange=function(e,t){var i={pageNumber:e,pageSize:t};a.setState({page:i},function(){a.getAuditLog()})},a.changeBeginDate=function(){},a.changeEndDate=function(){},a.queryLog=function(){a.auditLogForm.current.validateFields(function(e,t){if(!e){var i,l,n=t.logDate;n&&n.length>0&&(i="".concat((0,M.default)(n[0]).format("YYYY-MM-DD")," 00:00:00"),l="".concat((0,M.default)(n[1]).format("YYYY-MM-DD")," 23:59:59")),a.setState({logStartDate:i,logEndDate:l,functionName:t.functionName,updatedBy:t.updatedBy},function(){a.getAuditLog()})}})},a.exportData=function(){a.setState({exportDataVisible:!0})},a.exportDataConfirm=function(){var e=a.props.dispatch,t={fileType:"1",apiVersion:"v2.0",isPage:"true",apiName:"bayconnect.superlop.get_system_log_list"};e({type:"auditLog/getDataExport",payload:t},function(){a.setState({exportDataVisible:!1})})},a.exportDataCancel=function(){a.setState({exportDataVisible:!1})},a.customizeDisplay=function(){a.setState({customizeVisible:!0})},a.customizeConfirm=function(){var e=a.state,t=e.tempColumns,i=e.columns,l=e.checkedValues;a.setState({customizeVisible:!1});var n=i.map(function(e){return e.key}),o=Object.assign([],i);l.map(function(e){n.includes(e)||o.push(t.filter(function(t){return t.key===e})[0])}),n.map(function(e){e&&!l.includes(e)&&"index"!==e&&o.splice(o.indexOf(o.filter(function(t){return t.key===e})[0]),1)}),o.sort(function(e,t){return e.index-t.index}),o.forEach(function(e,t){Object.hasOwnProperty(e.fixed)&&delete e.fixed,t<2&&(e.fixed="left"),t===o.length-1&&(e.fixed="right")}),a.setState({columns:o,checkedValues:l}),console.log("newColumns===",o)},a.customizeCancel=function(){var e=a.state.columns,t=e.map(function(e){return e.key});a.setState({customizeVisible:!1,checkedValues:t})},a.onChangeCheckbox=function(e){a.setState({checkedValues:e})},a.operatorReset=function(){a.auditLogForm.current.resetFields()},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.filterColumns(),this.getAuditLog()}},{key:"render",value:function(){var e=this.props.loading,t=this.state.getAuditLogList,a=this.state,i=a.page,l=a.functionNameOptions,c=a.exportDataVisible,m=a.options,f=a.checkedValues,g=a.tempColumns;t=this.props.getAuditLogListData.items;var p=this.props.getAuditLogListData&&this.props.getAuditLogListData.totalCount;return x.default.createElement(k.PageHeaderWrapper,null,x.default.createElement(S,{search:this.queryLog,exportData:this.exportData,ref:this.auditLogForm,functionNameOptions:l}),x.default.createElement("div",{className:E.default.content},x.default.createElement(s.default,{type:"flex",justify:"end"},x.default.createElement(r.default,null,x.default.createElement("span",{onClick:this.customizeDisplay},x.default.createElement("span",{className:E.default.customizeDisplay},"Customize Display"),x.default.createElement(T.default,{type:"icon-setting",className:E.default["btn-icon"]})))),x.default.createElement(d.default,{loading:e["auditLog/getAuditLogList"],dataSource:t,pagination:!1,columns:this.state.columns,rowKey:Math.random().toString(),scroll:{x:1300}}),t&&t.length>0&&x.default.createElement(u.default,{showSizeChanger:!0,current:i.pageNumber,showTotal:function(){return"Total ".concat(p," items")},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:p,pageSize:i.pageSize})),x.default.createElement(n.default,{closable:!1,wrapClassName:E.default.customizeDisplayModal,title:"Customize Display",visible:this.state.customizeVisible,onOk:this.customizeConfirm,onCancel:this.customizeCancel,cancelText:(0,C.formatMessage)({id:"app.common.cancel"}),okText:(0,C.formatMessage)({id:"app.common.submit"})},x.default.createElement("div",null,x.default.createElement("p",null,"Alter the display of the orders table by selecting up to"," ",x.default.createElement("font",{style:{color:"#0D87D4"}},g.length-1)," Cloumns"),x.default.createElement(o.default.Group,{options:m,value:f,onChange:this.onChangeCheckbox}))),x.default.createElement(n.default,{closable:!1,title:"Select Export Format",visible:c,onOk:this.exportDataConfirm,onCancel:this.exportDataCancel,cancelText:(0,C.formatMessage)({id:"app.common.cancel"}),okText:(0,C.formatMessage)({id:"app.common.save"})},x.default.createElement("div",null,x.default.createElement(o.default.Group,null,x.default.createElement(o.default,{value:1},"csv"),x.default.createElement(o.default,{value:2},"xlsx"),x.default.createElement(o.default,{value:3},"docx"),x.default.createElement(o.default,{value:4},"pdf")))))}}]),t}(x.Component),v=h))||v),w=z;t.default=w},"HN7/":function(e,t,a){"use strict";var i=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var n=l(a("BMrR"));a("+L6B");var o=l(a("2/Rp"));a("5NDa");var u=l(a("5rEg"));a("jCWc");var d=l(a("kPKH"));a("y8nQ");var s=l(a("Vl3Y")),r=l(a("2Taf")),c=l(a("vZ4D")),m=l(a("l4Ni")),f=l(a("ujKo")),g=l(a("MhPg"));a("iQDF");var p=l(a("+eQT")),y=i(a("q1tI")),v=a("LLXN"),h=l(a("BN5G")),b=p.default.RangePicker,x=function(e){function t(){var e,a;(0,r.default)(this,t);for(var i=arguments.length,l=new Array(i),n=0;n<i;n++)l[n]=arguments[n];return a=(0,m.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),a.state={},a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.search,i=t.exportData;return y.default.createElement(s.default,{className:"ant-advanced-search-form search-wraper",layout:"vertical"},y.default.createElement(n.default,{gutter:{xs:0,sm:8,md:10,lg:20,xl:24},align:"bottom",type:"flex"},y.default.createElement(d.default,{xs:24,sm:12,xl:10,xxl:8},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.logDate"})},e("logDate",{})(y.default.createElement(b,{format:"DD-MMM-YYYY",placeholder:["Start Date","End Date"]})))),y.default.createElement(d.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.updatedBy"})},e("updatedBy",{})(y.default.createElement(u.default,{placeholder:"Please input"})))),y.default.createElement(d.default,{xs:24,sm:12,xl:7,xxl:5},y.default.createElement(s.default.Item,{label:(0,v.formatMessage)({id:"systemManagement.auditLog.functionName"})},e("functionName",{})(y.default.createElement(u.default,{placeholder:"Please input"})))),y.default.createElement(d.default,{xs:24,sm:12,xl:8,xxl:6},y.default.createElement(s.default.Item,null,y.default.createElement(o.default,{type:"primary",onClick:a},y.default.createElement(h.default,{type:"iconsousuo",style:{color:"#fff"}}),(0,v.formatMessage)({id:"app.common.search"})),y.default.createElement(o.default,{style:{marginLeft:"10px"},type:"primary",onClick:i,className:"btn-usual",icon:"export"},(0,v.formatMessage)({id:"app.common.export"}))))))}}]),t}(y.Component);t.default=x},gQU8:function(e,t,a){e.exports={inputValue:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-inputValue",content:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-content",customizeDisplay:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-customizeDisplay",tableTop:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-tableTop","btn-icon":"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-btn-icon",columnsnone:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-columnsnone",customizeDisplayModal:"antd-pro-pages-system-management-audit-trail-logging-audit-trail-logging-customizeDisplayModal"}}}]);