(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"8CRg":function(t,e,n){"use strict";var r=n("tAuX"),i=n("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("p0pE")),a=i(n("2Taf")),s=i(n("vZ4D")),u=i(n("l4Ni")),c=i(n("ujKo")),l=i(n("MhPg")),f=r(n("q1tI")),h=i(n("fxoc")),p=i(n("cQSq")),d=function(t){function e(){var t,n;(0,a.default)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=(0,u.default)(this,(t=(0,c.default)(e)).call.apply(t,[this].concat(i))),n.state={},n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"componentDidMount",value:function(){var t=[{type:"\u8bc4\u4f30\u4e2d",percent:.55},{type:"\u8bbe\u8ba1\u4e2d",percent:.45}],e=500,n=new p.default,r=n.createView().source(t);r.transform({type:"map",callback:function(t){var n=(0,o.default)({},t);return n.value=parseInt(e*t.percent,10),n}});var i=new h.default.Chart({container:"mountNode",forceFit:!0,height:100,padding:"auto"});i.source(r),i.tooltip(!1),i.legend(!1),i.coord("theta",{radius:.75,innerRadius:.9}),i.intervalStack().position("percent").color("type",["#ff245c","#1b2732"]).opacity(1),i.guide().html({position:["50%","50%"],html:'<p class="value" style="color: #85abc6;font-weight: bold;font-size: 20px;">500</p>'}),i.render()}},{key:"render",value:function(){return f.default.createElement("div",{id:"mountNode"})}}]),e}(f.PureComponent);e.default=d},CIvD:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANUAAADGCAYAAABFAsW2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGH5JREFUeNrsXT1wE1uWvqamapdgq1Qm2ERT6AVKhYggQwo2cYJtCB+FHDxS4+xl2NlkNikTWBSEYPwSJRNIJFsmQihVgKhRMoG9qnqBN9vtY5+Lj45vt1qyuvu29H1VjYTVlrv7fN89P/fPGAAAAAAAAAAAAAAAAE+wgkcwPxwdHRWCl/3goNe9zc3NrofXWA1e2uIad2G5+eIWHsFcQYJqBMd6cLzy9Bq3WVD2PTBn/AWPYK4ohLyfCq//8b93gpfVGKeebf/Xv59O+fXfxPsOTAZR+Y49IaidEMGUg5fbwVEUr4TyjAKU/+3z6zA4zu1rIDz7cxOEewdBCDgI3paCowmTIafKDQKyW8GU+bUY4n0s4c+Cw3odK4hJsMI0MQR6xt855L85DMR2DktBVL6LqCyOoiL0KZP54r30HgleE12HDSXleyM8Wt8eEBlE5YOQSDgVPorK+/QtaX0iqxB/UTQAUmQ9OoJrHsLCEFWaQnoQHPdEq29b/F4aHighj1ZRHvaMixpfIDCIKgnS3WEhPVRC+sJCOp3hO2v81r7eM1cVQ3qtxvga6gcb8fuRuarsdeif4Lo6M95rhe9XCuyEBXYKRkBUNxFThYVUmVVIwXeUWCB0PDKXVbdSircx4OMzi7AbXPvgBgKj8PAk+I4eGAJRTZNzkJDq7JXOmUjtOGFQ8PtV9j6P+LXg4W2O2JuR0DrBfXVj3FeRnwmJ7DZ7rzYLDAUOiCpUTHU+LGlaFFJFkSb4vQKL5zG/lqYgdpe9yA/x/5+hXfB3RxP+rgwRqyzgu3wN1SkEPWCR/cEiG014ThSqrolGp82NDsQFUTnF1GeC9CYQep2FtB4z9+mweLqz5Do3uL8aC+wuiz5OrnbMAjueILAKP7cyxAVRhYmpFVW9Y4I+ZyFFeQEZWnU8vPeaClGjvCkJ7G3UfXD1cC2OuI6Ojmh85Et+Rhubm5sjiMpzBEZrmMuBrSM2WtdBgocifIkUE3sl+s7tiNBuJFr3yPDJQ4HJ8DWqsaAQ8XVwNMPuT4nrjJ/ribANPb/v4ld2aNgUROW/qP5HEGNsagMn20+E0T+EhXlctXsVQbRYrXgOPfj6BIHZ+94LqyJyWPjU1Wgp+9QD+3QgKv9F1RYhzUVLyKHeGod65xyatCaIqRGRb5CQjpcgRF4X4a4LzQniWhPhNdml9dc/W//Jz7Yb2GYhn+EiiqrERhsERmuqVpO80kdXH9MEMY1E6DNYwvyzJELgwjTi4r4uig4qk6IDiCofhYhnk4zJOcV+iJgGTJamAezzanDjUwoR144r53I0bu8WtUq4sqCGL7OgVm3Y4TJgcN5uSOsLMc0urguvHjy73ZCGjoT1gBu6d3kcK7l0ouI4fo1zp3ch3olyrkMHISCm+YmLnuWWq4jDXusZ51qtsPwWovIj3HthLit71Pq90d6JQ71DR+I9YjEdQCYzP/+XLC7t9Y9ZXKNp7QVRZWvQIodxoS0fV7IOHUY/YEGNII0b26HAwnrpaLS2XBVTFVm8XoRpJisLYEjqyP2VjfJGx+gRhYguG7oLOczdJlVuwKpxChmcA7/gRvG97DCGqNI3HpVqqR+EWre/61I5G/eTivcR6mUbElKutaEbMy69/2Yup5hQP+JHiCp9g1GiS1UkZ3mWDbrv8E4by9jXlKGdStywaa+1oxs21Q1CEyLfQVTpFySuPfiIcG/PVeYFUrPbrrm+wGhYOGgbzFwWMFZyKKhtDhGuFSRCWsURe6cOqJ25/Wpsn8Kk6EEUMIZcwDiHqJIV1LVklvOntjJYhw2Gyp4/diywsGqq4as78ixbhMqVsFYWRFANc7UxwM/QIjhvCzT21qaHKkQfcSjYzLuwVhZEUIfq17YwKiIXwoplu7wJa2XBBIX8aTHyrFwLy/etdF5MKag6BJUvsL3q5mr9QsIh21eeR/Z/z3x44fM9eSsqLqtS2bwVQ1ADV6IL5EZYXRbWIIawqOJbZn5AVFMIikZKUD/FF0fZXAuKDHIfgloIYd0348u0uYRFfKAFTR8wTyCqGIKyC1n2HB27LkHVUTJfGGGN2PaThEW8oJE0deYLRBUhqKJIRicJagBBLbSwIkNB5gfx5FfmzU/QilrBscv7Gy+vqESlj6o6f5fVHe7Y3VdFCXTqLrawNlTxYp95YM+54AnzZZv5Q4KyU3xoSFR7KUQV3PSn4Pi/4PjKu7lb2KH/b+Rocx56JEdKjFCUWKrihRUW2b/NfLDnEE/eMG9eiPMsCopjiycqdsd21q3dCcOO87KVvr4QlB3SIh/MBgS1VMLakCIhPjAv7DkX6wqay4og8YgmQnb444MsVsBNeyPtAbc89qEMxKqmfceM3X0zPjh2C/1QSyesTsCRLZFP21RgS5zTsjz653+sEY/qS1Oo4FaDbph2cb8fPIB/mcv5M+fsxmWORfOhZHLaxNCjpRUW2V3avsH8kHjDPHpm86uskOkwpeDmKQ6ucB7VU4WJr+LUTtatD5A9Al7I1YcJY/2TvEoTcYq6Y94shadSD8huQN1WgrJ5lBGFiQ1QCjDXK4I6vyIeUcdwhfm1PKISiyrajdV0HlVShQmUzgFZarcometLJnxgXj3NKgzMylPZbWw+qP6odZVH7aEwAejCBefkMr9aF5+fs7BWmWeLn1NxlWZbx73sxmnvIuvOacfB+6AREMIjyrmrIkX4RUY0Il//W9prCWbhqezCiXoJKrnQJfIoYJr8yq48LPGReZb6oNtURcWDH8tcnJCjJmpmfCnmPSwjBkwIAwcqDFxnHtnPiV9ULSynPej2VoqCshuvnTk6ecdGnmOhSyCmsIgn3RAe2WkiVLRYS7NokaanqtvihBLbrhmv9mGxFmAaSL6UmE8StmhRXyhRiZ3g+44+qW1x6gHG9QFTeivii4xsth19VzQ+sJ6Wt0rLU9l9X119UrI4sQeaADNgTxUtdN9Vi/lXXwhRKS8lR6BTyNdQxQl08gKzeCvdIDfUFJF+mt4qDU8V5qXkutoDFCeAORQtBiH8StVbJSqqabwUaAHMKQzM3Fsl7akecuvQnuClmuADMAdv1ZzgrdrMx4d5FhV5qTNV8YOXArLyVsTDs6RDwMRExUPvV2PkUvBSQJreivi4muTUkCQ9FblYGnv1TQiNyp3r8FJAit5qXfZbMR/PkwwBExEV799KLUFPLSRPYd/Pfil4KSBBbyX7rRriM+IjhYEV5mluPNUDkRiO3a/UHswPJIjXIbyTvHyQJ1GRax3KeSw8grgkzoGXApKE5FdJjWAnXg6TCgHnLipegpcKFF/UR8/F+2NM7QASDgGJX8ch/DPMz1W9ZLSvnsq61F5EgeItzA6kgLcRBYteUiFgEqK6x6HfqbwhVaA4hr2BFLzVsSpYyLUsTjkEvOe1qCJCv8cy9IO5gRRxHMLDxELAeS/7XIkR+v0BOwMpgvjWkCGgmA1BPH3CvB3yZgZ2rZSdzc3Nmeb23UpAVDr0q4n3CP2ALEPAMT6KENA6g5fsAGrm+kIyyXoqVjTV+mmJqE6gaDvyt2iu900h9AN8CAEbgo+Sh1cj1/9szWU+36ye6uc2OKRq3iKnrEM/h6dC6AdkFQK6+Cj5Svxt8kGim3mtlFlzqoEM6Sj2tJsaq3lTJLaSOLcD+wIZQPKOOoKrdi0U4mvw/wtRBTzumTksPDSTpwr+OInq55Y4Qun9CC/VwXR5IKO8aqSEpb1VX0RaN8bM1b9AWB17oSKf0tM8Hon3n2FeIEN8FmIiXh4oUV2sDagGgKeaU2nYOv8wylPBroAnIaD2VEPFYy9EVRaKt/kU5VJy/TWICsgyBJT8K8gZwYK3ZZ9ERQo/U65T7tWLBTIBH9B18ZN5e+abp6KLOVU/qyL0AzwOAavqs1PfRLVqrlf+ZJHiB+wJeIAfIfy0IeCqF6LiTdwMu0+JEsI/wOPwr6Q+O1N8ztRT3Rbu0ykqFCkAH6B4WHKEf5LPmYqqyBcsK3818Tk6fAGfMHLxVPC36IOoJikboR/gawg4C59T81RRw5MGsCPgEQYhPDXMYy881SSg8gf4hMT5OA9RUbVED0+6h5wK8D2nMtfXpzgzcxhVMS9PpQchFpBTATnIqQrqs1NfPBUAAPMSlViLOspTAYCvKEzgdSaeyg7r0DkVBtMCeQj/9Pi/vuK1n+EfZvsCPiENPiKnAgCICgAgKgCAqAAAgKgAAKICAIhqRqiNtgAgU6TBx5uKyk6h18PlozrYACBLRA1MKCpepy8qsWWOntiFDl8gD9A8va14jZwKAHzAvHZSvBPRAlzsYYVHDXgY/o3CeMzbQ+3zOVubm5uxo695eCrXemnfxHsUKgCfUAjhqTHj61eSoGrmcmfFl4l5qkC9JXO5UyK9HgTq3Ynxa3dhR8AjJM7HaT1Vw1ytl2bVS9M+9BRkGe6VYEfAI5RCeGrM+NIQ5DBoR8WmGd92Z+45FV3EK34/4NdJ+/mgpA74mlO5cMFn3pl+I3FPxRu92R0U68JTjS2Xq7ctgR0BH3MqyVPB3+FN/8DU1T+5g6LyVHfM+Pp/A+tqaSVQLP0MZA21cvJAfXwnZuQ195zqGsRyuboCOEAICHgc+mlRrSo+Zycqhmu9NLnHLyqAgA+4G8JPW6Q4m8cfmZeohuZ6B7AcV1WDPQEPUAvhpw3/hr6JapV3qXddNMI/wLfwrytyrdsc/nklqmsbEQexKcWso5AkEQBShd7eiflpFG/7PonKKlxPAekgBAQ8DP066rOi4nH2ouLdvV0jK2Qy+Ah2BTLEoxBeWk81ZB5746ms64warlTDLGAgo9CvMMFTlecV+iUhKj2ygpLBAUJAwKPQb8C8NIqv/ooqQCXCWz2GfYEM8DjCS1W8FVVEXvWHeL8O+wIZYD2Ej3PPp+btqQi94CiqrUhky1AIPoOwgDTzKeJbwcVH5mmReWt8FtVYCMi7LBwjBAQ8CP2O1a4fFcVb/0QVXDCFfzR+6gFCQCAHoR/x9Ix5662nInxzhIDkqUYIAYEMQ7+xiEmEft/m/XeTENWXGCHgc5gcSAHPY4R+X7wXVUQI+Fa65KClKMHmQIJeqqRCv7dphH5JeSrCCYeARSG2jhnvCG7A9ECCkPwaqKnzRQ792kn84aREZV1qXTcg0qnB7kCC2A7hneRlLzei4rWo6YIrao5VUxUs4K2AJEK/hipQNMVntzmf6t10zfS0PZUNAekG7kUULF6BAkACeBVRoLjHvDxJ6o8nJqrgRnpcsFhTH+2J9yV4KyABL1UK4ZthPp4xP/MlKgYlgjTNXpbXB9Idw1sBCXqpppzhyzxcTapAkZaoyMWeOwoW8FZAFl6qznw8ya2oeOQvtQplNc8K3gpI20sR/+hoz3NEehaeyoaA5zFyq5fgBHADL/UyRi51nnToR1hJ6YbX+KZeyxVAg58fmqtOOqrQ/KIqNQAQh19UPv9ursro5KW2lJeifqvWX/9s/TcLi5Yr625ubt7Pjac6OjqqBceu2NPK5a12jOi3QhgI3CDsk/1SOxFeqmqu1v+r8o6J/ouKL7TNN/s1aB3+TeRWeqCt7O1+GXyOhTeBabwU8UWmDq9ltMN8k7nUQJw74i1zcuGpCuq99VbUb/VUFTN21Y0egirAFJB8GTCfJJ4y7y5yqUBExLVfOOe6n8QFJSUqUn+H33eoNeBWomUu+610GLgl3ldRtACmKE5UQ3hkc3nql2rJih8JKzh2WWD5LFSoG6WEkUYI/02OvQp+/slcDdUn931fLc0LAJJHFP18FVERDUfaEJ/TJMTfzeWiLq/TvLZbGTyPj+Zy7NUTh7eSRYtPoA4QgU+qOLGlPn/CPPuY9oWlLiqeFEbxbcVRtNBh4C64Azi81K4O+xzFiQoXJ4YLLypGyxYt5NSQ4AHY3cAtXmG3EEAJivigR07ItSdui+JEK4trzERUnDR+4CTS1Xclc6lPWIMdYMHotGBg3H1SxKsPSQ9H8s1T2akhdNQdYeCGOBX5FeDKowgbjrCPBs1+SXJqh7eiYrxjN/1MhYFd1QLVeEgTsLxeiuwvU4EdtdEA8ecZ8+lDlteaqajYPZOw6IG8UJ8dqPyqgSkiSysosntD5VEH6rQXzKN3WYV9vngqwwNsKaEsOzqFyVvJYSSHKFwsZWFCRik6irGdvDQUqSUHbC+tqFhYJCp6GGtq3pXNr0aqcIHxgcshqKrKp0eOPKrMxYk+88hAVFd4Yy5HEr+QS0bzqIq6Ge8YbkNYSyGothnv4K2riYd3OOw7Z/4YiOp6fvWa4+LfJhQuCgal9kUWlK34FiYUJn5jvrzOOo/y1VPZ0RbvzeXYwGfqMypayBEXJfZYENbiCaptxmfxbrH9JZ4xT95nMWoiN6Ji8ZyYq2FMk4RVhbAWUlDVKEExL+wwpBPf7uOWjw83eFA0CJKWjn6gK4IhwvqKHGshcqivMQRFfKDNBb4wTwxEFV9Y1H9lK4IPY4aCEFa+ixKlCYIiHthK3ztf7+eW58+bKjoUL/8aQ1i2KlgDTXMlqJoZr/JFCepX5sMbn+/Ja1GJiuC0wmqArrkQVGMGQXlV6cujp5pGWLKD+BBjBb0XFNlH2mi0CIIirOTICNQfYafiv9dVH0dnIaFjVA88kLkdbR9UTQmqLvuh8iqoXInKIayWHpbC6xaQwarKYBtyJz0g0/xJd+p22T4Dda5dgDVXgspF+BcSCtqqoO7HIsPQkKamI8/aBa0zFdSuI5JoGjX0iM99xoLq501QufNUjgdP/RU0Ge3acH9evmpf/ZqzVQQStZMreiDs6OkbHInQWD4aJEv9UO+Ojo4abMeLEDGpZcWW1lMFD3g9ONr0oLmf4mLkBTkpOQiXvRYZjBZLlEawHcVYVzAdQdFz1h26ZI/7DkHd4dDeriZr+6H2zdWCrA2Ef/MVVEkkuIe0tDT3qNuxgr/LaSMsrC4LS4eD+8G5GIWRnJhoJayvQhAy3LvvKEiQ3X43V0Wojyondr1H+DcnUX0XP6JQoMNGKXIrd9tVwOBzaKHOQ2VkArWYe6gQzkVMdpMJHQnYcvmx43dsQeKc86ehw+7koWjd8wOIav7Coof73FxugbITEY9TgvvGkWcVWFjrDqPvOaZoA9OFeq8cjdaxUevyxbVXXrGygMaVLd8716o6Yop2SX00YHE1IZPYz7vBYnI9yy1XVwavevQsKrKAqPwzdJmNRuu/0Wh35xpwXObddrSuENfsYhpxGLfr+B270CVVbc+40esv2rNZWWCj2yWrKmzADyFeq8AJdcPxNRBXfDHZQsSOKz9l7/SUGzpnNwhElR8SaGN+lLuNiPNKTBaXuOzmdM1l7OPiZ9MI8epWTHuuZ8Ol8ieTGjeIKp9ei/KsOuda7bA4foK4bOL91lXJWsDnRgUdKgyth5wSKiaR39Y5d2obtU8URLUYJClyq1me1GoKca2HtM4jFtgfiyQwFtLjGPcdJSYZHfQ5OhguC8+WSlTC6HYGqTV66CKMnHPZ0KcU8pU/BRYcnTz1efH91SYIyeaXNgQehXyXXYPPNlotH9eQgKiSDQnrIjyJFBf/Tk2EQ1GLzXSC4zMLrOPhvddYSI/M+BSMsMbibdR9KDHZXeDbyxDqQVTxxdWOSqa5dZdh0iTYPZB/0Ps0hcYCouFYd1lAcYZm2bC2GaMIVIeYIKq44rKbhn2LIokKn2oRIaLLC3Q5rPoh/v9TiFFhJP9dKZAqe8+7fA3VCd5Uh3adOOErP6d7InyGmCCqWOJ6yOKypOmZmFtd8iBdGVr5uCbhSIWo3ZhFHnomFdHokJhOICaIahqBVVhgdlM6EhWN0Oi5+rpCvsN6jSoLrTSFN5sHBnx8Zk/YjdvXxn1MdO80AqLIP+6xkHpgCER1E3FZclnvNZPAHLmOEYWCe8KrFWLmPl1zNR2CXr+JQomZJXcLERJ5JarifZnlXiEq4Bpo7ha19pubmyMOgx6wCKTA+iywfg4bjTILqayE9I2FNOTnQEWZbRbwTh5m4UJUfgqKxgXa+UEbAZGOVZ5R4aMofq3Px4XYfMo5OGe04inzYUTj0OPGYeh4Ft9F6LoXPItdMOQ6/oJHMBFywh15rJ+iYuLR0RJktceaIDK1+qcstIv3aXg09kB32KPK91JEbdsIxBB/7mbhQlR+gkS0LnIYJ5iQPT6sRygKr1CUXiH4XHo1G27ZfOWcCT8J0stIwZQd557xd55YLzqDB6VFS19xWNgENRD+3SQEpGICTefu3vS72HtYwd0WYWN5DpfaFx7ICvN8EecsQVTAtMLTYVoYzlCNg6iA2b1liYsEA1TdICpgPoL6LgoEv1B5H0/GT9zCI8gFSuJ93I5hAKICImAH3hI6dr1DAAAAAAAAAAAAAFg0/L8AAwAqkW76MpobtwAAAABJRU5ErkJggg=="},HyL7:function(t,e,n){t.exports={container:"antd-pro-pages-data-panel-data-panel-container",map:"antd-pro-pages-data-panel-data-panel-map",mainPic:"antd-pro-pages-data-panel-data-panel-mainPic",rd1:"antd-pro-pages-data-panel-data-panel-rd1",rd2:"antd-pro-pages-data-panel-data-panel-rd2",rd3:"antd-pro-pages-data-panel-data-panel-rd3",slideText:"antd-pro-pages-data-panel-data-panel-slideText"}},Q7uR:function(t,e,n){t.exports={absolute:"antd-pro-pages-data-panel-components-slide-text-slide-text-absolute",wraper:"antd-pro-pages-data-panel-components-slide-text-slide-text-wraper",bigCon:"antd-pro-pages-data-panel-components-slide-text-slide-text-bigCon",move:"antd-pro-pages-data-panel-components-slide-text-slide-text-move",content:"antd-pro-pages-data-panel-components-slide-text-slide-text-content"}},TGYy:function(t,e,n){(function(e,n){t.exports=n()})(0,function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(["exports"],function(t){function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}var r=n(function(t){(function(e){function n(){}var r=n.prototype,i=e.EventEmitter;function o(t,e){var n=t.length;while(n--)if(t[n].listener===e)return n;return-1}function a(t){return function(){return this[t].apply(this,arguments)}}function s(t){return"function"===typeof t||t instanceof RegExp||!(!t||"object"!==typeof t)&&s(t.listener)}r.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},r.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},r.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},r.addListener=function(t,e){if(!s(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"===typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},r.on=a("addListener"),r.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},r.once=a("addOnceListener"),r.defineEvent=function(t){return this.getListeners(t),this},r.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},r.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],e),-1!==n&&i[r].splice(n,1));return this},r.off=a("removeListener"),r.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},r.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},r.manipulateListeners=function(t,e,n){var r,i,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!==typeof e||e instanceof RegExp){r=n.length;while(r--)o.call(this,e,n[r])}else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"===typeof i?o.call(this,r,i):a.call(this,r,i));return this},r.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},r.removeAllListeners=a("removeEvent"),r.emitEvent=function(t,e){var n,r,i,o,a,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)r=n[i],!0===r.once&&this.removeListener(t,r.listener),a=r.listener.apply(this,e||[]),a===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},r.trigger=a("emitEvent"),r.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},r.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return e.EventEmitter=i,n},t.exports?t.exports=n:e.EventEmitter=n})("undefined"!==typeof window?window:this||{})});function i(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){var e=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=e[r];if(void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n}}(),Object.assign(i.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],c=s[4],l=s[8],f=s[1],h=s[5],p=s[9],d=s[2],v=s[6],g=s[10];if(Math.abs(c-f)<o&&Math.abs(l-d)<o&&Math.abs(p-v)<o){if(Math.abs(c+f)<a&&Math.abs(l+d)<a&&Math.abs(p+v)<a&&Math.abs(u+h+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var m=(u+1)/2,y=(h+1)/2,_=(g+1)/2,b=(c+f)/4,x=(l+d)/4,w=(p+v)/4;return m>y&&m>_?m<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=b/n,i=x/n):y>_?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=b/r,i=w/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=x/i,r=w/i),this.set(n,r,i,e),this}var M=Math.sqrt((v-p)*(v-p)+(l-d)*(l-d)+(f-c)*(f-c));return Math.abs(M)<.001&&(M=1),this.x=(v-p)/M,this.y=(l-d)/M,this.z=(f-c)/M,this.w=Math.acos((u+h+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}});var o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255];return o.toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function a(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function u(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function c(t,e){this.x=t||0,this.y=e||0}Object.assign(a.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=f,g[3]=h,g[7]=p,g[11]=d,g[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new a).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new u;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var f=o*c,h=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=h+p*u,e[5]=f-d*u,e[9]=-a*s,e[2]=d-f*u,e[6]=p+h*u,e[10]=o*s}else if("YXZ"===t.order){var v=s*c,g=s*l,m=u*c,y=u*l;e[0]=v+y*a,e[4]=m*a-g,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=g*a-m,e[6]=y+v*a,e[10]=o*s}else if("ZXY"===t.order){v=s*c,g=s*l,m=u*c,y=u*l;e[0]=v-y*a,e[4]=-o*l,e[8]=m+g*a,e[1]=g+m*a,e[5]=o*c,e[9]=y-v*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){f=o*c,h=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=p*u-h,e[8]=f*u+d,e[1]=s*l,e[5]=d*u+f,e[9]=h*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=w-_*l,e[8]=x*l+b,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=b*l+x,e[10]=_-w*l}else if("XZY"===t.order){_=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=_*l+w,e[5]=o*c,e[9]=b*l-x,e[2]=x*l-b,e[6]=a*c,e[10]=w*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new u(0,0,0),e=new u(1,1,1);return function(n){return this.compose(t,n,e)}}(),lookAt:function(){var t=new u,e=new u,n=new u;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],f=n[9],h=n[13],p=n[2],d=n[6],v=n[10],g=n[14],m=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],M=r[8],E=r[12],O=r[1],S=r[5],T=r[9],j=r[13],A=r[2],C=r[6],L=r[10],P=r[14],I=r[3],R=r[7],F=r[11],D=r[15];return i[0]=o*x+a*O+s*A+u*I,i[4]=o*w+a*S+s*C+u*R,i[8]=o*M+a*T+s*L+u*F,i[12]=o*E+a*j+s*P+u*D,i[1]=c*x+l*O+f*A+h*I,i[5]=c*w+l*S+f*C+h*R,i[9]=c*M+l*T+f*L+h*F,i[13]=c*E+l*j+f*P+h*D,i[2]=p*x+d*O+v*A+g*I,i[6]=p*w+d*S+v*C+g*R,i[10]=p*M+d*T+v*L+g*F,i[14]=p*E+d*j+v*P+g*D,i[3]=m*x+y*O+_*A+b*I,i[7]=m*w+y*S+_*C+b*R,i[11]=m*M+y*T+_*L+b*F,i[15]=m*E+y*j+_*P+b*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new u;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],f=t[10],h=t[14],p=t[3],d=t[7],v=t[11],g=t[15];return p*(+i*s*l-r*u*l-i*a*f+n*u*f+r*a*h-n*s*h)+d*(+e*s*h-e*u*f+i*o*f-r*o*h+r*u*c-i*s*c)+v*(+e*u*l-e*a*h-i*o*l+n*o*h+i*a*c-n*u*c)+g*(-r*a*c-e*s*l+e*a*f+r*o*l-n*o*f+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],h=r[8],p=r[9],d=r[10],v=r[11],g=r[12],m=r[13],y=r[14],_=r[15],b=p*y*f-m*d*f+m*l*v-c*y*v-p*l*_+c*d*_,x=g*d*f-h*y*f-g*l*v+u*y*v+h*l*_-u*d*_,w=h*m*f-g*p*f+g*c*v-u*m*v-h*c*_+u*p*_,M=g*p*l-h*m*l-g*c*d+u*m*d+h*c*y-u*p*y,E=i*b+o*x+a*w+s*M;if(0===E){var O="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(O);return console.warn(O),this.identity()}var S=1/E;return n[0]=b*S,n[1]=(m*d*s-p*y*s-m*a*v+o*y*v+p*a*_-o*d*_)*S,n[2]=(c*y*s-m*l*s+m*a*f-o*y*f-c*a*_+o*l*_)*S,n[3]=(p*l*s-c*d*s-p*a*f+o*d*f+c*a*v-o*l*v)*S,n[4]=x*S,n[5]=(h*y*s-g*d*s+g*a*v-i*y*v-h*a*_+i*d*_)*S,n[6]=(g*l*s-u*y*s-g*a*f+i*y*f+u*a*_-i*l*_)*S,n[7]=(u*d*s-h*l*s+h*a*f-i*d*f-u*a*v+i*l*v)*S,n[8]=w*S,n[9]=(g*p*s-h*m*s-g*o*v+i*m*v+h*o*_-i*p*_)*S,n[10]=(u*m*s-g*c*s+g*o*f-i*m*f-u*o*_+i*c*_)*S,n[11]=(h*c*s-u*p*s-h*o*f+i*p*f+u*o*v-i*c*v)*S,n[12]=M*S,n[13]=(h*m*a-g*p*a+g*o*d-i*m*d-h*o*y+i*p*y)*S,n[14]=(g*c*a-u*m*a-g*o*l+i*m*l+u*o*y-i*c*y)*S,n[15]=(u*p*a-h*c*a+h*o*l-i*p*l-u*o*d+i*c*d)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,v=o*l,g=a*l,m=s*u,y=s*c,_=s*l,b=n.x,x=n.y,w=n.z;return r[0]=(1-(d+g))*b,r[1]=(h+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(h-_)*x,r[5]=(1-(f+g))*x,r[6]=(v+m)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(v-m)*w,r[10]=(1-(f+d))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var t=new u,e=new a;return function(n,r,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length(),c=this.determinant();c<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var l=1/a,f=1/s,h=1/u;return e.elements[0]*=l,e.elements[1]*=l,e.elements[2]*=l,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,r.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,f=(n+r)*u,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(s,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],f=i[o+0],h=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||s!==f||u!==h||c!==p){var v=1-a,g=s*f+u*h+c*p+l*d,m=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*m);v=Math.sin(v*b)/_,a=Math.sin(a*b)/_}var x=a*m;if(s=s*v+f*x,u=u*v+h*x,c=c*v+p*x,l=l*v+d*x,v===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),f=s(n/2),h=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"YXZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"ZXY"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"ZYX"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"YZX"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l-f*h*p):"XZY"===o&&(this._x=f*c*l-u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l+f*h*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],f=n[10],h=r+s+f;return h>0?(e=.5/Math.sqrt(h+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>f?(e=2*Math.sqrt(1+r-s-f),this._w=(l-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>f?(e=2*Math.sqrt(1+s-r-f),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+f-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new u,n=1e-6;return function(r,i){return void 0===e&&(e=new u),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(o.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize()}var c=Math.sqrt(s),l=Math.atan2(c,a),f=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(u.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new s;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new s;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,f=-i*e-o*n-a*r;return this.x=u*s+f*-i+c*-a-l*-o,this.y=c*s+f*-o+l*-i-u*-a,this.z=l*s+f*-a+u*-o-c*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new a;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new u,e=new u;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new u;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new u;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(o.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.defineProperties(c.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(c.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new c,e=new c;return function(n,r){return t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}});var l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function f(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function h(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function p(t,e,n){h.call(this,new Int8Array(t),e,n)}function d(t,e,n){h.call(this,new Uint8Array(t),e,n)}function v(t,e,n){h.call(this,new Uint8ClampedArray(t),e,n)}function g(t,e,n){h.call(this,new Int16Array(t),e,n)}function m(t,e,n){h.call(this,new Uint16Array(t),e,n)}function y(t,e,n){h.call(this,new Int32Array(t),e,n)}function _(t,e,n){h.call(this,new Uint32Array(t),e,n)}function b(t,e,n){h.call(this,new Float32Array(t),e,n)}function x(t,e,n){h.call(this,new Float64Array(t),e,n)}Object.assign(f.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=o.euclideanModulo(e,1),n=o.clamp(n,0,1),r=o.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=t(a,i,e+1/3),this.g=t(a,i,e),this.b=t(a,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],f=c.length;if(3===f)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===f)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){c=l[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4;break}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,r){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(n,r){this.getHSL(t),n.getHSL(e);var i=o.lerp(t.h,e.h,r),a=o.lerp(t.s,e.s,r),s=o.lerp(t.l,e.l,r);return this.setHSL(i,a,s),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.defineProperty(h.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(h.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new f),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new c),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new u),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new i),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),p.prototype=Object.create(h.prototype),p.prototype.constructor=p,d.prototype=Object.create(h.prototype),d.prototype.constructor=d,v.prototype=Object.create(h.prototype),v.prototype.constructor=v,g.prototype=Object.create(h.prototype),g.prototype.constructor=g,m.prototype=Object.create(h.prototype),m.prototype.constructor=m,y.prototype=Object.create(h.prototype),y.prototype.constructor=y,_.prototype=Object.create(h.prototype),_.prototype.constructor=_,b.prototype=Object.create(h.prototype),b.prototype.constructor=b,x.prototype=Object.create(h.prototype),x.prototype.constructor=x;var w="101",M={LEFT:0,MIDDLE:1,RIGHT:2},E=0,O=1,S=2,T=3,j=0,A=1,C=0,L=1,P=2,I=0,R=1,F=2,D=1,k=2,N=0,B=1,z=2,U=0,G=1,V=2,H=3,q=4,W=5,Y=100,X=101,Z=102,K=103,J=104,Q=200,$=201,tt=202,et=203,nt=204,rt=205,it=206,ot=207,at=208,st=209,ut=210,ct=0,lt=1,ft=2,ht=3,pt=4,dt=5,vt=6,gt=7,mt=0,yt=1,_t=2,bt=0,xt=1,wt=2,Mt=3,Et=4,Ot=5,St=300,Tt=301,jt=302,At=303,Ct=304,Lt=305,Pt=306,It=307,Rt=1e3,Ft=1001,Dt=1002,kt=1003,Nt=1004,Bt=1005,zt=1006,Ut=1007,Gt=1008,Vt=1009,Ht=1010,qt=1011,Wt=1012,Yt=1013,Xt=1014,Zt=1015,Kt=1016,Jt=1017,Qt=1018,$t=1019,te=1020,ee=1021,ne=1022,re=1023,ie=1024,oe=1025,ae=re,se=1026,ue=1027,ce=1028,le=33776,fe=33777,he=33778,pe=33779,de=35840,ve=35841,ge=35842,me=35843,ye=36196,_e=37808,be=37809,xe=37810,we=37811,Me=37812,Ee=37813,Oe=37814,Se=37815,Te=37816,je=37817,Ae=37818,Ce=37819,Le=37820,Pe=37821,Ie=2200,Re=2201,Fe=2202,De=2300,ke=2301,Ne=2302,Be=2400,ze=2401,Ue=2402,Ge=0,Ve=1,He=2,qe=3e3,We=3001,Ye=3007,Xe=3002,Ze=3003,Ke=3004,Je=3005,Qe=3006,$e=3200,tn=3201,en=0,nn=1;function rn(){}function on(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||on.DefaultOrder}function an(){this.mask=1}function sn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(rn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}}),on.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],on.DefaultOrder="XYZ",Object.defineProperties(on.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(on.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=o.clamp,i=t.elements,a=i[0],s=i[4],u=i[8],c=i[1],l=i[5],f=i[9],h=i[2],p=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-f,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(u,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===e?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-f,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(u,d))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-f,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new a;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new s;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(an.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}}),Object.assign(sn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new u;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],f=n[2],h=n[5],p=n[8],d=r[0],v=r[3],g=r[6],m=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*d+a*m+s*b,i[3]=o*v+a*y+s*x,i[6]=o*g+a*_+s*w,i[1]=u*d+c*m+l*b,i[4]=u*v+c*y+l*x,i[7]=u*g+c*_+l*w,i[2]=f*d+h*m+p*b,i[5]=f*v+h*y+p*x,i[8]=f*g+h*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=n[8],p=h*u-c*f,d=c*l-h*s,v=f*s-u*l,g=i*p+o*d+a*v;if(0===g){var m="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(m);return console.warn(m),this.identity()}var y=1/g;return r[0]=p*y,r[1]=(a*f-h*o)*y,r[2]=(c*o-a*u)*y,r[3]=d*y,r[4]=(h*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=v*y,r[7]=(o*l-f*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var un,cn=0;function ln(){Object.defineProperty(this,"id",{value:cn++}),this.uuid=o.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DefaultUp.clone();var t=new u,e=new on,n=new s,r=new u(1,1,1);function i(){n.setFromEuler(e,!1)}function c(){e.setFromQuaternion(n,void 0,!1)}e.onChange(i),n.onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new a},normalMatrix:{value:new sn}}),this.matrix=new a,this.matrixWorld=new a,this.matrixAutoUpdate=ln.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new an,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function fn(){ln.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}ln.DefaultUp=new u(0,1,0),ln.DefaultMatrixAutoUpdate=!0,ln.prototype=Object.assign(Object.create(rn.prototype),{constructor:ln,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new s;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new s;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new u(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new u(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new u(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new u;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new u(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new u(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new u(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new a;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new s,e=new a,n=new u,r=new u;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(r,n,this.up):e.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){var e=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(e[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){var e=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.remove(e[n]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new u),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new u,e=new u;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new u,e=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new u),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ge&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(t.shapes,c)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var f=v(t.geometries),h=v(t.materials),p=v(t.textures),d=v(t.images);a=v(t.shapes);f.length>0&&(n.geometries=f),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function v(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),fn.prototype=Object.assign(Object.create(ln.prototype),{constructor:fn,isScene:!0,copy:function(t,e){return ln.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hn={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===un&&(un=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),un.width=t.width,un.height=t.height;var n=un.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=un}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},pn=0;function dn(t,e,n,r,i,a,s,u,l,f){Object.defineProperty(this,"id",{value:pn++}),this.uuid=o.generateUUID(),this.name="",this.image=void 0!==t?t:dn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:dn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ft,this.wrapT=void 0!==r?r:Ft,this.magFilter=void 0!==i?i:zt,this.minFilter=void 0!==a?a:Gt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:re,this.type=void 0!==u?u:Vt,this.offset=new c(0,0),this.repeat=new c(1,1),this.center=new c(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:qe,this.version=0,this.onUpdate=null}function vn(t,e,n,r,i,o,a,s,u,c,l,f){dn.call(this,null,o,a,s,u,c,r,i,l,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:kt,this.minFilter=void 0!==c?c:kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function gn(t,e){this.min=void 0!==t?t:new u(1/0,1/0,1/0),this.max=void 0!==e?e:new u(-1/0,-1/0,-1/0)}function mn(t,e){this.center=void 0!==t?t:new u,this.radius=void 0!==e?e:0}function yn(t,e){this.normal=void 0!==t?t:new u(1,0,0),this.constant=void 0!==e?e:0}function _n(t,e,n,r,i,o){this.planes=[void 0!==t?t:new yn,void 0!==e?e:new yn,void 0!==n?n:new yn,void 0!==r?r:new yn,void 0!==i?i:new yn,void 0!==o?o:new yn]}dn.DEFAULT_IMAGE=void 0,dn.DEFAULT_MAPPING=St,dn.prototype=Object.assign(Object.create(rn.prototype),{constructor:dn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=o.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,s=r.length;a<s;a++)i.push(hn.getDataURL(r[a]))}else i=hn.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==St)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Rt:t.x=t.x-Math.floor(t.x);break;case Ft:t.x=t.x<0?0:1;break;case Dt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Rt:t.y=t.y-Math.floor(t.y);break;case Ft:t.y=t.y<0?0:1;break;case Dt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(dn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),vn.prototype=Object.create(dn.prototype),vn.prototype.constructor=vn,vn.prototype.isDataTexture=!0,Object.assign(gn.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],f=t[s+2];c<e&&(e=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),f=t.getZ(s);c<e&&(e=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new u;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new u),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new u),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,r=new u;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)r.copy(a[e]),r.applyMatrix4(i.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)r.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(i),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new u),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new u;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new u,e=new u,n=new u,r=new u,i=new u,o=new u,a=new u,s=new u,c=new u,l=new u;function f(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=c.x*Math.abs(a.x)+c.y*Math.abs(a.y)+c.z*Math.abs(a.z),u=t.dot(a),l=e.dot(a),f=n.dot(a);if(Math.max(-Math.max(u,l,f),Math.min(u,l,f))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(e,t),i.subVectors(n,e),o.subVectors(t,n);var u=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!f(u)&&(u=[1,0,0,0,1,0,0,0,1],!!f(u)&&(l.crossVectors(r,i),u=[l.x,l.y,l.z],f(u)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new u),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new u;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new u;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new mn),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new u,new u,new u,new u,new u,new u,new u,new u];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(mn.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new gn;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).getCenter(r);for(var i=0,o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new u),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new gn),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(yn.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new u,e=new u;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new u),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new u;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new u);var r=e.delta(t),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new u),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new u,e=new sn;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(_n.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],v=n[12],g=n[13],m=n[14],y=n[15];return e[0].setComponents(a-r,l-s,d-f,y-v).normalize(),e[1].setComponents(a+r,l+s,d+f,y+v).normalize(),e[2].setComponents(a+i,l+u,d+h,y+g).normalize(),e[3].setComponents(a-i,l-u,d-h,y-g).normalize(),e[4].setComponents(a-o,l-c,d-p,y-m).normalize(),e[5].setComponents(a+o,l+c,d+p,y+m).normalize(),this},intersectsObject:function(){var t=new mn;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new mn;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var t=new u;return function(e){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(t.x=i.normal.x>0?e.max.x:e.min.x,t.y=i.normal.y>0?e.max.y:e.min.y,t.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(t)<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var bn="\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",xn="\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",wn="\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",Mn="\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",En="\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",On="\nvec3 transformed = vec3( position );\n",Sn="\nvec3 objectNormal = vec3( normal );\n",Tn='\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney\u2019s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)\u22c5G(v) / 4(n\u22c5l)(n\u22c5v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney\u2019s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Ag\xfcera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\t// Paper incorrect indicates coefficient is PI/21, and will\n\t// be corrected to 1/21 in future updates.\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n',jn="\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",An="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",Cn="\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",Ln="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",Pn="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",In="\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",Rn="\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",Fn="\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",Dn="\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n",kn="\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n",Nn="\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n",Bn="\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n",zn="\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",Un="\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",Gn="\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",Vn="\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",Hn="\n  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",qn="\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",Wn="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",Yn="\n#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n\n#ifdef USE_ENVMAP\n\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",Xn="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",Zn="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",Kn="\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n",Jn="\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",Qn="\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",$n="\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",tr="\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\n\n\t}\n\n#endif\n",er="\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",nr="\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",rr="\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n",ir="\nuniform vec3 ambientLightColor;\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",or="\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\n\t\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",ar="\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",sr="\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",ur="\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat ); // Burley clearcoat model\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",cr="\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t// Defer to the IndirectSpecular function to compute\n\t// the indirectDiffuse if energy preservation is enabled.\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\t#endif\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\n\t// Both indirect specular and diffuse light accumulate here\n\t// if energy preservation enabled, and PMREM provided.\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\t\t// The multiscattering paper uses the below formula for calculating diffuse \n\t\t// for dielectrics, but this is already handled when initially computing the \n\t\t// specular and diffuse color, so we can just use the diffuseColor directly.\n\t\t//vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\tvec3 diffuse = material.diffuseColor;\n\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n\t#else\n\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\n\t#endif\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",lr="\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n\n#endif\n",fr="\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tirradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n\n#endif\n",hr="\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",pr="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",dr="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\n#endif\n",vr="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",gr="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n\t#else\n\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\tgl_Position.z *= gl_Position.w;\n\n\t#endif\n\n#endif\n",mr="\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",yr="\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",_r="\n#ifdef USE_MAP\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n",br="\n#ifdef USE_MAP\n\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n\n#endif\n",xr="\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",wr="\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",Mr="\n#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",Er="\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",Or="\n#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",Sr="\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n#endif\n",Tr="\n#ifdef USE_NORMALMAP\n\n\t#ifdef OBJECTSPACE_NORMALMAP\n\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t\t#ifdef FLIP_SIDED\n\n\t\t\tnormal = - normal;\n\n\t\t#endif\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tnormal = normalize( normalMatrix * normal );\n\n\t#else // tangent-space normal map\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",jr="\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t#ifdef OBJECTSPACE_NORMALMAP\n\n\t\tuniform mat3 normalMatrix;\n\n\t#else\n\n\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t\treturn normalize( tsn * mapN );\n\n\t\t}\n\n\t#endif\n\n#endif\n",Ar="\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Cr="\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",Lr="\nvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\ngl_Position = projectionMatrix * mvPosition;\n",Pr="\n#if defined( DITHERING )\n\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",Ir="\n#if defined( DITHERING )\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",Rr="\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",Fr="\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",Dr="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",kr="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",Nr="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",Br="\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",zr="\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",Ur="\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",Gr="\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",Vr="\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",Hr="\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",qr="\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",Wr="\n#if defined( TONE_MAPPING )\n\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",Yr="\n#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n",Xr="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n",Zr="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n\n#endif\n",Kr="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",Jr="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",Qr="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif\n",$r="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif\n",ti="\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n#endif\n",ei="\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",ni="\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",ri="\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",ii="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",oi="\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n",ai="\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",si="\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",ui="\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",ci="\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",li="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",fi="\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",hi="\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",pi="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",di="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",vi="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",gi="\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",mi="\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",yi="\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",_i="\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",bi="\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",xi="\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",wi="\n#define PHYSICAL\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",Mi="\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",Ei="\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",Oi="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",Si="\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",Ti="\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n",ji="\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",Ai="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",Ci="\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",Li={alphamap_fragment:bn,alphamap_pars_fragment:xn,alphatest_fragment:wn,aomap_fragment:Mn,aomap_pars_fragment:En,begin_vertex:On,beginnormal_vertex:Sn,bsdfs:Tn,bumpmap_pars_fragment:jn,clipping_planes_fragment:An,clipping_planes_pars_fragment:Cn,clipping_planes_pars_vertex:Ln,clipping_planes_vertex:Pn,color_fragment:In,color_pars_fragment:Rn,color_pars_vertex:Fn,color_vertex:Dn,common:kn,cube_uv_reflection_fragment:Nn,defaultnormal_vertex:Bn,displacementmap_pars_vertex:zn,displacementmap_vertex:Un,emissivemap_fragment:Gn,emissivemap_pars_fragment:Vn,encodings_fragment:Hn,encodings_pars_fragment:qn,envmap_fragment:Wn,envmap_pars_fragment:Yn,envmap_pars_vertex:Xn,envmap_physical_pars_fragment:or,envmap_vertex:Zn,fog_vertex:Kn,fog_pars_vertex:Jn,fog_fragment:Qn,fog_pars_fragment:$n,gradientmap_pars_fragment:tr,lightmap_fragment:er,lightmap_pars_fragment:nr,lights_lambert_vertex:rr,lights_pars_begin:ir,lights_phong_fragment:ar,lights_phong_pars_fragment:sr,lights_physical_fragment:ur,lights_physical_pars_fragment:cr,lights_fragment_begin:lr,lights_fragment_maps:fr,lights_fragment_end:hr,logdepthbuf_fragment:pr,logdepthbuf_pars_fragment:dr,logdepthbuf_pars_vertex:vr,logdepthbuf_vertex:gr,map_fragment:mr,map_pars_fragment:yr,map_particle_fragment:_r,map_particle_pars_fragment:br,metalnessmap_fragment:xr,metalnessmap_pars_fragment:wr,morphnormal_vertex:Mr,morphtarget_pars_vertex:Er,morphtarget_vertex:Or,normal_fragment_begin:Sr,normal_fragment_maps:Tr,normalmap_pars_fragment:jr,packing:Ar,premultiplied_alpha_fragment:Cr,project_vertex:Lr,dithering_fragment:Pr,dithering_pars_fragment:Ir,roughnessmap_fragment:Rr,roughnessmap_pars_fragment:Fr,shadowmap_pars_fragment:Dr,shadowmap_pars_vertex:kr,shadowmap_vertex:Nr,shadowmask_pars_fragment:Br,skinbase_vertex:zr,skinning_pars_vertex:Ur,skinning_vertex:Gr,skinnormal_vertex:Vr,specularmap_fragment:Hr,specularmap_pars_fragment:qr,tonemapping_fragment:Wr,tonemapping_pars_fragment:Yr,uv_pars_fragment:Xr,uv_pars_vertex:Zr,uv_vertex:Kr,uv2_pars_fragment:Jr,uv2_pars_vertex:Qr,uv2_vertex:$r,worldpos_vertex:ti,background_frag:ei,background_vert:ni,cube_frag:ri,cube_vert:ii,depth_frag:oi,depth_vert:ai,distanceRGBA_frag:si,distanceRGBA_vert:ui,equirect_frag:ci,equirect_vert:li,linedashed_frag:fi,linedashed_vert:hi,meshbasic_frag:pi,meshbasic_vert:di,meshlambert_frag:vi,meshlambert_vert:gi,meshmatcap_frag:mi,meshmatcap_vert:yi,meshphong_frag:_i,meshphong_vert:bi,meshphysical_frag:xi,meshphysical_vert:wi,normal_frag:Mi,normal_vert:Ei,points_frag:Oi,points_vert:Si,shadow_frag:Ti,shadow_vert:ji,sprite_frag:Ai,sprite_vert:Ci};function Pi(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Ii(t){for(var e={},n=0;n<t.length;n++){var r=Pi(t[n]);for(var i in r)e[i]=r[i]}return e}var Ri={clone:Pi,merge:Ii},Fi={common:{diffuse:{value:new f(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new sn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new c(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new f(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new f(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new sn}},sprite:{diffuse:{value:new f(15658734)},opacity:{value:1},center:{value:new c(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new sn}}},Di={basic:{uniforms:Ii([Fi.common,Fi.specularmap,Fi.envmap,Fi.aomap,Fi.lightmap,Fi.fog]),vertexShader:Li.meshbasic_vert,fragmentShader:Li.meshbasic_frag},lambert:{uniforms:Ii([Fi.common,Fi.specularmap,Fi.envmap,Fi.aomap,Fi.lightmap,Fi.emissivemap,Fi.fog,Fi.lights,{emissive:{value:new f(0)}}]),vertexShader:Li.meshlambert_vert,fragmentShader:Li.meshlambert_frag},phong:{uniforms:Ii([Fi.common,Fi.specularmap,Fi.envmap,Fi.aomap,Fi.lightmap,Fi.emissivemap,Fi.bumpmap,Fi.normalmap,Fi.displacementmap,Fi.gradientmap,Fi.fog,Fi.lights,{emissive:{value:new f(0)},specular:{value:new f(1118481)},shininess:{value:30}}]),vertexShader:Li.meshphong_vert,fragmentShader:Li.meshphong_frag},standard:{uniforms:Ii([Fi.common,Fi.envmap,Fi.aomap,Fi.lightmap,Fi.emissivemap,Fi.bumpmap,Fi.normalmap,Fi.displacementmap,Fi.roughnessmap,Fi.metalnessmap,Fi.fog,Fi.lights,{emissive:{value:new f(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Li.meshphysical_vert,fragmentShader:Li.meshphysical_frag},matcap:{uniforms:Ii([Fi.common,Fi.bumpmap,Fi.normalmap,Fi.displacementmap,Fi.fog,{matcap:{value:null}}]),vertexShader:Li.meshmatcap_vert,fragmentShader:Li.meshmatcap_frag},points:{uniforms:Ii([Fi.points,Fi.fog]),vertexShader:Li.points_vert,fragmentShader:Li.points_frag},dashed:{uniforms:Ii([Fi.common,Fi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Li.linedashed_vert,fragmentShader:Li.linedashed_frag},depth:{uniforms:Ii([Fi.common,Fi.displacementmap]),vertexShader:Li.depth_vert,fragmentShader:Li.depth_frag},normal:{uniforms:Ii([Fi.common,Fi.bumpmap,Fi.normalmap,Fi.displacementmap,{opacity:{value:1}}]),vertexShader:Li.normal_vert,fragmentShader:Li.normal_frag},sprite:{uniforms:Ii([Fi.sprite,Fi.fog]),vertexShader:Li.sprite_vert,fragmentShader:Li.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null}},vertexShader:Li.background_vert,fragmentShader:Li.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Li.cube_vert,fragmentShader:Li.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Li.equirect_vert,fragmentShader:Li.equirect_frag},distanceRGBA:{uniforms:Ii([Fi.common,Fi.displacementmap,{referencePosition:{value:new u},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Li.distanceRGBA_vert,fragmentShader:Li.distanceRGBA_frag},shadow:{uniforms:Ii([Fi.lights,Fi.fog,{color:{value:new f(0)},opacity:{value:1}}]),vertexShader:Li.shadow_vert,fragmentShader:Li.shadow_frag}};function ki(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ni(t){var e=new WeakMap;function n(e,n){var r=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=t.FLOAT;return r instanceof Float32Array?a=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=t.UNSIGNED_SHORT:r instanceof Int16Array?a=t.SHORT:r instanceof Uint32Array?a=t.UNSIGNED_INT:r instanceof Int32Array?a=t.INT:r instanceof Int8Array?a=t.BYTE:r instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function r(e,n,r){var i=n.array,o=n.updateRange;t.bindBuffer(r,e),!1===n.dynamic?t.bufferData(r,i,t.STATIC_DRAW):-1===o.count?t.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)}function o(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))}function a(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var o=e.get(t);void 0===o?e.set(t,n(t,i)):o.version<t.version&&(r(o.buffer,t,i),o.version=t.version)}return{get:i,remove:o,update:a}}function Bi(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new u,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new f,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Di.physical={uniforms:Ii([Di.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Li.meshphysical_vert,fragmentShader:Li.meshphysical_frag},Object.assign(Bi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var zi=0;function Ui(){Object.defineProperty(this,"id",{value:zi+=2}),this.uuid=o.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Gi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Vi(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Ui.prototype=Object.assign(Object.create(rn.prototype),{constructor:Ui,isGeometry:!0,applyMatrix:function(t){for(var e=(new sn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new a;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new a;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new a;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new a;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new a;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new ln;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var h=0,p=0;h<i.length;h+=3,p+=2)e.vertices.push((new u).fromArray(i,h)),void 0!==a&&e.colors.push((new f).fromArray(a,h));function d(t,n,r,i){var f=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],h=void 0===o?[]:[(new u).fromArray(o,3*t),(new u).fromArray(o,3*n),(new u).fromArray(o,3*r)],p=new Bi(t,n,r,h,f,i);e.faces.push(p),void 0!==s&&e.faceVertexUvs[0].push([(new c).fromArray(s,2*t),(new c).fromArray(s,2*n),(new c).fromArray(s,2*r)]),void 0!==l&&e.faceVertexUvs[1].push([(new c).fromArray(l,2*t),(new c).fromArray(l,2*n),(new c).fromArray(l,2*r)])}var v=t.groups;if(v.length>0)for(h=0;h<v.length;h++)for(var g=v[h],m=g.start,y=g.count,_=(p=m,m+y);p<_;p+=3)void 0!==n?d(n[p],n[p+1],n[p+2],g.materialIndex):d(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)d(n[h],n[h+1],n[h+2]);else for(h=0;h<i.length/3;h+=3)d(h,h+1,h+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new u;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new a;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new u,e=new u,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new u;if(t){var s,c,l,f=new u,h=new u;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],f.subVectors(l,c),h.subVectors(s,c),f.cross(h),a[o.a].add(f),a[o.b].add(f),a[o.c].add(f)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var p=o.vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Ui;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new u,l={a:new u,b:new u,c:new u},a.push(c),s.push(l)}var c,l,f=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=f.faceNormals[n],l=f.vertexNormals[n],c.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new gn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,c=this.faceVertexUvs[0],l=t.faceVertexUvs[0],f=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new sn).getNormalMatrix(e));for(var p=0,d=a.length;p<d;p++){var v=a[p],g=v.clone();void 0!==e&&g.applyMatrix4(e),o.push(g)}for(p=0,d=h.length;p<d;p++)f.push(h[p].clone());for(p=0,d=u.length;p<d;p++){var m,y,_,b=u[p],x=b.vertexNormals,w=b.vertexColors;m=new Bi(b.a+i,b.b+i,b.c+i),m.normal.copy(b.normal),void 0!==r&&m.normal.applyMatrix3(r).normalize();for(var M=0,E=x.length;M<E;M++)y=x[M].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),m.vertexNormals.push(y);m.color.copy(b.color);for(M=0,E=w.length;M<E;M++)_=w[M],m.vertexColors.push(_.clone());m.materialIndex=b.materialIndex+n,s.push(m)}for(p=0,d=l.length;p<d;p++){var O=l[p],S=[];if(void 0!==O){for(M=0,E=O.length;M<E;M++)S.push(O[M].clone());c.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],l=[],f=4,h=Math.pow(10,f);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var v=p[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new u(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function r(t,e){return t.materialIndex-e.materialIndex}t.sort(r);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),s&&s.length===e&&(o=[]);for(n=0;n<e;n++){var u=t[n]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},f=[],h={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=!0,v=!1,g=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,y=p.vertexNormals.length>0,_=1!==p.color.r||1!==p.color.g||1!==p.color.b,b=p.vertexColors.length>0,x=0;if(x=O(x,0,0),x=O(x,1,d),x=O(x,2,v),x=O(x,3,g),x=O(x,4,m),x=O(x,5,y),x=O(x,6,_),x=O(x,7,b),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),g){var w=this.faceVertexUvs[0][i];a.push(j(w[0]),j(w[1]),j(w[2]))}if(m&&a.push(S(p.normal)),y){var M=p.vertexNormals;a.push(S(M[0]),S(M[1]),S(M[2]))}if(_&&a.push(T(p.color)),b){var E=p.vertexColors;a.push(T(E[0]),T(E[1]),T(E[2]))}}function O(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=s.length/3,s.push(t.x,t.y,t.z),u[e])}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=c.length,c.push(t.getHex()),l[e])}function j(t){var e=t.x.toString()+t.y.toString();return void 0!==h[e]?h[e]:(h[e]=f.length/2,f.push(t.x,t.y),h[e])}return t.data={},t.data.vertices=r,t.data.normals=s,c.length>0&&(t.data.colors=c),f.length>0&&(t.data.uvs=[f]),t.data.faces=a,t},clone:function(){return(new Ui).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=l.length;r<i;r++){var f=l[r],h=[];for(o=0,a=f.length;o<a;o++){var p=f[o];h.push(p.clone())}this.faceVertexUvs[e].push(h)}}var d=t.morphTargets;for(e=0,n=d.length;e<n;e++){var v={};if(v.name=d[e].name,void 0!==d[e].vertices)for(v.vertices=[],r=0,i=d[e].vertices.length;r<i;r++)v.vertices.push(d[e].vertices[r].clone());if(void 0!==d[e].normals)for(v.normals=[],r=0,i=d[e].normals.length;r<i;r++)v.normals.push(d[e].normals[r].clone());this.morphTargets.push(v)}var g=t.morphNormals;for(e=0,n=g.length;e<n;e++){var m={};if(void 0!==g[e].vertexNormals)for(m.vertexNormals=[],r=0,i=g[e].vertexNormals.length;r<i;r++){var y=g[e].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),m.vertexNormals.push(_)}if(void 0!==g[e].faceNormals)for(m.faceNormals=[],r=0,i=g[e].faceNormals.length;r<i;r++)m.faceNormals.push(g[e].faceNormals[r].clone());this.morphNormals.push(m)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var x=t.skinIndices;for(e=0,n=x.length;e<n;e++)this.skinIndices.push(x[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Gi.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var f,h=t.morphNormals,p=h.length;if(p>0){f=[];for(l=0;l<p;l++)f[l]={name:h[l].name,data:[]};this.morphTargets.normal=f}var d=t.skinIndices,v=t.skinWeights,g=d.length===r.length,m=v.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<n.length;l++){var y=n[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w)}if(!0===o){var M=i[0][l];void 0!==M?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new c,new c,new c))}if(!0===a){M=i[1][l];void 0!==M?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new c,new c,new c))}for(var E=0;E<u;E++){var O=s[E].vertices;e[E].data.push(O[y.a],O[y.b],O[y.c])}for(E=0;E<p;E++){var S=h[E].vertexNormals[l];f[E].data.push(S.a,S.b,S.c)}g&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),m&&this.skinWeights.push(v[y.a],v[y.b],v[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Hi=1;function qi(){Object.defineProperty(this,"id",{value:Hi+=2}),this.uuid=o.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Wi(t,e,n,r,i,o){Ui.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Yi(t,e,n,r,i,o)),this.mergeVertices()}function Yi(t,e,n,r,i,o){qi.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],c=[],l=[],f=[],h=0,p=0;function d(t,e,n,r,i,o,d,v,g,m,y){var _,b,x=o/g,w=d/m,M=o/2,E=d/2,O=v/2,S=g+1,T=m+1,j=0,A=0,C=new u;for(b=0;b<T;b++){var L=b*w-E;for(_=0;_<S;_++){var P=_*x-M;C[t]=P*r,C[e]=L*i,C[n]=O,c.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=v>0?1:-1,l.push(C.x,C.y,C.z),f.push(_/g),f.push(1-b/m),j+=1}}for(b=0;b<m;b++)for(_=0;_<g;_++){var I=h+_+S*b,R=h+_+S*(b+1),F=h+(_+1)+S*(b+1),D=h+(_+1)+S*b;s.push(I,R,D),s.push(R,F,D),A+=6}a.addGroup(p,A,y),p+=A,h+=j}d("z","y","x",-1,-1,n,e,t,o,i,0),d("z","y","x",1,-1,n,e,-t,o,i,1),d("x","z","y",1,1,t,n,e,r,o,2),d("x","z","y",1,-1,t,n,-e,r,o,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new b(c,3)),this.addAttribute("normal",new b(l,3)),this.addAttribute("uv",new b(f,2))}function Xi(t,e,n,r){Ui.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Zi(t,e,n,r)),this.mergeVertices()}function Zi(t,e,n,r){qi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},t=t||1,e=e||1;var i,o,a=t/2,s=e/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,f=c+1,h=t/u,p=e/c,d=[],v=[],g=[],m=[];for(o=0;o<f;o++){var y=o*p-s;for(i=0;i<l;i++){var _=i*h-a;v.push(_,-y,0),g.push(0,0,1),m.push(i/u),m.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var x=i+l*o,w=i+l*(o+1),M=i+1+l*(o+1),E=i+1+l*o;d.push(x,w,E),d.push(w,M,E)}this.setIndex(d),this.addAttribute("position",new b(v,3)),this.addAttribute("normal",new b(g,3)),this.addAttribute("uv",new b(m,2))}qi.prototype=Object.assign(Object.create(rn.prototype),{constructor:qi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Vi(t)>65535?_:m)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new h(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new sn).getNormalMatrix(t);r.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new a;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new a;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new a;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new a;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new a;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new ln;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new u;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new b(3*e.vertices.length,3),r=new b(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new b(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new b(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Gi).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new h(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new h(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new h(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new h(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new h(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],c=0,l=u.length;c<l;c++){var f=u[c],p=new b(3*f.data.length,3);p.name=f.name,s.push(p.copyVector3sArray(f.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new b(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var v=new b(4*t.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new gn);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new gn,e=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new mn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new h(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,c,l=e.normal.array,f=new u,p=new u,d=new u,v=new u,g=new u;if(t){var m=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],c=3*m[i+2],f.fromArray(n,a),p.fromArray(n,s),d.fromArray(n,c),v.subVectors(d,p),g.subVectors(f,p),v.cross(g),l[a]+=v.x,l[a+1]+=v.y,l[a+2]+=v.z,l[s]+=v.x,l[s+1]+=v.y,l[s+2]+=v.z,l[c]+=v.x,l[c+1]+=v.y,l[c+2]+=v.z}else for(i=0,o=n.length;i<o;i+=9)f.fromArray(n,i),p.fromArray(n,i+3),d.fromArray(n,i+6),v.subVectors(d,p),g.subVectors(f,p),v.cross(g),l[i]=v.x,l[i+1]=v.y,l[i+2]=v.z,l[i+3]=v.x,l[i+4]=v.y,l[i+5]=v.z,l[i+6]=v.x,l[i+7]=v.y,l[i+8]=v.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,a=t.attributes[r],s=a.array,u=a.itemSize,c=0,l=u*e;c<s.length;c++,l++)o[l]=s[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new u;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new h(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new qi,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],a=t(o,n);e.addAttribute(i,a)}var s=this.morphAttributes;for(i in s){for(var u=[],c=s[i],l=0,f=c.length;l<f;l++){o=c[l],a=t(o,n);u.push(a)}e.morphAttributes[i]=u}for(var p=this.groups,d=(l=0,p.length);l<d;l++){var v=p[l];e.addGroup(v.start,v.count,v.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new qi).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}var l=t.groups;for(n=0,r=l.length;n<r;n++){var f=l[n];this.addGroup(f.start,f.count,f.materialIndex)}var h=t.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Wi.prototype=Object.create(Ui.prototype),Wi.prototype.constructor=Wi,Yi.prototype=Object.create(qi.prototype),Yi.prototype.constructor=Yi,Xi.prototype=Object.create(Ui.prototype),Xi.prototype.constructor=Xi,Zi.prototype=Object.create(qi.prototype),Zi.prototype.constructor=Zi;var Ki=0;function Ji(){Object.defineProperty(this,"id",{value:Ki++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=G,this.side=I,this.flatShading=!1,this.vertexColors=N,this.opacity=1,this.transparent=!1,this.blendSrc=nt,this.blendDst=rt,this.blendEquation=Y,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ht,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function Qi(t){Ji.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function $i(t,e){this.origin=void 0!==t?t:new u,this.direction=void 0!==e?e:new u}function to(t,e,n){this.a=void 0!==t?t:new u,this.b=void 0!==e?e:new u,this.c=void 0!==n?n:new u}function eo(t){Ji.call(this),this.type="MeshBasicMaterial",this.color=new f(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function no(t,e){ln.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new eo({color:16777215*Math.random()}),this.drawMode=Ge,this.updateMorphTargets()}function ro(t,e,n,r){var i,o,a=new f(0),s=0,u=null,c=0;function l(e,r,l,f){var p=r.background;if(null===p?(h(a,s),u=null,c=0):p&&p.isColor&&(h(p,1),f=!0,u=null,c=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&(o=new no(new Yi(1,1,1),new Qi({type:"BackgroundCubeMaterial",uniforms:Pi(Di.cube.uniforms),vertexShader:Di.cube.vertexShader,fragmentShader:Di.cube.fragmentShader,side:R,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var d=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=d,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,u===p&&c===d.version||(o.material.needsUpdate=!0,u=p,c=d.version),e.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===i&&(i=new no(new Zi(2,2),new Qi({type:"BackgroundMaterial",uniforms:Pi(Di.background.uniforms),vertexShader:Di.background.vertexShader,fragmentShader:Di.background.fragmentShader,side:I,depthTest:!1,depthWrite:!1,fog:!1})),i.geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&c===p.version||(i.material.needsUpdate=!0,u=p,c=p.version),e.unshift(i,i.geometry,i.material,0,0,null))}function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),s=void 0!==e?e:1,h(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,h(a,s)},render:l}}function io(t,e,n,r){var i;function o(t){i=t}function a(e,r){t.drawArrays(i,e,r),n.update(r,i)}function s(o,a,s){var u;if(r.isWebGL2)u=t;else if(u=e.get("ANGLE_instanced_arrays"),null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}this.setMode=o,this.render=a,this.renderInstances=s}function oo(t,e,n){var r;function i(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",u=o(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=!0===n.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,_=a||!!e.get("OES_texture_float"),b=y&&_,x=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:b,maxSamples:x}}function ao(){var t=this,e=null,n=0,r=!1,i=!1,o=new yn,a=new sn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,r,i){var u=null!==e?e.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,f=n.matrixWorldInverse;a.getNormalMatrix(f),(null===c||c.length<l)&&(c=new Float32Array(l));for(var h=0,p=r;h!==u;++h,p+=4)o.copy(e[h]).applyMatrix4(f,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=c(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,l,f,h){if(!r||null===t||0===t.length||i&&!a)i?c(null):u();else{var p=i?0:n,d=4*p,v=f.clippingState||null;s.value=v,v=c(t,l,d,h);for(var g=0;g!==d;++g)v[g]=e[g];f.clippingState=v,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function so(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function uo(t,e,n){var r={},i={};function o(t){var a=t.target,s=r[a.id];for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var c=i[s.id];c&&(e.remove(c),delete i[s.id]),n.memory.geometries--}function a(t,e){var i=r[e.id];return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new qi).setFromObject(t)),i=e._bufferGeometry),r[e.id]=i,n.memory.geometries++,i)}function s(n){var r=n.index,i=n.attributes;for(var o in null!==r&&e.update(r,t.ELEMENT_ARRAY_BUFFER),i)e.update(i[o],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,c=s.length;u<c;u++)e.update(s[u],t.ARRAY_BUFFER)}function u(n){var r=i[n.id];if(r)return r;var o=[],a=n.index,s=n.attributes;if(null!==a)for(var u=a.array,c=0,l=u.length;c<l;c+=3){var f=u[c+0],h=u[c+1],p=u[c+2];o.push(f,h,h,p,p,f)}else for(u=s.position.array,c=0,l=u.length/3-1;c<l;c+=3){f=c+0,h=c+1,p=c+2;o.push(f,h,h,p,p,f)}return r=new(Vi(o)>65535?_:m)(o,1),e.update(r,t.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}return{get:a,update:s,getWireframeAttribute:u}}function co(t,e,n,r){var i,o,a;function s(t){i=t}function u(t){o=t.type,a=t.bytesPerElement}function c(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)}function l(s,u,c){if(r.isWebGL2)l=t;else{var l=e.get("ANGLE_instanced_arrays");if(null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}l[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,u*a,s.maxInstancedCount),n.update(c,i,s.maxInstancedCount)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=l}function lo(t){var e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,r,i){switch(i=i||1,n.calls++,r){case t.TRIANGLES:n.triangles+=i*(e/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:n.triangles+=i*(e-2);break;case t.LINES:n.lines+=i*(e/2);break;case t.LINE_STRIP:n.lines+=i*(e-1);break;case t.LINE_LOOP:n.lines+=i*e;break;case t.POINTS:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function fo(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ho(t){var e={},n=new Float32Array(8);function r(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,c=e[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];e[i.id]=c}var f=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++){var p=c[l];0!==p[1]&&(f&&i.removeAttribute("morphTarget"+l),h&&i.removeAttribute("morphNormal"+l))}for(l=0;l<u;l++){p=c[l];p[0]=l,p[1]=s[l]}c.sort(fo);for(l=0;l<8;l++){p=c[l];if(p){var d=p[0],v=p[1];if(v){f&&i.addAttribute("morphTarget"+l,f[d]),h&&i.addAttribute("morphNormal"+l,h[d]),n[l]=v;continue}}n[l]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:r}}function po(t,e){var n={};function r(r){var i=e.render.frame,o=r.geometry,a=t.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),t.update(a),n[a.id]=i),a}function i(){n={}}return{update:r,dispose:i}}function vo(t,e,n,r,i,o,a,s,u,c){t=void 0!==t?t:[],e=void 0!==e?e:Tt,dn.call(this,t,e,n,r,i,o,a,s,u,c),this.flipY=!1}function go(t,e,n,r){dn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=kt,this.minFilter=kt,this.generateMipmaps=!1,this.flipY=!1}Ji.prototype=Object.assign(Object.create(rn.prototype),{constructor:Ji,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===D;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==G&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==I&&(n.side=this.side),this.vertexColors!==N&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qi.prototype=Object.create(Ji.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isShaderMaterial=!0,Qi.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Pi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Qi.prototype.toJSON=function(t){var e=Ji.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e},Object.assign($i.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new u),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new u;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new u),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new u;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new u,e=new u,n=new u;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,u,c,l,f=.5*r.distanceTo(i),h=-this.direction.dot(e),p=n.dot(this.direction),d=-n.dot(e),v=n.lengthSq(),g=Math.abs(1-h*h);if(g>0)if(s=h*d-p,u=h*p-d,l=f*g,s>=0)if(u>=-l)if(u<=l){var m=1/g;s*=m,u*=m,c=s*(s+h*u+2*p)+u*(h*s+u+2*d)+v}else u=f,s=Math.max(0,-(h*u+p)),c=-s*s+u*(u+2*d)+v;else u=-f,s=Math.max(0,-(h*u+p)),c=-s*s+u*(u+2*d)+v;else u<=-l?(s=Math.max(0,-(-h*f+p)),u=s>0?-f:Math.min(Math.max(-f,-d),f),c=-s*s+u*(u+2*d)+v):u<=l?(s=0,u=Math.min(Math.max(-f,-d),f),c=u*(u+2*d)+v):(s=Math.max(0,-(h*f+p)),u=s>0?f:Math.min(Math.max(-f,-d),f),c=-s*s+u*(u+2*d)+v);else u=h>0?-f:f,s=Math.max(0,-(h*u+p)),c=-s*s+u*(u+2*d)+v;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),c}}(),intersectSphere:function(){var t=new u;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,f=this.origin;return u>=0?(n=(t.min.x-f.x)*u,r=(t.max.x-f.x)*u):(n=(t.max.x-f.x)*u,r=(t.min.x-f.x)*u),c>=0?(i=(t.min.y-f.y)*c,o=(t.max.y-f.y)*c):(i=(t.max.y-f.y)*c,o=(t.min.y-f.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(t.min.z-f.z)*l,s=(t.max.z-f.z)*l):(a=(t.max.z-f.z)*l,s=(t.min.z-f.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new u;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new u,e=new u,n=new u,r=new u;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var c,l=this.direction.dot(r);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}t.subVectors(this.origin,i);var f=c*this.direction.dot(n.crossVectors(t,n));if(f<0)return null;var h=c*this.direction.dot(e.cross(t));if(h<0)return null;if(f+h>l)return null;var p=-c*t.dot(r);return p<0?null:this.at(p/l,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(to,{getNormal:function(){var t=new u;return function(e,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new u),i.subVectors(r,n),t.subVectors(e,n),i.cross(t);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var t=new u,e=new u,n=new u;return function(r,i,o,a,s){t.subVectors(a,i),e.subVectors(o,i),n.subVectors(r,i);var c=t.dot(t),l=t.dot(e),f=t.dot(n),h=e.dot(e),p=e.dot(n),d=c*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new u),0===d)return s.set(-2,-1,-1);var v=1/d,g=(h*f-l*p)*v,m=(c*p-l*f)*v;return s.set(1-g-m,m,g)}}(),containsPoint:function(){var t=new u;return function(e,n,r,i){return to.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:function(){var t=new u;return function(e,n,r,i,o,a,s,u){return this.getBarycoord(e,n,r,i,t),u.set(0,0),u.addScaledVector(o,t.x),u.addScaledVector(a,t.y),u.addScaledVector(s,t.z),u}}()}),Object.assign(to.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new u,e=new u;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new u),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return to.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new u),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return to.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return to.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,n,r,i){return to.getUV(t,this.a,this.b,this.c,e,n,r,i)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new u,e=new u,n=new u,r=new u,i=new u,o=new u;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new u);var c,l,f=this.a,h=this.b,p=this.c;t.subVectors(h,f),e.subVectors(p,f),r.subVectors(a,f);var d=t.dot(r),v=e.dot(r);if(d<=0&&v<=0)return s.copy(f);i.subVectors(a,h);var g=t.dot(i),m=e.dot(i);if(g>=0&&m<=g)return s.copy(h);var y=d*m-g*v;if(y<=0&&d>=0&&g<=0)return c=d/(d-g),s.copy(f).addScaledVector(t,c);o.subVectors(a,p);var _=t.dot(o),b=e.dot(o);if(b>=0&&_<=b)return s.copy(p);var x=_*v-d*b;if(x<=0&&v>=0&&b<=0)return l=v/(v-b),s.copy(f).addScaledVector(e,l);var w=g*b-_*m;if(w<=0&&m-g>=0&&_-b>=0)return n.subVectors(p,h),l=(m-g)/(m-g+(_-b)),s.copy(h).addScaledVector(n,l);var M=1/(w+x+y);return c=x*M,l=y*M,s.copy(f).addScaledVector(t,c).addScaledVector(e,l)}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),eo.prototype=Object.create(Ji.prototype),eo.prototype.constructor=eo,eo.prototype.isMeshBasicMaterial=!0,eo.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},no.prototype=Object.assign(Object.create(ln.prototype),{constructor:no,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ln.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new a,e=new $i,n=new mn,r=new u,i=new u,o=new u,s=new u,l=new u,f=new u,h=new c,p=new c,d=new c,v=new u,g=new u;function m(t,e,n,r,i,o,a,s){var u;if(u=e.side===R?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==F,s),null===u)return null;g.copy(s),g.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(g);return c<n.near||c>n.far?null:{distance:c,point:g.clone(),object:t}}function y(t,e,n,a,s,u,l,f,g){r.fromBufferAttribute(s,l),i.fromBufferAttribute(s,f),o.fromBufferAttribute(s,g);var y=m(t,e,n,a,r,i,o,v);if(y){u&&(h.fromBufferAttribute(u,l),p.fromBufferAttribute(u,f),d.fromBufferAttribute(u,g),y.uv=to.getUV(v,r,i,o,h,p,d,new c));var _=new Bi(l,f,g);to.getNormal(r,i,o,_.normal),y.face=_}return y}return function(a,u){var g,_=this.geometry,b=this.material,x=this.matrixWorld;if(void 0!==b&&(null===_.boundingSphere&&_.computeBoundingSphere(),n.copy(_.boundingSphere),n.applyMatrix4(x),!1!==a.ray.intersectsSphere(n)&&(t.getInverse(x),e.copy(a.ray).applyMatrix4(t),null===_.boundingBox||!1!==e.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var w,M,E,O,S,T,j,A,C,L,P,I=_.index,R=_.attributes.position,F=_.attributes.uv,D=_.groups,k=_.drawRange;if(null!==I)if(Array.isArray(b))for(O=0,T=D.length;O<T;O++)for(A=D[O],C=b[A.materialIndex],L=Math.max(A.start,k.start),P=Math.min(A.start+A.count,k.start+k.count),S=L,j=P;S<j;S+=3)w=I.getX(S),M=I.getX(S+1),E=I.getX(S+2),g=y(this,C,a,e,R,F,w,M,E),g&&(g.faceIndex=Math.floor(S/3),g.face.materialIndex=A.materialIndex,u.push(g));else for(L=Math.max(0,k.start),P=Math.min(I.count,k.start+k.count),O=L,T=P;O<T;O+=3)w=I.getX(O),M=I.getX(O+1),E=I.getX(O+2),g=y(this,b,a,e,R,F,w,M,E),g&&(g.faceIndex=Math.floor(O/3),u.push(g));else if(void 0!==R)if(Array.isArray(b))for(O=0,T=D.length;O<T;O++)for(A=D[O],C=b[A.materialIndex],L=Math.max(A.start,k.start),P=Math.min(A.start+A.count,k.start+k.count),S=L,j=P;S<j;S+=3)w=S,M=S+1,E=S+2,g=y(this,C,a,e,R,F,w,M,E),g&&(g.faceIndex=Math.floor(S/3),g.face.materialIndex=A.materialIndex,u.push(g));else for(L=Math.max(0,k.start),P=Math.min(R.count,k.start+k.count),O=L,T=P;O<T;O+=3)w=O,M=O+1,E=O+2,g=y(this,b,a,e,R,F,w,M,E),g&&(g.faceIndex=Math.floor(O/3),u.push(g))}else if(_.isGeometry){var N,B,z,U,G=Array.isArray(b),V=_.vertices,H=_.faces,q=_.faceVertexUvs[0];q.length>0&&(U=q);for(var W=0,Y=H.length;W<Y;W++){var X=H[W],Z=G?b[X.materialIndex]:b;if(void 0!==Z){if(N=V[X.a],B=V[X.b],z=V[X.c],!0===Z.morphTargets){var K=_.morphTargets,J=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Q=0,$=K.length;Q<$;Q++){var tt=J[Q];if(0!==tt){var et=K[Q].vertices;r.addScaledVector(s.subVectors(et[X.a],N),tt),i.addScaledVector(l.subVectors(et[X.b],B),tt),o.addScaledVector(f.subVectors(et[X.c],z),tt)}}r.add(N),i.add(B),o.add(z),N=r,B=i,z=o}if(g=m(this,Z,a,e,N,B,z,v),g){if(U&&U[W]){var nt=U[W];h.copy(nt[0]),p.copy(nt[1]),d.copy(nt[2]),g.uv=to.getUV(v,N,B,z,h,p,d,new c)}g.face=X,g.faceIndex=W,u.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vo.prototype=Object.create(dn.prototype),vo.prototype.constructor=vo,vo.prototype.isCubeTexture=!0,Object.defineProperty(vo.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),go.prototype=Object.create(dn.prototype),go.prototype.constructor=go,go.prototype.isDataTexture3D=!0;var mo=new dn,yo=new go,_o=new vo;function bo(){this.seq=[],this.map={}}var xo=[],wo=[],Mo=new Float32Array(16),Eo=new Float32Array(9),Oo=new Float32Array(4);function So(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=xo[i];if(void 0===o&&(o=new Float32Array(i),xo[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function To(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function jo(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Ao(t,e){var n=wo[e];void 0===n&&(n=new Int32Array(e),wo[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function Co(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Lo(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Po(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(To(n,e))return;t.uniform2fv(this.addr,e),jo(n,e)}}function Io(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(To(n,e))return;t.uniform3fv(this.addr,e),jo(n,e)}}function Ro(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(To(n,e))return;t.uniform4fv(this.addr,e),jo(n,e)}}function Fo(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(To(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),jo(n,e)}else{if(To(n,r))return;Oo.set(r),t.uniformMatrix2fv(this.addr,!1,Oo),jo(n,r)}}function Do(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(To(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),jo(n,e)}else{if(To(n,r))return;Eo.set(r),t.uniformMatrix3fv(this.addr,!1,Eo),jo(n,r)}}function ko(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(To(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),jo(n,e)}else{if(To(n,r))return;Mo.set(r),t.uniformMatrix4fv(this.addr,!1,Mo),jo(n,r)}}function No(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||mo,i)}function Bo(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||yo,i)}function zo(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||_o,i)}function Uo(t,e){var n=this.cache;To(n,e)||(t.uniform2iv(this.addr,e),jo(n,e))}function Go(t,e){var n=this.cache;To(n,e)||(t.uniform3iv(this.addr,e),jo(n,e))}function Vo(t,e){var n=this.cache;To(n,e)||(t.uniform4iv(this.addr,e),jo(n,e))}function Ho(t){switch(t){case 5126:return Co;case 35664:return Po;case 35665:return Io;case 35666:return Ro;case 35674:return Fo;case 35675:return Do;case 35676:return ko;case 35678:case 36198:return No;case 35679:return Bo;case 35680:return zo;case 5124:case 35670:return Lo;case 35667:case 35671:return Uo;case 35668:case 35672:return Go;case 35669:case 35673:return Vo}}function qo(t,e){var n=this.cache;To(n,e)||(t.uniform1fv(this.addr,e),jo(n,e))}function Wo(t,e){var n=this.cache;To(n,e)||(t.uniform1iv(this.addr,e),jo(n,e))}function Yo(t,e){var n=this.cache,r=So(e,this.size,2);To(n,r)||(t.uniform2fv(this.addr,r),this.updateCache(r))}function Xo(t,e){var n=this.cache,r=So(e,this.size,3);To(n,r)||(t.uniform3fv(this.addr,r),this.updateCache(r))}function Zo(t,e){var n=this.cache,r=So(e,this.size,4);To(n,r)||(t.uniform4fv(this.addr,r),this.updateCache(r))}function Ko(t,e){var n=this.cache,r=So(e,this.size,4);To(n,r)||(t.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Jo(t,e){var n=this.cache,r=So(e,this.size,9);To(n,r)||(t.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Qo(t,e){var n=this.cache,r=So(e,this.size,16);To(n,r)||(t.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function $o(t,e,n){var r=this.cache,i=e.length,o=Ao(n,i);!1===To(r,o)&&(t.uniform1iv(this.addr,o),jo(r,o));for(var a=0;a!==i;++a)n.setTexture2D(e[a]||mo,o[a])}function ta(t,e,n){var r=this.cache,i=e.length,o=Ao(n,i);!1===To(r,o)&&(t.uniform1iv(this.addr,o),jo(r,o));for(var a=0;a!==i;++a)n.setTextureCube(e[a]||_o,o[a])}function ea(t){switch(t){case 5126:return qo;case 35664:return Yo;case 35665:return Xo;case 35666:return Zo;case 35674:return Ko;case 35675:return Jo;case 35676:return Qo;case 35678:return $o;case 35680:return ta;case 5124:case 35670:return Wo;case 35667:case 35671:return Uo;case 35668:case 35672:return Go;case 35669:case 35673:return Vo}}function na(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Ho(e.type)}function ra(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=ea(e.type)}function ia(t){this.id=t,bo.call(this)}ra.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),jo(e,t)},ia.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var oa=/([\w\d_]+)(\])?(\[|\.)?/g;function aa(t,e){t.seq.push(e),t.map[e.id]=e}function sa(t,e,n){var r=t.name,i=r.length;oa.lastIndex=0;while(1){var o=oa.exec(r),a=oa.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){aa(n,void 0===c?new na(s,t,e):new ra(s,t,e));break}var l=n.map,f=l[s];void 0===f&&(f=new ia(s),aa(n,f)),n=f}}function ua(t,e,n){bo.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i),a=t.getUniformLocation(e,o.name);sa(o,a,this)}}function ca(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function la(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!1===t.getShaderParameter(r,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),ca(n)),r}ua.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},ua.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},ua.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},ua.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var fa=0;function ha(t){switch(t){case qe:return["Linear","( value )"];case We:return["sRGB","( value )"];case Xe:return["RGBE","( value )"];case Ke:return["RGBM","( value, 7.0 )"];case Je:return["RGBM","( value, 16.0 )"];case Qe:return["RGBD","( value, 256.0 )"];case Ye:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function pa(t,e){var n=ha(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function da(t,e){var n=ha(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function va(t,e){var n;switch(e){case xt:n="Linear";break;case wt:n="Reinhard";break;case Mt:n="Uncharted2";break;case Et:n="OptimizedCineon";break;case Ot:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ga(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(_a).join("\n")}function ma(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function ya(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function _a(t){return""!==t}function ba(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function xa(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function wa(t){var e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(t,e){var n=Li[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return wa(n)}return t.replace(e,n)}function Ma(t){var e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}return t.replace(e,n)}function Ea(t,e,n,r,i,o,a){var s=t.context,u=r.defines,c=i.vertexShader,l=i.fragmentShader,f="SHADOWMAP_TYPE_BASIC";o.shadowMapType===L?f="SHADOWMAP_TYPE_PCF":o.shadowMapType===P&&(f="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case Tt:case jt:h="ENVMAP_TYPE_CUBE";break;case Pt:case It:h="ENVMAP_TYPE_CUBE_UV";break;case At:case Ct:h="ENVMAP_TYPE_EQUIREC";break;case Lt:h="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case jt:case Ct:p="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case mt:d="ENVMAP_BLENDING_MULTIPLY";break;case yt:d="ENVMAP_BLENDING_MIX";break;case _t:d="ENVMAP_BLENDING_ADD";break}}var v,g,m=t.gammaFactor>0?t.gammaFactor:1,y=a.isWebGL2?"":ga(r.extensions,o,e),_=ma(u),b=s.createProgram();if(r.isRawShaderMaterial?(v=[_].filter(_a).join("\n"),v.length>0&&(v+="\n"),g=[y,_].filter(_a).join("\n"),g.length>0&&(g+="\n")):(v=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,_,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_a).join("\n"),g=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,_,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==bt?"#define TONE_MAPPING":"",o.toneMapping!==bt?Li["tonemapping_pars_fragment"]:"",o.toneMapping!==bt?va("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Li["encodings_pars_fragment"]:"",o.mapEncoding?pa("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?pa("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?pa("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?pa("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?da("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(_a).join("\n")),c=wa(c),c=ba(c,o),c=xa(c,o),l=wa(l),l=ba(l,o),l=xa(l,o),c=Ma(c),l=Ma(l),a.isWebGL2&&!r.isRawShaderMaterial){var x=!1,w=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==c.match(w)&&null!==l.match(w)&&(x=!0,c=c.replace(w,""),l=l.replace(w,"")),v=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#version 300 es\n","#define varying in",x?"":"out highp vec4 pc_fragColor;",x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var M=v+c,E=g+l,O=la(s,s.VERTEX_SHADER,M),S=la(s,s.FRAGMENT_SHADER,E);s.attachShader(b,O),s.attachShader(b,S),void 0!==r.index0AttributeName?s.bindAttribLocation(b,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b);var T,j,A=s.getProgramInfoLog(b).trim(),C=s.getShaderInfoLog(O).trim(),I=s.getShaderInfoLog(S).trim(),R=!0,F=!0;return!1===s.getProgramParameter(b,s.LINK_STATUS)?(R=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(b,s.VALIDATE_STATUS),"gl.getProgramInfoLog",A,C,I)):""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==C&&""!==I||(F=!1),F&&(this.diagnostics={runnable:R,material:r,programLog:A,vertexShader:{log:C,prefix:v},fragmentShader:{log:I,prefix:g}}),s.deleteShader(O),s.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new ua(s,b,t)),T},this.getAttributes=function(){return void 0===j&&(j=ya(s,b)),j},this.destroy=function(){s.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=fa++,this.code=n,this.usedTimes=1,this.program=b,this.vertexShader=O,this.fragmentShader=S,this}function Oa(t,e,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t){var e=t.skeleton,r=e.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function s(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=qe,n===qe&&e&&(n=Ye),n}this.getParameters=function(e,r,o,u,c,l,f){var h=i[e.type],p=f.isSkinnedMesh?a(f):0,d=n.precision;null!==e.precision&&(d=n.getMaxPrecision(e.precision),d!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead."));var v=t.getRenderTarget(),g={shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:s(v?v.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:s(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:s(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:s(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===Pt||e.envMap.mapping===It),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:s(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===nn,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!u,useFog:e.fog,fogExp:u&&u.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===F,flipSided:e.side===R,depthPacking:void 0!==e.depthPacking&&e.depthPacking};return g},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.push(t.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,c=0,l=r.length;c<l;c++){var f=r[c];if(f.code===s){u=f,++u.usedTimes;break}}return void 0===u&&(u=new Ea(t,e,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Sa(){var t=new WeakMap;function e(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Ta(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ja(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Aa(){var t=[],e=0,n=[],r=[];function i(){e=0,n.length=0,r.length=0}function o(n,r,i,o,a,s){var u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,program:i.program,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.program=i.program,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=a,u.group=s),e++,u}function a(t,e,i,a,s,u){var c=o(t,e,i,a,s,u);(!0===i.transparent?r:n).push(c)}function s(t,e,i,a,s,u){var c=o(t,e,i,a,s,u);(!0===i.transparent?r:n).unshift(c)}function u(){n.length>1&&n.sort(Ta),r.length>1&&r.sort(ja)}return{opaque:n,transparent:r,init:i,push:a,unshift:s,sort:u}}function Ca(){var t={};function e(n){var r=n.target;r.removeEventListener("dispose",e),delete t[r.id]}function n(n,r){var i,o=t[n.id];return void 0===o?(i=new Aa,t[n.id]={},t[n.id][r.id]=i,n.addEventListener("dispose",e)):(i=o[r.id],void 0===i&&(i=new Aa,o[r.id]=i)),i}function r(){t={}}return{get:n,dispose:r}}function La(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new u,color:new f,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"SpotLight":n={position:new u,direction:new u,color:new f,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"PointLight":n={position:new u,color:new f,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new c,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new u,skyColor:new f,groundColor:new f};break;case"RectAreaLight":n={color:new f,position:new u,halfWidth:new u,halfHeight:new u};break}return t[e.id]=n,n}}}var Pa=0;function Ia(){var t=new La,e={id:Pa++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new u,r=new a,i=new a;function o(o,a,s){for(var u=0,c=0,l=0,f=0,h=0,p=0,d=0,v=0,g=s.matrixWorldInverse,m=0,y=o.length;m<y;m++){var _=o[m],b=_.color,x=_.intensity,w=_.distance,M=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)u+=b.r*x,c+=b.g*x,l+=b.b*x;else if(_.isDirectionalLight){var E=t.get(_);if(E.color.copy(_.color).multiplyScalar(_.intensity),E.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.shadow=_.castShadow,_.castShadow){var O=_.shadow;E.shadowBias=O.bias,E.shadowRadius=O.radius,E.shadowMapSize=O.mapSize}e.directionalShadowMap[f]=M,e.directionalShadowMatrix[f]=_.shadow.matrix,e.directional[f]=E,f++}else if(_.isSpotLight){E=t.get(_);if(E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(g),E.color.copy(b).multiplyScalar(x),E.distance=w,E.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.coneCos=Math.cos(_.angle),E.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),E.decay=_.decay,E.shadow=_.castShadow,_.castShadow){O=_.shadow;E.shadowBias=O.bias,E.shadowRadius=O.radius,E.shadowMapSize=O.mapSize}e.spotShadowMap[p]=M,e.spotShadowMatrix[p]=_.shadow.matrix,e.spot[p]=E,p++}else if(_.isRectAreaLight){E=t.get(_);E.color.copy(b).multiplyScalar(x),E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(g),i.identity(),r.copy(_.matrixWorld),r.premultiply(g),i.extractRotation(r),E.halfWidth.set(.5*_.width,0,0),E.halfHeight.set(0,.5*_.height,0),E.halfWidth.applyMatrix4(i),E.halfHeight.applyMatrix4(i),e.rectArea[d]=E,d++}else if(_.isPointLight){E=t.get(_);if(E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(g),E.color.copy(_.color).multiplyScalar(_.intensity),E.distance=_.distance,E.decay=_.decay,E.shadow=_.castShadow,_.castShadow){O=_.shadow;E.shadowBias=O.bias,E.shadowRadius=O.radius,E.shadowMapSize=O.mapSize,E.shadowCameraNear=O.camera.near,E.shadowCameraFar=O.camera.far}e.pointShadowMap[h]=M,e.pointShadowMatrix[h]=_.shadow.matrix,e.point[h]=E,h++}else if(_.isHemisphereLight){E=t.get(_);E.direction.setFromMatrixPosition(_.matrixWorld),E.direction.transformDirection(g),E.direction.normalize(),E.skyColor.copy(_.color).multiplyScalar(x),E.groundColor.copy(_.groundColor).multiplyScalar(x),e.hemi[v]=E,v++}}e.ambient[0]=u,e.ambient[1]=c,e.ambient[2]=l,e.directional.length=f,e.spot.length=p,e.rectArea.length=d,e.point.length=h,e.hemi.length=v,e.hash.stateID=e.id,e.hash.directionalLength=f,e.hash.pointLength=h,e.hash.spotLength=p,e.hash.rectAreaLength=d,e.hash.hemiLength=v,e.hash.shadowsLength=a.length}return{setup:o,state:e}}function Ra(){var t=new Ia,e=[],n=[];function r(){e.length=0,n.length=0}function i(t){e.push(t)}function o(t){n.push(t)}function a(r){t.setup(e,n,r)}var s={lightsArray:e,shadowsArray:n,lights:t};return{init:r,state:s,setupLights:a,pushLight:i,pushShadow:o}}function Fa(){var t={};function e(n){var r=n.target;r.removeEventListener("dispose",e),delete t[r.id]}function n(n,r){var i;return void 0===t[n.id]?(i=new Ra,t[n.id]={},t[n.id][r.id]=i,n.addEventListener("dispose",e)):void 0===t[n.id][r.id]?(i=new Ra,t[n.id][r.id]=i):i=t[n.id][r.id],i}function r(){t={}}return{get:n,dispose:r}}function Da(t,e,n){this.width=t,this.height=e,this.scissor=new i(0,0,t,e),this.scissorTest=!1,this.viewport=new i(0,0,t,e),n=n||{},this.texture=new dn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:zt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function ka(t){Ji.call(this),this.type="MeshDepthMaterial",this.depthPacking=$e,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Na(t){Ji.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new u,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Ba(t,e,n){for(var r=new _n,o=new a,s=new c,l=new c(n,n),f=new u,h=new u,p=1,d=2,v=1+(p|d),g=new Array(v),m=new Array(v),y={},_={0:R,1:I,2:F},b=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],x=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],w=[new i,new i,new i,new i,new i,new i],M=0;M!==v;++M){var E=0!==(M&p),O=0!==(M&d),S=new ka({depthPacking:tn,morphTargets:E,skinning:O});g[M]=S;var T=new Na({morphTargets:E,skinning:O});m[M]=T}var j=this;function A(e,n,r,i,o,a){var s=e.geometry,u=null,c=g,l=e.customDepthMaterial;if(r&&(c=m,l=e.customDistanceMaterial),l)u=l;else{var f=!1;n.morphTargets&&(s&&s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(f=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var h=e.isSkinnedMesh&&n.skinning,v=0;f&&(v|=p),h&&(v|=d),u=c[v]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=u.uuid,x=n.uuid,w=y[b];void 0===w&&(w={},y[b]=w);var M=w[x];void 0===M&&(M=u.clone(),w[x]=M),u=M}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:_[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function C(n,i,o,a){if(!1!==n.visible){var s=n.layers.test(i.layers);if(s&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=e.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,f=0,p=l.length;f<p;f++){var d=l[f],v=c[d.materialIndex];if(v&&v.visible){var g=A(n,v,a,h,o.near,o.far);t.renderBufferDirect(o,null,u,g,n,d)}}else if(c.visible){g=A(n,c,a,h,o.near,o.far);t.renderBufferDirect(o,null,u,g,n,null)}}for(var m=n.children,y=0,_=m.length;y<_;y++)C(m[y],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.render=function(e,n,i){if(!1!==j.enabled&&(!1!==j.autoUpdate||!1!==j.needsUpdate)&&0!==e.length){var a,u=t.state;u.setBlending(U),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(var c=0,p=e.length;c<p;c++){var d=e[c],v=d.shadow,g=d&&d.isPointLight;if(void 0!==v){var m=v.camera;if(s.copy(v.mapSize),s.min(l),g){var y=s.x,_=s.y;w[0].set(2*y,_,y,_),w[1].set(0,_,y,_),w[2].set(3*y,_,y,_),w[3].set(y,_,y,_),w[4].set(3*y,0,y,_),w[5].set(y,0,y,_),s.x*=4,s.y*=2}if(null===v.map){var M={minFilter:kt,magFilter:kt,format:re};v.map=new Da(s.x,s.y,M),v.map.texture.name=d.name+".shadowMap",m.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(d);var E=v.map,O=v.matrix;h.setFromMatrixPosition(d.matrixWorld),m.position.copy(h),g?(a=6,O.makeTranslation(-h.x,-h.y,-h.z)):(a=1,f.setFromMatrixPosition(d.target.matrixWorld),m.lookAt(f),m.updateMatrixWorld(),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(m.projectionMatrix),O.multiply(m.matrixWorldInverse)),t.setRenderTarget(E),t.clear();for(var S=0;S<a;S++){if(g){f.copy(m.position),f.add(b[S]),m.up.copy(x[S]),m.lookAt(f),m.updateMatrixWorld();var T=w[S];u.viewport(T)}o.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse),r.setFromMatrix(o),C(n,i,m,g)}}else console.warn("THREE.WebGLShadowMap:",d,"has no shadow.")}j.needsUpdate=!1}}}function za(t,e,n,r){function o(){var e=!1,n=new i,r=null,o=new i(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,i,a,s){!0===s&&(e*=a,r*=a,i*=a),n.set(e,r,i,a),!1===o.equals(n)&&(t.clearColor(e,r,i,a),o.copy(n))},reset:function(){e=!1,r=null,o.set(-1,0,0,0)}}}function a(){var e=!1,n=null,r=null,i=null;return{setTest:function(e){e?it(t.DEPTH_TEST):ot(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case ct:t.depthFunc(t.NEVER);break;case lt:t.depthFunc(t.ALWAYS);break;case ft:t.depthFunc(t.LESS);break;case ht:t.depthFunc(t.LEQUAL);break;case pt:t.depthFunc(t.EQUAL);break;case dt:t.depthFunc(t.GEQUAL);break;case vt:t.depthFunc(t.GREATER);break;case gt:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function s(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){e?it(t.STENCIL_TEST):ot(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}var u=new o,c=new a,l=new s,f=t.getParameter(t.MAX_VERTEX_ATTRIBS),h=new Uint8Array(f),p=new Uint8Array(f),d=new Uint8Array(f),v={},g=null,m=null,y=null,_=null,b=null,x=null,w=null,M=null,T=null,j=null,A=!1,C=null,L=null,P=null,I=null,D=null,k=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),N=!1,B=0,z=t.getParameter(t.VERSION);-1!==z.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(z)[1]),N=B>=1):-1!==z.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(z)[1]),N=B>=2);var X=null,Z={},K=new i,J=new i;function Q(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<r;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}var $={};function tt(){for(var t=0,e=h.length;t<e;t++)h[t]=0}function et(t){nt(t,0)}function nt(n,i){if(h[n]=1,0===p[n]&&(t.enableVertexAttribArray(n),p[n]=1),d[n]!==i){var o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),d[n]=i}}function rt(){for(var e=0,n=p.length;e!==n;++e)p[e]!==h[e]&&(t.disableVertexAttribArray(e),p[e]=0)}function it(e){!0!==v[e]&&(t.enable(e),v[e]=!0)}function ot(e){!1!==v[e]&&(t.disable(e),v[e]=!1)}function at(){if(null===g&&(g=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)g.push(n[r]);return g}function st(e){return m!==e&&(t.useProgram(e),m=e,!0)}function ut(e,r,i,o,a,s,u,c){if(e!==U){if(y||(it(t.BLEND),y=!0),e===W)a=a||r,s=s||i,u=u||o,r===b&&a===M||(t.blendEquationSeparate(n.convert(r),n.convert(a)),b=r,M=a),i===x&&o===w&&s===T&&u===j||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),x=i,w=o,T=s,j=u),_=e,A=null;else if(e!==_||c!==A){if(b===Y&&M===Y||(t.blendEquation(t.FUNC_ADD),b=Y,M=Y),c)switch(e){case G:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case V:t.blendFunc(t.ONE,t.ONE);break;case H:t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA);break;case q:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case G:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case V:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case H:t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR);break;case q:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}x=null,w=null,T=null,j=null,_=e,A=c}}else y&&(ot(t.BLEND),y=!1)}function mt(e,n){e.side===F?ot(t.CULL_FACE):it(t.CULL_FACE);var r=e.side===R;n&&(r=!r),yt(r),e.blending===G&&!1===e.transparent?ut(U):ut(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),u.setMask(e.colorWrite),xt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function yt(e){C!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),C=e)}function _t(e){e!==E?(it(t.CULL_FACE),e!==L&&(e===O?t.cullFace(t.BACK):e===S?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ot(t.CULL_FACE),L=e}function bt(e){e!==P&&(N&&t.lineWidth(e),P=e)}function xt(e,n,r){e?(it(t.POLYGON_OFFSET_FILL),I===n&&D===r||(t.polygonOffset(n,r),I=n,D=r)):ot(t.POLYGON_OFFSET_FILL)}function wt(e){e?it(t.SCISSOR_TEST):ot(t.SCISSOR_TEST)}function Mt(e){void 0===e&&(e=t.TEXTURE0+k-1),X!==e&&(t.activeTexture(e),X=e)}function Et(e,n){null===X&&Mt();var r=Z[X];void 0===r&&(r={type:void 0,texture:void 0},Z[X]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||$[e]),r.type=e,r.texture=n)}function Ot(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function St(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Tt(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function jt(e){!1===K.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),K.copy(e))}function At(e){!1===J.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),J.copy(e))}function Ct(){for(var e=0;e<p.length;e++)1===p[e]&&(t.disableVertexAttribArray(e),p[e]=0);v={},g=null,X=null,Z={},m=null,_=null,C=null,L=null,u.reset(),c.reset(),l.reset()}return $[t.TEXTURE_2D]=Q(t.TEXTURE_2D,t.TEXTURE_2D,1),$[t.TEXTURE_CUBE_MAP]=Q(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),u.setClear(0,0,0,1),c.setClear(1),l.setClear(0),it(t.DEPTH_TEST),c.setFunc(ht),yt(!1),_t(O),it(t.CULL_FACE),ut(U),{buffers:{color:u,depth:c,stencil:l},initAttributes:tt,enableAttribute:et,enableAttributeAndDivisor:nt,disableUnusedAttributes:rt,enable:it,disable:ot,getCompressedTextureFormats:at,useProgram:st,setBlending:ut,setMaterial:mt,setFlipSided:yt,setCullFace:_t,setLineWidth:bt,setPolygonOffset:xt,setScissorTest:wt,activeTexture:Mt,bindTexture:Et,compressedTexImage2D:Ot,texImage2D:St,texImage3D:Tt,scissor:jt,viewport:At,reset:Ct}}function Ua(t,e,n,r,i,a,s){var u,c={};function l(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){void 0===u&&(u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));var a=n?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):u,s=e?o.floorPowerOfTwo:Math.floor;a.width=s(i*t.width),a.height=s(i*t.height);var c=a.getContext("2d");return c.drawImage(t,0,0,a.width,a.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a.width+"x"+a.height+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function f(t){return o.isPowerOfTwo(t.width)&&o.isPowerOfTwo(t.height)}function h(t){return!i.isWebGL2&&(t.wrapS!==Ft||t.wrapT!==Ft||t.minFilter!==kt&&t.minFilter!==zt)}function p(t,e){return t.generateMipmaps&&e&&t.minFilter!==kt&&t.minFilter!==zt}function d(e,n,i,o){t.generateMipmap(e);var a=r.get(n);a.__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function v(n,r){if(!i.isWebGL2)return n;var o=n;return n===t.RED&&(r===t.FLOAT&&(o=t.R32F),r===t.HALF_FLOAT&&(o=t.R16F),r===t.UNSIGNED_BYTE&&(o=t.R8)),n===t.RGB&&(r===t.FLOAT&&(o=t.RGB32F),r===t.HALF_FLOAT&&(o=t.RGB16F),r===t.UNSIGNED_BYTE&&(o=t.RGB8)),n===t.RGBA&&(r===t.FLOAT&&(o=t.RGBA32F),r===t.HALF_FLOAT&&(o=t.RGBA16F),r===t.UNSIGNED_BYTE&&(o=t.RGBA8)),o===t.R16F||o===t.R32F||o===t.RGBA16F||o===t.RGBA32F?e.get("EXT_color_buffer_float"):o!==t.RGB16F&&o!==t.RGB32F||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),o}function g(e){return e===kt||e===Nt||e===Bt?t.NEAREST:t.LINEAR}function m(t){var e=t.target;e.removeEventListener("dispose",m),_(e),e.isVideoTexture&&delete c[e.id],s.memory.textures--}function y(t){var e=t.target;e.removeEventListener("dispose",y),b(e),s.memory.textures--}function _(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.remove(e)}function b(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}}function x(e,i){var o=r.get(e);if(e.isVideoTexture&&F(e),e.version>0&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void S(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function w(e,i){var o=r.get(e);e.version>0&&o.__version!==e.version?S(o,e,i):(n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_3D,o.__webglTexture))}function M(e,o){var u=r.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",m),u.__image__webglTextureCube=t.createTexture(),s.memory.textures++),n.activeTexture(t.TEXTURE0+o),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e&&e.isCompressedTexture,h=e.image[0]&&e.image[0].isDataTexture,g=[],y=0;y<6;y++)g[y]=c||h?h?e.image[y].image:e.image[y]:l(e.image[y],!1,!0,i.maxCubemapSize);var _=g[0],b=f(_)||i.isWebGL2,x=a.convert(e.format),w=a.convert(e.type),M=v(x,w);O(t.TEXTURE_CUBE_MAP,e,b);for(y=0;y<6;y++)if(c)for(var E,S=g[y].mipmaps,T=0,j=S.length;T<j;T++)E=S[T],e.format!==re&&e.format!==ne?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+y,T,M,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+y,T,M,E.width,E.height,0,x,w,E.data);else h?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,M,g[y].width,g[y].height,0,x,w,g[y].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,M,x,w,g[y]);u.__maxMipLevel=c?S.length-1:0,p(e,b)&&d(t.TEXTURE_CUBE_MAP,e,_.width,_.height),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+o),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function E(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)}function O(n,o,s){var u;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,a.convert(o.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,a.convert(o.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS===Ft&&o.wrapT===Ft||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,g(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,g(o.minFilter)),o.minFilter!==kt&&o.minFilter!==zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=e.get("EXT_texture_filter_anisotropic"),u){if(o.type===Zt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Kt&&null===(i.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function S(e,r,o){var u;u=r.isDataTexture3D?t.TEXTURE_3D:t.TEXTURE_2D,void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),s.memory.textures++),n.activeTexture(t.TEXTURE0+o),n.bindTexture(u,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var c=h(r)&&!1===f(r.image),g=l(r.image,c,!1,i.maxTextureSize),y=f(g)||i.isWebGL2,_=a.convert(r.format),b=a.convert(r.type),x=v(_,b);O(u,r,y);var w,M=r.mipmaps;if(r.isDepthTexture){if(x=t.DEPTH_COMPONENT,r.type===Zt){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else i.isWebGL2&&(x=t.DEPTH_COMPONENT16);r.format===se&&x===t.DEPTH_COMPONENT&&r.type!==Wt&&r.type!==Xt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Wt,b=a.convert(r.type)),r.format===ue&&(x=t.DEPTH_STENCIL,r.type!==te&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=te,b=a.convert(r.type))),n.texImage2D(t.TEXTURE_2D,0,x,g.width,g.height,0,_,b,null)}else if(r.isDataTexture)if(M.length>0&&y){for(var E=0,S=M.length;E<S;E++)w=M[E],n.texImage2D(t.TEXTURE_2D,E,x,w.width,w.height,0,_,b,w.data);r.generateMipmaps=!1,e.__maxMipLevel=M.length-1}else n.texImage2D(t.TEXTURE_2D,0,x,g.width,g.height,0,_,b,g.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,S=M.length;E<S;E++)w=M[E],r.format!==re&&r.format!==ne?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(t.TEXTURE_2D,E,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,E,x,w.width,w.height,0,_,b,w.data);e.__maxMipLevel=M.length-1}else if(r.isDataTexture3D)n.texImage3D(t.TEXTURE_3D,0,x,g.width,g.height,g.depth,0,_,b,g.data),e.__maxMipLevel=0;else if(M.length>0&&y){for(E=0,S=M.length;E<S;E++)w=M[E],n.texImage2D(t.TEXTURE_2D,E,x,_,b,w);r.generateMipmaps=!1,e.__maxMipLevel=M.length-1}else n.texImage2D(t.TEXTURE_2D,0,x,_,b,g),e.__maxMipLevel=0;p(r,y)&&d(t.TEXTURE_2D,r,g.width,g.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function T(e,i,o,s){var u=a.convert(i.texture.format),c=a.convert(i.texture.type),l=v(u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function j(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){if(r){var i=R(n);t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH_COMPONENT16,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=R(n);t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH_STENCIL,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{var o=a.convert(n.texture.format),s=a.convert(n.texture.type),u=v(o,s);if(r){i=R(n);t.renderbufferStorageMultisample(t.RENDERBUFFER,i,u,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}t.bindRenderbuffer(t.RENDERBUFFER,null)}function A(e,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===se)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==ue)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}function C(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");A(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),j(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),j(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function L(e){var o=r.get(e),u=r.get(e.texture);e.addEventListener("dispose",y),u.__webglTexture=t.createTexture(),s.memory.textures++;var c=!0===e.isWebGLRenderTargetCube,l=!0===e.isWebGLMultisampleRenderTarget,h=f(e)||i.isWebGL2;if(c){o.__webglFramebuffer=[];for(var g=0;g<6;g++)o.__webglFramebuffer[g]=t.createFramebuffer()}else if(o.__webglFramebuffer=t.createFramebuffer(),l)if(i.isWebGL2){o.__webglMultisampledFramebuffer=t.createFramebuffer(),o.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,o.__webglColorRenderbuffer);var m=a.convert(e.texture.format),_=a.convert(e.texture.type),b=v(m,_),x=R(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,x,b,e.width,e.height),t.bindFramebuffer(t.FRAMEBUFFER,o.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,o.__webglColorRenderbuffer),t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(o.__webglDepthRenderbuffer=t.createRenderbuffer(),j(o.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(t.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),O(t.TEXTURE_CUBE_MAP,e.texture,h);for(g=0;g<6;g++)T(o.__webglFramebuffer[g],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+g);p(e.texture,h)&&d(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,u.__webglTexture),O(t.TEXTURE_2D,e.texture,h),T(o.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),p(e.texture,h)&&d(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&C(e)}function P(e){var o=e.texture,a=f(e)||i.isWebGL2;if(p(o,a)){var s=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,u=r.get(o).__webglTexture;n.bindTexture(s,u),d(s,o,e.width,e.height),n.bindTexture(s,null)}}function I(e){if(e.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(e);t.bindFramebuffer(t.READ_FRAMEBUFFER,n.__webglMultisampledFramebuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n.__webglFramebuffer);var o=e.width,a=e.height,s=t.COLOR_BUFFER_BIT;e.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(s|=t.STENCIL_BUFFER_BIT),t.blitFramebuffer(0,0,o,a,0,0,o,a,s,t.NEAREST)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function R(t){return i.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,t.samples):0}function F(t){var e=t.id,n=s.render.frame;c[e]!==n&&(c[e]=n,t.update())}this.setTexture2D=x,this.setTexture3D=w,this.setTextureCube=M,this.setTextureCubeDynamic=E,this.setupRenderTarget=L,this.updateRenderTargetMipmap=P,this.updateMultisampleRenderTarget=I}function Ga(t,e,n){function r(r){var i;if(r===Rt)return t.REPEAT;if(r===Ft)return t.CLAMP_TO_EDGE;if(r===Dt)return t.MIRRORED_REPEAT;if(r===kt)return t.NEAREST;if(r===Nt)return t.NEAREST_MIPMAP_NEAREST;if(r===Bt)return t.NEAREST_MIPMAP_LINEAR;if(r===zt)return t.LINEAR;if(r===Ut)return t.LINEAR_MIPMAP_NEAREST;if(r===Gt)return t.LINEAR_MIPMAP_LINEAR;if(r===Vt)return t.UNSIGNED_BYTE;if(r===Jt)return t.UNSIGNED_SHORT_4_4_4_4;if(r===Qt)return t.UNSIGNED_SHORT_5_5_5_1;if(r===$t)return t.UNSIGNED_SHORT_5_6_5;if(r===Ht)return t.BYTE;if(r===qt)return t.SHORT;if(r===Wt)return t.UNSIGNED_SHORT;if(r===Yt)return t.INT;if(r===Xt)return t.UNSIGNED_INT;if(r===Zt)return t.FLOAT;if(r===Kt){if(n.isWebGL2)return t.HALF_FLOAT;if(i=e.get("OES_texture_half_float"),null!==i)return i.HALF_FLOAT_OES}if(r===ee)return t.ALPHA;if(r===ne)return t.RGB;if(r===re)return t.RGBA;if(r===ie)return t.LUMINANCE;if(r===oe)return t.LUMINANCE_ALPHA;if(r===se)return t.DEPTH_COMPONENT;if(r===ue)return t.DEPTH_STENCIL;if(r===ce)return t.RED;if(r===Y)return t.FUNC_ADD;if(r===X)return t.FUNC_SUBTRACT;if(r===Z)return t.FUNC_REVERSE_SUBTRACT;if(r===Q)return t.ZERO;if(r===$)return t.ONE;if(r===tt)return t.SRC_COLOR;if(r===et)return t.ONE_MINUS_SRC_COLOR;if(r===nt)return t.SRC_ALPHA;if(r===rt)return t.ONE_MINUS_SRC_ALPHA;if(r===it)return t.DST_ALPHA;if(r===ot)return t.ONE_MINUS_DST_ALPHA;if(r===at)return t.DST_COLOR;if(r===st)return t.ONE_MINUS_DST_COLOR;if(r===ut)return t.SRC_ALPHA_SATURATE;if((r===le||r===fe||r===he||r===pe)&&(i=e.get("WEBGL_compressed_texture_s3tc"),null!==i)){if(r===le)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===fe)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===he)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===pe)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===de||r===ve||r===ge||r===me)&&(i=e.get("WEBGL_compressed_texture_pvrtc"),null!==i)){if(r===de)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ve)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ge)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===me)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===ye&&(i=e.get("WEBGL_compressed_texture_etc1"),null!==i))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===_e||r===be||r===xe||r===we||r===Me||r===Ee||r===Oe||r===Se||r===Te||r===je||r===Ae||r===Ce||r===Le||r===Pe)&&(i=e.get("WEBGL_compressed_texture_astc"),null!==i))return r;if(r===K||r===J){if(n.isWebGL2){if(r===K)return t.MIN;if(r===J)return t.MAX}if(i=e.get("EXT_blend_minmax"),null!==i){if(r===K)return i.MIN_EXT;if(r===J)return i.MAX_EXT}}if(r===te){if(n.isWebGL2)return t.UNSIGNED_INT_24_8;if(i=e.get("WEBGL_depth_texture"),null!==i)return i.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function Va(){ln.call(this),this.type="Group"}function Ha(){ln.call(this),this.type="Camera",this.matrixWorldInverse=new a,this.projectionMatrix=new a,this.projectionMatrixInverse=new a}function qa(t,e,n,r){Ha.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Wa(t){qa.call(this),this.cameras=t||[]}Da.prototype=Object.assign(Object.create(rn.prototype),{constructor:Da,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ka.prototype=Object.create(Ji.prototype),ka.prototype.constructor=ka,ka.prototype.isMeshDepthMaterial=!0,ka.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Na.prototype=Object.create(Ji.prototype),Na.prototype.constructor=Na,Na.prototype.isMeshDistanceMaterial=!0,Na.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Va.prototype=Object.assign(Object.create(ln.prototype),{constructor:Va,isGroup:!0}),Ha.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ha,isCamera:!0,copy:function(t,e){return ln.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new u),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){ln.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),qa.prototype=Object.assign(Object.create(Ha.prototype),{constructor:qa,isPerspectiveCamera:!0,copy:function(t,e){return Ha.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*o.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*o.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*o.RAD2DEG*Math.atan(Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,u=a.fullHeight;i+=a.offsetX*r/s,e-=a.offsetY*n/u,r*=a.width/s,n*=a.height/u}var c=this.filmOffset;0!==c&&(i+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Wa.prototype=Object.assign(Object.create(qa.prototype),{constructor:Wa,isArrayCamera:!0});var Ya=new u,Xa=new u;function Za(t,e,n){Ya.setFromMatrixPosition(e.matrixWorld),Xa.setFromMatrixPosition(n.matrixWorld);var r=Ya.distanceTo(Xa),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],f=(o[8]+1)/o[0],h=a*l,p=a*f,d=r/(-l+f),v=d*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(v),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=a+d,m=s+d,y=h-v,_=p+(r-v),b=u*s/m*g,x=c*s/m*g;t.projectionMatrix.makePerspective(y,_,b,x,g,m)}function Ka(t){var e=this,n=null,r=null,o=null,c=[],l=new a,f=new a,h=1,p="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",M,!1));var d=new a,v=new s,g=new u,m=new qa;m.bounds=new i(0,0,.5,1),m.layers.enable(1);var y=new qa;y.bounds=new i(.5,0,.5,1),y.layers.enable(2);var _,b,x=new Wa([m,y]);function w(){return null!==n&&!0===n.isPresenting}function M(){if(w()){var r=n.getEyeParameters("left"),i=r.renderWidth*h,o=r.renderHeight*h;b=t.getPixelRatio(),_=t.getSize(),t.setDrawingBufferSize(2*i,o,1),T.start()}else e.enabled&&t.setDrawingBufferSize(_.width,_.height,b),T.stop()}x.layers.enable(1),x.layers.enable(2);var E=[];function O(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=e.length;n<i;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===t)return o;r++}}}function S(){for(var t=0;t<c.length;t++){var e=c[t],n=O(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===n.id?0:1;E[t]!==n.buttons[i].pressed&&(E[t]=n.buttons[i].pressed,!0===E[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}this.enabled=!1,this.getController=function(t){var e=c[t];return void 0===e&&(e=new Va,e.matrixAutoUpdate=!1,e.visible=!1,c[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),T.setContext(t)},this.setFramebufferScaleFactor=function(t){h=t},this.setFrameOfReferenceType=function(t){p=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="stage"===p?1.6:0;if(null===n)return t.position.set(0,e,0),t;if(n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(r),"stage"===p){var i=n.stageParameters;i?l.fromArray(i.sittingToStandingTransform):l.makeTranslation(0,e,0)}var a=r.pose,s=null!==o?o:t;if(s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==a.orientation&&(v.fromArray(a.orientation),s.quaternion.multiply(v)),null!==a.position&&(v.setFromRotationMatrix(l),g.fromArray(a.position),g.applyQuaternion(v),s.position.add(g)),s.updateMatrixWorld(),!1===n.isPresenting)return t;m.near=t.near,y.near=t.near,m.far=t.far,y.far=t.far,m.matrixWorldInverse.fromArray(r.leftViewMatrix),y.matrixWorldInverse.fromArray(r.rightViewMatrix),f.getInverse(l),"stage"===p&&(m.matrixWorldInverse.multiply(f),y.matrixWorldInverse.multiply(f));var u=s.parent;null!==u&&(d.getInverse(u.matrixWorld),m.matrixWorldInverse.multiply(d),y.matrixWorldInverse.multiply(d)),m.matrixWorld.getInverse(m.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),m.projectionMatrix.fromArray(r.leftProjectionMatrix),y.projectionMatrix.fromArray(r.rightProjectionMatrix),Za(x,m,y);var c=n.getLayers();if(c.length){var h=c[0];null!==h.leftBounds&&4===h.leftBounds.length&&m.bounds.fromArray(h.leftBounds),null!==h.rightBounds&&4===h.rightBounds.length&&y.bounds.fromArray(h.rightBounds)}return S(),x},this.getStandingMatrix=function(){return l},this.isPresenting=w;var T=new ki;this.setAnimationLoop=function(t){T.setAnimationLoop(t)},this.submitFrame=function(){w()&&n.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",M)}}function Ja(t){var e=t.context,n=null,r=null,o=1,a=null,s="stage",u=null,c=[],l=[];function f(){return null!==r&&null!==a}var h=new qa;h.layers.enable(1),h.viewport=new i;var p=new qa;p.layers.enable(2),p.viewport=new i;var d=new Wa([h,p]);function v(t){var e=c[l.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function g(){t.setFramebuffer(null),b.stop()}function m(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=c[t];return void 0===e&&(e=new Va,e.matrixAutoUpdate=!1,e.visible=!1,c[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFramebufferScaleFactor=function(t){o=t},this.setFrameOfReferenceType=function(t){s=t},this.setSession=function(n){r=n,null!==r&&(r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("end",g),r.baseLayer=new XRWebGLLayer(r,e,{framebufferScaleFactor:o}),r.requestFrameOfReference(s).then(function(e){a=e,t.setFramebuffer(r.baseLayer.framebuffer),b.setContext(r),b.start()}),l=r.getInputSources(),r.addEventListener("inputsourceschange",function(){l=r.getInputSources(),console.log(l);for(var t=0;t<c.length;t++){var e=c[t];e.userData.inputSource=l[t]}}))},this.getCamera=function(t){if(f()){var e=t.parent,n=d.cameras;m(d,e);for(var r=0;r<n.length;r++)m(n[r],e);t.matrixWorld.copy(d.matrixWorld);for(var i=t.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return Za(d,h,p),d}return t},this.isPresenting=f;var y=null;function _(t,e){if(u=e.getDevicePose(a),null!==u)for(var n=r.baseLayer,i=e.views,o=0;o<i.length;o++){var s=i[o],f=n.getViewport(s),h=u.getViewMatrix(s),p=d.cameras[o];p.matrix.fromArray(h).getInverse(p.matrix),p.projectionMatrix.fromArray(s.projectionMatrix),p.viewport.set(f.x,f.y,f.width,f.height),0===o&&d.matrix.copy(p.matrix)}for(o=0;o<c.length;o++){var v=c[o],g=l[o];if(g){var m=e.getInputPose(g,a);if(null!==m){"targetRay"in m?v.matrix.elements=m.targetRay.transformMatrix:"pointerMatrix"in m&&(v.matrix.elements=m.pointerMatrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}y&&y(t)}var b=new ki;b.setAnimationLoop(_),this.setAnimationLoop=function(t){y=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Qa(t){console.log("THREE.WebGLRenderer",w),t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,s=void 0===t.depth||t.depth,c=void 0===t.stencil||t.stencil,l=void 0!==t.antialias&&t.antialias,f=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,p=void 0!==t.powerPreference?t.powerPreference:"default",d=null,v=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=xt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g,m,y,_,b,x,M,E,O,S,T,j,A,C,L,P,I,F,D=this,k=!1,N=null,B=null,z=null,U=-1,G={geometry:null,program:null,wireframe:!1},V=null,H=null,q=new i,W=new i,Y=null,X=0,Z=e.width,K=e.height,J=1,Q=new i(0,0,Z,K),$=new i(0,0,Z,K),tt=!1,et=new _n,nt=new ao,rt=!1,it=!1,ot=new a,at=new u;function st(){return null===B?J:1}try{var ut={alpha:r,depth:s,stencil:c,antialias:l,premultipliedAlpha:f,preserveDrawingBuffer:h,powerPreference:p};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",pt,!1),g=n||e.getContext("webgl",ut)||e.getContext("experimental-webgl",ut),null===g)throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===g.getShaderPrecisionFormat&&(g.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function ct(){m=new so(g),y=new oo(g,m,t),y.isWebGL2||(m.get("WEBGL_depth_texture"),m.get("OES_texture_float"),m.get("OES_texture_half_float"),m.get("OES_texture_half_float_linear"),m.get("OES_standard_derivatives"),m.get("OES_element_index_uint"),m.get("ANGLE_instanced_arrays")),m.get("OES_texture_float_linear"),F=new Ga(g,m,y),_=new za(g,m,F,y),_.scissor(W.copy($).multiplyScalar(J)),_.viewport(q.copy(Q).multiplyScalar(J)),b=new lo(g),x=new Sa,M=new Ua(g,m,_,x,y,F,b),E=new Ni(g),O=new uo(g,E,b),S=new po(O,b),L=new ho(g),T=new Oa(D,m,y),j=new Ca,A=new Fa,C=new ro(D,_,S,f),P=new io(g,m,b,y),I=new co(g,m,b,y),b.programs=T.programs,D.context=g,D.capabilities=y,D.extensions=m,D.properties=x,D.renderLists=j,D.state=_,D.info=b}ct();var lt=null;"undefined"!==typeof navigator&&(lt="xr"in navigator?new Ja(D):new Ka(D)),this.vr=lt;var ft=new Ba(D,S,y.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1,ct()}function dt(t){var e=t.target;e.removeEventListener("dispose",dt),vt(e)}function vt(t){gt(t),x.remove(t)}function gt(t){var e=x.get(t).program;t.program=void 0,void 0!==e&&T.releaseProgram(e)}function mt(t,e){t.render(function(t){D.renderBufferImmediate(t,e)})}function yt(t,e,n){if(n&&n.isInstancedBufferGeometry&!y.isWebGL2&&null===m.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{_.initAttributes();var r=n.attributes,i=e.getAttributes(),o=t.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var c=u.normalized,l=u.itemSize,f=E.get(u);if(void 0===f)continue;var h=f.buffer,p=f.type,d=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data,b=v.stride,x=u.offset;v&&v.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(s,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):_.enableAttribute(s),g.bindBuffer(g.ARRAY_BUFFER,h),g.vertexAttribPointer(s,l,p,c,b*d,x*d)}else u.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):_.enableAttribute(s),g.bindBuffer(g.ARRAY_BUFFER,h),g.vertexAttribPointer(s,l,p,c,0,0)}else if(void 0!==o){var w=o[a];if(void 0!==w)switch(w.length){case 2:g.vertexAttrib2fv(s,w);break;case 3:g.vertexAttrib3fv(s,w);break;case 4:g.vertexAttrib4fv(s,w);break;default:g.vertexAttrib1fv(s,w)}}}}_.disableUnusedAttributes()}}this.shadowMap=ft,this.getContext=function(){return g},this.getContextAttributes=function(){return g.getContextAttributes()},this.forceContextLoss=function(){var t=m.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=m.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(t){void 0!==t&&(J=t,this.setSize(Z,K,!1))},this.getSize=function(){return{width:Z,height:K}},this.setSize=function(t,n,r){lt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=t,K=n,e.width=t*J,e.height=n*J,!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(){return{width:Z*J,height:K*J}},this.setDrawingBufferSize=function(t,n,r){Z=t,K=n,J=r,e.width=t*r,e.height=n*r,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(){return q},this.setViewport=function(t,e,n,r){Q.set(t,K-e-r,n,r),_.viewport(q.copy(Q).multiplyScalar(J))},this.setScissor=function(t,e,n,r){$.set(t,K-e-r,n,r),_.scissor(W.copy($).multiplyScalar(J))},this.setScissorTest=function(t){_.setScissorTest(tt=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=g.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=g.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=g.STENCIL_BUFFER_BIT),g.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",pt,!1),j.dispose(),A.dispose(),x.dispose(),S.dispose(),lt.dispose(),wt.stop()},this.renderBufferImmediate=function(t,e){_.initAttributes();var n=x.get(t);t.hasPositions&&!n.position&&(n.position=g.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=g.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=g.createBuffer()),t.hasColors&&!n.color&&(n.color=g.createBuffer());var r=e.getAttributes();t.hasPositions&&(g.bindBuffer(g.ARRAY_BUFFER,n.position),g.bufferData(g.ARRAY_BUFFER,t.positionArray,g.DYNAMIC_DRAW),_.enableAttribute(r.position),g.vertexAttribPointer(r.position,3,g.FLOAT,!1,0,0)),t.hasNormals&&(g.bindBuffer(g.ARRAY_BUFFER,n.normal),g.bufferData(g.ARRAY_BUFFER,t.normalArray,g.DYNAMIC_DRAW),_.enableAttribute(r.normal),g.vertexAttribPointer(r.normal,3,g.FLOAT,!1,0,0)),t.hasUvs&&(g.bindBuffer(g.ARRAY_BUFFER,n.uv),g.bufferData(g.ARRAY_BUFFER,t.uvArray,g.DYNAMIC_DRAW),_.enableAttribute(r.uv),g.vertexAttribPointer(r.uv,2,g.FLOAT,!1,0,0)),t.hasColors&&(g.bindBuffer(g.ARRAY_BUFFER,n.color),g.bufferData(g.ARRAY_BUFFER,t.colorArray,g.DYNAMIC_DRAW),_.enableAttribute(r.color),g.vertexAttribPointer(r.color,3,g.FLOAT,!1,0,0)),_.disableUnusedAttributes(),g.drawArrays(g.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;_.setMaterial(r,a);var s=Tt(t,e,r,i),u=!1;G.geometry===n.id&&G.program===s.id&&G.wireframe===(!0===r.wireframe)||(G.geometry=n.id,G.program=s.id,G.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(L.update(i,n,r,s),u=!0);var c,l=n.index,f=n.attributes.position,h=1;!0===r.wireframe&&(l=O.getWireframeAttribute(n),h=2);var p=P;null!==l&&(c=E.get(l),p=I,p.setIndex(c)),u&&(yt(r,s,n),null!==l&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,c.buffer));var d=1/0;null!==l?d=l.count:void 0!==f&&(d=f.count);var v=n.drawRange.start*h,m=n.drawRange.count*h,y=null!==o?o.start*h:0,b=null!==o?o.count*h:1/0,x=Math.max(v,y),w=Math.min(d,v+m,y+b)-1,M=Math.max(0,w-x+1);if(0!==M){if(i.isMesh)if(!0===r.wireframe)_.setLineWidth(r.wireframeLinewidth*st()),p.setMode(g.LINES);else switch(i.drawMode){case Ge:p.setMode(g.TRIANGLES);break;case Ve:p.setMode(g.TRIANGLE_STRIP);break;case He:p.setMode(g.TRIANGLE_FAN);break}else if(i.isLine){var S=r.linewidth;void 0===S&&(S=1),_.setLineWidth(S*st()),i.isLineSegments?p.setMode(g.LINES):i.isLineLoop?p.setMode(g.LINE_LOOP):p.setMode(g.LINE_STRIP)}else i.isPoints?p.setMode(g.POINTS):i.isSprite&&p.setMode(g.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&p.renderInstances(n,x,M):p.render(x,M)}},this.compile=function(t,e){v=A.get(t,e),v.init(),t.traverse(function(t){t.isLight&&(v.pushLight(t),t.castShadow&&v.pushShadow(t))}),v.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)St(e.material[n],t.fog,e);else St(e.material,t.fog,e)})};var _t=null;function bt(t){lt.isPresenting()||_t&&_t(t)}var wt=new ki;function Mt(t,e,n,r){if(!1!==t.visible){var i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLight)v.pushLight(t),t.castShadow&&v.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||et.intersectsSprite(t)){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);var o=S.update(t),a=t.material;d.push(t,o,a,n,at.z,null)}}else if(t.isImmediateRenderObject)r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot),d.push(t,null,t.material,n,at.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||et.intersectsObject(t))){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);o=S.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,u=0,c=s.length;u<c;u++){var l=s[u],f=a[l.materialIndex];f&&f.visible&&d.push(t,o,f,n,at.z,l)}else a.visible&&d.push(t,o,a,n,at.z,null)}var h=t.children;for(u=0,c=h.length;u<c;u++)Mt(h[u],e,n,r)}}function Et(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){H=n;for(var f=n.cameras,h=0,p=f.length;h<p;h++){var d=f[h];if(s.layers.test(d.layers)){if("viewport"in d)_.viewport(q.copy(d.viewport));else{var g=d.bounds,m=g.x*Z,y=g.y*K,b=g.z*Z,x=g.w*K;_.viewport(q.set(m,y,b,x).multiplyScalar(J))}v.setupLights(d),Ot(s,e,d,u,c,l)}}}else H=null,Ot(s,e,n,u,c,l)}}function Ot(t,e,n,r,i,o){if(t.onBeforeRender(D,e,n,r,i,o),v=A.get(e,H||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){_.setMaterial(i);var a=Tt(n,e.fog,i,t);G.geometry=null,G.program=null,G.wireframe=!1,mt(t,a)}else D.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(D,e,n,r,i,o),v=A.get(e,H||n)}function St(t,e,n){var r=x.get(t),i=v.state.lights,o=v.state.shadowsArray,a=r.lightsHash,s=i.state.hash,u=T.getParameters(t,i.state,o,e,nt.numPlanes,nt.numIntersection,n),c=T.getProgramCode(t,u),l=r.program,f=!0;if(void 0===l)t.addEventListener("dispose",dt);else if(l.code!==c)gt(t);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,f=!1;else{if(void 0!==u.shaderID)return;f=!1}if(f){if(u.shaderID){var h=Di[u.shaderID];r.shader={name:t.type,uniforms:Pi(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,D),c=T.getProgramCode(t,u),l=T.acquireProgram(t,r.shader,u,c),r.program=l,t.program=l}var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<D.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(d=0;d<D.maxMorphNormals;d++)p["morphNormal"+d]>=0&&t.numSupportedMorphNormals++}var g=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=nt.numPlanes,r.numIntersection=nt.numIntersection,g.clippingPlanes=nt.uniform),r.fog=e,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,t.lights&&(g.ambientLightColor.value=i.state.ambient,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),y=ua.seqWithValue(m.seq,g);r.uniformsList=y}function Tt(t,e,n,r){X=0;var i=x.get(n),a=v.state.lights,s=i.lightsHash,u=a.state.hash;if(rt&&(it||t!==V)){var c=t===V&&n.id===U;nt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,c)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:(!n.lights||s.stateID===u.stateID&&s.directionalLength===u.directionalLength&&s.pointLength===u.pointLength&&s.spotLength===u.spotLength&&s.rectAreaLength===u.rectAreaLength&&s.hemiLength===u.hemiLength&&s.shadowsLength===u.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===nt.numPlanes&&i.numIntersection===nt.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(St(n,e,r),n.needsUpdate=!1);var l=!1,f=!1,h=!1,p=i.program,d=p.getUniforms(),m=i.shader.uniforms;if(_.useProgram(p.program)&&(l=!0,f=!0,h=!0),n.id!==U&&(U=n.id,f=!0),l||V!==t){if(d.setValue(g,"projectionMatrix",t.projectionMatrix),y.logarithmicDepthBuffer&&d.setValue(g,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),V!==t&&(V=t,f=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=d.map.cameraPosition;void 0!==b&&b.setValue(g,at.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&d.setValue(g,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){d.setOptional(g,r,"bindMatrix"),d.setOptional(g,r,"bindMatrixInverse");var w=r.skeleton;if(w){var M=w.bones;if(y.floatVertexTextures){if(void 0===w.boneTexture){var E=Math.sqrt(4*M.length);E=o.ceilPowerOfTwo(E),E=Math.max(E,4);var O=new Float32Array(E*E*4);O.set(w.boneMatrices);var S=new vn(O,E,E,re,Zt);S.needsUpdate=!0,w.boneMatrices=O,w.boneTexture=S,w.boneTextureSize=E}d.setValue(g,"boneTexture",w.boneTexture),d.setValue(g,"boneTextureSize",w.boneTextureSize)}else d.setOptional(g,w,"boneMatrices")}}return f&&(d.setValue(g,"toneMappingExposure",D.toneMappingExposure),d.setValue(g,"toneMappingWhitePoint",D.toneMappingWhitePoint),n.lights&&Ht(m,h),e&&n.fog&&It(m,e),n.isMeshBasicMaterial?jt(m,n):n.isMeshLambertMaterial?(jt(m,n),Rt(m,n)):n.isMeshPhongMaterial?(jt(m,n),n.isMeshToonMaterial?Dt(m,n):Ft(m,n)):n.isMeshStandardMaterial?(jt(m,n),n.isMeshPhysicalMaterial?Nt(m,n):kt(m,n)):n.isMeshMatcapMaterial?(jt(m,n),Bt(m,n)):n.isMeshDepthMaterial?(jt(m,n),zt(m,n)):n.isMeshDistanceMaterial?(jt(m,n),Ut(m,n)):n.isMeshNormalMaterial?(jt(m,n),Gt(m,n)):n.isLineBasicMaterial?(At(m,n),n.isLineDashedMaterial&&Ct(m,n)):n.isPointsMaterial?Lt(m,n):n.isSpriteMaterial?Pt(m,n):n.isShadowMaterial&&(m.color.value=n.color,m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=Fi.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=Fi.LTC_2),ua.upload(g,i.uniformsList,m,D)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ua.upload(g,i.uniformsList,m,D),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&d.setValue(g,"center",r.center),d.setValue(g,"modelViewMatrix",r.modelViewMatrix),d.setValue(g,"normalMatrix",r.normalMatrix),d.setValue(g,"modelMatrix",r.matrixWorld),p}function jt(t,e){var n;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=x.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function At(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function Ct(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function Lt(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*J,t.scale.value=.5*K,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function Pt(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function It(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function Rt(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function Ft(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===R&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===R&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Dt(t,e){Ft(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function kt(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===R&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===R&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function Nt(t,e){kt(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}function Bt(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===R&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===R&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function zt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Ut(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function Gt(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===R&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===R&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Ht(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function qt(){var t=X;return t>=y.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+y.maxTextures),X+=1,t}wt.setAnimationLoop(bt),"undefined"!==typeof window&&wt.setContext(window),this.setAnimationLoop=function(t){_t=t,lt.setAnimationLoop(t),wt.start()},this.render=function(t,e,n,r){if(e&&e.isCamera){if(!k){G.geometry=null,G.program=null,G.wireframe=!1,U=-1,V=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),lt.enabled&&(e=lt.getCamera(e)),v=A.get(t,e),v.init(),t.onBeforeRender(D,t,e,n),ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),et.setFromMatrix(ot),it=this.localClippingEnabled,rt=nt.init(this.clippingPlanes,it,e),d=j.get(t,e),d.init(),Mt(t,e,0,D.sortObjects),!0===D.sortObjects&&d.sort(),rt&&nt.beginShadows();var i=v.state.shadowsArray;ft.render(i,t,e),v.setupLights(e),rt&&nt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),C.render(d,t,e,r);var o=d.opaque,a=d.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&Et(o,t,e,s),a.length&&Et(a,t,e,s)}else o.length&&Et(o,t,e),a.length&&Et(a,t,e);n&&(M.updateRenderTargetMipmap(n),M.updateMultisampleRenderTarget(n)),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),t.onAfterRender(D,t,e),lt.enabled&&lt.submitFrame(),d=null,v=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=qt,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),M.setTexture2D(e,n)}}(),this.setTexture3D=function(){return function(t,e){M.setTexture3D(t,e)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),M.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?M.setTextureCube(e,n):M.setTextureCubeDynamic(e,n)}}(),this.setFramebuffer=function(t){N=t},this.getRenderTarget=function(){return B},this.setRenderTarget=function(t){B=t,t&&void 0===x.get(t).__webglFramebuffer&&M.setupRenderTarget(t);var e=N,n=!1;if(t){var r=x.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=r[t.activeCubeFace],n=!0):e=t.isWebGLMultisampleRenderTarget?x.get(t).__webglMultisampledFramebuffer:r,q.copy(t.viewport),W.copy(t.scissor),Y=t.scissorTest}else q.copy(Q).multiplyScalar(J),W.copy($).multiplyScalar(J),Y=tt;if(z!==e&&(g.bindFramebuffer(g.FRAMEBUFFER,e),z=e),_.viewport(q),_.scissor(W),_.setScissorTest(Y),n){var i=x.get(t.texture);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(t&&t.isWebGLRenderTarget){var a=x.get(t).__webglFramebuffer;if(a){var s=!1;a!==z&&(g.bindFramebuffer(g.FRAMEBUFFER,a),s=!0);try{var u=t.texture,c=u.format,l=u.type;if(c!==re&&F.convert(c)!==g.getParameter(g.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(l!==Vt&&F.convert(l)!==g.getParameter(g.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==Zt||!(y.isWebGL2||m.get("OES_texture_float")||m.get("WEBGL_color_buffer_float")))&&(l!==Kt||(y.isWebGL2?!m.get("EXT_color_buffer_float"):!m.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");g.checkFramebufferStatus(g.FRAMEBUFFER)===g.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&g.readPixels(e,n,r,i,F.convert(c),F.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&g.bindFramebuffer(g.FRAMEBUFFER,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=F.convert(e.format);this.setTexture2D(e,0),g.copyTexImage2D(g.TEXTURE_2D,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=F.convert(n.format),s=F.convert(n.type);this.setTexture2D(n,0),e.isDataTexture?g.texSubImage2D(g.TEXTURE_2D,r||0,t.x,t.y,i,o,a,s,e.image.data):g.texSubImage2D(g.TEXTURE_2D,r||0,t.x,t.y,a,s,e.image)}}function $a(t,e,n,r,i,o,a,s,u){dn.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function ts(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function es(t){Ji.call(this),this.type="PointsMaterial",this.color=new f(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ns(t,e){ln.call(this),this.type="Points",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new es({color:16777215*Math.random()})}function rs(t){Ji.call(this),this.type="LineBasicMaterial",this.color=new f(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function is(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ln.call(this),this.type="Line",this.geometry=void 0!==t?t:new qi,this.material=void 0!==e?e:new rs({color:16777215*Math.random()})}function os(t,e){is.call(this,t,e),this.type="LineSegments"}function as(t,e,n,r,i,o){Ha.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ss(){qi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function us(t,e,n,r){this.ray=new $i(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function cs(t,e){return t.distance-e.distance}function ls(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)ls(i[o],e,n,!0)}function fs(t,e,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),h.call(this,t,e,n),this.meshPerAttribute=r||1}function hs(t,e,n){Array.isArray(t)&&(t=new Float32Array(t)),h.call(this,t,e,n)}$a.prototype=Object.create(dn.prototype),$a.prototype.constructor=$a,$a.prototype.isCanvasTexture=!0,Object.assign(ts.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),es.prototype=Object.create(Ji.prototype),es.prototype.constructor=es,es.prototype.isPointsMaterial=!0,es.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},ns.prototype=Object.assign(Object.create(ln.prototype),{constructor:ns,isPoints:!0,raycast:function(){var t=new a,e=new $i,n=new mn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=l*l,h=new u,p=new u;if(a.isBufferGeometry){var d=a.index,v=a.attributes,g=v.position.array;if(null!==d)for(var m=d.array,y=0,_=m.length;y<_;y++){var b=m[y];h.fromArray(g,3*b),M(h,b)}else{y=0;for(var x=g.length/3;y<x;y++)h.fromArray(g,3*y),M(h,y)}}else{var w=a.vertices;for(y=0,x=w.length;y<x;y++)M(w[y],y)}}function M(t,n){var a=e.distanceSqToPoint(t);if(a<f){e.closestPointToPoint(t,p),p.applyMatrix4(s);var u=r.ray.origin.distanceTo(p);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:p.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),rs.prototype=Object.create(Ji.prototype),rs.prototype.constructor=rs,rs.prototype.isLineBasicMaterial=!0,rs.prototype.copy=function(t){return Ji.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},is.prototype=Object.assign(Object.create(ln.prototype),{constructor:is,isLine:!0,computeLineDistances:function(){var t=new u,e=new u;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)t.fromBufferAttribute(r,o-1),e.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new b(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;i=n.lineDistances;i[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var t=new a,e=new $i,n=new mn;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,f=new u,h=new u,p=new u,d=new u,v=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var g=a.index,m=a.attributes,y=m.position.array;if(null!==g)for(var _=g.array,b=0,x=_.length-1;b<x;b+=v){var w=_[b],M=_[b+1];f.fromArray(y,3*w),h.fromArray(y,3*M);var E=e.distanceSqToSegment(f,h,d,p);if(!(E>l)){d.applyMatrix4(this.matrixWorld);var O=r.ray.origin.distanceTo(d);O<r.near||O>r.far||i.push({distance:O,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(b=0,x=y.length/3-1;b<x;b+=v){f.fromArray(y,3*b),h.fromArray(y,3*b+3);E=e.distanceSqToSegment(f,h,d,p);if(!(E>l)){d.applyMatrix4(this.matrixWorld);O=r.ray.origin.distanceTo(d);O<r.near||O>r.far||i.push({distance:O,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry){var S=a.vertices,T=S.length;for(b=0;b<T-1;b+=v){E=e.distanceSqToSegment(S[b],S[b+1],d,p);if(!(E>l)){d.applyMatrix4(this.matrixWorld);O=r.ray.origin.distanceTo(d);O<r.near||O>r.far||i.push({distance:O,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}}(),copy:function(t){return ln.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),os.prototype=Object.assign(Object.create(is.prototype),{constructor:os,isLineSegments:!0,computeLineDistances:function(){var t=new u,e=new u;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new b(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e)}return this}}()}),as.prototype=Object.assign(Object.create(Ha.prototype),{constructor:as,isOrthographicCamera:!0,copy:function(t,e){return Ha.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),a-=f*(this.view.offsetY/c),s=a-f*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),ss.prototype=Object.assign(Object.create(qi.prototype),{constructor:ss,isInstancedBufferGeometry:!0,copy:function(t){return qi.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.assign(us.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return ls(t,this,r,e),r.sort(cs),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)ls(t[i],this,r,e);return r.sort(cs),r}}),fs.prototype=Object.assign(Object.create(h.prototype),{constructor:fs,isInstancedBufferAttribute:!0,copy:function(t){return h.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),hs.prototype=Object.create(h.prototype),hs.prototype.constructor=hs;var ps=Object.freeze({__proto__:null,Float32BufferAttribute:hs,Scene:fn,WebGLRenderer:Qa,CanvasTexture:$a,Object3D:ln,Group:Va,Clock:ts,Points:ns,LineSegments:os,Mesh:no,Texture:dn,WebGLRenderTarget:Da,PerspectiveCamera:qa,OrthographicCamera:as,BufferGeometry:qi,InstancedBufferGeometry:ss,PlaneBufferGeometry:Zi,BoxBufferGeometry:Yi,Raycaster:us,UniformsUtils:Ri,Matrix4:a,Matrix3:sn,Line:is,Vector4:i,Vector3:u,Vector2:c,ShaderMaterial:Qi,DataTexture:vn,Color:f,Float64BufferAttribute:x,Uint32BufferAttribute:_,Int32BufferAttribute:y,Uint16BufferAttribute:m,Int16BufferAttribute:g,Uint8ClampedBufferAttribute:v,Uint8BufferAttribute:d,Int8BufferAttribute:p,BufferAttribute:h,InstancedBufferAttribute:fs,REVISION:w,MOUSE:M,CullFaceNone:E,CullFaceBack:O,CullFaceFront:S,CullFaceFrontBack:T,FrontFaceDirectionCW:j,FrontFaceDirectionCCW:A,BasicShadowMap:C,PCFShadowMap:L,PCFSoftShadowMap:P,FrontSide:I,BackSide:R,DoubleSide:F,FlatShading:D,SmoothShading:k,NoColors:N,FaceColors:B,VertexColors:z,NoBlending:U,NormalBlending:G,AdditiveBlending:V,SubtractiveBlending:H,MultiplyBlending:q,CustomBlending:W,AddEquation:Y,SubtractEquation:X,ReverseSubtractEquation:Z,MinEquation:K,MaxEquation:J,ZeroFactor:Q,OneFactor:$,SrcColorFactor:tt,OneMinusSrcColorFactor:et,SrcAlphaFactor:nt,OneMinusSrcAlphaFactor:rt,DstAlphaFactor:it,OneMinusDstAlphaFactor:ot,DstColorFactor:at,OneMinusDstColorFactor:st,SrcAlphaSaturateFactor:ut,NeverDepth:ct,AlwaysDepth:lt,LessDepth:ft,LessEqualDepth:ht,EqualDepth:pt,GreaterEqualDepth:dt,GreaterDepth:vt,NotEqualDepth:gt,MultiplyOperation:mt,MixOperation:yt,AddOperation:_t,NoToneMapping:bt,LinearToneMapping:xt,ReinhardToneMapping:wt,Uncharted2ToneMapping:Mt,CineonToneMapping:Et,ACESFilmicToneMapping:Ot,UVMapping:St,CubeReflectionMapping:Tt,CubeRefractionMapping:jt,EquirectangularReflectionMapping:At,EquirectangularRefractionMapping:Ct,SphericalReflectionMapping:Lt,CubeUVReflectionMapping:Pt,CubeUVRefractionMapping:It,RepeatWrapping:Rt,ClampToEdgeWrapping:Ft,MirroredRepeatWrapping:Dt,NearestFilter:kt,NearestMipMapNearestFilter:Nt,NearestMipMapLinearFilter:Bt,LinearFilter:zt,LinearMipMapNearestFilter:Ut,LinearMipMapLinearFilter:Gt,UnsignedByteType:Vt,ByteType:Ht,ShortType:qt,UnsignedShortType:Wt,IntType:Yt,UnsignedIntType:Xt,FloatType:Zt,HalfFloatType:Kt,UnsignedShort4444Type:Jt,UnsignedShort5551Type:Qt,UnsignedShort565Type:$t,UnsignedInt248Type:te,AlphaFormat:ee,RGBFormat:ne,RGBAFormat:re,LuminanceFormat:ie,LuminanceAlphaFormat:oe,RGBEFormat:ae,DepthFormat:se,DepthStencilFormat:ue,RedFormat:ce,RGB_S3TC_DXT1_Format:le,RGBA_S3TC_DXT1_Format:fe,RGBA_S3TC_DXT3_Format:he,RGBA_S3TC_DXT5_Format:pe,RGB_PVRTC_4BPPV1_Format:de,RGB_PVRTC_2BPPV1_Format:ve,RGBA_PVRTC_4BPPV1_Format:ge,RGBA_PVRTC_2BPPV1_Format:me,RGB_ETC1_Format:ye,RGBA_ASTC_4x4_Format:_e,RGBA_ASTC_5x4_Format:be,RGBA_ASTC_5x5_Format:xe,RGBA_ASTC_6x5_Format:we,RGBA_ASTC_6x6_Format:Me,RGBA_ASTC_8x5_Format:Ee,RGBA_ASTC_8x6_Format:Oe,RGBA_ASTC_8x8_Format:Se,RGBA_ASTC_10x5_Format:Te,RGBA_ASTC_10x6_Format:je,RGBA_ASTC_10x8_Format:Ae,RGBA_ASTC_10x10_Format:Ce,RGBA_ASTC_12x10_Format:Le,RGBA_ASTC_12x12_Format:Pe,LoopOnce:Ie,LoopRepeat:Re,LoopPingPong:Fe,InterpolateDiscrete:De,InterpolateLinear:ke,InterpolateSmooth:Ne,ZeroCurvatureEnding:Be,ZeroSlopeEnding:ze,WrapAroundEnding:Ue,TrianglesDrawMode:Ge,TriangleStripDrawMode:Ve,TriangleFanDrawMode:He,LinearEncoding:qe,sRGBEncoding:We,GammaEncoding:Ye,RGBEEncoding:Xe,LogLuvEncoding:Ze,RGBM7Encoding:Ke,RGBM16Encoding:Je,RGBDEncoding:Qe,BasicDepthPacking:$e,RGBADepthPacking:tn,TangentSpaceNormalMap:en,ObjectSpaceNormalMap:nn}),ds=n(function(t,e){e.__esModule=!0;var n=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)};e["default"]=n});e(ds);var vs=n(function(t,e){e.__esModule=!0;var n=function(t,e){return!!ds["default"](t)&&t.indexOf(e)>-1};e["default"]=n});e(vs);var gs=n(function(t,e){e.__esModule=!0;var n={}.toString,r=function(t,e){return n.call(t)==="[object "+e+"]"};e["default"]=r});e(gs);var ms=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return Array.isArray?Array.isArray(t):gs["default"](t,"Array")}});e(ms);var ys=n(function(t,e){e.__esModule=!0,e["default"]=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}});e(ys);var _s=n(function(t,e){function n(t,e){var n;if(t)if(ms["default"](t)){for(var r=0,i=t.length;r<i;r++)if(n=e(t[r],r),!1===n)break}else if(ys["default"](t))for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),!1===n))break}e.__esModule=!0,e["default"]=n});e(_s);var bs=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(!ds["default"](t))return t;var n=[];return _s["default"](t,function(t,r){e(t,r)&&n.push(t)}),n};e["default"]=n});e(bs);var xs=n(function(t,e){e.__esModule=!0;var n=function(t,e){return void 0===e&&(e=[]),bs["default"](t,function(t){return!vs["default"](e,t)})};e["default"]=n});e(xs);var ws=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return gs["default"](t,"Function")}});e(ws);var Ms=n(function(t,e){e.__esModule=!0;var n=function(t){return null===t||void 0===t};e["default"]=n});e(Ms);var Es=n(function(t,e){e.__esModule=!0;var n=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return _s["default"](t,function(n,r){ws["default"](t)&&"prototype"===r||e.push(r)}),e};e["default"]=n});e(Es);var Os=n(function(t,e){function n(t,e){var n=Es["default"](e),r=n.length;if(Ms["default"](t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}e.__esModule=!0,e["default"]=n});e(Os);var Ss=n(function(t,e){e.__esModule=!0;var n=function(t){return"object"===typeof t&&null!==t};e["default"]=n});e(Ss);var Ts=n(function(t,e){e.__esModule=!0;var n=function(t){if(!Ss["default"](t)||!gs["default"](t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};e["default"]=n});e(Ts);var js=n(function(t,e){function n(t,e){if(!ms["default"](t))return null;var n;if(ws["default"](e)&&(n=e),Ts["default"](e)&&(n=function(t){return Os["default"](t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}e.__esModule=!0,e["default"]=n});e(js);var As=n(function(t,e){function n(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}e.__esModule=!0,e["default"]=n});e(As);var Cs=n(function(t,e){e.__esModule=!0;var n=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i[e];if(!Ms["default"](o)){n=ms["default"](o)?o[0]:o;break}}return n};e["default"]=n});e(Cs);var Ls=n(function(t,e){e.__esModule=!0;var n=function(t){if(!ms["default"](t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};e["default"]=n}),Ps=e(Ls),Is=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(void 0===e&&(e=[]),ms["default"](t))for(var r=0;r<t.length;r+=1)n(t[r],e);else e.push(t);return e};e["default"]=n});e(Is);var Rs=n(function(t,e){e.__esModule=!0;var n=function(t){if(t=bs["default"](t,function(t){return!isNaN(t)}),!t.length)return{min:0,max:0};if(ms["default"](t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var r=Math.max.apply(null,t),i=Math.min.apply(null,t);return{min:i,max:r}};e["default"]=n});e(Rs);var Fs=n(function(t,e){e.__esModule=!0;var n=Array.prototype,r=n.splice,i=n.indexOf,o=function(t){for(var e=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=e[o];for(var a=0;a<n.length;a++){var s=n[a],u=-1;while((u=i.call(t,s))>-1)r.call(t,u,1)}return t};e["default"]=o});e(Fs);var Ds=n(function(t,e){e.__esModule=!0;var n=Array.prototype.splice,r=function(t,e){if(!ds["default"](t))return[];var r=t?e.length:0,i=r-1;while(r--){var o=void 0,a=e[r];r!==i&&a===o||(o=a,n.call(t,a,1))}return t};e["default"]=r});e(Ds);var ks=n(function(t,e){e.__esModule=!0;var n=function(t,e,n){if(!ms["default"](t)&&!Ts["default"](t))return t;var r=n;return _s["default"](t,function(t,n){r=e(r,t,n)}),r};e["default"]=n});e(ks);var Ns=n(function(t,e){e.__esModule=!0;var n=function(t,e){var n=[];if(!ds["default"](t))return n;var r=-1,i=[],o=t.length;while(++r<o){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Ds["default"](t,i),n};e["default"]=n});e(Ns);var Bs=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return gs["default"](t,"String")}}),zs=e(Bs),Us=n(function(t,e){function n(t,e){var n;if(ws["default"](e))n=function(t,n){return e(t)-e(n)};else{var r=[];Bs["default"](e)?r.push(e):ms["default"](e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}e.__esModule=!0,e["default"]=n});e(Us);var Gs=n(function(t,e){e.__esModule=!0;var n=function(t){var e=[];return _s["default"](t,function(t){vs["default"](e,t)||e.push(t)}),e};e["default"]=n}),Vs=e(Gs),Hs=n(function(t,e){e.__esModule=!0;var n=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return Gs["default"]([].concat.apply([],e))};e["default"]=n});e(Hs);var qs=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){var n=[],r={};return t.forEach(function(t){var i=t[e];Ms["default"](i)||(ms["default"](i)||(i=[i]),_s["default"](i,function(t){r[t]||(n.push(t),r[t]=!0)}))}),n}});e(qs);var Ws=n(function(t,e){function n(t){if(ds["default"](t))return t[0]}e.__esModule=!0,e["default"]=n});e(Ws);var Ys=n(function(t,e){function n(t){if(ds["default"](t)){var e=t;return e[e.length-1]}}e.__esModule=!0,e["default"]=n});e(Ys);var Xs=n(function(t,e){function n(t,e){return!(!ms["default"](t)&&!Bs["default"](t))&&t[0]===e}e.__esModule=!0,e["default"]=n});e(Xs);var Zs=n(function(t,e){function n(t,e){return!(!ms["default"](t)&&!Bs["default"](t))&&t[t.length-1]===e}e.__esModule=!0,e["default"]=n});e(Zs);var Ks=n(function(t,e){e.__esModule=!0;var n=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};e["default"]=n});e(Ks);var Js=n(function(t,e){e.__esModule=!0;var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};e["default"]=n});e(Js);var Qs=n(function(t,e){e.__esModule=!0;var n=Object.prototype.hasOwnProperty;function r(t,e){if(!e||!ms["default"](t))return{};var r,i={},o=ws["default"](e)?e:function(t){return t[e]};return _s["default"](t,function(t){r=o(t),n.call(i,r)?i[r].push(t):i[r]=[t]}),i}e["default"]=r});e(Qs);var $s=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(!e)return{0:t};if(!ws["default"](e)){var n=ms["default"](e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}var r=Qs["default"](t,e);return r};e["default"]=n});e($s);var tu=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){if(!e)return[t];var n=$s["default"](t,e),r=[];for(var i in n)r.push(n[i]);return r}});e(tu);var eu=n(function(t,e){function n(t,e){return t["_wrap_"+e]}e.__esModule=!0,e["default"]=n});e(eu);var nu=n(function(t,e){function n(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}e.__esModule=!0,e["default"]=n});e(nu);var ru=n(function(t,e){e.__esModule=!0;var n={};function r(t){var e=n[t];if(!e){for(var r=t.toString(16),i=r.length;i<6;i++)r="0"+r;e="#"+r,n[t]=e}return e}e["default"]=r});e(ru);var iu=n(function(t,e){function n(t){var e=0,n=0,r=0,i=0;return ms["default"](t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}e.__esModule=!0,e["default"]=n});e(iu);var ou=n(function(t,e){e.__esModule=!0;var n=function(t,e,n){return t<e?e:t>n?n:t};e["default"]=n});e(ou);var au=n(function(t,e){e.__esModule=!0;var n=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};e["default"]=n});e(au);var su=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"Number")};e["default"]=n});e(su);var uu=n(function(t,e){e.__esModule=!0;var n=function(t){return su["default"](t)&&t%1!==0};e["default"]=n});e(uu);var cu=n(function(t,e){e.__esModule=!0;var n=function(t){return su["default"](t)&&t%2===0};e["default"]=n});e(cu);var lu=n(function(t,e){e.__esModule=!0;var n=Number.isInteger?Number.isInteger:function(t){return su["default"](t)&&t%1===0};e["default"]=n});e(lu);var fu=n(function(t,e){e.__esModule=!0;var n=function(t){return su["default"](t)&&t<0};e["default"]=n});e(fu);var hu=n(function(t,e){e.__esModule=!0;var n=1e-5;function r(t,e,r){return void 0===r&&(r=n),Math.abs(t-e)<r}e["default"]=r});e(hu);var pu=n(function(t,e){e.__esModule=!0;var n=function(t){return su["default"](t)&&t%2!==0};e["default"]=n});e(pu);var du=n(function(t,e){e.__esModule=!0;var n=function(t){return su["default"](t)&&t>0};e["default"]=n});e(du);var vu=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){if(ms["default"](t)){var n,r,i=t[0];return n=ws["default"](e)?e(t[0]):t[0][e],_s["default"](t,function(t){r=ws["default"](e)?e(t):t[e],r>n&&(i=t,n=r)}),i}}});e(vu);var gu=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){if(ms["default"](t)){var n,r,i=t[0];return n=ws["default"](e)?e(t[0]):t[0][e],_s["default"](t,function(t){r=ws["default"](e)?e(t):t[e],r<n&&(i=t,n=r)}),i}}});e(gu);var mu=n(function(t,e){e.__esModule=!0;var n=function(t,e){return(t%e+e)%e};e["default"]=n});e(mu);var yu=n(function(t,e){e.__esModule=!0;var n=180/Math.PI,r=function(t){return n*t};e["default"]=r});e(yu);var _u=n(function(t,e){e.__esModule=!0,e["default"]=parseInt});e(_u);var bu=n(function(t,e){e.__esModule=!0;var n=Math.PI/180,r=function(t){return n*t};e["default"]=r});e(bu);var xu=n(function(t,e){e.__esModule=!0,e["default"]=_s["default"]});e(xu);var wu=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){return t.hasOwnProperty(e)}});e(wu);var Mu=n(function(t,e){e.__esModule=!0,e["default"]=wu["default"]});e(Mu);var Eu=n(function(t,e){e.__esModule=!0;var n=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return _s["default"](t,function(n,r){ws["default"](t)&&"prototype"===r||e.push(n)}),e};e["default"]=n});e(Eu);var Ou=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){return vs["default"](Eu["default"](t),e)}});e(Ou);var Su=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return Ms["default"](t)?"":t.toString()}});e(Su);var Tu=n(function(t,e){e.__esModule=!0;var n=function(t){return Su["default"](t).toLowerCase()};e["default"]=n});e(Tu);var ju=n(function(t,e){e.__esModule=!0;var n=function(t){var e=Su["default"](t);return e.charAt(0).toLowerCase()+e.substring(1)};e["default"]=n});e(ju);var Au=n(function(t,e){function n(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}e.__esModule=!0,e["default"]=n});e(Au);var Cu=n(function(t,e){e.__esModule=!0;var n=function(t){return Su["default"](t).toUpperCase()};e["default"]=n});e(Cu);var Lu=n(function(t,e){e.__esModule=!0;var n=function(t){var e=Su["default"](t);return e.charAt(0).toUpperCase()+e.substring(1)};e["default"]=n});e(Lu);var Pu=n(function(t,e){e.__esModule=!0;var n={}.toString,r=function(t){return n.call(t).replace(/^\[object /,"").replace(/]$/,"")};e["default"]=r});e(Pu);var Iu=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"Arguments")};e["default"]=n});e(Iu);var Ru=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"Boolean")};e["default"]=n});e(Ru);var Fu=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"Date")};e["default"]=n});e(Fu);var Du=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"Error")};e["default"]=n});e(Du);var ku=n(function(t,e){function n(t){return su["default"](t)&&isFinite(t)}e.__esModule=!0,e["default"]=n});e(ku);var Nu=n(function(t,e){e.__esModule=!0;var n=function(t){return null===t};e["default"]=n});e(Nu);var Bu=n(function(t,e){e.__esModule=!0;var n=Object.prototype,r=function(t){var e=t&&t.constructor,r="function"===typeof e&&e.prototype||n;return t===r};e["default"]=r});e(Bu);var zu=n(function(t,e){e.__esModule=!0;var n=function(t){return gs["default"](t,"RegExp")};e["default"]=n});e(zu);var Uu=n(function(t,e){e.__esModule=!0;var n=function(t){return void 0===t};e["default"]=n});e(Uu);var Gu=n(function(t,e){e.__esModule=!0;var n=function(t){return t instanceof Element||t instanceof HTMLDocument};e["default"]=n});e(Gu);var Vu=n(function(t,e){function n(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)}e.__esModule=!0,e["default"]=n});e(Vu);var Hu=n(function(t,e){function n(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}e.__esModule=!0,e["default"]=n});e(Hu);var qu=n(function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function r(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}e.__esModule=!0,e["default"]=r});e(qu);var Wu=n(function(t,e){e.__esModule=!0;var n=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];for(var r=e[0],i=1;i<e.length;i++){var o=e[i];ws["default"](o)&&(o=o.prototype),qu["default"](r.prototype,o)}};e["default"]=n});e(Wu);var Yu=n(function(t,e){e.__esModule=!0;var n=function(t){if("object"!==typeof t||null===t)return t;var e;if(ms["default"](t)){e=[];for(var r=0,i=t.length;r<i;r++)"object"===typeof t[r]&&null!=t[r]?e[r]=n(t[r]):e[r]=t[r]}else for(var o in e={},t)"object"===typeof t[o]&&null!=t[o]?e[o]=n(t[o]):e[o]=t[o];return e};e["default"]=n});e(Yu);var Xu=n(function(t,e){function n(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}e.__esModule=!0,e["default"]=n});e(Xu);var Zu=n(function(t,e){e.__esModule=!0;var n=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype["delete"]=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e["default"]=n});e(Zu);var Ku=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e){if(!ws["default"](t))throw new TypeError("Expected a function");var n=function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];var a=e?e.apply(this,i):i[0],s=n.cache;if(s.has(a))return s.get(a);var u=t.apply(this,i);return s.set(a,u),u};return n.cache=new Zu["default"],n}});e(Ku);var Ju=n(function(t,e){e.__esModule=!0;var n=5;function r(t,e,i,o){for(var a in i=i||0,o=o||n,e)if(e.hasOwnProperty(a)){var s=e[a];null!==s&&Ts["default"](s)?(Ts["default"](t[a])||(t[a]={}),i<o?r(t[a],s,i+1,o):t[a]=e[a]):ms["default"](s)?(t[a]=[],t[a]=t[a].concat(s)):void 0!==s&&(t[a]=s)}}var i=function(t){for(var e=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=e[i];for(var o=0;o<n.length;o+=1)r(t,n[o]);return t};e["default"]=i}),Qu=e(Ju),$u=n(function(t,e){e.__esModule=!0;var n=function(t,e,n,r){ws["default"](e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=qu["default"](o,t.prototype),t.superclass=i(e.prototype,e),qu["default"](o,n),qu["default"](t,r),t};e["default"]=n});e($u);var tc=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(!ds["default"](t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r};e["default"]=n});e(tc);var ec=n(function(t,e){e.__esModule=!0;var n=Object.prototype.hasOwnProperty;function r(t){if(Ms["default"](t))return!0;if(ds["default"](t))return!t.length;var e=Pu["default"](t);if("Map"===e||"Set"===e)return!t.size;if(Bu["default"](t))return!Object.keys(t).length;for(var r in t)if(n.call(t,r))return!1;return!0}e["default"]=r});e(ec);var nc=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Bs["default"](t)||Bs["default"](e))return!1;if(ds["default"](t)||ds["default"](e)){if(t.length!==e.length)return!1;for(var r=!0,i=0;i<t.length;i++)if(r=n(t[i],e[i]),!r)break;return r}if(Ss["default"](t)||Ss["default"](e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(r=!0,i=0;i<o.length;i++)if(r=n(t[o[i]],e[o[i]]),!r)break;return r}return!1};e["default"]=n});e(nc);var rc=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e,n){return ws["default"](n)?!!n(t,e):nc["default"](t,e)}});e(rc);var ic=n(function(t,e){e.__esModule=!0;var n=function(t,e){if(!ds["default"](t))return t;var n=[];return _s["default"](t,function(t,r){n.push(e(t,r))}),n};e["default"]=n});e(ic);var oc=n(function(t,e){e.__esModule=!0;var n=function(t){return t};e["default"]=function(t,e){void 0===e&&(e=n);var r={};return ys["default"](t)&&!Ms["default"](t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r}});e(oc);var ac=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e,n){var r=0,i=Bs["default"](e)?e.split("."):e;while(t&&r<i.length)t=t[i[r++]];return void 0===t||r<i.length?n:t}});e(ac);var sc=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e,n){var r=t,i=Bs["default"](e)?e.split("."):e;return i.forEach(function(t,e){e<i.length-1?(ys["default"](r[t])||(r[t]=su["default"](i[e+1])?[]:{}),r=r[t]):r[t]=n}),t}});e(sc);var uc=n(function(t,e){e.__esModule=!0;var n=Object.prototype.hasOwnProperty;e["default"]=function(t,e){if(null===t||!Ts["default"](t))return{};var r={};return _s["default"](e,function(e){n.call(t,e)&&(r[e]=t[e])}),r}});e(uc);var cc=n(function(t,e){e.__esModule=!0,e["default"]=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c}});e(cc);var lc=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return ds["default"](t)?Array.prototype.slice.call(t):[]}});e(lc);var fc=n(function(t,e){e.__esModule=!0;var n={};e["default"]=function(t){return t=t||"g",n[t]?n[t]+=1:n[t]=1,t+n[t]}});e(fc);var hc=n(function(t,e){e.__esModule=!0,e["default"]=function(){}});e(hc);var pc=n(function(t,e){e.__esModule=!0,e["default"]=function(t){return t}});e(pc);var dc=n(function(t,e){function n(t){return Ms["default"](t)?0:ds["default"](t)?t.length:Object.keys(t).length}e.__esModule=!0,e["default"]=n});e(dc);var vc=n(function(t,e){e.__esModule=!0,e.contains=vs["default"],e.includes=vs["default"],e.difference=xs["default"],e.find=js["default"],e.findIndex=As["default"],e.firstValue=Cs["default"],e.flatten=Ls["default"],e.flattenDeep=Is["default"],e.getRange=Rs["default"],e.pull=Fs["default"],e.pullAt=Ds["default"],e.reduce=ks["default"],e.remove=Ns["default"],e.sortBy=Us["default"],e.union=Hs["default"],e.uniq=Gs["default"],e.valuesOfKey=qs["default"],e.head=Ws["default"],e.last=Ys["default"],e.startsWith=Xs["default"],e.endsWith=Zs["default"],e.filter=bs["default"],e.every=Ks["default"],e.some=Js["default"],e.group=tu["default"],e.groupBy=Qs["default"],e.groupToMap=$s["default"],e.getWrapBehavior=eu["default"],e.wrapBehavior=nu["default"],e.number2color=ru["default"],e.parseRadius=iu["default"],e.clamp=ou["default"],e.fixedBase=au["default"],e.isDecimal=uu["default"],e.isEven=cu["default"],e.isInteger=lu["default"],e.isNegative=fu["default"],e.isNumberEqual=hu["default"],e.isOdd=pu["default"],e.isPositive=du["default"],e.maxBy=vu["default"],e.minBy=gu["default"],e.mod=mu["default"],e.toDegree=yu["default"],e.toInteger=_u["default"],e.toRadian=bu["default"],e.forIn=xu["default"],e.has=wu["default"],e.hasKey=Mu["default"],e.hasValue=Ou["default"],e.keys=Es["default"],e.isMatch=Os["default"],e.values=Eu["default"],e.lowerCase=Tu["default"],e.lowerFirst=ju["default"],e.substitute=Au["default"],e.upperCase=Cu["default"],e.upperFirst=Lu["default"],e.getType=Pu["default"],e.isArguments=Iu["default"],e.isArray=ms["default"],e.isArrayLike=ds["default"],e.isBoolean=Ru["default"],e.isDate=Fu["default"],e.isError=Du["default"],e.isFunction=ws["default"],e.isFinite=ku["default"],e.isNil=Ms["default"],e.isNull=Nu["default"],e.isNumber=su["default"],e.isObject=ys["default"],e.isObjectLike=Ss["default"],e.isPlainObject=Ts["default"],e.isPrototype=Bu["default"],e.isRegExp=zu["default"],e.isString=Bs["default"],e.isType=gs["default"],e.isUndefined=Uu["default"],e.isElement=Gu["default"],e.requestAnimationFrame=Vu["default"],e.clearAnimationFrame=Hu["default"],e.augment=Wu["default"],e.clone=Yu["default"],e.debounce=Xu["default"],e.memoize=Ku["default"],e.deepMix=Ju["default"],e.each=_s["default"],e.extend=$u["default"],e.indexOf=tc["default"],e.isEmpty=ec["default"],e.isEqual=nc["default"],e.isEqualWith=rc["default"],e.map=ic["default"],e.mapValues=oc["default"],e.mix=qu["default"],e.assign=qu["default"],e.get=ac["default"],e.set=sc["default"],e.pick=uc["default"],e.throttle=cc["default"],e.toArray=lc["default"],e.toString=Su["default"],e.uniqueId=fc["default"],e.noop=hc["default"],e.identity=pc["default"],e.size=dc["default"],e.Cache=Zu["default"]}),gc=e(vc),mc=vc.contains,yc=vc.includes,_c=vc.difference,bc=vc.find,xc=vc.findIndex,wc=vc.firstValue,Mc=vc.flatten,Ec=vc.flattenDeep,Oc=vc.getRange,Sc=vc.pull,Tc=vc.pullAt,jc=vc.reduce,Ac=vc.remove,Cc=vc.sortBy,Lc=vc.union,Pc=vc.uniq,Ic=vc.valuesOfKey,Rc=vc.head,Fc=vc.last,Dc=vc.startsWith,kc=vc.endsWith,Nc=vc.filter,Bc=vc.every,zc=vc.some,Uc=vc.group,Gc=vc.groupBy,Vc=vc.groupToMap,Hc=vc.getWrapBehavior,qc=vc.wrapBehavior,Wc=vc.number2color,Yc=vc.parseRadius,Xc=vc.clamp,Zc=vc.fixedBase,Kc=vc.isDecimal,Jc=vc.isEven,Qc=vc.isInteger,$c=vc.isNegative,tl=vc.isNumberEqual,el=vc.isOdd,nl=vc.isPositive,rl=vc.maxBy,il=vc.minBy,ol=vc.mod,al=vc.toDegree,sl=vc.toInteger,ul=vc.toRadian,cl=vc.forIn,ll=vc.has,fl=vc.hasKey,hl=vc.hasValue,pl=vc.keys,dl=vc.isMatch,vl=vc.values,gl=vc.lowerCase,ml=vc.lowerFirst,yl=vc.substitute,_l=vc.upperCase,bl=vc.upperFirst,xl=vc.getType,wl=vc.isArguments,Ml=vc.isArray,El=vc.isArrayLike,Ol=vc.isBoolean,Sl=vc.isDate,Tl=vc.isError,jl=vc.isFunction,Al=vc.isFinite,Cl=vc.isNil,Ll=vc.isNull,Pl=vc.isNumber,Il=vc.isObject,Rl=vc.isObjectLike,Fl=vc.isPlainObject,Dl=vc.isPrototype,kl=vc.isRegExp,Nl=vc.isString,Bl=vc.isType,zl=vc.isUndefined,Ul=vc.isElement,Gl=vc.requestAnimationFrame,Vl=vc.clearAnimationFrame,Hl=vc.augment,ql=vc.clone,Wl=vc.debounce,Yl=vc.memoize,Xl=vc.deepMix,Zl=vc.each,Kl=vc.extend,Jl=vc.indexOf,Ql=vc.isEmpty,$l=vc.isEqual,tf=vc.isEqualWith,ef=vc.map,nf=vc.mapValues,rf=vc.mix,of=vc.assign,af=vc.get,sf=vc.set,uf=vc.pick,cf=vc.throttle,lf=vc.toArray,ff=vc.uniqueId,hf=vc.noop,pf=vc.identity,df=vc.size,vf=vc.Cache,gf=Object.freeze({__proto__:null,default:gc,__moduleExports:vc,contains:mc,includes:yc,difference:_c,find:bc,findIndex:xc,firstValue:wc,flatten:Mc,flattenDeep:Ec,getRange:Oc,pull:Sc,pullAt:Tc,reduce:jc,remove:Ac,sortBy:Cc,union:Lc,uniq:Pc,valuesOfKey:Ic,head:Rc,last:Fc,startsWith:Dc,endsWith:kc,filter:Nc,every:Bc,some:zc,group:Uc,groupBy:Gc,groupToMap:Vc,getWrapBehavior:Hc,wrapBehavior:qc,number2color:Wc,parseRadius:Yc,clamp:Xc,fixedBase:Zc,isDecimal:Kc,isEven:Jc,isInteger:Qc,isNegative:$c,isNumberEqual:tl,isOdd:el,isPositive:nl,maxBy:rl,minBy:il,mod:ol,toDegree:al,toInteger:sl,toRadian:ul,forIn:cl,has:ll,hasKey:fl,hasValue:hl,keys:pl,isMatch:dl,values:vl,lowerCase:gl,lowerFirst:ml,substitute:yl,upperCase:_l,upperFirst:bl,getType:xl,isArguments:wl,isArray:Ml,isArrayLike:El,isBoolean:Ol,isDate:Sl,isError:Tl,isFunction:jl,isFinite:Al,isNil:Cl,isNull:Ll,isNumber:Pl,isObject:Il,isObjectLike:Rl,isPlainObject:Fl,isPrototype:Dl,isRegExp:kl,isString:Nl,isType:Bl,isUndefined:zl,isElement:Ul,requestAnimationFrame:Gl,clearAnimationFrame:Vl,augment:Hl,clone:ql,debounce:Wl,memoize:Yl,deepMix:Xl,each:Zl,extend:Kl,indexOf:Jl,isEmpty:Ql,isEqual:$l,isEqualWith:tf,map:ef,mapValues:nf,mix:rf,assign:of,get:af,set:sf,pick:uf,throttle:cf,toArray:lf,uniqueId:ff,noop:hf,identity:pf,size:df,Cache:vf}),mf=Object.assign({},{assign:rf,merge:Xl,cloneDeep:ql,isFinite:isFinite,isNaN:isNaN,snapEqual:tl,remove:Sc,inArray:mc},gf);mf.Array={groupToMap:Vc,group:Uc,merge:mf.merge,values:Ic,getRange:Oc,firstValue:wc,remove:Sc};var yf=function(t){function e(e){t.call(this);var n={visible:!0},r=this.getDefaultCfg();this._attrs=n,mf.assign(n,r,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this._attrs[t]},e.prototype.set=function(t,e){this._attrs[t]=e},e.prototype.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},e}(r),_f="@antv/l7",bf="1.4.6",xf="Large-scale WebGL-powered Geospatial Data Visualization",wf="build/L7.js",Mf="https://github.com/antvis/l7",Ef={type:"git",url:"git@github.com:antvis/l7.git"},Of={url:"https://github.com/antvis/l7/issues"},Sf=["l7","gis","geometry"],Tf="https://github.com/orgs/antvis/people",jf="MIT",Af={"@babel/cli":"^7.4.3","@babel/core":"~7.4.3","@babel/preset-env":"~7.4.3","babel-eslint":"~8.0.3","babel-loader":"~8.0.0","babel-plugin-transform-remove-strict-mode":"~0.0.2","babel-preset-env":"~1.6.1","body-parser":"^1.18.2",chai:"~4.1.2",commander:"~2.12.2",connect:"^3.6.6","d3-queue":"~3.0.7",debug:"~3.1.0",electron:"~2.0.2",eslint:"~6.1.0","eslint-config-egg":"~7.4.1","eslint-plugin-html":"~6.0.0","event-simulate":"~1.0.0","get-port":"~3.2.0","glsl-shaders-loader":"^1.0.0",jszip:"^3.1.5",nightmare:"~2.10.0",nunjucks:"~3.0.1",open:"~6.4.0",parseurl:"~1.3.2","postcss-url":"^8.0.0","pre-commit":"^1.2.2",rollup:"^1.16.2","rollup-plugin-buble":"^0.19.6","rollup-plugin-commonjs":"^9.2.1","rollup-plugin-css-porter":"^1.0.2","rollup-plugin-image":"^1.0.2","rollup-plugin-json":"^4.0.0","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-resolve":"^4.0.1","rollup-plugin-postcss":"^2.0.3","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^4.0.4","serve-static":"^1.13.2",shelljs:"~0.7.8","string-replace-loader":"~1.3.0",torchjs:"~2.1.0","uglify-js":"~3.1.10"},Cf={"build-dev":"rollup -c --environment BUILD:dev","watch-dev":"rollup -c --environment BUILD:dev,MINIFY:false --watch & npm run demos-web ","build-prod":"rollup -c --environment BUILD:production,MINIFY:false","build-prod-min":"rollup -c --environment BUILD:production,MINIFY:true",build:"rollup -c --environment BUILD:production","build-lib":"babel src --out-dir lib",bundler:"electron ./bundler/app.js",ci:"npm run lint && npm run test","compress-l7":"uglifyjs -c -m -o dist/l7.min.js -- build/l7.js","compress-core":"uglifyjs -c -m -o dist/l7-core.min.js -- build/l7-core.js","compress-simple":"uglifyjs -c -m -o dist/l7-simple.min.js -- build/l7-simple.js",compress:"npm run compress-l7",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --compile --coverage --renderer --recursive test/unit","coverage-viewer":"torch-coverage",demos:"electron ./demos/app.js","demos-web":"node ./demos/app.js --web --port 2046",dev:"npm run watch & npm run demos-web",dist:"npm run build-prod-min && npm run build-prod",lint:"eslint --ext .html,.js ./","lint-fix":"eslint --ext .html,.js --fix ./","mkdir-dist":"node ./bin/mkdir-dist.js",prepublishOnly:"npm run dist",screenshot:"node ./bin/screenshot.js",start:"npm run watch-dev",test:"torch  --compile-opts ./.torch.compile.opts.js --compile --renderer --recursive test/unit","test-all":"npm run test && npm run test-bugs","test-bugs":"torch --compile --renderer --recursive test/bugs","test-bugs-live":"torch --compile --interactive --watch --recursive test/bugs","test-live":"torch  --compile --interactive --watch --recursive test/unit",watch:"webpack --config webpack-dev.config.js","win-dev":"node ./bin/win-dev.js"},Lf={"@antv/geo-coord":"^1.0.8","@antv/util":"2.0.1","@mapbox/geojson-rewind":"^0.4.0","@mapbox/tiny-sdf":"^1.1.0","@mapbox/vector-tile":"^1.3.1","@turf/bbox":"^6.0.1","@turf/clean-coords":"^6.0.1","@turf/invariant":"^6.1.2","@turf/meta":"^6.0.2","d3-dsv":"^1.0.10","d3-hexbin":"^0.2.2",earcut:"^2.1.3",fecha:"^2.3.3","geojson-rewind":"^0.3.1","gl-matrix":"^2.4.1","gl-vec2":"^1.3.0",lodash:"^4.17.5",pbf:"^3.2.0","polyline-miter-util":"^1.0.1",rbush:"^2.0.2","simple-statistics":"^7.0.1",supercluster:"^6.0.1",three:"^0.101.1","viewport-mercator-project":"^5.2.0","webworkify-webpack":"^2.1.3","wolfy87-eventemitter":"~5.2.4"},Pf={name:_f,version:bf,description:xf,main:wf,homepage:Mf,repository:Ef,bugs:Of,keywords:Sf,author:Tf,license:jf,devDependencies:Af,scripts:Cf,"pre-commit":{run:["lint","test"],silent:!1},dependencies:Lf},If="v"+Pf.version,Rf='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',Ff={version:If,scene:{mapType:"AMAP",zoom:5,center:[107.622,39.266],minZoom:3,maxZoom:18,pitch:0,hash:!1,zoomControl:!0,scaleControl:!0,attributionControl:!0},animate:!0,height:0,activeColor:"#2f54eb",colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:1e4,shape:"circle",pattern:"",snapArray:[0,1,2,4,5,10],pointShape:{"2d":["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],"3d":["cylinder","triangleColumn","hexagonColumn","squareColumn"]},sdfHomeUrl:"https://sdf.amap.com",scales:{},textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:Rf,textAlign:"center"}},Df=function(t){var e=this.getDefaultCfg();mf.mix(this,e,t),this.init()};Df.prototype.getDefaultCfg=function(){return{type:"base",formatter:null,range:[0,1],ticks:null,values:[]}},Df.prototype.init=function(){},Df.prototype.getTicks=function(){var t=this,e=t.ticks,n=[];return mf.each(e,function(e){var r;r=mf.isObject(e)?e:{text:t.getText(e),tickValue:e,value:t.scale(e)},n.push(r)}),n},Df.prototype.getText=function(t){var e=this.formatter;return t=e?e(t):t,!mf.isNil(t)&&t.toString||(t=""),t.toString()},Df.prototype.rangeMin=function(){return this.range[0]},Df.prototype.rangeMax=function(){var t=this.range;return t[t.length-1]},Df.prototype.invert=function(t){return t},Df.prototype.translate=function(t){return t},Df.prototype.scale=function(t){return t},Df.prototype.clone=function(){var t=this,e=t.constructor,n={};return mf.each(t,function(e,r){n[r]=t[r]}),new e(n)},Df.prototype.change=function(t){return this.ticks=null,mf.mix(this,t),this.init(),this};var kf=12;function Nf(t){var e=1;if(t===1/0||t===-1/0)throw new Error("Not support Infinity!");if(t<1){var n=0;while(t<1)e/=10,t*=10,n++;e.toString().length>kf&&(e=parseFloat(e.toFixed(n)))}else while(t>10)e*=10,t/=10;return e}function Bf(t,e){var n=t.length;if(0===n)return NaN;var r=t[0];if(e<t[0])return NaN;if(e>=t[n-1])return t[n-1];for(var i=1;i<t.length;i++){if(e<t[i])break;r=t[i]}return r}function zf(t,e){var n,r=t.length;if(0===r)return NaN;if(e>t[r-1])return NaN;if(e<t[0])return t[0];for(var i=1;i<t.length;i++)if(e<=t[i]){n=t[i];break}return n}var Uf={snapFactorTo:function(t,e,n){if(isNaN(t))return NaN;var r=1;if(0!==t){t<0&&(r=-1),t*=r;var i=Nf(t);r*=i,t/=i}t="floor"===n?Uf.snapFloor(e,t):"ceil"===n?Uf.snapCeiling(e,t):Uf.snapTo(e,t);var o=t*r;if(Math.abs(r)<1&&o.toString().length>kf){var a=parseInt(1/r),s=r>0?1:-1;o=t/a*s}return o},snapMultiple:function(t,e,n){var r;return r="ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e),r*e},snapTo:function(t,e){var n=Bf(t,e),r=zf(t,e);if(isNaN(n)||isNaN(r)){if(t[0]>=e)return t[0];var i=t[t.length-1];if(i<=e)return i}return Math.abs(e-n)<Math.abs(r-e)?n:r},snapFloor:function(t,e){return Bf(t,e)},snapCeiling:function(t,e){return zf(t,e)}},Gf=5,Vf=7;function Hf(t){var e=t.min,n=t.max,r=t.interval,i=[],o=t.minCount||Gf,a=t.maxCount||Vf,s=o===a,u=mf.isNil(t.minLimit)?-1/0:t.minLimit,c=mf.isNil(t.maxLimit)?1/0:t.maxLimit,l=(o+a)/2,f=l,h=t.snapArray?t.snapArray:s?Ff.snapCountArray:Ff.snapArray;if(e===u&&n===c&&s&&(r=(n-e)/(f-1)),mf.isNil(e)&&(e=0),mf.isNil(n)&&(n=0),n===e&&(0===e?n=1:e>0?e=0:n=0,n-e<5&&!r&&n-e>=1&&(r=1)),mf.isNil(r)){var p=(n-e)/(l-1);r=Uf.snapFactorTo(p,h,"ceil"),a!==o&&(f=parseInt((n-e)/r,10),f>a&&(f=a),f<o&&(f=o),r=Uf.snapFactorTo((n-e)/(f-1),h,"floor"))}if(t.interval||a!==o)n=Math.min(Uf.snapMultiple(n,r,"ceil"),c),e=Math.max(Uf.snapMultiple(e,r,"floor"),u),f=Math.round((n-e)/r),e=mf.fixedBase(e,r),n=mf.fixedBase(n,r);else{l=parseInt(l,10);var d,v=(n+e)/2,g=Uf.snapMultiple(v,r,"ceil"),m=Math.floor((l-2)/2),y=g+m*r;d=l%2===0?g-m*r:g-(m+1)*r,y<n&&(y+=r),d>e&&(d-=r),n=mf.fixedBase(y,r),e=mf.fixedBase(d,r)}n=Math.min(n,c),e=Math.max(e,u),i.push(e);for(var _=1;_<f;_++){var b=mf.fixedBase(r*_+e,r);b<n&&i.push(b)}return i[i.length-1]<n&&i.push(n),{min:e,max:n,interval:r,count:f,ticks:i}}var qf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"linear",isLinear:!0,min:null,minLimit:null,max:null,maxLimit:null,nice:!1,tickCount:null,tickInterval:null,snapArray:null})},e.prototype.init=function(){var t=this;if(t.ticks){var e=t.ticks,n=t.translate(e[0]),r=t.translate(e[e.length-1]);(mf.isNil(t.min)||t.min>n)&&(t.min=n),(mf.isNil(t.max)||t.max<r)&&(t.max=r)}else t.min=t.translate(t.min),t.max=t.translate(t.max),t.initTicks()},e.prototype.calculateTicks=function(){var t=this,e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval;if(n<e)throw new Error("max: "+n+" should not be less than min: "+e);var o=Hf({min:e,max:n,minLimit:t.minLimit,maxLimit:t.maxLimit,minCount:r,maxCount:r,interval:i,snapArray:this.snapArray});return o.ticks},e.prototype.initTicks=function(){var t=this,e=t.calculateTicks();if(t.nice)t.ticks=e,t.min=e[0],t.max=e[e.length-1];else{var n=[];mf.each(e,function(e){e>=t.min&&e<=t.max&&n.push(e)}),n.length||(n.push(t.min),n.push(t.max)),t.ticks=n}},e.prototype.scale=function(t){if(null===t||void 0===t)return NaN;var e=this.max,n=this.min;if(e===n)return 0;var r=Math.min(1,Math.max(0,(t-n)/(e-n))),i=this.rangeMin(),o=this.rangeMax();return i+r*(o-i)},e.prototype.invert=function(t){var e=(t-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+e*(this.max-this.min)},e}(Df),Wf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{isIdentity:!0,type:"identity",value:null})},e.prototype.getText=function(){return this.value.toString()},e.prototype.scale=function(t){return this.value!==t&&mf.isNumber(t)?t:this.range[0]},e.prototype.invert=function(){return this.value},e}(Df),Yf=8,Xf=4;function Zf(t){var e=[];return mf.each(t,function(t){mf.isArray(t)?e=e.concat(t):e.push(t)}),e}function Kf(t,e){var n;for(n=e;n>0;n--)if(t%n===0)break;if(1===n)for(n=e;n>0;n--)if((t-1)%n===0)break;return n}function Jf(t){var e={},n=[],r=t.maxCount||Yf,i=Zf(t.data),o=i.length,a=Kf(o-1,r-1)+1;2===a?a=r:a<r-Xf&&(a=r-Xf);var s=parseInt(o/(a-1),10),u=i.map(function(t,e){return e%s===0?i.slice(e,e+s):null}).filter(function(t){return t});i.length&&n.push(i[0]);for(var c=1;c<u.length&&c*s<o-s;c++)n.push(u[c][0]);if(i.length){var l=i[o-1];-1===n.indexOf(l)&&n.push(l)}return e.categories=i,e.ticks=n,e}var Qf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"cat",tickCount:null,isCategory:!0})},e.prototype.init=function(){var t=this,e=t.values,n=t.tickCount;if(mf.each(e,function(t,n){e[n]=t.toString()}),!t.ticks){var r=e;if(n){var i=Jf({maxCount:n,data:e});r=i.ticks}this.ticks=r}},e.prototype.getText=function(e){return-1===this.values.indexOf(e)&&mf.isNumber(e)&&(e=this.values[Math.round(e)]),t.prototype.getText.call(this,e)},e.prototype.translate=function(t){var e=this.values.indexOf(t);return-1===e&&mf.isNumber(t)?e=t:-1===e&&(e=NaN),e},e.prototype.scale=function(t){var e,n=this.rangeMin(),r=this.rangeMax();return(mf.isString(t)||-1!==this.values.indexOf(t))&&(t=this.translate(t)),e=this.values.length>1?t/(this.values.length-1):t,n+e*(r-n)},e.prototype.invert=function(t){if(mf.isString(t))return t;var e=this.rangeMin(),n=this.rangeMax();t<e&&(t=e),t>n&&(t=n);var r=(t-e)/(n-e),i=Math.round(r*(this.values.length-1))%this.values.length;return i=i||0,this.values[i]},e}(Df),$f=6,th=[1,2,4,6,8,12],eh=6e4,nh=36e5,rh=864e5;function ih(t){return new Date(t).getFullYear()}function oh(t){return new Date(t,0,1).getTime()}function ah(t){return new Date(t).getMonth()}function sh(t,e){var n=ih(t),r=ih(e),i=ah(t),o=ah(e);return 12*(r-n)+(o-i)%12}function uh(t,e){return new Date(t,e,1).getTime()}function ch(t,e){return Math.ceil((e-t)/rh)}function lh(t,e){return Math.ceil((e-t)/nh)}function fh(t,e){return Math.ceil((e-t)/6e4)}function hh(t){var e,n=t.minInterval,r=[],i=t.min,o=t.max,a=t.interval;if(o===i&&(o=i+rh),mf.isNil(a)){var s=o-i,u=rh,c=365*u;a=parseInt(s/(t.maxCount||$f),10),n&&n>a&&(a=n);var l=a/c,f=ih(i);if(l>.51){for(var h=Math.ceil(l),p=ih(o),d=f;d<=p+h;d+=h)r.push(oh(d));a=null}else if(l>.0834){for(var v=Math.ceil(l/.0834),g=ah(i),m=sh(i,o),y=0;y<=m+v;y+=v)r.push(uh(f,y+g));a=null}else if(a>.5*u){var _=new Date(i),b=_.getFullYear(),x=_.getMonth(i),w=_.getDate(),M=Math.ceil(a/u),E=ch(i,o);a=M*u;for(var O=0;O<E+M;O+=M)r.push(new Date(b,x,w+O).getTime())}else if(a>nh){var S=new Date(i),T=S.getFullYear(),j=S.getMonth(i),A=S.getDate(),C=S.getHours(),L=Uf.snapTo(th,Math.ceil(a/nh)),P=lh(i,o);a=L*nh;for(var I=0;I<=P+L;I+=L)r.push(new Date(T,j,A,C+I).getTime())}else if(a>eh){var R=fh(i,o),F=Math.ceil(a/eh);a=F*eh;for(var D=0;D<=R+F;D+=F)r.push(i+D*eh)}else{a<1e3&&(a=1e3),i=1e3*Math.floor(i/1e3);var k=Math.ceil((o-i)/1e3),N=Math.ceil(a/1e3);a=1e3*N;for(var B=0;B<k+N;B+=N)r.push(i+1e3*B)}}if(!r.length){i=1e3*Math.floor(i/1e3),o=1e3*Math.ceil(o/1e3),e=(o-i)/a;for(var z=0;z<=e;z++)r.push(mf.fixedBase(a*z+i,a))}return{max:o,min:i,interval:a,ticks:r,count:r.length}}var ph=n(function(t){(function(e){var n={},r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i=/\d\d?/,o=/\d{3}/,a=/\d{4}/,s=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,u=/\[([^]*?)\]/gm,c=function(){};function l(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function f(t){return function(e,n,r){var i=r[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(e.month=i)}}function h(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}var p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],v=l(d,3),g=l(p,3);n.i18n={dayNamesShort:g,dayNames:p,monthNamesShort:v,monthNames:d,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10)*t%10]}};var m={D:function(t){return t.getDate()},DD:function(t){return h(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return t.getDay()},dd:function(t){return h(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return h(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return String(t.getFullYear()).substr(2)},YYYY:function(t){return h(t.getFullYear(),4)},h:function(t){return t.getHours()%12||12},hh:function(t){return h(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return h(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return h(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return h(t.getSeconds())},S:function(t){return Math.round(t.getMilliseconds()/100)},SS:function(t){return h(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return h(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+h(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},y={D:[i,function(t,e){t.day=e}],Do:[new RegExp(i.source+s.source),function(t,e){t.day=parseInt(e,10)}],M:[i,function(t,e){t.month=e-1}],YY:[i,function(t,e){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);t.year=""+(e>68?r-1:r)+e}],h:[i,function(t,e){t.hour=e}],m:[i,function(t,e){t.minute=e}],s:[i,function(t,e){t.second=e}],YYYY:[a,function(t,e){t.year=e}],S:[/\d/,function(t,e){t.millisecond=100*e}],SS:[/\d{2}/,function(t,e){t.millisecond=10*e}],SSS:[o,function(t,e){t.millisecond=e}],d:[i,c],ddd:[s,c],MMM:[s,f("monthNamesShort")],MMMM:[s,f("monthNames")],a:[s,function(t,e,n){var r=e.toLowerCase();r===n.amPm[0]?t.isPm=!1:r===n.amPm[1]&&(t.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(t,e){"Z"===e&&(e="+00:00");var n,r=(e+"").match(/([\+\-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),t.timezoneOffset="+"===r[0]?n:-n)}]};y.dd=y.d,y.dddd=y.ddd,y.DD=y.D,y.mm=y.m,y.hh=y.H=y.HH=y.h,y.MM=y.M,y.ss=y.s,y.A=y.a,n.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},n.format=function(t,e,i){var o=i||n.i18n;if("number"===typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date in fecha.format");e=n.masks[e]||e||n.masks["default"];var a=[];return e=e.replace(u,function(t,e){return a.push(e),"??"}),e=e.replace(r,function(e){return e in m?m[e](t,o):e.slice(1,e.length-1)}),e.replace(/\?\?/g,function(){return a.shift()})},n.parse=function(t,e,i){var o=i||n.i18n;if("string"!==typeof e)throw new Error("Invalid format in fecha.parse");if(e=n.masks[e]||e,t.length>1e3)return!1;var a=!0,s={};if(e.replace(r,function(e){if(y[e]){var n=y[e],r=t.search(n[0]);~r?t.replace(n[0],function(e){return n[1](s,e,o),t=t.substr(r+e.length),e}):a=!1}return y[e]?"":e.slice(1,e.length-1)}),!a)return!1;var u,c=new Date;return!0===s.isPm&&null!=s.hour&&12!==+s.hour?s.hour=+s.hour+12:!1===s.isPm&&12===+s.hour&&(s.hour=0),null!=s.timezoneOffset?(s.minute=+(s.minute||0)-+s.timezoneOffset,u=new Date(Date.UTC(s.year||c.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0))):u=new Date(s.year||c.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0),u},t.exports?t.exports=n:e.fecha=n})(this)}),dh={toTimeStamp:function(t){return mf.isString(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),mf.isDate(t)&&(t=t.getTime()),t}},vh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"time",mask:"YYYY-MM-DD"})},e.prototype.init=function(){var e=this,n=e.values;if(n&&n.length){var r=[],i=1/0,o=i,a=0;mf.each(n,function(t){var n=e._toTimeStamp(t);if(isNaN(n))throw new TypeError("Invalid Time: "+t);i>n?(o=i,i=n):o>n&&(o=n),a<n&&(a=n),r.push(n)}),n.length>1&&(e.minTickInterval=o-i),(mf.isNil(e.min)||e._toTimeStamp(e.min)>i)&&(e.min=i),(mf.isNil(e.max)||e._toTimeStamp(e.max)<a)&&(e.max=a)}t.prototype.init.call(this)},e.prototype.calculateTicks=function(){var t=this,e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=hh({min:e,max:n,minCount:r,maxCount:r,interval:i,minInterval:t.minTickInterval});return o.ticks},e.prototype.getText=function(t){var e=this.formatter;return t=this.translate(t),t=e?e(t):ph.format(t,this.mask),t},e.prototype.scale=function(e){return mf.isString(e)&&(e=this.translate(e)),t.prototype.scale.call(this,e)},e.prototype.translate=function(t){return this._toTimeStamp(t)},e.prototype._toTimeStamp=function(t){return dh.toTimeStamp(t)},e}(qf),gh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"timeCat",mask:"YYYY-MM-DD",tickCount:7})},e.prototype.init=function(){var t=this,e=this.values;mf.each(e,function(n,r){e[r]=t._toTimeStamp(n)}),e.sort(function(t,e){return t-e}),t.ticks||(t.ticks=this.calculateTicks(!1))},e.prototype.calculateTicks=function(t){var e,n=this,r=n.tickCount;if(r){var i=Jf({maxCount:r,data:n.values});e=i.ticks}else e=n.values;return t&&mf.each(e,function(t,r){e[r]=ph.format(t,n.mask)}),e},e.prototype.translate=function(t){t=this._toTimeStamp(t);var e=this.values.indexOf(t);return-1===e&&(e=mf.isNumber(t)&&t<this.values.length?t:NaN),e},e.prototype.scale=function(t){var e,n=this.rangeMin(),r=this.rangeMax(),i=this.translate(t);return e=1===this.values.length?i:i>-1?i/(this.values.length-1):0,n+e*(r-n)},e.prototype.getText=function(t){var e="",n=this.translate(t);e=n>-1?this.values[n]:t;var r=this.formatter;return e=parseInt(e,10),e=r?r(e):ph.format(e,this.mask),e},e.prototype.getTicks=function(){var t=this,e=this.ticks,n=[];return mf.each(e,function(e){var r;r=mf.isObject(e)?e:{text:mf.isString(e)?e:t.getText(e),tickValue:e,value:t.scale(e)},n.push(r)}),n},e.prototype._toTimeStamp=function(t){return dh.toTimeStamp(t)},e}(Qf);function mh(t,e){return 1===t?1:Math.log(e)/Math.log(t)}var yh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"log",base:2,tickCount:10,_minTick:null})},e.prototype.calculateTicks=function(){var t,e=this,n=e.base;if(e.min<0)throw new Error("The minimum value must be greater than zero!");var r=mh(n,e.max);if(e.min>0)t=Math.floor(mh(n,e.min));else{var i=e.values,o=e.max;mf.each(i,function(t){t>0&&t<o&&(o=t)}),o===e.max&&(o=e.max/n),o>1&&(o=1),t=Math.floor(mh(n,o)),e._minTick=t,e.positiveMin=o}for(var a=r-t,s=e.tickCount,u=Math.ceil(a/s),c=[],l=t;l<r+u;l+=u)c.push(Math.pow(n,l));return 0===e.min&&c.unshift(0),c},e.prototype._getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r,i=this.base,o=this.positiveMin;return o&&(n=1*o/i),r=t<o?t/o/(mh(i,e)-mh(i,n)):(mh(i,t)-mh(i,n))/(mh(i,e)-mh(i,n)),r},e.prototype.scale=function(t){var e=this._getScalePercent(t),n=this.rangeMin(),r=this.rangeMax();return n+e*(r-n)},e.prototype.invert=function(t){var e,n=this.base,r=mh(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;e=mh(n,a/n);var s=1/(r-e)*o;if(t<s)return t/s*a}else e=mh(n,this.min);var u=(t-i)/o,c=u*(r-e)+e;return Math.pow(n,c)},e}(qf);function _h(t,e){var n=Math.E,r=Math.pow(n,Math.log(e)/t);return r}var bh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return mf.mix({},e,{type:"pow",exponent:2,tickCount:10})},e.prototype.calculateTicks=function(){var t,e=this,n=e.exponent,r=Math.ceil(_h(n,e.max));if(t=e.min>=0?Math.floor(_h(n,e.min)):0,t>r){var i=r;r=t,t=i}for(var o=r-t,a=e.tickCount,s=Math.ceil(o/a),u=[],c=t;c<r+s;c+=s)u.push(Math.pow(c,n));return u},e.prototype._getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent,i=(_h(r,t)-_h(r,n))/(_h(r,e)-_h(r,n));return i},e.prototype.scale=function(t){var e=this._getScalePercent(t),n=this.rangeMin(),r=this.rangeMax();return n+e*(r-n)},e.prototype.invert=function(t){var e=(t-this.rangeMin())/(this.rangeMax()-this.rangeMin()),n=this.exponent,r=_h(n,this.max),i=_h(n,this.min),o=e*(r-i)+i;return Math.pow(o,n)},e}(qf);Df.Linear=qf,Df.Identity=Wf,Df.Cat=Qf,Df.Time=vh,Df.TimeCat=gh,Df.Log=yh,Df.Pow=bh;var xh=function(t){if(Df.hasOwnProperty(t)){var e=mf.lowerFirst(t);Df[e]=function(e){return new Df[t](e)}}};for(var wh in Df)xh(wh);var Mh=["cat","timeCat"];Df.isCategory=function(t){return Mh.indexOf(t)>=0};var Eh=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Oh={LINEAR:"linear",CAT:"cat",TIME:"time"},Sh=function(t){this.defs={},mf.assign(this,t)};Sh.prototype._getDef=function(t){var e=this.defs,n=null;return(Ff.scales[t]||e[t])&&(n=mf.mix({},Ff.scales[t]),mf.each(e[t],function(t,e){mf.isNil(t)?delete n[e]:n[e]=t})),n},Sh.prototype._getDefaultType=function(t,e){var n=Oh.LINEAR,r=mf.Array.firstValue(e,t);return mf.isArray(r)&&(r=r[0]),Eh.test(r)?n=Oh.TIME:mf.isString(r)&&(n=Oh.CAT),n},Sh.prototype._getScaleCfg=function(t,e,n){var r={field:e},i=mf.Array.values(n,e);if(r.values=i,!Df.isCategory(t)&&"time"!==t){var o=mf.Array.getRange(i);r.min=o.min,r.max=o.max,r.nice=!0}return"time"===t&&(r.nice=!1),r},Sh.prototype.createScale=function(t,e){var n,r=this,i=r._getDef(t);if(!e||!e.length)return n=i&&i.type?Df[i.type](i):Df.identity({value:t,field:t.toString(),values:[t]}),n;var o=mf.Array.firstValue(e,t);if(mf.isNumber(t)||mf.isNil(o)&&!i)n=Df.identity({value:t,field:t.toString(),values:[t]});else{var a;i&&(a=i.type),a=a||r._getDefaultType(t,e);var s=r._getScaleCfg(a,t,e);i&&mf.mix(s,i),n=Df[a](s)}return n};var Th=/rgba?\(([\s.,0-9]+)\)/,jh={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function Ah(t,e,n,r){var i=t[r]+(e[r]-t[r])*n;return i}function Ch(t,e){!mf.isNaN(e)&&mf.isNumber(e)||(e=0);var n=t.length-1,r=Math.floor(n*e),i=n*e-r,o=t[r],a=r===n?o:t[r+1];return[Ah(o,a,i,0),Ah(o,a,i,1),Ah(o,a,i,2),Ah(o,a,i,3)]}function Lh(t){var e=[];return 4===t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),e.push(parseInt(t.substr(1,2),16)),e.push(parseInt(t.substr(3,2),16)),e.push(parseInt(t.substr(5,2),16)),e}var Ph={toRGB:function(t){var e=[255,255,255,255];if(jh[t]){var n=jh[t];e=Lh(n),e.push(255)}if("#"===t[0]&&(7===t.length||4===t.length))return e=Lh(t),e.push(255),e;if(Th.test(t)){var r=Th.exec(t);e=r[1].split(/\s*,\s*/),4===e.length&&(e[3]*=255),3===e.length&&e.push(255)}return e},color2Arr:function(t){var e=this.toRGB(t);return e.map(function(t){return t/255})},colorArray2RGBA:function(t){return"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},color2RGBA:function(t){return this.color2Arr(t)},rgb2arr:Lh,gradient:function(t){var e=[];return mf.isString(t)&&(t=t.split("-")),mf.each(t,function(t){var n=Ph.toRGB(t).map(function(t){return t/255});e.push(n)}),function(t){return Ch(e,t)}}};function Ih(t,e){return mf.isString(e)?e:t.invert(t.scale(e))}var Rh=function(t){this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null,mf.mix(this,t)};Rh.prototype.get=function(t){return this[t]},Rh.prototype.set=function(t,e){this[t]=e},Rh.prototype._getAttrValue=function(t,e){var n=this.values;if(t.isCategory&&!this.linear){var r=t.translate(e);return n[r%n.length]}var i=t.scale(e);return this.getLinearValue(i)},Rh.prototype.getLinearValue=function(t){var e=this.values,n=e.length-1,r=Math.floor(n*t),i=n*t-r,o=e[r],a=r===n?o:e[r+1],s=o+(a-o)*i;return s},Rh.prototype.callback=function(t){var e=this,n=e.scales[0],r=null;return r="identity"===n.type?n.value:e._getAttrValue(n,t),r},Rh.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i++)r.push(e[i]);return r},Rh.prototype.getFields=function(){var t=this.scales,e=[];return mf.each(t,function(t){e.push(t.field)}),e},Rh.prototype.getScale=function(t){var e=this.scales,n=this.names,r=n.indexOf(t);return e[r]},Rh.prototype.mapping=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];var n=this.scales,r=this.callback,i=t;if(r){for(var o=0;o<t.length;o++)t[o]=this._toOriginParam(t[o],n[o]);i=r.apply(this,t)}return"color"!==this.type||mf.isArray(i)||(i=Ph.toRGB(i).map(function(t){return t/255})),mf.isArray(i)||(i=[i]),i},Rh.prototype._toOriginParam=function(t,e){var n=t;if(!e.isLinear)if(mf.isArray(t)){n=[];for(var r=0;r<t.length;r++)n.push(Ih(e,t[r]))}else n=Ih(e,t);return n};var Fh=function(t){function e(e){t.call(this,e),this.names=["color"],this.type="color",this.gradient=null,mf.isString(this.values)&&(this.linear=!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLinearValue=function(t){var e=this.gradient;if(!e){var n=this.values;e=Ph.gradient(n),this.gradient=e}var r=e(t);return r},e}(Rh),Dh=function(t){function e(e){t.call(this,e),this.names=["size"],this.type="size",this.gradient=null,this.domainIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.mapping=function(){var t=arguments,e=this,n=[],r=e.scales;if(0===e.values.length){var i=this.callback.bind(this);n.push(i.apply(void 0,arguments))}else{mf.isArray(e.values[0])||(e.values=[e.values]);for(var o=0;o<r.length;o++)n.push(e._scaling(r[o],t[o]))}return this.domainIndex=0,n},e.prototype._scaling=function(t,e){if("identity"===t.type)return e;var n=t.scale(e);return this.getLinearValue(n)},e.prototype.getLinearValue=function(t){var e=this.values[this.domainIndex],n=e.length-1,r=Math.floor(n*t),i=n*t-r,o=e[r],a=r===n?o:e[r+1],s=o+(a-o)*i;return this.domainIndex+=1,s},e}(Rh),kh=function(t){function e(e){t.call(this,e),this.names=["opacity"],this.type="opacity",this.gradient=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rh),Nh=function(t){function e(e){t.call(this,e),this.names=["shape"],this.type="shape",this.gradient=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLinearValue=function(t){var e=this.values,n=Math.round((e.length-1)*t);return e[n]},e.prototype._getAttrValue=function(t,e){if("text"===this.values)return e;var n=this.values;if(t.isCategory&&!this.linear){var r=t.translate(e);return n[r%n.length]}var i=t.scale(e);return this.getLinearValue(i)},e}(Rh),Bh=function(t){function e(e){t.call(this,e),this.names=["x","y"],this.type="position"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.mapping=function(t,e){var n,r,i,o=this.scales,a=this.coord,s=o[0],u=o[1];if(mf.isNil(t)||mf.isNil(e))return[];if(mf.isArray(e)&&mf.isArray(t)){n=[],r=[];for(var c=0,l=0;c<t.length&&l<e.length;c++,l++)i=a.convertPoint({x:s.scale(t[c]),y:u.scale(e[l])}),n.push(i.x),r.push(i.y)}else if(mf.isArray(e))t=s.scale(t),r=[],mf.each(e,function(e){e=u.scale(e),i=a.convertPoint({x:t,y:e}),n&&n!==i.x?(mf.isArray(n)||(n=[n]),n.push(i.x)):n=i.x,r.push(i.y)});else if(mf.isArray(t))e=u.scale(e),n=[],mf.each(t,function(t){t=s.scale(t),i=a.convertPoint({x:t,y:e}),r&&r!==i.y?(mf.isArray(r)||(r=[r]),r.push(i.y)):r=i.y,n.push(i.x)});else{t=s.scale(t),e=u.scale(e);var f=a.convertPoint({x:t,y:e});n=f.x,r=f.y}return[n,r]},e}(Rh),zh=function(t){function e(e){t.call(this,e),this.names=["symbol"],this.type="symbol",this.gradient=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rh),Uh=function(t){function e(e){t.call(this,e),this.names=["filter"],this.type="filter",this.gradient=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rh),Gh=function(t){function e(e){t.call(this,e),this.names=["pattern"],this.type="pattern",this.gradient=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rh);Rh.Color=Fh,Rh.Size=Dh,Rh.Opacity=kh,Rh.Shape=Nh,Rh.Position=Bh,Rh.Symbol=zh,Rh.Filter=Uh,Rh.Pattern=Gh;var Vh=n(function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,n){switch(t){case"Point":return i(e).geometry;case"LineString":return u(e).geometry;case"Polygon":return a(e).geometry;case"MultiPoint":return h(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return p(e).geometry;default:throw new Error(t+" is invalid")}}function i(t,e,r){void 0===r&&(r={});var i={type:"Point",coordinates:t};return n(i,e,r)}function o(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return i(t,e)}),n)}function a(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:t};return n(u,e,r)}function s(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return a(t,e)}),n)}function u(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:t};return n(i,e,r)}function c(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return u(t,e)}),n)}function l(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function f(t,e,r){void 0===r&&(r={});var i={type:"MultiLineString",coordinates:t};return n(i,e,r)}function h(t,e,r){void 0===r&&(r={});var i={type:"MultiPoint",coordinates:t};return n(i,e,r)}function p(t,e,r){void 0===r&&(r={});var i={type:"MultiPolygon",coordinates:t};return n(i,e,r)}function d(t,e,r){void 0===r&&(r={});var i={type:"GeometryCollection",geometries:t};return n(i,e,r)}function v(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function m(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function y(t,e){return b(m(t,e))}function _(t){var e=t%360;return e<0&&(e+=360),e}function b(t){var e=t%(2*Math.PI);return 180*e/Math.PI}function x(t){var e=t%360;return e*Math.PI/180}function w(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return g(m(t,e),n)}function M(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}function O(t){return!!t&&t.constructor===Object}function S(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function j(){throw new Error("method has been renamed to `radiansToDegrees`")}function A(){throw new Error("method has been renamed to `degreesToRadians`")}function C(){throw new Error("method has been renamed to `lengthToDegrees`")}function L(){throw new Error("method has been renamed to `lengthToRadians`")}function P(){throw new Error("method has been renamed to `radiansToLength`")}function I(){throw new Error("method has been renamed to `bearingToAzimuth`")}function R(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=r,e.point=i,e.points=o,e.polygon=a,e.polygons=s,e.lineString=u,e.lineStrings=c,e.featureCollection=l,e.multiLineString=f,e.multiPoint=h,e.multiPolygon=p,e.geometryCollection=d,e.round=v,e.radiansToLength=g,e.lengthToRadians=m,e.lengthToDegrees=y,e.bearingToAzimuth=_,e.radiansToDegrees=b,e.degreesToRadians=x,e.convertLength=w,e.convertArea=M,e.isNumber=E,e.isObject=O,e.validateBBox=S,e.validateId=T,e.radians2degrees=j,e.degrees2radians=A,e.distanceToDegrees=C,e.distanceToRadians=L,e.radiansToDistance=P,e.bearingToAngle=I,e.convertDistance=R});e(Vh);Vh.earthRadius,Vh.factors,Vh.unitsFactors,Vh.areaFactors,Vh.feature,Vh.geometry,Vh.point,Vh.points,Vh.polygon,Vh.polygons,Vh.lineString,Vh.lineStrings,Vh.featureCollection,Vh.multiLineString,Vh.multiPoint,Vh.multiPolygon,Vh.geometryCollection,Vh.round,Vh.radiansToLength,Vh.lengthToRadians,Vh.lengthToDegrees,Vh.bearingToAzimuth,Vh.radiansToDegrees,Vh.degreesToRadians,Vh.convertLength,Vh.convertArea,Vh.isNumber,Vh.isObject,Vh.validateBBox,Vh.validateId,Vh.radians2degrees,Vh.degrees2radians,Vh.distanceToDegrees,Vh.distanceToRadians,Vh.radiansToDistance,Vh.bearingToAngle,Vh.convertDistance;var Hh=n(function(t,e){function n(t,e,r){if(null!==t)for(var i,o,a,s,u,c,l,f,h=0,p=0,d=t.type,v="FeatureCollection"===d,g="Feature"===d,m=v?t.features.length:1,y=0;y<m;y++){l=v?t.features[y].geometry:g?t.geometry:t,f=!!l&&"GeometryCollection"===l.type,u=f?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(s=f?l.geometries[_]:l,null!==s){c=s.coordinates;var w=s.type;switch(h=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,y,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],p,y,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-h;o++){if(!1===e(c[i][o],p,y,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(x=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-h;a++){if(!1===e(c[i][o][a],p,y,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===n(s.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,e,r,i){var o=r;return n(t,function(t,n,i,a,s){o=0===n&&void 0===r?t:e(o,t,n,i,a,s)},i),o}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)if(!1===e(t.features[n].properties,n))break;break;case"Feature":e(t.properties,0);break}}function o(t,e,n){var r=n;return i(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)if(!1===e(t.features[n],n))break}function s(t,e,n){var r=n;return a(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function u(t){var e=[];return n(t,function(t){e.push(t)}),e}function c(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function l(t,e,n){var r=n;return c(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),r}function f(t,e){c(t,function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Vh.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],l={type:a,coordinates:c};if(!1===e(Vh.feature(l,r),n,u))return!1}})}function h(t,e,n){var r=n;return f(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function p(t,e){f(t,function(t,r,i){var o=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var s,u=0,c=0,l=0;return!1!==n(t,function(n,a,f,h,p){if(void 0===s||r>u||h>c||p>l)return s=n,u=r,c=h,l=p,void(o=0);var d=Vh.lineString([s,n],t.properties);if(!1===e(d,r,i,p,o))return!1;o++,s=n})&&void 0}}})}function d(t,e,n){var r=n,i=!1;return p(t,function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0}),r}function v(t,e){if(!t)throw new Error("geojson is required");f(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(Vh.lineString(o[a],t.properties),n,r,a))return!1;break}}})}function g(t,e,n){var r=n;return v(t,function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)}),r}function m(t,e){if(e=e||{},!Vh.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),Vh.lineString([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),Vh.lineString([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),Vh.lineString([u[i][a],u[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),Vh.lineString([u[i][o][a],u[i][o][a+1]],s,e)}throw new Error("geojson is invalid")}function y(t,e){if(e=e||{},!Vh.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Vh.point(u,s,e);case"MultiPoint":return i<0&&(i=u.length+i),Vh.point(u[i],s,e);case"LineString":return a<0&&(a=u.length+a),Vh.point(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),Vh.point(u[o][a],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),Vh.point(u[i][a],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),Vh.point(u[i][o][a],s,e)}throw new Error("geojson is invalid")}Object.defineProperty(e,"__esModule",{value:!0}),e.coordEach=n,e.coordReduce=r,e.propEach=i,e.propReduce=o,e.featureEach=a,e.featureReduce=s,e.coordAll=u,e.geomEach=c,e.geomReduce=l,e.flattenEach=f,e.flattenReduce=h,e.segmentEach=p,e.segmentReduce=d,e.lineEach=v,e.lineReduce=g,e.findSegment=m,e.findPoint=y});e(Hh);Hh.coordEach,Hh.coordReduce,Hh.propEach,Hh.propReduce,Hh.featureEach,Hh.featureReduce,Hh.coordAll,Hh.geomEach,Hh.geomReduce;var qh=Hh.flattenEach,Wh=(Hh.flattenReduce,Hh.segmentEach,Hh.segmentReduce,Hh.lineEach,Hh.lineReduce,Hh.findSegment,Hh.findPoint,n(function(t,e){function n(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function r(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function i(t){if(t.length>1&&Vh.isNumber(t[0])&&Vh.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return i(t[0]);throw new Error("coordinates must only contain numbers")}function o(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function a(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function s(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function u(t){return"Feature"===t.type?t.geometry:t}function c(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoord=n,e.getCoords=r,e.containsNumber=i,e.geojsonType=o,e.featureOf=a,e.collectionOf=s,e.getGeom=u,e.getType=c}));e(Wh);Wh.getCoord;var Yh=Wh.getCoords;Wh.containsNumber,Wh.geojsonType,Wh.featureOf,Wh.collectionOf,Wh.getGeom,Wh.getType;function Xh(t){t=t.toString();var e=5381,n=t.length;while(n)e=33*e^t.charCodeAt(--n);return e>>>0}var Zh=6378137,Kh=1/298.257223563,Jh=6356752.3142,Qh={RADIUS:Zh,FLATTENING:Kh,POLAR_RADIUS:Jh},$h=ep,tp=rp;function ep(t){var e,n=0;switch(t.type){case"Polygon":return np(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=np(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=ep(t.geometries[e]);return n}}function np(t){var e=0;if(t&&t.length>0){e+=Math.abs(rp(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(rp(t[n]))}return e}function rp(t){var e,n,r,i,o,a,s,u=0,c=t.length;if(c>2){for(s=0;s<c;s++)s===c-2?(i=c-2,o=c-1,a=0):s===c-1?(i=c-1,o=0,a=1):(i=s,o=s+1,a=s+2),e=t[i],n=t[o],r=t[a],u+=(ip(r[0])-ip(e[0]))*Math.sin(ip(n[1]));u=u*Qh.RADIUS*Qh.RADIUS/2}return u}function ip(t){return t*Math.PI/180}var op={geometry:$h,ring:tp},ap=sp;function sp(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(up(sp,e)),t;case"GeometryCollection":return t.geometries=t.geometries.map(up(sp,e)),t;case"Feature":return t.geometry=sp(t.geometry,e),t;case"Polygon":case"MultiPolygon":return cp(t,e);default:return t}}function up(t,e){return function(n){return t(n,e)}}function cp(t,e){return"Polygon"===t.type?t.coordinates=lp(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(up(lp,e))),t}function lp(t,e){e=!!e,t[0]=fp(t[0],e);for(var n=1;n<t.length;n++)t[n]=fp(t[n],!e);return t}function fp(t,e){return hp(t)===e?t:t.reverse()}function hp(t){return op.ring(t)>=0}function pp(t,e){var n=[],r={};t.features=t.features.filter(function(t){return null!=t&&t.geometry&&t.geometry.type&&t.geometry.coordinates&&Array.isArray(t.geometry.coordinates)&&t.geometry.coordinates.length>0}),ap(t,!0);var i=0;return qh(t,function(t,o){var a=Yh(t);if(0!==a.length){var s=o+1;if(e.idField&&t.properties[e.idField]){var u=t.properties[e.idField];s=Xh(u)%1000019,r[s]={index:i++,idField:u}}if("Polygon"===t.geometry.type)a.forEach(function(e){var r=Object.assign({},t.properties,{coordinates:[e],_id:s});n.push(r)});else{var c=Object.assign({},t.properties,{coordinates:a,_id:s});n.push(c)}}else i++}),{dataArray:n,featureKeys:r}}var dp=function(t){function e(e,n,r){t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function vp(t){var e=new XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}var gp=function(t,e){var n=vp(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new dp(n.statusText,n.status,t.url))},n.send(),n},mp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",yp=function(t,e){return gp(t,function(t,n){if(t)e(t);else if(n){var r=new window.Image,i=window.URL||window.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new window.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):mp}})};function _p(t,e){var n=e.extent,r=new Promise(function(e){bp(t,function(t){e(t)})}),i={images:r,_id:1,dataArray:[{coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return i}function bp(t,e){var n=t,r=[];if("string"===typeof n)yp({url:n},function(t,n){r=n,e(r)});else{var i=n.length,o=0;n.forEach(function(t){yp({url:t},function(t,n){o++,r.push(n),o===i&&e(r)})})}return r}var xp={},wp={},Mp=34,Ep=10,Op=13;function Sp(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Tp(t,e){var n=Sp(t);return function(r,i){return e(n(r),i,t)}}function jp(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Ap(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Cp(t){return t<0?"-"+Ap(-t,6):t>9999?"+"+Ap(t,6):Ap(t,4)}function Lp(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Cp(t.getUTCFullYear())+"-"+Ap(t.getUTCMonth()+1,2)+"-"+Ap(t.getUTCDate(),2)+(i?"T"+Ap(e,2)+":"+Ap(n,2)+":"+Ap(r,2)+"."+Ap(i,3)+"Z":r?"T"+Ap(e,2)+":"+Ap(n,2)+":"+Ap(r,2)+"Z":n||e?"T"+Ap(e,2)+":"+Ap(n,2)+"Z":"")}function Pp(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?Tp(t,e):Sp(t)});return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return wp;if(c)return c=!1,xp;var e,r,i=a;if(t.charCodeAt(i)===Mp){while(a++<o&&t.charCodeAt(a)!==Mp||t.charCodeAt(++a)===Mp);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===Ep?c=!0:r===Op&&(c=!0,t.charCodeAt(a)===Ep&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((r=t.charCodeAt(e=a++))===Ep)c=!0;else if(r===Op)c=!0,t.charCodeAt(a)===Ep&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}t.charCodeAt(o-1)===Ep&&--o,t.charCodeAt(o-1)===Op&&--o;while((r=l())!==wp){var f=[];while(r!==xp&&r!==wp)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function o(e,n){return e.map(function(e){return n.map(function(t){return l(e[t])}).join(t)})}function a(e,n){return null==n&&(n=jp(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")}function s(t,e){return null==e&&(e=jp(t)),o(t,e).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?Lp(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u}}var Ip=Pp(","),Rp=Ip.parse;Pp("\t");function Fp(t,e){var n=e.x,r=e.y,i=e.x1,o=e.y1,a=Rp(t),s=[];return a.forEach(function(t,e){var a=[];n&&r&&(a=[1*t[n],1*t[r]]),i&&o&&(a=[[1*t[n],1*t[r]],[1*t[i],1*t[o]]]),t._id=e+1;var u=Object.assign({},t,{coordinates:a});s.push(u)}),{dataArray:s}}function Dp(t,e){var n=e.x,r=e.y,i=e.x1,o=e.y1,a=e.coordinates,s=[];return t.slice(0).forEach(function(t,e){var u=[];if(n&&r&&(u=[t[n],t[r]]),i&&o&&(u=[[t[n],t[r]],[t[i],t[o]]]),a){var c="Polygon";Array.isArray(a[0])||(c="Point"),Array.isArray(a[0])&&!Array.isArray(a[0][0])&&(c="LineString");var l={type:c,coordinates:[].concat(t[a])};ap(l,!0),u=l.coordinates}t._id=e+1;var f=Object.assign({},t,{coordinates:u});s.push(f)}),{dataArray:s}}function kp(t,e){var n=e.extent,r=e.width,i=e.height,o=e.min,a=e.max,s={_id:1,dataArray:[{data:Array.from(t),width:r,height:i,min:o,max:a,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return s}var Np=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},Bp=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v},zp={read:Np,write:Bp},Up=Gp;function Gp(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Gp.Varint=0,Gp.Fixed64=1,Gp.Bytes=2,Gp.Fixed32=5;var Vp=4294967296,Hp=1/Vp,qp=12,Wp="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function Yp(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return Zp(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return Zp(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return Zp(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return Zp(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return Zp(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return Zp(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function Xp(t){return t.type===Gp.Bytes?t.readVarint()+t.pos:t.pos+1}function Zp(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Kp(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Jp(n,r,e),Qp(r,e)}function Jp(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function Qp(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function $p(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function td(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function ed(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function nd(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function rd(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function id(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function od(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function ad(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function sd(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function ud(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function cd(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ld(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function fd(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function hd(t,e,n){var r="",i=e;while(i<n){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?(o=t[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c<=127&&(c=null))):3===l?(o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a,(c<=2047||c>=55296&&c<=57343)&&(c=null))):4===l&&(o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s,(c<=65535||c>=1114112)&&(c=null))),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}function pd(t,e,n){return Wp.decode(t.subarray(e,n))}function dd(t,e,n){for(var r,i,o=0;o<e.length;o++){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}Gp.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){n=n||this.length;while(this.pos<n){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=cd(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=fd(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=cd(this.buf,this.pos)+cd(this.buf,this.pos+4)*Vp;return this.pos+=8,t},readSFixed64:function(){var t=cd(this.buf,this.pos)+fd(this.buf,this.pos+4)*Vp;return this.pos+=8,t},readFloat:function(){var t=zp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=zp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return n=r[this.pos++],e=127&n,n<128?e:(n=r[this.pos++],e|=(127&n)<<7,n<128?e:(n=r[this.pos++],e|=(127&n)<<14,n<128?e:(n=r[this.pos++],e|=(127&n)<<21,n<128?e:(n=r[this.pos],e|=(15&n)<<28,Yp(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=qp&&Wp?pd(this.buf,e,t):hd(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Gp.Bytes)return t.push(this.readVarint(e));var n=Xp(this);t=t||[];while(this.pos<n)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Gp.Bytes)return t.push(this.readSVarint());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Gp.Bytes)return t.push(this.readBoolean());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Gp.Bytes)return t.push(this.readFloat());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Gp.Bytes)return t.push(this.readDouble());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Gp.Bytes)return t.push(this.readFixed32());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Gp.Bytes)return t.push(this.readSFixed32());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Gp.Bytes)return t.push(this.readFixed64());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Gp.Bytes)return t.push(this.readSFixed64());var e=Xp(this);t=t||[];while(this.pos<e)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Gp.Varint)while(this.buf[this.pos++]>127);else if(e===Gp.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Gp.Fixed32)this.pos+=4;else{if(e!==Gp.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){var e=this.length||16;while(e<this.pos+t)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ld(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ld(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ld(this.buf,-1&t,this.pos),ld(this.buf,Math.floor(t*Hp),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ld(this.buf,-1&t,this.pos),ld(this.buf,Math.floor(t*Hp),this.pos+4),this.pos+=8},writeVarint:function(t){t=+t||0,t>268435455||t<0?Kp(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=dd(this.buf,t,this.pos);var n=this.pos-e;n>=128&&$p(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),zp.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),zp.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&$p(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Gp.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,td,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,ed,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,id,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,nd,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,rd,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,od,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ad,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,sd,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ud,e)},writeBytesField:function(t,e){this.writeTag(t,Gp.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Gp.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Gp.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Gp.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Gp.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Gp.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Gp.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Gp.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Gp.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Gp.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var vd=gd;function gd(t,e){this.x=t,this.y=e}gd.prototype={clone:function(){return new gd(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},gd.convert=function(t){return t instanceof gd?t:Array.isArray(t)?new gd(t[0],t[1]):t};var md=yd;function yd(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(_d,this,e)}function _d(t,e,n){1==t?e.id=n.readVarint():2==t?bd(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function bd(t,e){var n=t.readVarint()+t.pos;while(t.pos<n){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function xd(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=wd(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function wd(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}yd.types=["Unknown","Point","LineString","Polygon"],yd.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];while(t.pos<n){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new vd(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},yd.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;while(t.pos<e){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},yd.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),c=yd.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+s)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];u=f,l(u);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=xd(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i]);break}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Md=Ed;function Ed(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Od,this,e),this.length=this._features.length}function Od(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(Sd(n))}function Sd(t){var e=null,n=t.readVarint()+t.pos;while(t.pos<n){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}Ed.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new md(this._pbf,e,this.extent,this._keys,this._values)};var Td=jd;function jd(t,e){this.layers=t.readFields(Ad,{},e)}function Ad(t,e,n){if(3===t){var r=new Md(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var Cd=Td;function Ld(t,e){var n=new Cd(new Up(t)),r=e.sourceLayer,i=[],o=n.layers[r];if(void 0===o)return null;for(var a=0;a<o.length;a++){var s=o.feature(a),u=s.toGeoJSON(e.tile[0],e.tile[1],e.tile[2]);i.push(u)}var c={type:"FeatureCollection",features:i};return 0===i.length?null:pp(c,e)}var Pd=4096;function Id(t,e){var n=e.tile,r=[],i=new Int32Array(t.length),o=Pd*n[0],a=Pd*n[1];function s(t){return t.map(function(t){var e=(o+t.x<<20-n[2]-4)-215440491,r=(a+t.y<<20-n[2]-4)-106744817;return[e,-r,0]})}for(var u=0;u<t.length;u++){var c=t.feature(u),l=c.loadGeometry(),f=c.properties,h=u+1;if(c.id||e.idField&&f[e.idField]){var p=c.id||f[e.idField];h=Xh(p)%1000019,i[u]=h}for(var d=Fd(l),v=0;v<d.length;v++){var g=d[v].map(function(t){return s(t)});r.push(Object.assign({},f,{_id:h,coordinates:g}))}}return{dataArray:r,featureKeys:i}}function Rd(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],a=t[i],e+=(a.x-o.x)*(o.y+a.y);return e}function Fd(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Rd(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}var Dd={},kd={},Nd=function(t){return kd[t]},Bd=function(t,e){kd[t]=e},zd=function(t){return Dd[t]},Ud=function(t,e){Dd[t]=e};function Gd(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function Vd(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function Hd(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+r}function qd(t){if(0===t.length)throw new Error("mean requires at least one data point");return Hd(t)/t.length}var Wd=Object.freeze({__proto__:null,sum:Hd,max:Gd,min:Vd,mean:qd}),Yd=6378e3;function Xd(t,e){var n=t.dataArray,r=e.size;void 0===r&&(r=10);var i=Zd(n,r),o=i.gridHash,a=i.gridOffset,s=$d(o,a,e);return{yOffset:a.xOffset/360*(256<<20)/2,xOffset:a.xOffset/360*(256<<20)/2,radius:a.xOffset/360*(256<<20)/2,dataArray:s}}function Zd(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.coordinates[1]}var i=34.54083,o=Kd(e,i);if(o.xOffset<=0||o.yOffset<=0)return{gridHash:{},gridOffset:o};for(var a={},s=0;s<t.length;s++){var u=t[s],c=u.coordinates[1],l=u.coordinates[0];if(Number.isFinite(c)&&Number.isFinite(l)){var f=Math.floor((c+90)/o.yOffset),h=Math.floor((l+180)/o.xOffset),p=f+"-"+h;a[p]=a[p]||{count:0,points:[]},a[p].count+=1,a[p].points.push(u)}}return{gridHash:a,gridOffset:o}}function Kd(t,e){var n=Jd(t),r=Qd(e,t);return{yOffset:n,xOffset:r}}function Jd(t){return t/Yd*(180/Math.PI)}function Qd(t,e){return e/Yd*(180/Math.PI)/Math.cos(t*Math.PI/180)}function $d(t,e,n){return Object.keys(t).reduce(function(r,i,o){var a=i.split("-"),s=parseInt(a[0],10),u=parseInt(a[1],10),c={};if(n.field&&n.method){var l=tv(t[i].points,n.field);c[n.method]=Wd[n.method](l)}return Object.assign(c,{_id:o+1,coordinates:[e.xOffset*u-180,e.yOffset*s-90],count:t[i].count}),r.push(c),r},[])}function tv(t,e){return t.map(function(t){return t[e]})}var ev=Math.PI/3,nv=[0,ev,2*ev,3*ev,4*ev,5*ev];function rv(t){return t[0]}function iv(t){return t[1]}function ov(){var t,e,n,r=0,i=0,o=1,a=1,s=rv,u=iv;function c(t){var r,i={},o=[],a=t.length;for(r=0;r<a;++r)if(!isNaN(l=+s.call(null,c=t[r],r,t))&&!isNaN(f=+u.call(null,c,r,t))){var c,l,f,h=Math.round(f/=n),p=Math.round(l=l/e-(1&h)/2),d=f-h;if(3*Math.abs(d)>1){var v=l-p,g=p+(l<p?-1:1)/2,m=h+(f<h?-1:1),y=l-g,_=f-m;v*v+d*d>y*y+_*_&&(p=g+(1&h?1:-1)/2,h=m)}var b=p+"-"+h,x=i[b];x?x.push(c):(o.push(x=i[b]=[c]),x.x=(p+(1&h)/2)*e,x.y=h*n)}return o}function l(t){var e=0,n=0;return nv.map(function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]})}return c.hexagon=function(e){return"m"+l(null==e?t:+e).join("l")+"z"},c.centers=function(){for(var s=[],u=Math.round(i/n),c=Math.round(r/e),l=u*n;l<a+t;l+=n,++u)for(var f=c*e+(1&u)*e/2;f<o+e/2;f+=e)s.push([f,l]);return s},c.mesh=function(){var e=l(t).slice(0,4).join("l");return c.centers().map(function(t){return"M"+t+"m"+e}).join("")},c.x=function(t){return arguments.length?(s=t,c):s},c.y=function(t){return arguments.length?(u=t,c):u},c.radius=function(r){return arguments.length?(t=+r,e=2*t*Math.sin(ev),n=1.5*t,c):t},c.size=function(t){return arguments.length?(r=i=0,o=+t[0],a=+t[1],c):[o-r,a-i]},c.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],a=+t[1][1],c):[[r,i],[o,a]]},c.radius(1)}function av(t){var e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20,i=Math.PI/180,o=t[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u)-215440491,a=r*(c*a+i)-106744817,{x:parseInt(o),y:parseInt(a)}}function sv(t){var e=.5/Math.PI,n=.5,r=-.5/Math.PI,i=.5,o=256<<20,a=t[0],s=t[1];a=((a+215440491)/o-n)/e,s=((s+106744817)/o-i)/r,s=2*(Math.atan(Math.pow(Math.E,s))-Math.PI/4),i=Math.PI/180;var u=s/i,c=a/i;return[c,u]}var uv=6378e3;function cv(t,e){var n=t.dataArray,r=e.size;void 0===r&&(r=10);var i=r/(2*Math.PI*uv)*(256<<20)/2,o=n.map(function(t){var e=av(t.coordinates),n=e.x,r=e.y;return Object.assign({},t,{coordinates:[n,r]})}),a=ov().radius(i).x(function(t){return t.coordinates[0]}).y(function(t){return t.coordinates[1]}),s=a(o),u={radius:i};return u.dataArray=s.map(function(t,n){if(e.field&&e.method){var r=lv(t,e.field);t[e.method]=Wd[e.method](r)}var i={};return i[e.method]=t[e.method],Object.assign({},i,{count:t.length,coordinates:sv([t.x,t.y]),_id:n+1})}),u}function lv(t,e){return t.map(function(t){return t[e]})}function fv(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.map(n)),t}Bd("geojson",pp),Bd("image",_p),Bd("csv",Fp),Bd("json",Dp),Bd("raster",kp),Bd("mvt",Ld),Bd("vector",Id),Ud("grid",Xd),Ud("hexagon",cv),Ud("map",fv);var hv=n(function(t,e){(function(e,n){t.exports=n()})(0,function(){function t(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;e(n,r,u,o,a,s%2),t(n,r,i,o,u-1,s+1),t(n,r,i,u+1,a,s+1)}}function e(t,r,i,o,a,s){while(a>o){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(o,Math.floor(i-c*f/u+h)),d=Math.min(a,Math.floor(i+(u-c)*f/u+h));e(t,r,i,p,d,s)}var v=r[2*i+s],g=o,m=a;n(t,r,o,i),r[2*a+s]>v&&n(t,r,o,a);while(g<m){n(t,r,g,m),g++,m--;while(r[2*g+s]<v)g++;while(r[2*m+s]>v)m--}r[2*o+s]===v?n(t,r,o,m):(m++,n(t,r,m,a)),m<=i&&(o=m+1),i<=m&&(a=m-1)}}function n(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e,n,r,i,o,a){var s,u,c=[0,t.length-1,0],l=[];while(c.length){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=a)for(var d=p;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((p+h)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var g=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(g)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(g))}}return l}function o(t,e,n,r,i,o){var s=[0,t.length-1,0],u=[],c=i*i;while(s.length){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=o)for(var p=h;p<=f;p++)a(e[2*p],e[2*p+1],n,r)<=c&&u.push(t[p]);else{var d=Math.floor((h+f)/2),v=e[2*d],g=e[2*d+1];a(v,g,n,r)<=c&&u.push(t[d]);var m=(l+1)%2;(0===l?n-i<=v:r-i<=g)&&(s.push(h),s.push(d-1),s.push(m)),(0===l?n+i>=v:r+i>=g)&&(s.push(d+1),s.push(f),s.push(m))}}return u}function a(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}var s=function(t){return t[0]},u=function(t){return t[1]},c=function(e,n,r,i,o){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,c=this.ids=new a(e.length),l=this.coords=new o(2*e.length),f=0;f<e.length;f++)c[f]=f,l[2*f]=n(e[f]),l[2*f+1]=r(e[f]);t(c,l,i,0,c.length-1,0)};c.prototype.range=function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},c.prototype.within=function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)};var l={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},f=function(t){this.options=b(Object.create(l),t),this.trees=new Array(this.options.maxZoom+1)};function h(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function p(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:g(r),y:m(i),zoom:1/0,index:e,parentId:-1}}function d(t){return{type:"Feature",id:t.id,properties:v(t),geometry:{type:"Point",coordinates:[y(t.x),_(t.y)]}}}function v(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return b(b({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function g(t){return t/360+.5}function m(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function y(t){return 360*(t-.5)}function _(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function b(t,e){for(var n in e)t[n]=e[n];return t}function x(t){return t.x}function w(t){return t.y}return f.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(p(t[u],u));this.trees[i+1]=new c(s,x,w,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new c(s,x,w,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},f.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=u.range(g(n),m(o),g(i),m(r)),l=[],f=0,h=c;f<h.length;f+=1){var p=h[f],v=u.points[p];l.push(v.numPoints?d(v):this.points[v.index])}return l},f.prototype.getChildren=function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],c=0,l=s;c<l.length;c+=1){var f=l[c],h=i.points[f];h.parentId===t&&u.push(h.numPoints?d(h):this.points[h.index])}if(0===u.length)throw new Error(r);return u},f.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},f.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,c=(n-u)/i,l=(n+1+u)/i,f={features:[]};return this._addTileFeatures(r.range((e-u)/i,c,(e+1+u)/i,l),r.points,e,n,i,f),0===e&&this._addTileFeatures(r.range(1-u/i,c,1,l),r.points,i,n,i,f),e===i-1&&this._addTileFeatures(r.range(0,c,u/i,l),r.points,-1,n,i,f),f.features.length?f:null},f.prototype.getClusterExpansionZoom=function(t){var e=t%32-1;while(e<=this.options.maxZoom){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},f.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],c=u.properties;if(c&&c.cluster?i+c.point_count<=r?i+=c.point_count:i=this._appendLeaves(t,c.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},f.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=e[u],l={type:1,geometry:[[Math.round(this.options.extent*(c.x*i-n)),Math.round(this.options.extent*(c.y*i-r))]],tags:c.numPoints?v(c):this.points[c.index].properties},f=c.numPoints?c.id:this.points[c.index].id;void 0!==f&&(l.id=f),o.features.push(l)}},f.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},f.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=i/(o*Math.pow(2,e)),u=0;u<t.length;u++){var c=t[u];if(!(c.zoom<=e)){c.zoom=e;for(var l=this.trees[e+1],f=l.within(c.x,c.y,s),p=c.numPoints||1,d=c.x*p,v=c.y*p,g=a&&p>1?this._map(c,!0):null,m=(u<<5)+(e+1),y=0,_=f;y<_.length;y+=1){var b=_[y],x=l.points[b];if(!(x.zoom<=e)){x.zoom=e;var w=x.numPoints||1;d+=x.x*w,v+=x.y*w,p+=w,x.parentId=m,a&&(g||(g=this._map(c,!0)),a(g,this._map(x)))}}1===p?n.push(c):(c.parentId=m,n.push(h(d/p,v/p,m,p,g)))}}return n},f.prototype._map=function(t,e){if(t.numPoints)return e?b({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?b({},r):r},f})});function pv(t,e){var n=e.radius;void 0===n&&(n=80);var r=e.maxZoom;void 0===r&&(r=18);var i=e.minZoom;void 0===i&&(i=0);var o=e.field,a=e.zoom;if(void 0===a&&(a=2),t.pointIndex){var s=t.pointIndex.getClusters(t.extent,a);return t.dataArray=dv(s),t}var u=new hv({radius:n,minZoom:i,maxZoom:r,map:function(t){return{sum:t[o]}},reduce:function(t,e){t.sum+=e.sum}}),c={type:"FeatureCollection"};c.features=t.dataArray.map(function(t){var e;return{type:"Feature",properties:(e={},e[o]=t[o],e),geometry:{type:"Point",coordinates:t.coordinates}}}),u.load(c.features);var l=u.getClusters(t.extent,a),f=l.map(function(t,e){return Object.assign({},{coordinates:t.geometry.coordinates,_id:e+1},t.properties)});return t.dataArray=f,{data:t,pointIndex:u}}function dv(t){return t.map(function(t,e){return Object.assign({},{coordinates:t.geometry.coordinates,_id:e+1},t.properties)})}function vv(t){var e=[1/0,1/0,-1/0,-1/0];return t.forEach(function(t){var n=t.coordinates;gv(e,n)}),e}function gv(t,e){return Array.isArray(e[0])?e.forEach(function(e){gv(t,e)}):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function mv(t,e){return yv(t,e)}function yv(t,e){return Array.isArray(t[0])?t.map(function(t){return yv(t,e)}):e(t)}var _v=512,bv=6378137,xv=.01,wv=_v/(bv*Math.PI)/2,Mv=function(t){function e(e){var n=this;t.call(this,e),this.container=this.get("container"),this.initMap(),this.addOverLayer(),setTimeout(function(){n.emit("mapLoad")},10)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){return mf.assign(Ff.scene,{resizeEnable:!0,viewMode:"3D"})},e.project=function(t){var e=Math.PI/180,n=-bv*t[0]*e*wv,r=-bv*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))*wv;return{x:n,y:r}},e.prototype.initMap=function(){mapboxgl.accessToken="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",this.map=new mapboxgl.Map(this._attrs)},e.prototype.asyncCamera=function(t){var e=this;this.engine=t;var n=t._camera,r=t.world,i=t._picking.world;n.matrixAutoUpdate=!1,r.position.x=r.position.y=_v/2,r.matrixAutoUpdate=!1,i.position.x=i.position.y=_v/2,i.matrixAutoUpdate=!1,this.updateCamera(),this.map.on("move",function(){e.updateCamera()})},e.prototype.updateCamera=function(){var t=this.engine,e=t.world,n=t._picking.world,r=t._camera,i=.6435011087932844,o=.5/Math.tan(i/2)*this.map.transform.height*xv,s=i/2,u=Math.PI/2+this.map.transform._pitch,c=Math.sin(s)*o/Math.sin(Math.PI-u-s),l=Math.cos(Math.PI/2-this.map.transform._pitch)*c+o,f=1.1*l;this.pitch>50&&(f=1e3);var h=this.map.transform.point,p=h.x,d=h.y;r.projectionMatrix=this.makePerspectiveMatrix(i,this.map.transform.width/this.map.transform.height,1,f);var v=new a,g=(new a).makeTranslation(0,0,o),m=(new a).makeRotationX(this.map.transform._pitch),y=(new a).makeRotationZ(this.map.transform.angle),_=(new a).makeTranslation(p*xv,-d*xv,0);v.premultiply(g).premultiply(m).premultiply(y).premultiply(_),r.matrixWorld.copy(v);var b=this.map.transform.scale*xv,x=new a,w=new a,M=new a,E=new a;x.makeScale(b,b,1),w.makeTranslation(_v/2,-_v/2,0),M.makeTranslation(-this.map.transform.x,this.map.transform.y,0),E.makeRotationZ(Math.PI),e.matrix=new a,e.matrix.premultiply(E).premultiply(w).premultiply(x),n.matrix=new a,n.matrix.premultiply(E).premultiply(w).premultiply(x)},e.prototype.makePerspectiveMatrix=function(t,e,n,r){var i=new a,o=1/Math.tan(t/2),s=1/(n-r),u=[o/e,0,0,0,0,o,0,0,0,0,(r+n)*s,-1,0,0,2*r*n*s,0];return i.elements=u,i},e.prototype.projectFlat=function(t){return this.map.lngLatToGeodeticCoord(t)},e.prototype.getCenter=function(){return this.map.getCenter()},e.prototype.getCenterFlat=function(){return this.projectFlat(this.getCenter())},e.prototype.addOverLayer=function(){var t=document.getElementById(this.container);this.canvasContainer=t,this.renderDom=document.createElement("div"),this.renderDom.style.cssText+="position: absolute;top: 0; z-index:10;height: 100%;width: 100%;pointer-events: none;",this.renderDom.id="l7_canvaslayer",t.appendChild(this.renderDom)},e.prototype.mixMap=function(t){var e=this.map;t.getZoom=function(){return e.getZoom()},t.getCenter=function(){return e.getCenter()},t.getPitch=function(){return e.getPitch()},t.containerToLngLat=function(t){return e.unproject(t)}},e}(yf),Ev={mapStyle:"amap://styles/ba3e9759545cd618392ef073c0dfda8c?isPublic=true"},Ov={mapStyle:"amap://styles/a80c558f91b29cf56fa47f895fb1773c?isPublic=true"},Sv={mapStyle:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},Tv=Math.PI/180,jv=0,Av=function(t){function e(e,n){t.call(this,n),this.container=e,this.initMap()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){return mf.assign(Ff.scene,{resizeEnable:!0,viewMode:"3D"})},e.project=function(t){var e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20,i=Math.PI/180,o=t[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u)-215440491,a=-(r*(c*a+i)-106744817),{x:o,y:a}},e.prototype.initMap=function(){var t=this;window.forceWebGL=!0;var e=this.get("mapStyle");if(e)switch(e){case"dark":this.set("mapStyle",Ev.mapStyle);break;case"light":this.set("mapStyle",Ov.mapStyle);break;case"blank":this.set("mapStyle",Sv.mapStyle);break;default:this.set("mapStyle",e)}this.set("zooms",[this.get("minZoom"),this.get("maxZoom")]);var n=this.get("map");n instanceof AMap.Map?(this.map=n,this.container=n.getContainer(),this.setMapStyle(e),this.addOverLayer(),setTimeout(function(){t.emit("mapLoad")},100)):(this.map=new AMap.Map(this.container,this._attrs),this.map.on("complete",function(){"blank"===e&&t.map.setLayers([]),t.addOverLayer(),t.emit("mapLoad")}))},e.prototype.asyncCamera=function(t){this._engine=t,this.map.on("camerachange",this.updateCamera.bind(this)),this.updateCamera()},e.prototype.updateCamera=function(){var t=this._engine._camera,e=this.map.getCameraState();if(e&&e.fov){var n=e.fov,r=e.near,i=e.far,o=e.height,a=e.pitch,s=e.rotation,u=e.aspect;a*=Tv,s*=Tv,t.fov=180*n/Math.PI,t.aspect=u,t.near=r,t.far=i,t.updateProjectionMatrix(),t.position.z=o*Math.cos(a),t.position.x=o*Math.sin(a)*Math.sin(s),t.position.y=-o*Math.sin(a)*Math.cos(s),t.up.x=-Math.cos(a)*Math.sin(s),t.up.y=Math.cos(a)*Math.cos(s),t.up.z=Math.sin(a),t.lookAt(0,0,0),t.position.x+=e.position.x,t.position.y+=-e.position.y}},e.prototype.projectFlat=function(t){return this.map.lngLatToGeodeticCoord(t)},e.prototype.getCenter=function(){return this.map.getCenter()},e.prototype.getCenterFlat=function(){return this.projectFlat(this.getCenter())},e.prototype.addOverLayer=function(){this.amapContainer=this.map.getContainer().getElementsByClassName("amap-maps")[0],this.renderDom=document.createElement("div"),this.renderDom.style.cssText+="position: absolute;top: 0;height: 100%;width: 100%;pointer-events: none;",this.renderDom.id="l7_canvaslayer"+jv++,this.amapContainer.appendChild(this.renderDom),this.l7_marker_Container=document.createElement("div"),this.l7_marker_Container.className="l7_marker",this.amapContainer.appendChild(this.l7_marker_Container)},e.prototype.setMapStyle=function(t){var e=this.map;switch(t){case"dark":this.set("mapStyle",Ev.mapStyle);break;case"light":this.set("mapStyle",Ov.mapStyle);break;case"blank":this.set("mapStyle",Sv.mapStyle);break;default:this.set("mapStyle",t)}e.setMapStyle(this.get("mapStyle")),"blank"===t&&e.setLayers([])},e.prototype.mixMap=function(t){var n=this,r=this.map;t.project=e.project,t.getZoom=function(){return r.getZoom()},t.getCenter=function(){return r.getCenter()},t.getSize=function(){return r.getSize()},t.setCenter=function(t){var e=new AMap.LngLat(t[0],t[1]);return r.setCenter(e)},t.getPitch=function(){return r.getPitch()},t.getRotation=function(){return r.getRotation()},t.getStatus=function(){return r.getStatus()},t.getScale=function(){return r.getScale()},t.setZoom=function(t){return r.setZoom(t)},t.getBounds=function(){return r.getBounds()},t.setMapStyle=function(t){return n.setMapStyle(t)},t.setZoomAndCenter=function(t,e){var n=new AMap.LngLat(e[0],e[1]);return r.setZoomAndCenter(t,n)},t.setFeature=function(t){return r.setFeature(t)},t.setBounds=function(t){return r.setBounds(new AMap.Bounds([t[0],t[1]],[t[2],t[3]]))},t.setRotation=function(t){return r.setRotation(t)},t.setStatus=function(t){return r.setStatus(t)},t.zoomIn=function(){return r.zoomIn()},t.zoomOut=function(){return r.zoomOut()},t.panTo=function(t){return r.panTo(new AMap.LngLat(t[0],t[1]))},t.panBy=function(t,e){return r.panBy(t,e)},t.setPitch=function(t){return r.setPitch(t)},t.pixelToLngLat=function(t){var e=new AMap.Pixel(t[0],t[1]);return r.pixelToLngLat(e)},t.lngLatToPixel=function(t){return r.lnglatToPixel(new AMap.LngLat(t[0],t[1]))},t.fitBounds=function(t){return r.setBounds(new AMap.Bounds([t[0],t[1]],[t[2],t[3]]))},t.containerToLngLat=function(t){var e=new AMap.Pixel(t.x,t.y);return r.containerToLngLat(e)},t.lngLatToContainer=function(t){var e=new AMap.LngLat(t[0],t[1]);return r.lngLatToContainer(e)},t.lngLatToGeodeticCoord=function(t){var e=new AMap.LngLat(t[0],t[1]);return r.lngLatToGeodeticCoord(e)}},e}(yf),Cv={amap:Av,mapbox:Mv},Lv=function(t){return Cv[t.toLowerCase()]},Pv=function(t){function e(e){t.call(this,e);var n=this.get("transforms");this._transforms=n||[];var r=this.get("mapType")||"AMap";this.projectFlat=Lv(r).project,this._init()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultCfg=function(){return{data:null,parser:{},transforms:[],options:{}}},e.prototype._init=function(){this._excuteParser();var t=this.get("isCluster")||!1;t&&this._executeCluster(),this._executeTrans(),this.get("projected")||this._projectCoords()},e.prototype.setData=function(t,e){void 0===e&&(e={}),Object.assign(this._attrs,e);var n=this.get("transforms");this._transforms=n||[],this.set("data",t),this._init(),this.emit("SourceUpdate")},e.prototype.updateTransfrom=function(t){var e=t.transforms;this._transforms=e,this.data=ql(this.originData),this._executeTrans(),this._projectCoords()},e.prototype._excuteParser=function(){var t=this.get("parser"),e=t.type;void 0===e&&(e="geojson");var n=this.get("data");this.originData=Nd(e)(n,t),this.data=this.originData,null===this.data||this.get("projected")||(this.data.extent=vv(this.data.dataArray))},e.prototype._executeTrans=function(){var t=this,e=this._transforms;e.forEach(function(e){var n=e.type,r=zd(n)(t.data,e);Object.assign(t.data,r)}),this._transforms=e},e.prototype.transform=function(t){var e=zd(t.type)(this.data,t);Object.assign(this.data,e)},e.prototype._executeCluster=function(){var t=this.get("Cluster")||{},e=this.get("zoom");t.zoom=Math.floor(e),this.set("cluster",t);var n=pv(this.data,t);this.data=n.data,this.pointIndex=n.pointIndex},e.prototype.updateCusterData=function(t,e){var n=this.pointIndex.getClusters(e,t);this.data.dataArray=dv(n);var r=this.get("Cluster")||{};r.zoom=Math.floor(t),r.bbox=e,this.set("cluster",r),this._projectCoords(),this.emit("SourceUpdate")},e.prototype._projectCoords=function(){var t=this;null!==this.data&&this.data.dataArray.forEach(function(e){e.coordinates=mv(e.coordinates,t._coorConvert.bind(t))})},e.prototype._getCoord=function(t){return t.geometry?t=t.geometry.coordinates:t.coordinates&&(t=t.coordinates),t},e.prototype._coordProject=function(t){var e=this;return Array.isArray(t[0][0])?t.map(function(t){return e._coordProject(t)}):Array.isArray(t[0])?t.map(function(t){return e._coorConvert(t)}):this._coorConvert(t)},e.prototype._coorConvert=function(t){var e=this.projectFlat(t);return[e.x,e.y,t[2]||0]},e.prototype.getSelectFeature=function(t){var e=this.get("data"),n=this.get("isCluster")||!1;return e.features&&!n?e.features[t-1]:this.data.dataArray[t-1]},e.prototype.getSeletFeatureIndex=function(t){var e=this.get("data");if(!e.features)return t-1;for(var n=0,r=0;r<this.data.dataArray.length;r++){var i=this.data.dataArray[r];if(i._id===t)break;n++}return n},e.prototype.destroy=function(){this.data=null,this.originData=null},e}(yf),Iv=function(t){function e(e){t.call(this,e),this.attributes={},this.verticesCount=0,this.indexCount=0,this.indexArray=new Int32Array(0),this._init()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._init=function(){this._calculateFeatures(),this._initAttributes(),this._buildFeatures()},e.prototype._initAttributes=function(){this.attributes.positions=new Float32Array(3*this.verticesCount),this.attributes.colors=new Float32Array(4*this.verticesCount),this.attributes.pickingIds=new Float32Array(this.verticesCount),this.attributes.sizes=new Float32Array(this.verticesCount),this.attributes.pickingIds=new Float32Array(this.verticesCount),this.get("uv")&&(this.attributes.uv=new Float32Array(2*this.verticesCount)),this.indexArray=new Int32Array(this.indexCount)},e.prototype.addFeature=function(){},e.prototype.upload=function(){},e.prototype.destroy=function(){},e.prototype.resize=function(){},e.prototype.checkIsClosed=function(t){var e=t[0][0],n=t[0][t[0].length-1];return e[0]===n[0]&&e[1]===n[1]},e.prototype.concat=function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];n+=o.length}for(var a=new ArrayBuffer(n*t.BYTES_PER_ELEMENT),s=0,u=new t(a),c=0,l=e;c<l.length;c+=1){var f=l[c];u.set(f,s),s+=f.length}return u},e.prototype._encodeArray=function(t,e){for(var n=t.color,r=t.id,i=t.pattern,o=t.size,a=t.bufferInfo,s=a.verticesOffset,u=this.get("imagePos"),c=s,l=0;l<e;l++){if(t.hasOwnProperty("color")&&(this.attributes.colors[4*c+4*l]=n[0],this.attributes.colors[4*c+4*l+1]=n[1],this.attributes.colors[4*c+4*l+2]=n[2],this.attributes.colors[4*c+4*l+3]=n[3]),t.hasOwnProperty("id")&&(this.attributes.pickingIds[c+l]=r),t.hasOwnProperty("size")){var f=o;Array.isArray(o)&&2===o.length&&(f=[o[0]]),Array.isArray(o)||(f=[o]),this.attributes.sizes.set(f,(c+l)*f.length)}if(t.hasOwnProperty("pattern")){var h=u[i]||{x:0,y:0};this.attributes.patterns[2*c+2*l]=h.x,this.attributes.patterns[2*c+2*l+1]=h.y}}},e.prototype._calculateWall=function(t){var e=t.size,n=t.bufferInfo,r=n.vertices,i=n.indexOffset,o=n.verticesOffset,a=n.faceNum;this._encodeArray(t,4*a);for(var s=0;s<a;s++){var u=r.slice(3*s,3*s+3),c=r.slice(3*s+3,3*s+6);this._calculateExtrudeFace(u,c,o+4*s,i+6*s,e),t.bufferInfo.verticesOffset+=4,t.bufferInfo.indexOffset+=6}},e.prototype._calculateExtrudeFace=function(t,e,n,r,i){this.attributes.positions.set([t[0],t[1],i,e[0],e[1],i,t[0],t[1],0,e[0],e[1],0],3*n);var o=[1,2,0,3,2,1].map(function(t){return t+n});this.get("uv")&&this.attributes.uv.set([.1,0,0,0,.1,i/2e3,0,i/2e3],2*n),this.indexArray.set(o,r)},e}(yf),Rv=Dv,Fv=Dv;function Dv(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,f=l?e[0]*n:t.length,h=kv(t,0,f,n,!0),p=[];if(!h||h.next===h.prev)return p;if(l&&(h=Hv(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=Math.max(o-r,a-i),c=0!==c?1/c:0}return Bv(h,p,n,r,i,c),p}function kv(t,e,n,r,i){var o,a;if(i===pg(t,e,n,r)>0)for(o=e;o<n;o+=r)a=lg(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=lg(o,t[o],t[o+1],a);return a&&ng(a,a.next)&&(fg(a),a=a.next),a}function Nv(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!ng(r,r.next)&&0!==eg(r.prev,r,r.next))r=r.next;else{if(fg(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Bv(t,e,n,r,i,o,a){if(t){!a&&o&&Zv(t,r,i,o);var s,u,c=t;while(t.prev!==t.next)if(s=t.prev,u=t.next,o?Uv(t,r,i,o):zv(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),fg(t),t=u.next,c=u.next;else if(t=u,t===c){a?1===a?(t=Gv(Nv(t),e,n),Bv(t,e,n,r,i,o,2)):2===a&&Vv(t,e,n,r,i,o):Bv(Nv(t),e,n,r,i,o,1);break}}}function zv(t){var e=t.prev,n=t,r=t.next;if(eg(e,n,r)>=0)return!1;var i=t.next.next;while(i!==t.prev){if($v(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&eg(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Uv(t,e,n,r){var i=t.prev,o=t,a=t.next;if(eg(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=Jv(s,u,e,n,r),h=Jv(c,l,e,n,r),p=t.prevZ,d=t.nextZ;while(p&&p.z>=f&&d&&d.z<=h){if(p!==t.prev&&p!==t.next&&$v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&eg(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&$v(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&eg(d.prev,d,d.next)>=0)return!1;d=d.nextZ}while(p&&p.z>=f){if(p!==t.prev&&p!==t.next&&$v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&eg(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(d&&d.z<=h){if(d!==t.prev&&d!==t.next&&$v(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&eg(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Gv(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!ng(i,o)&&rg(i,r,r.next,o)&&sg(i,o)&&sg(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),fg(r),fg(r.next),r=t=o),r=r.next}while(r!==t);return Nv(r)}function Vv(t,e,n,r,i,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&tg(a,s)){var u=cg(a,s);return a=Nv(a,a.next),u=Nv(u,u.next),Bv(a,e,n,r,i,o),void Bv(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Hv(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,u=kv(t,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(Qv(u));for(c.sort(qv),i=0;i<c.length;i++)Wv(c[i],n),n=Nv(n,n.next);return n}function qv(t,e){return t.x-e.x}function Wv(t,e){if(e=Yv(t,e),e){var n=cg(e,t);Nv(n,n.next)}}function Yv(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&$v(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),sg(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&Xv(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}function Xv(t,e){return eg(t.prev,t,e.prev)<0&&eg(e.next,t,t.next)<0}function Zv(t,e,n,r){var i=t;do{null===i.z&&(i.z=Jv(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Kv(i)}function Kv(t){var e,n,r,i,o,a,s,u,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<c;e++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function Jv(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Qv(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function $v(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function tg(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!ag(t,e)&&(sg(t,e)&&sg(e,t)&&ug(t,e)&&(eg(t.prev,t,e.prev)||eg(t,e.prev,e))||ng(t,e)&&eg(t.prev,t,t.next)>0&&eg(e.prev,e,e.next)>0)}function eg(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ng(t,e){return t.x===e.x&&t.y===e.y}function rg(t,e,n,r){var i=og(eg(t,e,n)),o=og(eg(t,e,r)),a=og(eg(n,r,t)),s=og(eg(n,r,e));return i!==o&&a!==s||(!(0!==i||!ig(t,n,e))||(!(0!==o||!ig(t,r,e))||(!(0!==a||!ig(n,t,r))||!(0!==s||!ig(n,e,r)))))}function ig(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function og(t){return t>0?1:t<0?-1:0}function ag(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&rg(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function sg(t,e){return eg(t.prev,t,t.next)<0?eg(t,e,t.next)>=0&&eg(t,t.prev,e)>=0:eg(t,e,t.prev)<0||eg(t,t.next,e)<0}function ug(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function cg(t,e){var n=new hg(t.i,t.x,t.y),r=new hg(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function lg(t,e,n,r){var i=new hg(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function hg(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pg(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Dv.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(pg(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(pg(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},Dv.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Rv.default=Fv;var dg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){t._calculateFill(e),delete e.bufferInfo})},e.prototype._calculateFill=function(t){var e=t.bufferInfo,n=e.indexArray,r=e.vertices,i=e.indexOffset,o=e.verticesOffset,a=r.length/3;this._encodeArray(t,r.length/3);for(var s=0;s<a;s++)this.attributes.positions.set([r[3*s],r[3*s+1],0],3*(o+s)),this.get("uv")&&this.attributes.uv.set([0,0,1,1,1,0,0,1,1,1,0,0],3*(o+s));t.bufferInfo.verticesOffset+=a,this.indexArray.set(n,i),t.bufferInfo.indexOffset+=n.length},e.prototype._calculateFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){var n=e.coordinates,r={},i=Rv.flatten(n),o=i.vertices,a=i.dimensions,s=i.holes,u=Rv(o,s,a).map(function(e){return t.verticesCount+e});r.vertices=o,r.indexArray=u,r.verticesOffset=t.verticesCount+0,r.indexOffset=t.indexCount+0,t.indexCount+=u.length,t.verticesCount+=o.length/3,e.bufferInfo=r})},e}(Iv),vg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData"),n=0,r=0,i=0;e.forEach(function(e){var o=e.coordinates;o.forEach(function(o){var a=o.length;e.bufferInfo={verticesOffset:n},t._encodeArray(e,a);for(var s=0;s<a;s++)t.attributes.positions[3*n]=o[s][0],t.attributes.positions[3*n+1]=o[s][1],t.attributes.positions[3*n+2]=o[s][2],t.indexArray[2*r]=s+i,t.indexArray[2*r+1]=s+i+1,s===a-1&&(t.indexArray[2*r+1]=n-a+1),n++,r++;i+=a})})},e.prototype._calculateBufferLength=function(){var t=this,e=this.get("layerData");e.forEach(function(e){var n=e.coordinates;n.forEach(function(e){t.verticesCount+=e.length,t.indexCount+=2*e.length-2})})},e.prototype._calculateFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){var n=e.coordinates;n.forEach(function(e){t.verticesCount+=e.length,t.indexCount+=2*e.length})})},e.prototype._calculateLine=function(t){var e=this,n=t.bufferInfo,r=n.indexOffset,i=n.verticesOffset;t.coordinates.forEach(function(n){var o=n.length;e._encodeArray(t,o);for(var a=0;a<o;a++)e.attributes.positions[3*(i+a)]=n[a][0],e.attributes.positions[3*(i+a)+1]=n[a][1],e.attributes.positions[3*(i+a)+2]=n[a][2],e.indexArray[2*(r+a)]=a+2*i,e.indexArray[2*(r+a)+1]=a+2*i+1,a===o-1&&(e.indexArray[2*(r+a)+1]=i+1);i+=o,r+=o})},e}(Iv),gg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){t._calculateTop(e),t._calculateWall(e),delete e.bufferInfo})},e.prototype._calculateFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){var n=e.coordinates,r={},i=Rv.flatten(n),o=t.checkIsClosed(n[0])?n[0].length-1:n[0].length,a=i.vertices,s=i.dimensions,u=i.holes,c=Rv(a,u,s).map(function(e){return t.verticesCount+e});r.vertices=a,r.indexArray=c,r.verticesOffset=t.verticesCount+0,r.indexOffset=t.indexCount+0,r.faceNum=o,t.indexCount+=c.length+6*o,t.verticesCount+=a.length/3+4*o,e.bufferInfo=r})},e.prototype._calculateTop=function(t){var e=t.size,n=t.bufferInfo,r=n.indexArray,i=n.vertices,o=n.indexOffset,a=n.verticesOffset,s=i.length/3;this._encodeArray(t,i.length/3);for(var u=0;u<s;u++)this.attributes.positions.set([i[3*u],i[3*u+1],e],3*(a+u)),this.get("uv")&&this.attributes.uv.set([-1,-1],2*(a+u));t.bufferInfo.verticesOffset+=s,this.indexArray.set(r,o),t.bufferInfo.indexOffset+=r.length},e}(Iv);function mg(t){var e=Rv.flatten(t),n=Rv(e.vertices,e.holes,e.dimensions);return{positions:e.vertices,indexArray:n}}function yg(t){var e=t[0][0],n=t[0][t[0].length-1];e[0]===n[0]&&e[1]===n[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var r=t[0].length,i=Rv.flatten(t),o=[],a=[],s=[],u=0;u<i.vertices.length/3;u++)i.vertices[3*u+2]=1,s.push(0,0,1);o.push.apply(o,i.vertices);var c=Rv(i.vertices,i.holes,i.dimensions);a.push.apply(a,c);for(var l=function(t){var e=i.vertices.slice(3*t,3*t+3),n=i.vertices.slice(3*t+3,3*t+6);0===n.length&&(n=i.vertices.slice(0,3));var r=o.length/3;o.push(e[0],e[1],1,n[0],n[1],1,e[0],e[1],0,n[0],n[1],0);var u=_g([n[0],n[1],1],[e[0],e[1],0],[e[0],e[1],1]);s.push.apply(s,u.concat(u,u,u)),a.push.apply(a,[1,2,0,3,2,1].map(function(t){return t+r}))},f=0;f<r;f++)l(f);return{positions:o,indexArray:a,normals:s}}function _g(t,e,n){var r=new u,i=new u,o=new u,a=new u,s=new u;r.set.apply(r,t),i.set.apply(i,e),o.set.apply(o,n),a.subVectors(o,i),s.subVectors(r,i),a.cross(s),a.normalize();var c=a.x,l=a.y,f=a.z;return[c,l,f]}function bg(){return Eg(30)}function xg(){return Eg(4)}function wg(){return Eg(3)}function Mg(){return Eg(6,1)}function Eg(t,e){void 0===e&&(e=0);for(var n=2*Math.PI/t,r=[],i=0;i<t;i++)r.push(n*i+e*Math.PI/12);var o=r.map(function(t){var e=Math.sin(t+Math.PI/4),n=Math.cos(t+Math.PI/4);return[e,n,0]});return o.push(o[0]),o}var Og=Object.freeze({__proto__:null,circle:bg,square:xg,triangle:wg,hexagon:Mg,cylinder:bg,triangleColumn:wg,hexagonColumn:Mg,squareColumn:xg,polygonPath:Eg}),Sg=Ff.pointShape,Tg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");this._offset=0,this._indexOffset=0,e.forEach(function(e){t._calculateFill(e)})},e.prototype._initAttributes=function(){t.prototype._initAttributes.call(this),this.attributes.miters=new Float32Array(2*this.verticesCount),this.attributes.sizes=new Float32Array(this.verticesCount),this.attributes.shapes=new Float32Array(this.verticesCount)},e.prototype._calculateFeatures=function(){var t=this.get("layerData");this.verticesCount=4*t.length,this.indexCount=6*t.length},e.prototype._calcultateGeometry=function(){var t=this.get("shapeType"),e=this.getShapeFunction(t)([this._getPoints(6)]);this.instanceGeometry=e},e.prototype._calculateFill=function(t){var e=this;t.bufferInfo={verticesOffset:this._offset};var n=t.coordinates,r=t.shape,i=Sg["2d"].indexOf(r)||0,o=n;1===n.length&&(o=n[0][0]),t.bufferInfo={verticesOffset:this._offset},this._encodeArray(t,4),this.attributes.shapes.set([i,i,i,i],this._offset),this.attributes.miters.set([-1,-1,1,-1,1,1,-1,1],2*this._offset);var a=[0,1,2,0,2,3].map(function(t){return t+e._offset});this.indexArray.set(a,1.5*this._offset);for(var s=[],u=0;u<4;u++)s.push.apply(s,o);this.attributes.positions.set(s,3*this._offset),this._offset+=4},e.prototype._getPoints=function(t){return Eg(t,1)},e.prototype.getShape=function(t){var e=Ff.pointShape;if(this.geometryMap[t])return this.geometryMap[t];var n=null;return n=-1!==e["3d"].indexOf(t)?yg([Og[t]()]):(e["2d"].indexOf(t),mg([Og[t]()])),this.geometryMap[t]=n,n},e}(Iv),jg=Ag;function Ag(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}var Cg=Lg;function Lg(t,e,n){return t[0]=e,t[1]=n,t}var Pg=Ig;function Ig(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}var Rg=Fg;function Fg(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}var Dg=kg;function kg(t,e){return t[0]*e[0]+t[1]*e[1]}var Ng=[0,0],Bg=function(t,e,n,r,i){return jg(t,n,r),Pg(t,t),Cg(e,-t[1],t[0]),Cg(Ng,-n[1],n[0]),i/Dg(e,Ng)},zg=function(t,e){return Cg(t,-e[1],e[0]),t},Ug=function(t,e,n){return Rg(t,e,n),Pg(t,t),t},Gg=1e-6,Vg=Hg;function Hg(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}var qg=Wg;function Wg(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}var Yg=Xg;function Xg(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}var Zg=Kg;function Kg(t,e){return t[0]=e[0],t[1]=e[1],t}var Jg=Qg;function Qg(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=Gg*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=Gg*Math.max(1,Math.abs(r),Math.abs(o))}var $g=tm;function tm(t,e){return t[0]===e[0]&&t[1]===e[1]}var em=Rg,nm=rm;function rm(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}var im=nm,om=am;function am(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}var sm=om,um=cm;function cm(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}var lm=fm;function fm(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}var hm=pm;function pm(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var dm=vm;function vm(t,e,n){var r=Math.cos(n),i=Math.sin(n),o=e[0],a=e[1];return t[0]=o*r-a*i,t[1]=o*i+a*r,t}var gm=mm;function mm(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}var ym=_m;function _m(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}var bm=xm;function xm(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}var wm=Mm;function Mm(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}var Em=Om;function Om(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}var Sm=Tm;function Tm(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var jm=Sm,Am=Cm;function Cm(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}var Lm=Am,Pm=Im;function Im(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}var Rm=Pm,Fm=Dm;function Dm(t){var e=t[0],n=t[1];return e*e+n*n}var km=Fm,Nm=Bm;function Bm(t,e){return t[0]=-e[0],t[1]=-e[1],t}var zm=Um;function Um(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}var Gm=Vm;function Vm(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var Hm=qm;function qm(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}var Wm=Ym;function Ym(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}var Xm=Zm;function Zm(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}var Km=Jm;function Jm(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}var Qm=$m;function $m(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var ty=ny,ey=Vg();function ny(t,e,n,r,i,o){var a,s;for(e||(e=2),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)ey[0]=t[a],ey[1]=t[a+1],i(ey,ey,o),t[a]=ey[0],t[a+1]=ey[1];return t}var ry=iy;function iy(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var i=Math.sqrt(r);t[0]=e[0]/i*n,t[1]=e[1]/i*n}else t[0]=e[0],t[1]=e[1];return t}var oy={EPSILON:Gg,create:Vg,clone:qg,fromValues:Yg,copy:Zg,set:Cg,equals:Jg,exactEquals:$g,add:jg,subtract:Rg,sub:em,multiply:nm,mul:im,divide:om,div:sm,inverse:um,min:lm,max:hm,rotate:dm,floor:gm,ceil:ym,round:bm,scale:wm,scaleAndAdd:Em,distance:Sm,dist:jm,squaredDistance:Am,sqrDist:Lm,length:Pm,len:Rm,squaredLength:Fm,sqrLen:km,negate:Nm,normalize:Pg,dot:Dg,cross:zm,lerp:Gm,random:Hm,transformMat2:Wm,transformMat2d:Xm,transformMat3:Km,transformMat4:Qm,forEach:ty,limit:ry},ay=oy.create,sy=oy.copy,uy=oy.dot;function cy(t,e,n,r,i,o){ly(e,n,i,-o),ly(e,n,i,o),t.push.apply(t,r),t.push.apply(t,r)}function ly(t,e,n,r){t.push(n[0],n[1],0),e.push(r)}function fy(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function hy(t,e){return t[0]===e[0]&&t[1]===e[1]}function py(t,e,n){var r=[0,0],i=[0,0],o=[0,0],a=[0,0],s=!1,u=null,c=ay(),l=n||0,f=3,h=[],p=[],d=[],v=[],g=[0,0];e&&(t=t.slice(),t.push(t[0]));for(var m=t.length,y=1;y<m;y++){var _=l,b=t[y-1],x=t[y],w=y<t.length-1?t[y+1]:null;if(!hy(b,x)){if(w){var M=y+1;while(w&&hy(x,w))w=M<t.length-1?t[++M]:null}var E=fy(x,b),O=E+g[g.length-1];if(Ug(r,x,b),u||(u=[0,0],zg(u,r)),s||(s=!0,cy(p,h,v,b,u,1)),d.push(_+0,_+2,_+1),w){Ug(i,w,x);var S=Bg(o,a,r,i,1),T=uy(o,u)<0?-1:1,j=Math.abs(S)>f;if(Math.abs(S)>1e3){cy(p,h,v,x,u,1),d.push(_+1,_+2,_+3),d.push(_+2,_+4,_+3),zg(c,i),sy(u,c),cy(p,h,v,x,u,1),g.push(O,O,O,O),l+=4;continue}j?(S=f,cy(p,h,v,x,u,1),d.push(_+1,_+2,_+3),d.push.apply(d,1===T?[_+2,_+4,_+5]:[_+4,_+5,_+3]),zg(c,i),sy(u,c),cy(p,h,v,x,u,1),g.push(O,O,O,O),l+=4):(cy(p,h,v,x,u,1),d.push(_+1,_+2,_+3),ly(h,v,a,S*-T),p.push.apply(p,x),d.push(_+2,_+4,_+3),d.push(_+4,_+5,_+6),zg(c,i),sy(u,c),cy(p,h,v,x,u,1),g.push(O,O,O,O,O),l+=5)}else zg(u,r),cy(p,h,v,x,u,1),g.push(O,O),d.push(_+1,_+2,_+3),l+=2}}return{normals:h,attrIndex:d,attrPos:p,attrDistance:g,miters:v}}var dy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){t._calculateLine(e),delete e.bufferInfo}),this.hasPattern=e.some(function(t){return t.pattern})},e.prototype._initAttributes=function(){t.prototype._initAttributes.call(this),this.attributes.dashArray=new Float32Array(this.verticesCount),this.attributes.attrDistance=new Float32Array(this.verticesCount),this.attributes.totalDistances=new Float32Array(this.verticesCount),this.attributes.patterns=new Float32Array(2*this.verticesCount),this.attributes.miters=new Float32Array(this.verticesCount),this.attributes.normals=new Float32Array(3*this.verticesCount)},e.prototype._calculateFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e){var n={},r=e.coordinates;Array.isArray(r[0][0])&&(r=r[0]);var i=py(r,!1,t.verticesCount),o=i.normals,a=i.attrIndex,s=i.attrPos,u=i.attrDistance,c=i.miters;n.normals=o,n.arrayIndex=a,n.positions=s,n.attrDistance=u,n.miters=c,n.verticesOffset=t.verticesCount,n.indexOffset=t.indexCount,t.verticesCount+=s.length/3,t.indexCount+=a.length,e.bufferInfo=n})},e.prototype._calculateLine=function(t){var e=t.bufferInfo,n=e.normals,r=e.arrayIndex,i=e.positions,o=e.attrDistance,a=e.miters,s=e.verticesOffset,u=e.indexOffset,c=this.get("style"),l=c.dashArray;void 0===l&&(l=200),this._encodeArray(t,i.length/3);var f=o[o.length-1],h=Array(i.length/3).fill(f),p=l/f,d=Array(i.length/3).fill(p);this.attributes.positions.set(i,3*s),this.indexArray.set(r,u),this.attributes.miters.set(a,s),this.attributes.normals.set(n,3*s),this.attributes.attrDistance.set(o,s),this.attributes.totalDistances.set(h,s),this.attributes.dashArray.set(d,s)},e}(Iv),vy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");e.forEach(function(e,n){t._calculateArc(e,n)}),this.hasPattern=e.some(function(t){return t.pattern})},e.prototype._initAttributes=function(){t.prototype._initAttributes.call(this),this.attributes.instanceArray=new Float32Array(4*this.verticesCount)},e.prototype._calculateArc=function(t,e){var n=this,r=this.get("style"),i=r.segNum;void 0===i&&(i=30);for(var o=t.coordinates,a=function(t){if(n.attributes.positions.set([t,1,t,t,-1,t],e*i*6+6*t),n.attributes.instanceArray.set([o[0][0],o[0][1],o[1][0],o[1][1],o[0][0],o[0][1],o[1][0],o[1][1]],e*i*8+8*t),t!==i-1){var r=[0,1,2,1,3,2].map(function(n){return e*i*2+2*t+n});n.indexArray.set(r,e*i*6+6*t-6*e)}},s=0;s<i;s++)a(s);t.bufferInfo={verticesOffset:e*i*2},this._encodeArray(t,2*i)},e.prototype._calculateFeatures=function(){var t=this.get("layerData"),e=this.get("segNum")||30;this.verticesCount=t.length*e*2,this.indexCount=3*this.verticesCount-6*t.length},e}(Iv),gy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");this._offset=0,e.forEach(function(e){t._calculateFill(e)})},e.prototype._calculateFeatures=function(){var t=this.get("shapeType"),e=this.getShape(t),n=this.get("layerData");this.verticesCount=n.length,this.indexCount=0,this.instanceGeometry=e},e.prototype._calculateFill=function(t){t.bufferInfo={verticesOffset:this._offset};var e=t.coordinates;this._encodeArray(t,1),this.attributes.positions.set(e,3*this._offset),this._offset++},e.prototype.getShape=function(t){var e=Ff.pointShape;return-1!==e["3d"].indexOf(t)?yg([Og[t]()]):(e["2d"].indexOf(t),mg([Og[t]()]))},e}(Iv),my=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._buildFeatures=function(){var t=this,e=this.get("layerData");this._offset=0,this._indexOffset=0,e.forEach(function(e){t._calculateFill(e)})},e.prototype._initAttributes=function(){t.prototype._initAttributes.call(this),this.attributes.miters=new Float32Array(3*this.verticesCount),this.attributes.normals=new Float32Array(3*this.verticesCount),this.attributes.sizes=new Float32Array(3*this.verticesCount)},e.prototype._calculateFeatures=function(){var t=this,e=this.get("layerData");this.geometryMap={},e.forEach(function(e){var n=e.shape,r=t.getShape(n),i=r.positions,o=r.indexArray;t.verticesCount+=i.length/3,t.indexCount+=o.length})},e.prototype._calcultateGeometry=function(){var t=this.get("shapeType"),e=this.getShapeFunction(t)([this._getPoints(6)]);this.instanceGeometry=e},e.prototype._calculateFill=function(t){var e=this;t.bufferInfo={verticesOffset:this._offset};var n=t.coordinates,r=t.shape,i=this.getShape(r),o=i.positions.length/3;this._encodeArray(t,o),this.attributes.miters.set(i.positions,3*this._offset);var a=i.indexArray.map(function(t){return t+e._offset});this.indexArray.set(a,this._indexOffset),i.normals&&this.attributes.normals.set(i.normals,3*this._offset);for(var s=[],u=0;u<o;u++)s.push.apply(s,n);this.attributes.positions.set(s,3*this._offset),this._offset+=o,this._indexOffset+=a.length},e.prototype._getPoints=function(t){return Eg(t,1)},e.prototype.getShape=function(t){var e=Ff.pointShape;if(this.geometryMap[t])return this.geometryMap[t];var n=null;return n=-1!==e["3d"].indexOf(t)?yg([Og[t]()]):(e["2d"].indexOf(t),mg([Og[t]()])),this.geometryMap[t]=n,n},e}(Iv),yy={},_y=function(t,e){return yy[t.toLowerCase()]&&yy[t.toLowerCase()][e.toLowerCase()]},by=function(t,e,n){if(_y(t,e))throw new Error("Render shapeType '"+e+"' existed.");yy[t.toLowerCase()]||(yy[t.toLowerCase()]={}),yy[t.toLowerCase()][e.toLowerCase()]=n};function xy(t,e){if(null===t||void 0===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(xy(a,e))}return r}if("object"===typeof t){var s={};for(var u in t)if(t.hasOwnProperty(u)){var c=t[u];s[u]=xy(c,e)}return s}}function wy(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}by("point","fill",Tg),by("polygon","fill",dg),by("polygon","extrude",gg),by("polygon","line",vg),by("line","line",dy),by("line","arc",vy),by("line","greatCircle",vy),by("heatmap","shape",gy),by("point","shape",gy),by("shape","extrude",my);var My=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,wy(["receive"],this),this.target.addEventListener("message",this.receive,!1)};My.prototype.send=function(t,e,n,r){var i=this,o=n?this.mapId+"_"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:e},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},My.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id,o=function(t,e){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?JSON.stringify(t):null,data:xy(e,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(r.error):e&&e(null,r.data);else if("undefined"!==typeof r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,o);else if("undefined"!==typeof r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=r.data,u=this.parent.getWorkerSource(r.sourceMapId,a[0],s.source);u[a[1]](s,o)}else this.parent[r.type](r.data)},My.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.Actor=My,t.AdditiveBlending=V,t.AlphaFormat=ee,t.Attr=Rh,t.Base=yf,t.BufferGeometry=qi,t.CanvasTexture=$a,t.ClampToEdgeWrapping=Ft,t.Clock=ts,t.Color=f,t.ColorUtil=Ph,t.DataTexture=vn,t.DoubleSide=F,t.EventEmitter=r,t.Float32BufferAttribute=hs,t.FloatType=Zt,t.Global=Ff,t.Group=Va,t.InstancedBufferAttribute=fs,t.InstancedBufferGeometry=ss,t.LineSegments=os,t.LinearFilter=zt,t.LinearMipMapLinearFilter=Gt,t.LuminanceFormat=ie,t.Matrix4=a,t.Mesh=no,t.NearestFilter=kt,t.NormalBlending=G,t.Object3D=ln,t.OrthographicCamera=as,t.PBF=Up,t.PerspectiveCamera=qa,t.PlaneBufferGeometry=Zi,t.Points=ns,t.RGBAFormat=re,t.ScaleController=Sh,t.Scene=fn,t.ShaderMaterial=Qi,t.Source=Pv,t.THREE=ps,t.Texture=dn,t.Uint32BufferAttribute=_,t.UniformsUtils=Ri,t.UnsignedByteType=Vt,t.Util=mf,t.Vector4=i,t.VectorTile=Cd,t.WebGLRenderTarget=Da,t.WebGLRenderer=Qa,t.bindAll=wy,t.createCommonjsModule=n,t.flatten=Ps,t.getArrayBuffer=gp,t.getBuffer=_y,t.getImage=yp,t.getMap=Lv,t.getNormals=py,t.isString=zs,t.lib=vc,t.lib_29=qc,t.lib_3=_c,t.lib_51=pl,t.lib_73=Fl,t.lib_87=Zl,t.lib_91=$l,t.merge=Qu,t.polygonPath=Og,t.registerParser=Bd,t.registerTransform=Ud,t.uniq=Vs,t.unwrapExports=e}),r(["./shared"],function(t){var e=function(e){function n(t,n){e.call(this,n),this.source=t,this._init()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype._init=function(){this._initControllers(),this._initTileAttrs(),this._mapping()},n.prototype.update=function(){this.set("scales",{}),this._initTileAttrs(),this._updateMaping()},n.prototype._initControllers=function(){var e=this.get("scaleOptions"),n=new t.ScaleController({defs:Object.assign({},e)});this.set("scaleController",n)},n.prototype._createScale=function(t){var e=this.get("scales");this._initControllers();var n=e[t];return n||(n=this.createScale(t),e[t]=n),n},n.prototype.createScale=function(t){var e=this.source.data.dataArray,n=this.get("scales"),r=n[t],i=this.get("scaleController");return r||(r=i.createScale(t,e),n[t]=r),r},n.prototype._getAttrValues=function(t,e){for(var n=t.scales,r=[],i=0;i<n.length;i++){var o=n[i],a=o.field;"identity"===o.type?r.push(o.value):r.push(e[a])}var s=r.indexOf("zoom");-1!==s&&(r[s]=t.zoom);var u=t.mapping.apply(t,r);return u},n.prototype._mapping=function(){for(var e=this.get("attrs"),n=[],r=this.source.data.dataArray,i=0;i<r.length;i++){var o=r[i],a={};for(var s in a.id=r[i]._id,e)if(e.hasOwnProperty(s)){var u=e[s],c=u.names,l=this._getAttrValues(u,o);if(c.length>1)for(var f=0;f<l.length;f++){var h=l[f],p=c[f];a[p]=t.Util.isArray(h)&&1===h.length?h[0]:h}else a[c[0]]=1===l.length?l[0]:l}a.coordinates=o.coordinates,n.push(a)}e.hasOwnProperty("filter")&&n.forEach(function(t){!1===t.filter&&(t.color[3]=0,t.id=-t.id)}),this.layerData=n},n.prototype._updateMaping=function(){for(var e=this.get("attrs"),n=this.source.data.dataArray,r=this.layerData,i=0;i<n.length;i++){var o=n[i];for(var a in e)if(e.hasOwnProperty(a)&&e[a].neadUpdate){var s=e[a],u=s.names,c=this._getAttrValues(s,o);if(u.length>1)for(var l=0;l<c.length;l++){var f=c[l],h=u[l];r[i][h]=t.Util.isArray(f)&&1===f.length?f[0]:f}else r[i][u[0]]=1===c.length?c[0]:c;s.neadUpdate=!0}}},n.prototype._initTileAttrs=function(){var t=this.get("attrOptions");for(var e in t)t.hasOwnProperty(e)&&this._updateTileAttr(e)},n.prototype._updateTileAttr=function(e){var n=this,r=this.get("attrs"),i=this.get("attrOptions"),o=i[e];o.neadUpdate=!0;for(var a=t.Util.upperFirst(e),s=this._parseFields(o.field),u=[],c=0;c<s.length;c++){var l=s[c],f=n._createScale(l);"color"===e&&t.Util.isNil(o.values)&&(o.values=t.Global.colors),u.push(f)}o.scales=u;var h=new t.Attr[a](o);r[e]=h},n.prototype._parseFields=function(e){return t.Util.isArray(e)?e:t.Util.isString(e)?e.split("*"):[e]},n}(t.Base),n=t.Global.pointShape,r=function(t){this.tileID=t.id,this.source=t.sourceID,this.params=t};function i(e,n){var r=t.getArrayBuffer({url:e.url},function(e,r){e?n(e):r&&n(null,{vectorTile:new t.VectorTile(new t.PBF(r.data)),rawData:r.data})});return function(){r.abort(),n()}}r.prototype.parse=function(n,r,i,o){this.status="parsing",this.data=n;var a=this._layerStyleGroupBySourceID(r)[this.source],s=this.tileID.split("_"),u={};for(var c in a){var l=n.layers[c];if(void 0===l)return null;var f=a[c][0];f.sourceOption.parser.type="vector",f.sourceOption.parser.tile=s;for(var h=new t.Source(Object.assign({},f.sourceOption,{mapType:f.mapType,projected:!0,data:n.layers[c]})),p=0;p<a[c].length;p++){var d=a[c][p],v=new e(h,d);"point"===d.type&&(d.shape=this._getPointShape(v));var g=t.getBuffer(d.type,d.shape),m=new g({layerData:v.layerData,shape:d.shape,style:d});u[d.layerId]={buffer:{attributes:m.attributes,indexArray:m.indexArray},shape:d.shape,layerId:d.layerId,sourcelayer:c,tileId:this.tileID,featureKey:h.data.featureKeys.slice(0)}}}this.status="done",o(null,Object.assign({},u))},r.prototype._layerStyleGroupBySourceID=function(t){var e={};for(var n in t){var r=t[n].sourceOption.id,i=t[n].sourceOption.parser.sourceLayer;e[r]||(e[r]={}),e[r][i]||(e[r][i]=[]),e[r][i].push(t[n])}return e},r.prototype._getPointShape=function(t){var e=null;if(!t.layerData[0].hasOwnProperty("shape"))return"normal";for(var r=0;r<t.layerData.length;r++)if(e=t.layerData[r].shape,void 0!==e)break;return-1!==n["2d"].indexOf(e)?"fill":-1!==n["3d"].indexOf(e)?"extrude":"text"};var o=function(t,e,n){this.actor=t,this.layerStyle=e,this.loadVectorData=n||i,this.loaded={},this.loading={}};o.prototype.loadTile=function(t,e){var n=this,i=t.id;this.loading||(this.loading={});var o=this.loading[i]=new r(t);o.abort=this.loadVectorData(t,function(t,r){if(t||!r)return o.status="done",n.loaded[i]=o,e(t);o.vectorTile=r.vectorTile;var a=r.rawData;o.parse(r.vectorTile,n.layerStyle,n.actor,function(t,n){if(t||!n)return e(t);e(null,{buffer:n,rawTileData:a.slice(0)})}),n.loaded=n.loaded||{},n.loaded[i]=o})},o.prototype.abortTile=function(t,e){var n=this.loading,r=t.id;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},o.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.id,i=this;if(n&&n[r]){var o=n[r],a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerStyle,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},o.prototype.removeTile=function(t,e){var n=this.loaded,r=t.id;n&&n[r]&&delete n[r],e()},o.prototype.unloadTile=function(){},o.prototype.hasTransition=function(){};var a=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.workerSourceTypes={vector:o},this.workerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.layerStyles={}};return a.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.sourceID).loadTile(e,n)},a.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.sourceID).abortTile(e,n)},a.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.sourceID).removeTile(e,n)},a.prototype.setLayers=function(t,e,n){if(this.layerStyles[t]=e,this.workerSources[t])for(var r in this.workerSources[t].vector)this.workerSources[t].vector[r].layerStyle=e;n()},a.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.layerStyles[t])}return this.workerSources[t][e][n]},self.worker=new a(self),a}),r(["./shared"],function(t){function e(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var n='.l7-marker {\n\tposition: absolute !important;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 5;\n}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    flex-direction: column;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    flex-direction: column-reverse;\n}\n\n.l7-popup-anchor-left {\n    -webkit-flex-direction: row;\n    flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-flex;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\talign-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\talign-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\talign-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\talign-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\tuser-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\tborder-bottom: 1px solid #ccc;\n\twidth: 26px;\n\theight: 26px;\n\tline-height: 26px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: black;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 4px;\n\tborder-top-right-radius: 4px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-top,\n.l7-bottom {\n\tposition: absolute;\n\tz-index: 1000;\n\tpointer-events: none;\n\t}\n.l7-top {\n\ttop: 0;\n\t}\n.l7-right {\n\tright: 0;\n\t}\n.l7-bottom {\n\tbottom: 0;\n\t}\n.l7-left {\n\tleft: 0;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}\n.l7-right .l7-control {\n\tfloat: right;\n\t}\n.l7-top .l7-control {\n\tmargin-top: 10px;\n\t}\n.l7-bottom .l7-control {\n\tmargin-bottom: 10px;\n\t}\n.l7-left .l7-control {\n\tmargin-left: 10px;\n\t}\n.l7-right .l7-control {\n\tmargin-right: 10px;\n  }\n  \n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n\tcolor: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n\tfont-size: 11px;\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #777;\n\tborder-top: none;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-moz-box-sizing: border-box;\n\t     box-sizing: border-box;\n\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.5);\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tbox-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n\t}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 5px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url("data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 standalone%3D%22no%22%3F%3E%3C!DOCTYPE svg PUBLIC %22-%2F%2FW3C%2F%2FDTD SVG 1.1%2F%2FEN%22 %22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg t%3D%221566292427369%22 class%3D%22icon%22 viewBox%3D%220 0 1024 1024%22 version%3D%221.1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 p-id%3D%228341%22 width%3D%2232%22 height%3D%2232%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cstyle type%3D%22text%2Fcss%22%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath d%3D%22M256 341.333333l256 128 256-128-256-128-256 128z m276.864-208.384l341.034667 173.909334c20.736 10.581333 28.202667 34.56 16.682666 53.632a41.386667 41.386667 0 0 1-16.64 15.317333l-341.077333 173.909333a46.336 46.336 0 0 1-41.728 0L150.101333 375.808c-20.736-10.581333-28.202667-34.56-16.682666-53.632a41.386667 41.386667 0 0 1 16.64-15.317333l341.077333-173.909334c12.970667-6.613333 28.757333-6.613333 41.728 0z m0 587.349334a45.653333 45.653333 0 0 1-41.728 0l-341.034667-176.938667c-20.736-10.752-28.202667-35.157333-16.682666-54.528a41.642667 41.642667 0 0 1 16.64-15.573333 34.901333 34.901333 0 0 1 32.213333 0l308.906667 160.213333c12.928 6.741333 28.714667 6.741333 41.685333 0l308.864-160.213333a34.901333 34.901333 0 0 1 32.170667 0c20.736 10.752 28.202667 35.157333 16.682666 54.528a41.642667 41.642667 0 0 1-16.64 15.573333l-341.077333 176.938667z m0 170.666666a45.653333 45.653333 0 0 1-41.728 0l-341.034667-176.938666c-20.736-10.752-28.202667-35.157333-16.682666-54.528a41.642667 41.642667 0 0 1 16.64-15.573334 34.901333 34.901333 0 0 1 32.213333 0l308.906667 160.213334c12.928 6.741333 28.714667 6.741333 41.685333 0l308.864-160.213334a34.901333 34.901333 0 0 1 32.170667 0c20.736 10.752 28.202667 35.157333 16.682666 54.528a41.642667 41.642667 0 0 1-16.64 15.573334l-341.077333 176.938666z%22 fill%3D%22%23000000%22 p-id%3D%228342%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E");\n\twidth: 36px;\n\theight: 36px;\n\t}\n.l7-retina .l7-control-layers-toggle {\n\tbackground-image: url("data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 standalone%3D%22no%22%3F%3E%3C!DOCTYPE svg PUBLIC %22-%2F%2FW3C%2F%2FDTD SVG 1.1%2F%2FEN%22 %22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg t%3D%221566292427369%22 class%3D%22icon%22 viewBox%3D%220 0 1024 1024%22 version%3D%221.1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 p-id%3D%228341%22 width%3D%2232%22 height%3D%2232%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cstyle type%3D%22text%2Fcss%22%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath d%3D%22M256 341.333333l256 128 256-128-256-128-256 128z m276.864-208.384l341.034667 173.909334c20.736 10.581333 28.202667 34.56 16.682666 53.632a41.386667 41.386667 0 0 1-16.64 15.317333l-341.077333 173.909333a46.336 46.336 0 0 1-41.728 0L150.101333 375.808c-20.736-10.581333-28.202667-34.56-16.682666-53.632a41.386667 41.386667 0 0 1 16.64-15.317333l341.077333-173.909334c12.970667-6.613333 28.757333-6.613333 41.728 0z m0 587.349334a45.653333 45.653333 0 0 1-41.728 0l-341.034667-176.938667c-20.736-10.752-28.202667-35.157333-16.682666-54.528a41.642667 41.642667 0 0 1 16.64-15.573333 34.901333 34.901333 0 0 1 32.213333 0l308.906667 160.213333c12.928 6.741333 28.714667 6.741333 41.685333 0l308.864-160.213333a34.901333 34.901333 0 0 1 32.170667 0c20.736 10.752 28.202667 35.157333 16.682666 54.528a41.642667 41.642667 0 0 1-16.64 15.573333l-341.077333 176.938667z m0 170.666666a45.653333 45.653333 0 0 1-41.728 0l-341.034667-176.938666c-20.736-10.752-28.202667-35.157333-16.682666-54.528a41.642667 41.642667 0 0 1 16.64-15.573334 34.901333 34.901333 0 0 1 32.213333 0l308.906667 160.213334c12.928 6.741333 28.714667 6.741333 41.685333 0l308.864-160.213334a34.901333 34.901333 0 0 1 32.170667 0c20.736 10.752 28.202667 35.157333 16.682666 54.528a41.642667 41.642667 0 0 1-16.64 15.573334l-341.077333 176.938666z%22 fill%3D%22%23000000%22 p-id%3D%228342%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E");\n\tbackground-size: 26px 26px;\n\t}\n.l7-touch .l7-control-layers-toggle {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n\tdisplay: none;\n\t}\n.l7-control-layers-expanded .l7-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.l7-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tcolor: #333;\n\tbackground: #fff;\n\t}\n.l7-control-layers-scrollbar {\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tpadding-right: 5px;\n\t}\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.l7-control-layers label {\n\tdisplay: block;\n\t}\n.l7-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #ddd;\n\tmargin: 5px -10px 5px -6px;\n\t}\n\n';e(n);var r=function(e){this.container=e;var n=new t.PerspectiveCamera(45,1,1,2e6);this.camera=n,this.updateSize(),window.addEventListener("resize",this.updateSize.bind(this))};r.prototype.updateSize=function(){var t=this.container;this.camera.aspect=t.clientWidth/t.clientHeight,this.camera.updateProjectionMatrix()};var i=function(t){this.container=t,this.initRender(),this.updateSize(),window.addEventListener("resize",this.updateSize.bind(this),!1)};function o(t){if(t){if(t.children)for(var e=0;e<t.children.length;e++){var n=t.children[e];o(n)}t.geometry&&(t.geometry.dispose(),t.geometry=null),t.material&&(t.material.map&&(t.material.map.dispose(),t.material.map=null),t.material.dispose(),t.material=null)}}function a(t,e){if(t){if(t.children)for(var n=0;n<t.children.length;n++){var r=t.children[n];a(r,e)}t.material&&t.material.updateUninform(e)}}i.prototype.initRender=function(){this.renderer=new t.WebGLRenderer({antialias:!0,alpha:!0,autoClear:!1}),this.renderer.setClearColor(16711680,0),this.pixelRatio=window.devicePixelRatio,this.renderer.setPixelRatio(this.pixelRatio),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.renderer.shadowMap.enabled=!1,this.container.appendChild(this.renderer.domElement)},i.prototype.updateSize=function(){this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)};var s=1,u=function(e,n,r){this._world=e,this._renderer=n,this._camera=r,this._pickingScene=new t.Scene,this.world=new t.Group,this._pickingScene.add(this.world);var i=this._renderer.getSize();this._width=i.width,this._height=i.height;var o={minFilter:t.LinearFilter,magFilter:t.LinearFilter,format:t.RGBAFormat,stencilBuffer:!1,depthBuffer:!0};this.pixelBuffer=new Uint8Array(4),this._pickingTexture=new t.WebGLRenderTarget(1,1,o),this._nextId=1,this._initEvents()};function c(t,e,n,r){return new u(t,e,n,r)}u.prototype._initEvents=function(){this._resizeHandler=this._resizeTexture.bind(this),window.addEventListener("resize",this._resizeHandler,!1)},u.prototype.pickdata=function(t){var e={x:t.offsetX,y:t.offsetY,type:t.type,_parent:t};if("touch"===t.type.substr(0,5)){if(0===t.touches.length)return;var n=t.touches[0];e={x:n.clientX,y:n.clientY,type:t.type,_parent:n}}var r={x:0,y:0};r.x=e.x/this._width*2-1,r.y=-e.y/this._height*2+1,this._pickAllObject(e,r)},u.prototype._resizeTexture=function(){var t=this._renderer.getSize();this._width=t.width,this._height=t.height,this._pickingTexture.setSize(1,1),this._needUpdate=!0},u.prototype._update=function(t){var e=this._pickingTexture;this._camera.setViewOffset(this._width,this._height,t.x,t.y,1,1),this._renderer.render(this._pickingScene,this._camera,e),this._camera.clearViewOffset(),this._renderer.readRenderTargetPixels(e,0,0,1,1,this.pixelBuffer)},u.prototype._filterObject=function(t){this.world.children.forEach(function(e,n){e.visible=n===t})},u.prototype._layerIsVisable=function(t){for(var e=this._world.getLayers(),n=!1,r=0;r<e.length;r++){var i=e[r];if(t.name===i.layerId){n=i.get("visible");break}}return n},u.prototype._layerisListened=function(t,e){for(var n=this._world.getLayers(),r=!1,i=0;i<n.length;i++){var o=n[i];if(t.name===o.layerId){if("mouseup"===e||"mousedown"===e){r=o.getListeners(e).length>0||o.getListeners("click").length>0;break}r=o.getListeners(e).length>0;break}}return r},u.prototype._pickAllObject=function(t,e){var n=this;this.world.children.forEach(function(r,i){if(n._layerIsVisable(r)&&n._layerisListened(r,t.type)){n._filterObject(i);var o=n._pick(t,e,r.name);o.type=t.type,o._parent=t._parent,n._world.emit("pick-"+r.name,o)}})},u.prototype._pick=function(t,e,n){this._update(t);var r=255*this.pixelBuffer[2]*255+255*this.pixelBuffer[1]+this.pixelBuffer[0];16646655!==r&&0!==this.pixelBuffer[3]||(r=-999);var i={x:t.x,y:t.y},o={layerId:n,featureId:r,point2d:i};return o},u.prototype.add=function(t){this.world.add(t),this._needUpdate=!0},u.prototype.remove=function(t){this.world.remove(t),this._needUpdate=!0},u.prototype.getNextId=function(){return s++},u.prototype.destroy=function(){window.removeEventListener("resize",this._resizeHandler,!1),o(this._pickingScene),this._pickingScene=null,this._pickingTexture=null,this._pixelBuffer=null,this._world=null,this._renderer=null,this._camera=null};var l=function(e){function n(n,o){e.call(this),this._scene=new t.Scene,this._camera=new r(n).camera,this._render=new i(n),this._renderer=this._render.renderer,this._world=o,this.world=new t.Group,this._scene.add(this.world),this._picking=c(this._world,this._renderer,this._camera),this.clock=new t.Clock,this.composerLayers=[]}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype._initPostProcessing=function(){this.composerLayers.forEach(function(t){t.visible&&t.render()})},n.prototype.update=function(){var t=this;this.redraw(),setTimeout(function(){t.redraw()},50)},n.prototype.redraw=function(){this._renderer.clear(),this._renderer.render(this._scene,this._camera),this._initPostProcessing()},n.prototype.destroy=function(){o(this._scene),this.composerLayers.forEach(function(t){t.distory()}),o(this.composerLayers),this._picking.destroy(),this._picking=null,this._world=null,this.clock=null,this._camera=null,this._renderer=null},n.prototype.renderScene=function(t){this._renderer.render(t,this._camera)},n.prototype.run=function(){this.update(),this.engineID=requestAnimationFrame(this.run.bind(this))},n.prototype.stop=function(){cancelAnimationFrame(this.engineID)},n.prototype.resize=function(){this._render.updateSize(),this.update()},n}(t.EventEmitter),f={},h=function(t){return f[t.toLowerCase()]},p=function(t,e){if(h(t))throw new Error("Layer type '"+t+"' existed.");f[t]=e},d=function(e){t.Util.assign(this,e),this.mesh||(this.mesh=this.layer),this._init()};d.prototype._init=function(){this._initControllers(),this._initAttrs(),this._mapping()},d.prototype.update=function(){this.mesh.set("scales",{}),this._initAttrs(),this._updateMaping()},d.prototype.reMapping=function(){this.mesh.set("scales",{}),this._initAttrs(),this._mapping()},d.prototype._initControllers=function(){var e=this.layer.get("scaleOptions"),n=new t.ScaleController({defs:Object.assign({},e)});this.mesh.set("scaleController",n)},d.prototype._createScale=function(t){var e=this.mesh.get("scales");this._initControllers();var n=e[t];return n||(n=this.createScale(t),e[t]=n),n},d.prototype.createScale=function(t){var e=this.mesh.layerSource.data.dataArray,n=this.mesh.get("scales"),r=n[t],i=this.mesh.get("scaleController");return r||(r=i.createScale(t,e),n[t]=r),r},d.prototype._getAttrValues=function(t,e){for(var n=t.scales,r=[],i=0;i<n.length;i++){var o=n[i],a=o.field;"identity"===o.type?r.push(o.value):r.push(e[a])}var s=r.indexOf("zoom");-1!==s&&(r[s]=t.zoom);var u=t.mapping.apply(t,r);return u},d.prototype._mapping=function(){for(var e=this.mesh.get("attrs"),n=[],r=this.mesh.layerSource.data.dataArray,i=0;i<r.length;i++){var o=r[i],a={};if(a.id=r[i]._id,e.hasOwnProperty("filter")){var s=e.filter,u=this._getAttrValues(s,o);if(!u[0])continue}for(var c in e)if(e.hasOwnProperty(c)){var l=e[c],f=l.names,h=this._getAttrValues(l,o);if(f.length>1)for(var p=0;p<h.length;p++){var d=h[p],v=f[p];a[v]=t.Util.isArray(d)&&1===d.length?d[0]:d}else a[f[0]]=1===h.length?h[0]:h}a.coordinates=o.coordinates,n.push(a)}this.mesh.layerData=n},d.prototype._updateMaping=function(){for(var e=this.mesh.get("attrs"),n=this.mesh.layerSource.data.dataArray,r=this.mesh.layerData,i=0;i<n.length;i++){var o=n[i];for(var a in e)if(e.hasOwnProperty(a)&&e[a].neadUpdate){var s=e[a],u=s.names,c=this._getAttrValues(s,o);if(u.length>1)for(var l=0;l<c.length;l++){var f=c[l],h=u[l];r[i][h]=t.Util.isArray(f)&&1===f.length?f[0]:f}else r[i][u[0]]=1===c.length?c[0]:c}}},d.prototype._initAttrs=function(){var t=this.layer.get("attrOptions");for(var e in t)t.hasOwnProperty(e)&&this._updateTileAttr(e)},d.prototype._updateTileAttr=function(e){for(var n=this,r=this.mesh.get("attrs"),i=this.layer.get("attrOptions"),o=i[e],a=t.Util.upperFirst(e),s=this._parseFields(o.field),u=[],c=0;c<s.length;c++){var l=s[c],f=n._createScale(l);"color"===e&&t.Util.isNil(o.values)&&(o.values=t.Global.colors),u.push(f)}var h=new t.Attr[a](Object.assign({},o,{scales:u}));r[e]=h},d.prototype._parseFields=function(e){return t.Util.isArray(e)?e:t.Util.isString(e)?e.split("*"):[e]},d.prototype.getLegendCfg=function(e,n){var r=this;if(void 0===n&&(n="color"),"heatmap"===this.layer.type&&"heatmap"===this.layer.shapeType)return this.get("styleOptions").rampColors;var i=this.layer.get("scales"),o=i[e],a=this.layer.get("attrs")[n],s={};if(o){var u=o.ticks;s.value=u,s.type=o.type;var c=u.map(function(i){var o,s=r._getAttrValues(a,(o={},o[e]=i,o));return"color"===n?t.ColorUtil.colorArray2RGBA(s):s});s[n]=c}return s};var v=function(e){t.Util.assign(this,e),this.pickObject3D=new t.Object3D,this.addToPicking(this.pickObject3D)};v.prototype.getPickingId=function(){return this.layer.scene._engine._picking.getNextId()},v.prototype.addToPicking=function(t){t.name=this.layer.layerId,this.layer.scene._engine._picking.add(t)},v.prototype.removePickingObject=function(t){this.layer.scene._engine._picking.remove(t)},v.prototype.removePickingMesh=function(t){this.pickObject3D.remove(t),o(t)},v.prototype.removePickMeshByName=function(t){for(var e=0;e<this.pickObject3D.children.length;e++)this.pickObject3D.children[e].name===t&&this.removePickingMesh(this.pickObject3D.children[e])},v.prototype.removeAllMesh=function(){var t=this;this.pickObject3D.children.forEach(function(e){t.pickObject3D.remove(e),o(e)})},v.prototype.addPickMesh=function(e){var n=this,r=e.material.clone();r.defines.PICK=!0;var i=new t.THREE[e.type](e.geometry,r);i.name=e.name,i.onBeforeRender=function(){var t=n.layer.scene.getZoom();a(i,{u_zoom:t})},this.pickObject3D.add(i)};var g=["start","process","end","reset"],m=function(t){var e=this._getDefaultCfg();Object.assign(this,e,t),this._eventHandlers=[],this._bindEvents()};m.prototype._getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},m.prototype._start=function(t){this.preStart(t),this.start(t),this.afterStart(t)},m.prototype.preStart=function(){},m.prototype.start=function(){},m.prototype.afterStart=function(){},m.prototype._process=function(t){this.preProcess(t),this.process(t),this.afterProcess(t)},m.prototype.preProcess=function(){},m.prototype.process=function(){},m.prototype.afterProcess=function(){},m.prototype._end=function(t){this.preEnd(t),this.end(t),this.afterEnd(t)},m.prototype.preEnd=function(){},m.prototype.end=function(){},m.prototype.afterEnd=function(){},m.prototype._reset=function(){this.preReset(),this.reset(),this.afterReset()},m.prototype.preReset=function(){},m.prototype.reset=function(){},m.prototype.afterReset=function(){},m.prototype._bindEvents=function(){var e=this;t.lib_87(g,function(n){var r=e[n+"Event"],i=t.lib_29(e,"_"+n);e.layer.on(r,i),e._eventHandlers.push({type:r,handler:i})})},m.prototype._unbindEvents=function(){var e=this,n=this._eventHandlers;t.lib_87(n,function(t){e.layer.off(t.type,t.handler)})},m.prototype.destory=function(){this._unbindEvents(),this._reset()};var y=function(t){function e(e){t.call(this,Object.assign({},{processEvent:"mousemove",resetEvent:"mouseleave"},e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){this.layer._addActiveFeature(t),this.layer.scene._engine.update()},e.prototype.reset=function(){this.layer._resetStyle(),this.layer.scene._engine.update()},e}(m),_=function(t){function e(e){t.call(this,Object.assign({},{processEvent:"click"},e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){this.layer._addActiveFeature(t),this.layer.scene._engine.update()},e}(m);function b(t,e){var n=0;return function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];var o=(new Date).getTime();if(!(o-n<e))return n=o,t.apply(void 0,r)}}var x=function(t){function e(e){t.call(this,Object.assign({},{endEvent:"camerachange"},e)),window.addEventListener("hashchange",this._onHashChange.bind(this),!1),this._updateHash=b(this._updateHashUnthrottled.bind(this),300)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.end=function(){this._updateHash()},e.prototype.reset=function(){},e.prototype._getHashString=function(){var t=this.layer.getCenter(),e=Math.round(100*this.layer.getZoom())/100,n=Math.ceil((e*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,n),i=Math.round(t.lng*r)/r,o=Math.round(t.lat*r)/r,a=this.layer.getRotation(),s=this.layer.getPitch(),u="";return u+="#"+e+"/"+o+"/"+i,(a||s)&&(u+="/"+Math.round(10*a)/10),s&&(u+="/"+Math.round(s)),u},e.prototype._onHashChange=function(){var t=window.location.hash.replace("#","").split("/");return t.length>=3&&(this.layer.setStatus({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},e.prototype._updateHashUnthrottled=function(){var t=this._getHashString();window.history.replaceState(window.history.state,"",t)},e.prototype.destory=function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this.layer.off("camerachange",this._updateHash),clearTimeout(this._updateHash()),this},e}(m),w={},M=function(t){return w[t]},E=function(t,e){if(M(t))throw new Error("Interaction type '"+t+"' existed.");w[t]=e};E("active",y),E("select",_),E("hash",x);var O=function(e){t.Util.assign(this,e)};O.prototype.clearAllInteractions=function(){var e=this.layer.get("interactions");return t.Util.each(e,function(t,n){t.destory(),delete e[n]}),this},O.prototype.clearInteraction=function(t){var e=this.layer.get("interactions");return e[t]&&(e[t].destory(),delete e[t]),this},O.prototype.addInteraction=function(t,e){void 0===e&&(e={}),e.layer=this.layer;var n=M(t),r=new n(e);return this._setInteraction(t,r),this},O.prototype._setInteraction=function(t,e){var n=this.layer.get("interactions");n[t]&&n[t].destory(),n[t]=e};var S=function(e){t.Util.assign(this,e),this._init(),this.startPoint={x:-1,y:-1},this._selectedId=null};S.prototype._init=function(){var t=this;this.layer.scene.on("pick-"+this.layer.layerId,function(e){var n=e.featureId,r=e.point2d,i=e.type;if("click"!==i){"mousedown"===i&&(t.startPoint=r),"mouseup"===i&&(t.endPoint=r,t.startPoint.x-t.endPoint.x===0&&t.startPoint.y-t.endPoint.y===0&&(i="click"));var o=t.layer.scene.containerToLngLat(r)||{},a=null,s=null;if(-999!==n){var u=t.layer.getSelectFeature(n,o);a=u.feature,s=u.style}var c={featureId:n,feature:a,style:s,pixel:r,type:i,lnglat:{lng:o.lng,lat:o.lat}};n>=0&&("touch"===i.substr(0,5)&&(i="click",t.layer.emit("mousemove",c)),t.layer.emit(i,c),t._selectedId=n),n<0&&null!=t._selectedId&&(i="mouseleave",t.layer.emit(i,c),t._selectedId=null),t.layer._activeIds=n}})},S.prototype._initMapEvent=function(){};var T=function(e){t.Util.assign(this,e),this.mesh||(this.mesh=this.layer)};T.prototype._updateColorAttributes=function(){for(var t=this,e=this.mesh.layerData,n={},r=0;r<e.length;r++){var i=e[r];n[i.id]=i.color}this.layer._activeIds=null;var o=this.mesh.mesh.geometry.attributes.a_color,a=this.mesh.mesh.geometry.attributes.pickingId;a.array.forEach(function(r,i){var s=Math.abs(r),u=null,c=null;t.mesh.layerSource.data.featureKeys?(s=t.mesh.layerSource.data.featureKeys[s].index,u=e[s],c=n[u.id]):(u=e[s-1],c=n[s]),u.hasOwnProperty("filter")&&!1===u.filter?(o.array[4*i+0]=0,o.array[4*i+1]=0,o.array[4*i+2]=0,o.array[4*i+3]=0,a.array[i]=-r):(o.array[4*i+0]=c[0],o.array[4*i+1]=c[1],o.array[4*i+2]=c[2],o.array[4*i+3]=c[3],a.array[i]=r)}),o.needsUpdate=!0,a.needsUpdate=!0},T.prototype._updateStyle=function(t){var e={};for(var n in t)e["u_"+n]=t[n];a(this.mesh._object3D,e)};var j={Scale:t.ScaleController,Mapping:d,Picking:v,Interaction:O,Event:S,Buffer:T};function A(e,n){if(!t.lib_73(e))throw new Error("First parameter to diff() is not an object");if(!t.lib_73(n))throw new Error("Second parameter to diff() is not an object");var r=[],i=t.lib_51(e),o=t.lib_51(n);return t.lib_87(t.lib_3(i,o),function(t){r.push({type:"remove",key:t,value:e[t]})}),t.lib_87(t.lib_3(o,i),function(t){r.push({type:"add",key:t,value:n[t]})}),t.lib_87(C(i,o),function(i){t.lib_91(e[i],n[i])||r.push({type:"update",key:i,value:n[i]})}),r}function C(t,e){return t.filter(function(t){return e.indexOf(t)>-1})}var L=1;function P(e){return t.Util.isArray(e)?e:t.Util.isString(e)?e.split("*"):[e]}var I=function(e){function n(n,r){e.call(this,r),this.scene=n,this.map=n.map,this._object3D=new t.Object3D,this._pickObject3D=new t.Object3D,this._object3D.visible=this.get("visible"),this._object3D.renderOrder=this.get("zIndex")||0,this._mapEventHandlers=[];var i=this._getUniqueId();this.set("layerId",i),this.set("mapType",this.scene.mapType),this.layerId=i,this._activeIds=null;var o=n._engine.world;o.add(this._object3D),this.layerMesh=null,this.layerLineMesh=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultCfg=function(){return{visible:!0,zIndex:0,type:"",minZoom:0,maxZoom:22,rotation:0,option:{},attrOptions:{},scaleOptions:{},preScaleOptions:null,scales:{},attrs:{},styleOptions:{stroke:[1,1,1,1],strokeWidth:1,opacity:1,strokeOpacity:1,texture:!1},destroyed:!1,selectedOptions:null,activedOptions:{fill:[1,0,0,1]},interactions:{},animateOptions:{enable:!1}}},n.prototype.add=function(t){var e=this;if("composer"===t.type)return this._object3D=t,void this.scene._engine.composerLayers.push(t);this.layerMesh=t,this._visibleWithZoom();var n=this.scene._engine.clock.getElapsedTime();t.onBeforeRender=function(){var t=e.scene.getZoom();a(e._object3D,{u_time:e.scene._engine.clock.getElapsedTime()-n,u_zoom:t}),e.preRender()},t.onAfterRender=function(){e.afterRender()},this._object3D.add(t),this.get("pickingController").addPickMesh(t)},n.prototype.remove=function(t){"composer"!==t.type?this._object3D.remove(t):this.scene._engine.composerLayers=this.scene._engine.composerLayers.filter(function(e){return e!==t})},n.prototype._getUniqueId=function(){return L++},n.prototype._visible=function(t){this.set("visible",t),this._object3D.visible=this.get("visible")},n.prototype.source=function(e,n){var r=this;return void 0===n&&(n={}),this.scene.getTileSource(e)?(this.set("layerType","tile"),this.set("sourceOption",Object.assign({},{id:e},n)),this.scene.style.addLayer(this),this.tiles=new t.Object3D,this._object3D.add(this.tiles),this):e instanceof t.Source?(this.layerSource=e,this.layerSource.on("SourceUpdate",function(){r.repaint()}),this):(n.data=e,n.mapType=this.scene.mapType,n.zoom=this.scene.getZoom(),this.layerSource=new t.Source(n),this)},n.prototype.color=function(e,n){return this._createAttrOption("color",e,n,t.Global.colors),this},n.prototype.size=function(e,n){var r=P(e);return-1!==r.indexOf("zoom")&&(this._zoomScale=!0),t.Util.isArray(r)&&!n&&(n=r),this._createAttrOption("size",e,n,t.Global.size),this},n.prototype.scale=function(e,n){var r=this.get("scaleOptions"),i=r;return t.Util.isObject(e)?t.Util.mix(i,e):i[e]=n,this},n.prototype.shape=function(e,n){return 2===e.split(":").length&&(this.shapeType=e.split(":")[0],e=e.split(":")[1]),"text"===n&&(this.shapeType=n),this._createAttrOption("shape",e,n,t.Global.shape),this},n.prototype.pattern=function(e,n){return this._createAttrOption("pattern",e,n,t.Global.pattern),this},n.prototype.active=function(e,n){return!1===e?this.set("allowActive",!1):t.Util.isObject(e)&&e.fill?(this.set("allowActive",!0),e.fill&&(e.fill=t.ColorUtil.color2RGBA(e.fill)),this.set("activedOptions",e)):(this.set("allowActive",!0),this.set("activedOptions",n||{fill:t.ColorUtil.color2RGBA(t.Global.activeColor)})),this},n.prototype.style=function(e,n){var r,i=["fill","stroke","strokeColor","color","baseColor","brightColor","windowColor"],o=this.get("styleOptions");for(var a in o||(o={},this.set("styleOptions",o)),t.Util.isObject(e)&&(n=e,e=null),e&&(r=P(e)),o.fields=r,t.Util.assign(o,n),n)-1!==i.indexOf(a)&&"none"!==o[a]&&(o[a]=t.ColorUtil.color2RGBA(o[a]));return this.set("styleOptions",o),this},n.prototype.filter=function(t,e){return this._createAttrOption("filter",t,e,!0),this},n.prototype.animate=function(e,n){var r,i=this.get("animateOptions");return i||(i={},this.set("animateOptions",i)),t.Util.isObject(e)&&(n=e,e=null),e&&(r=P(e)),i.fields=r,t.Util.assign(i,n),this.set("animateOptions",i),this},n.prototype.fitBounds=function(){var t=this.layerSource.data.extent;this.scene.fitBounds(t)},n.prototype.hide=function(){return this._visible(!1),this.scene._engine.update(),this},n.prototype.show=function(){return this._visible(!0),this.scene._engine.update(),this},n.prototype.setData=function(t,e){this.layerSource.setData(t,e),this.repaint(),this.scene._engine.update()},n.prototype._createScale=function(t){var e=this.get("scales"),n=e[t];return n||(n=this.createScale(t),e[t]=n),n},n.prototype._setAttrOptions=function(t,e){var n=this.get("attrOptions");"size"===t&&this._zoomScale&&(e.zoom=this.map.getZoom()),n[t]=e},n.prototype._createAttrOption=function(e,n,r,i){var o={};o.field=n,r?t.Util.isFunction(r)?o.callback=r:o.values=r:"color"!==e&&(o.values=i),this._setAttrOptions(e,o)},n.prototype._initControllers=function(){var t=new j.Picking({layer:this}),e=new j.Interaction({layer:this}),n=new j.Event({layer:this});this.set("pickingController",t),this.set("interacionController",e),this.set("eventController",n)},n.prototype._mapping=function(){var t=new j.Mapping({layer:this});this.set("mappingController",t)},n.prototype.render=function(){return"tile"===this.get("layerType")?(this._initControllers(),this._initInteraction(),this.scene.style.update(this._attrs),this):(this._updateDraw(),this.scene._engine.update(),this)},n.prototype.repaint=function(){this.set("scales",{}),this._mapping(),0!==this.layerData.length?this.redraw():this.clearDraw()},n.prototype.init=function(){this._initControllers(),this._mapping()},n.prototype._initInteraction=function(){this.get("allowActive")&&this.get("interacionController").addInteraction("active")},n.prototype._initMapEvent=function(){var e=this,n=["zoomchange","dragend","camerachange","resize"];t.Util.each(n,function(n){var r=t.Util.wrapBehavior(e,""+n);e.map.on(""+n,r),e._mapEventHandlers.push({type:n,handler:r})})},n.prototype.clearMapEvent=function(){var e=this,n=this._mapEventHandlers;t.Util.each(n,function(t){e.map.off(t.type,t.handler)})},n.prototype.zoomchange=function(t){this._visibleWithZoom(t)},n.prototype.dragend=function(){},n.prototype.resize=function(){this.scene._engine.update()},n.prototype.camerachange=function(t){this.emit("camerachange",t)},n.prototype.setActive=function(e,n){this._activeIds=e,n||(n=t.Global.activeColor),Array.isArray(n)||(n=t.ColorUtil.color2RGBA(n)),a(this._object3D,{u_activeColor:n,u_activeId:e}),this.scene._engine.update()},n.prototype._addActiveFeature=function(t){var e=t.featureId;this._activeIds=e,a(this._object3D,{u_activeId:e})},n.prototype._setPreOption=function(){var e=this.get("attrOptions"),n=this.get("styleOptions");this.set("preAttrOptions",t.Util.clone(e)),this.set("preStyleOption",t.Util.clone(n))},n.prototype._updateDraw=function(){var e=this.get("preAttrOptions"),n=this.get("attrOptions"),r=this.get("preStyleOption"),i=this.get("styleOptions");if(void 0!==e||void 0!==r){if(t.Util.isEqual(e.filter,n.filter)&&t.Util.isEqual(e.color,n.color)&&t.Util.isEqual(e.size,n.size)&&t.Util.isEqual(e.shape,n.shape)||this.repaint(),!t.Util.isEqual(r,i)){var o={};t.Util.each(A(r,i),function(t){var e=t.type,n=t.key,r=t.value;"remove"!==e&&(o[n]=r)}),this._updateStyle(o)}this._setPreOption()}else{if(this._setPreOption(),this.init(),this._initInteraction(),this._initMapEvent(),0===this.layerData.length)return;this.draw()}},n.prototype._updateSize=function(t){var e=this,n=this.get("attrOptions").size,r=P(n.field),i=this.layerSource.data.dataArray;if(this.zoomSizeCache||(this.zoomSizeCache={}),!this.zoomSizeCache[t]){this.zoomSizeCache[t]=[];for(var o=function(o){var a=r.map(function(t){return i[o][t]}),s=r.indexOf("zoom");-1!==s&&(a[s]=t),e.zoomSizeCache[t].push(n.callback.apply(n,a))},a=0;a<i.length;a++)o(a)}this.emit("sizeUpdated",this.zoomSizeCache[t])},n.prototype._updateStyle=function(t){var e={};for(var n in t)e["u_"+n]=t[n];a(this._object3D,e),t.hasOwnProperty("textAllowOverlap")&&(this.repaint(),this.scene._engine.update()),t.hasOwnProperty("blending")&&this.layerMesh&&this.layerMesh.material.setBending(t.blending)},n.prototype._scaleByZoom=function(){var t=this;this._zoomScale&&this.map.on("zoomend",function(){var e=t.map.getZoom();t._updateSize(Math.floor(e))})},n.prototype.getSelectFeature=function(t,e){if("tile"===this.get("layerType")){var n=this.getSourceCache(this.get("sourceOption").id),r=n.getSelectFeature(t,this.layerId,e);return{feature:r}}var i=this.layerSource&&this.layerSource.getSelectFeature(t)||{},o=this.layerData[t-1];return{feature:i,style:o}},n.prototype._updateFilter=function(){this.get("mappingController").reMapping()},n.prototype._visibleWithZoom=function(){if(null!==this._object3D){var t=this.scene.getZoom(),e=this.get("minZoom"),n=this.get("maxZoom"),r=0;"point"===this.type?r=5:"polyline"===this.type||"line"===this.type?r=2:"polygon"===this.type&&(r=1),"text"===this.type&&(r=10),this._object3D.position&&(this._object3D.position.z=r*Math.pow(2,20-t)),t<e||t>=n?this._object3D.visible=!1:this.get("visible")&&(this._object3D.visible=!0)}},n.prototype.clearDraw=function(){var t=this;if(this._object3D.children&&this._object3D.children.forEach(function(e){t._object3D.remove(e)}),"composer"===this._object3D.type){var e=this.scene._engine.composerLayers.indexOf(this._object3D);this.scene._engine.composerLayers.splice(e,1)}this.updateGeometryHander&&this.off("camerachange",this.updateGeometryHander),this.get("pickingController").removeAllMesh(),this.scene._engine.update()},n.prototype.redraw=function(){this.clearDraw(),this.draw()},n.prototype._resetStyle=function(){this._activeIds=null,a(this._object3D,{u_activeId:0})},n.prototype.destroy=function(){if(this.removeAllListeners(),this.get("interacionController").clearAllInteractions(),this.clearMapEvent(),"composer"!==this._object3D.type){if(this._object3D&&this._object3D.children)for(var t,e=0;e<this._object3D.children.length;e++)t=this._object3D.children[e],t&&(this.remove(t),t.geometry&&(t.geometry=null),t.material&&(t.material.map&&(t.material.map.dispose(),t.material.map=null),t.material.dispose(),t.material=null),t=null);this.layerMesh&&(this.layerMesh.geometry=null,this.layerMesh.material=null),this._pickingMesh&&(this._pickingMesh.children[0].geometry=null,this._pickingMesh.children[0].material.dispose(),this._pickingMesh.children[0].material=null),this._buffer=null,this._object3D=null,this.scene._engine._scene.remove(this._object3D),this.layerData.length=0,this.layerSource=null,this.scene._engine._picking.remove(this._pickingMesh),this.destroyed=!0}else this.remove(this._object3D)},n.prototype.getLegendCfg=function(t,e){void 0===e&&(e="color");var n=this.get("mappingController");return n.getLegendCfg(t,e)},n.prototype.preRender=function(){},n.prototype.afterRender=function(){},n.prototype.getSourceCache=function(t){return this.scene.style.getSource(t)},n.prototype.setHeight=function(t){this._object3D.children.forEach(function(e){e.position.z=t}),this.scene._engine.update()},n}(t.Base),R={},F=function(t,e){return R[t.toLowerCase()]&&R[t.toLowerCase()][e.toLowerCase()]},D=function(t,e,n){if(F(t,e))throw new Error("Render shapeType '"+e+"' existed.");R[t.toLowerCase()]||(R[t.toLowerCase()]={}),R[t.toLowerCase()][e.toLowerCase()]=n},k=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setUniformsValue=function(t,e){this.uniforms[t]&&(this.uniforms[t].value=e,this.uniforms.needsUpdate=!0)},n.prototype.setDefinesvalue=function(t,e){this.defines[t]=e,this.needsUpdate=!0},n.prototype.setUniform=function(t){var e={};for(var n in t)"u_"===n.substr(0,2)&&(e[n]={value:t[n]});return e},n.prototype.updateUninform=function(t){for(var e in t)"u_"===e.substr(0,2)&&this.setUniformsValue(e,t[e])},n.prototype.setBending=function(e){this.blending=t.THREE[n.blendingEnum[e]]||t.NormalBlending},n}(t.ShaderMaterial);function N(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}k.blendingEnum={normal:"NormalBlending",additive:"AdditiveBlending",subtractive:"SubtractiveBlending"};var B={VS:"vs",FS:"fs"},z={},U={},G=/precision\s+(high|low|medium)p\s+float/,V="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",H="attribute float pickingId;\n  #ifdef PICK \n varying vec4 worldId; \n #endif \n",q="#ifdef PICK \n varying vec4 worldId; \n #endif \n",W='#pragma include "pick_color"\n',Y=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,X=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Z(t,e,n){var r=t.replace(Y,function(t,r){var i=r.split(" "),o=i[0].replace(/"/g,"");if(e.indexOf(o)>-1)return"";var a=U[o][n];e.push(o);var s=Z(a,e,n),u=s.content;return u});return{content:r,includeList:e}}function K(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16;break;default:}return e}function J(t){var e={};return t=t.replace(X,function(t,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce(function(t,e){return t.push(Number(e.trim())),t},[]):new Array(K(n)).fill(0);break;default:}return e[o]=a,"uniform "+n+" "+o+";\n"}),{content:t,uniforms:e}}function Q(t,e){var n,r=e.vs,i=e.fs,o=e.uniforms,a=J(r),s=a.content,u=a.uniforms,c=J(i),l=c.content,f=c.uniforms;U[t]=(n={},n[B.VS]=s,n[B.FS]=l,n.uniforms=Object.assign({},u,f,o),n)}function $(e){var n;if(z[e])return z[e];var r=U[e][B.VS],i=U[e][B.FS];r=H+W+r,i=q+i;var o=Z(r,[],B.VS),a=o.content,s=o.includeList,u=Z(i,[],B.FS),c=u.content,l=u.includeList,f=t.uniq(s.concat(l).concat(e)).reduce(function(t,e){return Object.assign({},t,U[e].uniforms)},{});return G.test(c)||(c=V+c),z[e]=(n={},n[B.VS]=a.trim(),n[B.FS]=c.trim(),n.uniforms=f,n),z[e]}function tt(t){return Object.keys(t).reduce(function(e,n){return e[n]={value:t[n]},e},{})}var et={type:"directional",direction:[0,-10.5,1],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},nt={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},rt={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},it=["ambient","diffuse","specular"];function ot(e){var n={u_directional_lights:new Array(3).fill(Object.assign({},nt)),u_num_of_directional_lights:0,u_spot_lights:new Array(3).fill(Object.assign({},rt)),u_num_of_spot_lights:0};return e&&e.length||(e=[et]),e.forEach(function(e,r){var i=e.type,o=N(e,["type"]),a=o,s="u_"+i+"_lights",u="u_num_of_"+i+"_lights";Object.keys(a).forEach(function(e){t.isString(a[e])&&it.indexOf(e)>-1&&(a[e]=t.ColorUtil.color2RGBA(a[e]).slice(0,3))}),n[s][r]=Object.assign({},n[s][r],a),n[u]++}),n}var at=function(e){function n(n,r,i){e.call(this,i);var o=$("polygon"),a=o.vs,s=o.fs,u=o.uniforms;this.uniforms=tt(t.merge(u,n)),this.type="PolygonMaterial",this.defines=r,this.vertexShader=a,this.fragmentShader=s,this.transparent=!0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n}(k);function st(e,n,r){var i=n.get("styleOptions"),o=n.get("activedOptions"),a=Object.assign({},i,{activeColor:o.fill}),s=a.opacity,u=a.activeColor,c=a.lights;if(!r){var l=t.getBuffer(n.type,n.shape);r=new l({layerData:e})}var f=r.attributes,h=r.indexArray,p=new t.BufferGeometry;h&&p.setIndex(new t.Uint32BufferAttribute(h,1)),p.addAttribute("position",new t.Float32BufferAttribute(f.positions,3)),p.addAttribute("a_color",new t.Float32BufferAttribute(f.colors,4)),p.addAttribute("pickingId",new t.Float32BufferAttribute(f.pickingIds,1)),p.computeVertexNormals();var d=new at(Object.assign({},{u_opacity:s,u_activeColor:u},ot(c)),{SHAPE:!1,LIGHTING:!0}),v=new t.Mesh(p,d);return delete f.vertices,delete f.colors,delete f.pickingIds,delete f.normals,v}function ut(e){var n=$("line"),r=n.vs,i=n.fs,o=new k({uniforms:{u_opacity:{value:e.u_opacity||1},u_time:{value:e.u_time||0},u_zoom:{value:e.u_zoom||10},u_activeId:{value:e.activeId||0},u_activeColor:{value:e.activeColor||[1,0,0,1]}},vertexShader:r,fragmentShader:i,transparent:!0,blending:t.THREE[k.blendingEnum[e.blending]]});return o}function ct(e){var n="arcline";"greatCircle"===e.shapeType&&(n="greatcircle");var r=$(n),i=r.vs,o=r.fs,a=r.uniforms,s=new k({uniforms:tt(t.merge(a,{u_opacity:e.u_opacity,segmentNumber:30,u_time:0,u_zoom:e.u_zoom,u_activeId:e.activeId,u_activeColor:e.activeColor})),vertexShader:i,fragmentShader:o,transparent:!0,side:t.DoubleSide,blending:t.THREE[k.blendingEnum[e.blending]]});return s}function lt(e,n){var r=$("meshline"),i=r.vs,o=r.fs,a=r.uniforms,s=new k({uniforms:tt(t.merge(a,e,{u_activeId:e.activeId,u_activeColor:e.activeColor})),defines:n,vertexShader:i,fragmentShader:o,transparent:!0,blending:t.THREE[k.blendingEnum[e.blending]]});return s}function ft(e,n,r){var i=n.get("styleOptions"),o=n.get("activedOptions"),a=Object.assign({},i,{activeColor:o.fill}),s=a.opacity;if(!r){var u=t.getBuffer(n.type,n.shape);r=new u({layerData:e})}var c=r.attributes,l=r.indexArray,f=new t.BufferGeometry;l&&f.setIndex(new t.Uint32BufferAttribute(l,1)),f.addAttribute("position",new t.Float32BufferAttribute(c.positions,3)),f.addAttribute("a_color",new t.Float32BufferAttribute(c.colors,4)),f.addAttribute("pickingId",new t.Float32BufferAttribute(c.pickingIds,1));var h=new ut({u_opacity:s},{SHAPE:!1}),p=new t.LineSegments(f,h);return p}function ht(e,n,r){var i=n.get("styleOptions"),o=n.map.getCameraState(),a=o.near,s=o.far;if(n.scene.startAnimate(),!r){var u=t.getBuffer(n.type,"extrude");r=new u({layerData:e,uv:!0})}var c=r.attributes,l=r.indexArray,f=i.opacity,h=i.baseColor,p=i.brightColor,d=i.windowColor,v=i.lights,g=new t.BufferGeometry;l&&g.setIndex(new t.Uint32BufferAttribute(l,1)),g.addAttribute("position",new t.Float32BufferAttribute(c.positions,3)),g.addAttribute("a_color",new t.Float32BufferAttribute(c.colors,4)),g.addAttribute("pickingId",new t.Float32BufferAttribute(c.pickingIds,1)),g.addAttribute("faceUv",new t.Float32BufferAttribute(c.uv,2)),g.computeVertexNormals();var m=new at(Object.assign({},{u_opacity:f,u_baseColor:h,u_brightColor:p,u_windowColor:d,u_near:a,u_far:s},ot(v)),{SHAPE:!1,LIGHTING:!0,ANIMATE:!0}),y=new t.Mesh(g,m);return y}function pt(e,n){var r=n.get("styleOptions"),i=n.get("activedOptions"),o=t.getBuffer("shape","extrude"),a=new o({layerData:e,shapeType:n.shapeType}),s=a.attributes,u=a.indexArray,c=new t.BufferGeometry;c.setIndex(new t.Uint32BufferAttribute(u,1)),c.addAttribute("position",new t.Float32BufferAttribute(s.positions,3)),c.addAttribute("a_color",new t.Float32BufferAttribute(s.colors,4)),c.addAttribute("pickingId",new t.Float32BufferAttribute(s.pickingIds,1)),c.addAttribute("normal",new t.Float32BufferAttribute(s.normals,3)),c.addAttribute("a_shape",new t.Float32BufferAttribute(s.miters,3)),c.addAttribute("a_size",new t.Float32BufferAttribute(s.sizes,3));var l=new at(Object.assign({},{u_opacity:r.opacity,u_activeColor:i.fill,u_zoom:n.scene.getZoom()},ot(r.lights)),{SHAPE:!0,LIGHTING:!0});l.setDefinesvalue("SHAPE",!0),l.setBending(r.blending||"normal");var f=new t.Mesh(c,l);return f}function dt(e){var n=$("text"),r=n.vs,i=n.fs,o=n.uniforms,a=new k({defines:{SDF_PX:"8.0",EDGE_GAMMA:.105/window.devicePixelRatio},uniforms:tt(t.merge(o,e)),vertexShader:r,fragmentShader:i,transparent:!0});return a}function vt(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function gt(t,e,n,r,i){if(i){var o=t[r],a=o.glyph;if(a)for(var s=e[a].advance*o.scale,u=(t[r].x+s)*i,c=n;c<=r;c++)t[c].x-=u}}function mt(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,c=0;c<t.length;c++)t[c].x+=s,t[c].y+=u}function yt(t,e,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=t.positionedGlyphs,h="right"===o?1:"left"===o?0:.5,p=f.length;n.forEach(function(t){if(t.split("").forEach(function(t){var n=e[t],r=0;n&&(f.push({glyph:t,x:u,y:c+r,vertical:!1,scale:1,metrics:n}),u+=n.advance+a)}),f.length!==p){var n=u-a;l=Math.max(n,l),gt(f,e,p,f.length-1,h)}u=0,c+=r});var d=vt(i),v=d.horizontalAlign,g=d.verticalAlign;mt(f,h,v,g,l,r,n.length);var m=c-s;t.top+=-g*m,t.bottom=t.top+m,t.left+=-v*l,t.right=t.left+l}function _t(t,e,n,r,i,o,a){var s=t.split("\n"),u=[],c={positionedGlyphs:u,top:a[1],bottom:a[1],left:a[0],right:a[0],lineCount:s.length,text:t};return yt(c,e,s,n,r,i,o),!!u.length&&c}function bt(t,e,n){for(var r=t.positionedGlyphs,i=[],o=0;o<r.length;o++){var a=r[o],s=a.metrics,u=4,c=s.advance*a.scale/2,l=n?[a.x+c,a.y]:[0,0],f=n?[0,0]:[a.x+c+e[0],a.y+e[1]],h=(0-u)*a.scale-c+f[0],p=(0-u)*a.scale+f[1],d=h+s.width*a.scale,v=p+s.height*a.scale,g={x:h,y:p},m={x:d,y:p},y={x:h,y:v},_={x:d,y:v};i.push({tl:g,tr:m,bl:y,br:_,tex:s,glyphOffset:l})}return i}function xt(t,e,n,r,i,o){var a=n.fontWeight,s=n.fontFamily,u=[];return e.forEach(function(t){var e=t.shape||"";e=e.toString();for(var n=0;n<e.length;n++)-1===u.indexOf(e[n])&&u.push(e[n])}),r.setProps({characterSet:u,fontFamily:s,fontWeight:a}),wt(t,e,n,r,i,o)}function wt(t,e,n,r,i,o){var a=n.spacing;void 0===a&&(a=2);var s=n.textAnchor;void 0===s&&(s="center");var u=n.textOffset;void 0===u&&(u=[0,0]);var c=n.padding;void 0===c&&(c=[4,4]);var l=n.textAllowOverlap,f=r.texture,h=r.fontAtlas,p=r.mapping,d={fontAtlas:h,texture:f,positions:[],colors:[],pickingIds:[],textUVs:[],textOffsets:[],textSizes:[],index:[]},v=0;return t.forEach(function(e,n){var r=e.size,f=e.coordinates,h=""+(t[n].shape||""),g=r/24,m=_t(h,p,24,s,"center",a,u);if(m){var y=i.placeCollisionBox({x1:m.left*g-c[0],x2:m.right*g+c[0],y1:m.top*g-c[1],y2:m.bottom*g+c[1],anchorPointX:f[0],anchorPointY:f[1]},o),_=y.box;if(l||_&&_.length){i.insertCollisionBox(_,0);var b=bt(m,u,!1);v=Mt(e,d,b,v)}}}),d}function Mt(t,e,n,r){var i=t.id,o=t.size,a=t.color,s=t.coordinates;return n.forEach(function(t){var n;e.pickingIds.push(i,i,i,i),(n=e.colors).push.apply(n,a.concat(a,a,a)),e.positions.push(s[0],s[1],s[0],s[1],s[0],s[1],s[0],s[1]),e.textUVs.push(t.tex.x,t.tex.y+t.tex.height,t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tex.x+t.tex.width,t.tex.y,t.tex.x,t.tex.y),e.textOffsets.push(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.br.x,t.br.y,t.bl.x,t.bl.y),e.textSizes.push(o,o,o,o),e.index.push(0+r,1+r,2+r,2+r,3+r,0+r),r+=4}),r}ht.prototype.updateStyle=function(t){this.fillPolygonMesh.material.updateUninform({u_opacity:t.opacity,u_baseColor:t.baseColor,u_brightColor:t.brightColor,u_windowColor:t.windowColor})};var Et=function(t,e,n){var r=this.boxCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var i=0;i<this.xCellCount*this.yCellCount;i++)r.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0};Et.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Et.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Et.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,u,o),i?a.length>0:a},Et.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Et.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Et.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var l=this.bboxes,f=0,h=c;f<h.length;f+=1){var p=h[f];if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=l[d+2]&&e<=l[d+3]&&n>=l[d+0]&&r>=l[d+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:l[d],y1:l[d+1],x2:l[d+2],y2:l[d+3]})}}}return!1},Et.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),h=u;h<=l;h++)for(var p=c;p<=f;p++){var d=this.xCellCount*p+h;if(i.call(this,t,e,n,r,d,o,a,s))return}},Et.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Et.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))};var Ot=100,St=function(t,e){this.width=t,this.height=e,this.grid=new Et(t+2*Ot,e+2*Ot,25),this.screenRightBoundary=t+Ot,this.screenBottomBoundary=e+Ot,this.gridRightBoundary=t+2*Ot,this.gridBottomBoundary=e+2*Ot};St.prototype.placeCollisionBox=function(t,e){var n=this.project(e,t.anchorPointX,t.anchorPointY),r=t.x1+n.x,i=t.y1+n.y,o=t.x2+n.x,a=t.y2+n.y;return!this.isInsideGrid(r,i,o,a)||this.grid.hitTest(r,i,o,a)?{box:[]}:{box:[r,i,o,a]}},St.prototype.insertCollisionBox=function(t,e){var n={featureIndex:e};this.grid.insert(n,t[0],t[1],t[2],t[3])},St.prototype.project=function(e,n,r){var i=new t.Vector4(n,r,0,1).applyMatrix4(e);return{x:(i.x/i.w+1)/2*this.width+Ot,y:(-i.y/i.w+1)/2*this.height+Ot}},St.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var Tt={fontWeight:500,textAnchor:"center",textOffset:[0,0],spacing:2,padding:[4,4],stroke:"white",strokeWidth:2,strokeOpacity:1,textAllowOverlap:!1};function jt(e,n){var r=Object.assign({},Tt,n.get("styleOptions"));n.set("styleOptions",r);var i=n.get("activedOptions"),o=r.strokeWidth,a=r.stroke,s=r.opacity,u=r.textAllowOverlap,c=n.scene.getSize(),l=c.width,f=c.height,h=At(e,n),p=h.geometry,d=h.texture,v=h.fontAtlas;n.updateGeometryHander=function(){var t=At(e,n),r=t.geometry;n.layerMesh.geometry=r,n.layerMesh.geometry.needsUpdate=!0},u?n.off("camerachange",n.updateGeometryHander):n.on("camerachange",n.updateGeometryHander);var g=new dt({name:n.layerId,u_sdf_map:d,u_stroke:a,u_strokeWidth:o,u_halo_blur:.5,u_opacity:s,u_sdf_map_size:[v.width,v.height],u_viewport_size:[l,f],u_activeColor:i.fill}),m=new t.Mesh(p,g);return m.frustumCulled=!1,m}function At(e,n){var r=n.get("styleOptions"),i=r.fontFamily,o=r.fontWeight,a=r.spacing,s=r.textAnchor,u=r.textOffset,c=r.padding,l=r.textAllowOverlap,f=n.scene.getSize(),h=f.width,p=f.height,d=new St(h,p),v=n.scene._engine,g=v._camera,m=g.projectionMatrix,y=g.matrixWorldInverse,_=(new t.Matrix4).copy(m).multiply(y),b=new xt(e,e,{fontFamily:i,fontWeight:o,spacing:a,textAnchor:s,textOffset:u,padding:c,textAllowOverlap:l},n.scene.fontAtlasManager,d,_),x=b.index,w=b.positions,M=b.pickingIds,E=b.texture,O=b.colors,S=b.textUVs,T=b.textOffsets,j=b.textSizes,A=b.fontAtlas,C=new t.BufferGeometry;return C.setIndex(x),C.addAttribute("a_pos",new t.Float32BufferAttribute(w,2)),C.addAttribute("pickingId",new t.Float32BufferAttribute(M,1)),C.addAttribute("a_color",new t.Float32BufferAttribute(O,4)),C.addAttribute("a_tex",new t.Float32BufferAttribute(S,2)),C.addAttribute("a_offset",new t.Float32BufferAttribute(T,2)),C.addAttribute("a_size",new t.Float32BufferAttribute(j,1)),{geometry:C,texture:E,fontAtlas:A}}function Ct(e,n,r){var i=n.get("styleOptions"),o=n.get("animateOptions"),a=n.get("activedOptions");if(!r){var s=t.getBuffer(n.type,n.shapeType);r=new s({layerData:e,shapeType:"line",style:i,imagePos:n.scene.image.imagePos})}var u=r.attributes,c=r.indexArray,l=r.hasPattern,f=new t.BufferGeometry;f.setIndex(new t.Uint32BufferAttribute(c,1)),f.addAttribute("pickingId",new t.Float32BufferAttribute(u.pickingIds,1)),f.addAttribute("position",new t.Float32BufferAttribute(u.positions,3)),f.addAttribute("a_color",new t.Float32BufferAttribute(u.colors,4)),f.addAttribute("a_size",new t.Float32BufferAttribute(u.sizes,1)),f.addAttribute("normal",new t.Float32BufferAttribute(u.normals,3)),f.addAttribute("a_miter",new t.Float32BufferAttribute(u.miters,1)),f.addAttribute("a_distance",new t.Float32BufferAttribute(u.attrDistance,1)),f.addAttribute("a_dash_array",new t.Float32BufferAttribute(u.dashArray,1)),f.addAttribute("a_texture_coord",new t.Float32BufferAttribute(u.patterns,2)),f.addAttribute("a_total_distance",new t.Float32BufferAttribute(u.totalDistances,1));var h=new lt({u_opacity:i.opacity,u_zoom:n.scene.getZoom(),u_time:0,u_dash_offset:i.dashOffset,u_dash_ratio:i.dashRatio,activeColor:a.fill,u_pattern_spacing:i.patternSpacing||0,u_texture:l?n.scene.image.texture:null,blending:i.blending||"normal"},{SHAPE:!1,ANIMATE:!1,DASHLINE:"dash"===i.lineType,TEXTURE:l}),p=new t.Mesh(f,h);if(o.enable){n.scene.startAnimate();var d=o.duration;void 0===d&&(d=2);var v=o.interval;void 0===v&&(v=.5);var g=o.trailLength;void 0===g&&(g=.5);var m=o.repeat;void 0===m&&(m=1/0),n.animateDuration=n.scene._engine.clock.getElapsedTime()+d*m,h.updateUninform({u_duration:d,u_interval:v,u_trailLength:g}),h.setDefinesvalue("ANIMATE",!0)}return p}function Lt(e,n,r){var i=n.get("styleOptions"),o=n.get("activedOptions");if(!r){var a=t.getBuffer(n.type,n.shapeType);r=new a({layerData:e,shapeType:n.shapeType,style:i})}var s=r.attributes,u=r.indexArray,c=new t.BufferGeometry;c.setIndex(new t.Uint32BufferAttribute(u,1)),c.addAttribute("position",new t.Float32BufferAttribute(s.positions,3)),c.addAttribute("pickingId",new t.Float32BufferAttribute(s.pickingIds,1)),c.addAttribute("a_color",new t.Float32BufferAttribute(s.colors,4)),c.addAttribute("a_instance",new t.Float32BufferAttribute(s.instanceArray,4)),c.addAttribute("a_size",new t.Float32BufferAttribute(s.sizes,1));var l=new ct({u_opacity:i.opacity,u_zoom:n.scene.getZoom(),activeColor:o.fill,shapeType:n.shapeType,blending:i.blending||"additive"},{SHAPE:!1}),f=n.get("animateOptions");if(f.enable){n.scene.startAnimate();var h=f.duration;void 0===h&&(h=2);var p=f.interval;void 0===p&&(p=.5);var d=f.trailLength;void 0===d&&(d=.5);var v=f.repeat;void 0===v&&(v=1/0),n.animateDuration=n.scene._engine.clock.getElapsedTime()+h*v,l.updateUninform({u_duration:h,u_interval:p,u_trailLength:d}),l.setDefinesvalue("ANIMATE",!0)}var g=new t.Mesh(c,l);return g.frustumCulled=!1,g}function Pt(t){var e=[];t[0].forEach(function(t){e.push([t[0],t[1],0])}),t[0].forEach(function(t){e.push([t[0],t[1],1])});for(var n=[],r=t[0].length,i=r-1,o=0;o<i;o++)n.push(o,o+1),n.push(o+r,o+1+r),n.push(o,o+r);n.push(i,0),n.push(i,i+r),n.push(i+r,r);var a=[];return n.forEach(function(t){a.push(e[t])}),a}function It(e,n,r,i,o){void 0===i&&(i=200),Array.isArray(e[0][0])&&(e=e[0]);var a=[],s=[],u=[],c=[],l=[],f=[],h=[],p=t.getNormals(e,!1,r),d=p.normals,v=p.attrIndex,g=p.attrPos,m=p.attrDistance,y=[],_=[],b=n.size,x=n.color,w=n.id;!Array.isArray(b)&&(b=[b]);var M=m[m.length-1];g.forEach(function(t){l.push.apply(l,x),s.push(w),y.push(b[0]),t[2]=b[1]||0,a.push.apply(a,t),h.push(o.x,o.y),_.push(M)});var E=i/M;return d.forEach(function(t){var e=t[0],n=t[1];u.push(e[0],e[1],0),c.push(n),f.push(E)}),{positions:a,normal:u,indexArray:t.flatten(v),miter:c,colors:l,sizes:y,pickingIds:s,attrDistance:m,dashArray:f,textureCoordArray:h,totalDistances:_}}var Rt=t.Global.pointShape;function Ft(e,n){var r={shapes:[],normal:[],miter:[],indexArray:[],sizes:[],positions:[],pickingIds:[],colors:[]},i=n.stroke,o=n.strokeWidth;return e.forEach(function(e){var n=e.size,a=e.shape,s=e.id,u=e.coordinates,c=t.polygonPath[a](),l=r.miter.length,f=null;if(-1!==Rt["2d"].indexOf(a))t.Util.isArray(n)||(n=[n,n,0]),f=It([c],{size:[o,0],color:i,id:s},l);else{if(-1===Rt["3d"].indexOf(a))throw new Error("Invalid shape type: "+a);t.Util.isArray(n)||(n=[n,n,n]);var h=Pt([c]);f=It([h],{size:[o,0],color:i,id:s},l)}Dt(f,u,n,r)}),r}function Dt(t,e,n,r){var i,o,a,s,u,c;(i=r.shapes).push.apply(i,t.positions),(o=r.normal).push.apply(o,t.normal),(a=r.miter).push.apply(a,t.miter),(s=r.pickingIds).push.apply(s,t.pickingIds),(u=r.indexArray).push.apply(u,t.indexArray),(c=r.colors).push.apply(c,t.colors),t.miter.forEach(function(){var t,i;(t=r.positions).push.apply(t,e),(i=r.sizes).push.apply(i,n)})}function kt(t,e){var n={vertices:[],colors:[],sizes:[],shapes:[],pickingIds:[],uv:[]};return t.forEach(function(t){var r,i,o=t.color;void 0===o&&(o=[0,0,0,0]);var a=t.size,s=t.id,u=t.shape,c=t.coordinates,l=e.imagePos[u],f=l.x,h=l.y;(r=n.vertices).push.apply(r,c),(i=n.colors).push.apply(i,o),n.pickingIds.push(s),n.sizes.push(a*window.devicePixelRatio),n.uv.push(f,h),n.shapes.push(u)}),n}function Nt(t){var e={vertices:[],colors:[],sizes:[],pickingIds:[]};return t.forEach(function(t){var n,r,i=t.color,o=t.size,a=t.id,s=t.coordinates;(n=e.vertices).push.apply(n,s),(r=e.colors).push.apply(r,i),e.pickingIds.push(a),e.sizes.push(o)}),e}var Bt=function(t){function e(e,n,r){t.call(this,r);var i=this.getDefaultParameters(),o=i.uniforms,a=i.defines,s=$("point"),u=s.vs,c=s.fs;this.uniforms=Object.assign(o,this.setUniform(e)),this.defines=Object.assign(a,n),this.type="PointMaterial",this.vertexShader=u,this.fragmentShader=c,this.transparent=!0,this.uniforms.u_texture&&(this.defines.TEXCOORD_0=!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultParameters=function(){return{uniforms:{u_opacity:{value:1},u_stroke:{value:[1,1,1,1]},u_strokeWidth:{value:1},u_activeId:{value:0}},defines:{SHAPE:!1,TEXCOORD_0:!1}}},e}(k);function zt(e,n){var r=new t.BufferGeometry,i=n.get("styleOptions"),o=n.get("activedOptions"),a=i.strokeWidth,s=i.stroke,u=i.opacity,c=n.scene.image.texture,l=kt(e,{imagePos:n.scene.image.imagePos});r.addAttribute("position",new t.Float32BufferAttribute(l.vertices,3)),r.addAttribute("a_color",new t.Float32BufferAttribute(l.colors,4)),r.addAttribute("pickingId",new t.Float32BufferAttribute(l.pickingIds,1)),r.addAttribute("uv",new t.Float32BufferAttribute(l.uv,2)),r.addAttribute("a_size",new t.Float32BufferAttribute(l.sizes,1));var f=new Bt({u_opacity:u,u_strokeWidth:a,u_stroke:s,u_activeColor:o.fill,u_texture:c},{SHAPE:!1,TEXCOORD_0:!0});f.depthTest=!1,f.setBending(i.blending||"normal");var h=new t.Points(r,f);return h}var Ut=function(e){function n(n,r,i){e.call(this,i);var o=this.getDefaultParameters(),a=o.uniforms,s=o.defines,u=$("pointnormal"),c=u.vs,l=u.fs;this.uniforms=Object.assign(a,this.setUniform(n)),this.defines=Object.assign(s,r),this.type="PointMaterial",this.vertexShader=c,this.fragmentShader=l,this.transparent=!0,n&&(this.blending=t.THREE[e.blendingEnum[n.blending]])}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultParameters=function(){return{uniforms:{u_opacity:{value:1},u_stroke:{value:[1,1,1,1]},u_strokeWidth:{value:1},u_activeId:{value:0}},defines:{SHAPE:!1,TEXCOORD_0:!1}}},n}(k);function Gt(e,n){var r=new t.BufferGeometry,i=n.get("styleOptions"),o=n.get("activedOptions"),a=i.opacity,s=Nt(e);r.addAttribute("position",new t.Float32BufferAttribute(s.vertices,3)),r.addAttribute("a_color",new t.Float32BufferAttribute(s.colors,4)),r.addAttribute("pickingId",new t.Float32BufferAttribute(s.pickingIds,1)),r.addAttribute("a_size",new t.Float32BufferAttribute(s.sizes,1));var u=new Ut({u_opacity:a,u_activeColor:o.fill},{},i),c=new t.Points(r,u);return u.setBending("additive"),c}var Vt=function(t){function e(e,n,r){t.call(this,r);var i=this.getDefaultParameters(),o=i.uniforms,a=$("pointline"),s=a.vs,u=a.fs;this.uniforms=Object.assign(o,this.setUniform(e)),this.type="PointLineMaterial",this.vertexShader=s,this.fragmentShader=u,this.transparent=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultParameters=function(){return{uniforms:{u_strokeOpacity:{value:1},u_stroke:{value:[1,1,1,1]},u_strokeWidth:{value:1},u_zoom:{value:10},u_activeId:{value:0},u_activeColor:{value:[1,0,0,1]}}}},e}(k);function Ht(e,n){var r=n.get("styleOptions"),i=n.get("activedOptions"),o=r.strokeWidth,a=r.stroke,s=r.strokeOpacity,u=Ft(e,r),c=new t.BufferGeometry;c.setIndex(u.indexArray),c.addAttribute("position",new t.Float32BufferAttribute(u.positions,3)),c.addAttribute("a_shape",new t.Float32BufferAttribute(u.shapes,3)),c.addAttribute("a_size",new t.Float32BufferAttribute(u.sizes,3)),c.addAttribute("normal",new t.Float32BufferAttribute(u.normal,3)),c.addAttribute("a_miter",new t.Float32BufferAttribute(u.miter,1)),c.addAttribute("pickingId",new t.Float32BufferAttribute(u.pickingIds,1)),c.addAttribute("a_color",new t.Float32BufferAttribute(u.colors,4));var l=new Vt({u_strokeOpacity:s,u_stroke:a,u_strokeWidth:o,u_activeColor:i.fill}),f=new t.Mesh(c,l);return f}var qt=function(e){function n(n,r,i){void 0===r&&(r={}),e.call(this,i);var o=$("circle"),a=o.vs,s=o.fs,u=o.uniforms;this.uniforms=tt(t.merge(u,n)),this.defines=r,this.type="CircleMaterial",this.vertexShader=a,this.fragmentShader=s,this.transparent=!0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n}(k);function Wt(e,n,r){var i=n.get("styleOptions"),o=n.get("activedOptions");if(!r){var a=t.getBuffer(n.type,n.shapeType);r=new a({layerData:e})}var s=r.attributes,u=r.indexArray,c=new t.BufferGeometry;r.indexArray&&c.setIndex(new t.Uint32BufferAttribute(u,1)),c.addAttribute("position",new t.Float32BufferAttribute(s.positions,3)),c.addAttribute("a_color",new t.Float32BufferAttribute(s.colors,4)),c.addAttribute("pickingId",new t.Float32BufferAttribute(s.pickingIds,1)),c.addAttribute("miter",new t.Float32BufferAttribute(s.miters,2)),c.addAttribute("a_size",new t.Float32BufferAttribute(s.sizes,1)),c.addAttribute("a_shape",new t.Float32BufferAttribute(s.shapes,1));var l=new qt({u_opacity:i.opacity,u_activeColor:o.fill,u_zoom:n.scene.getZoom(),u_stroke:i.stroke,u_strokeWidth:i.strokeWidth,u_strokeOpacity:i.strokeOpacity});l.depthTest=!1,l.setBending(i.blending||"normal");var f=new t.Mesh(c,l);return f}var Yt=function(e){function n(n,r,i){e.call(this,i);var o=this.getDefaultParameters(),a=o.defines,s=$("hexagon"),u=s.vs,c=s.fs,l=s.uniforms;this.uniforms=tt(t.merge(l,n)),this.type="hexagonMaterial",this.defines=Object.assign(a,r),this.vertexShader=u,this.fragmentShader=c,this.transparent=!0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultParameters=function(){return{uniforms:{u_opacity:{value:1},u_time:{value:0},u_radius:{value:.01},u_angle:{value:.01},u_coverage:{value:.8},u_activeId:{value:0},u_activeColor:{value:[1,0,0,1]}},defines:{}}},n}(k);function Xt(e,n,r){var i=n.get("styleOptions"),o=n.get("activedOptions"),a=o.fill,s=r.data,u=s.radius,c=i.opacity,l=i.angle;void 0===l&&(l=0);var f=i.coverage,h=i.lights,p=t.getBuffer(n.type,"shape"),d=new p({layerData:e,shapeType:n.shapeType}),v=d.attributes,g=d.instanceGeometry,m=new t.InstancedBufferGeometry;m.setIndex(g.indexArray),m.addAttribute("miter",new t.Float32BufferAttribute(g.positions,3)),g.normals&&m.addAttribute("normal",new t.Float32BufferAttribute(g.normals,3)),m.addAttribute("position",new t.InstancedBufferAttribute(new Float32Array(v.positions),3)),m.addAttribute("a_color",new t.InstancedBufferAttribute(new Float32Array(v.colors),4)),m.addAttribute("pickingId",new t.InstancedBufferAttribute(new Float32Array(v.pickingIds),1)),m.addAttribute("a_size",new t.InstancedBufferAttribute(new Float32Array(v.sizes),1));var y=new Yt(Object.assign({},{u_opacity:c,u_radius:u,u_angle:l/180*Math.PI,u_coverage:f,u_activeColor:a},ot(h)),{SHAPE:!1,LIGHTING:!!g.normals}),_=new t.Mesh(m,y);return _}var Zt=function(e){function n(n,r,i){e.call(this,i);var o=this.getDefaultParameters(),a=o.defines,s=$("grid"),u=s.vs,c=s.fs,l=s.uniforms;this.uniforms=tt(t.merge(l,n)),this.type="GridMaterial",this.defines=Object.assign(a,r),this.vertexShader=u,this.fragmentShader=c,this.transparent=!0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultParameters=function(){return{uniforms:{u_opacity:{value:1},u_time:{value:0},u_xOffset:{value:.01},u_yOffset:{value:.01},u_coverage:{value:.8},u_activeId:{value:0},u_activeColor:{value:[1,0,0,1]}},defines:{}}},n}(k);function Kt(e,n,r){var i=n.get("styleOptions"),o=i.opacity,a=i.coverage,s=i.lights,u=n.get("activedOptions"),c=r.data,l=c.xOffset,f=c.yOffset,h=t.getBuffer(n.type,n.shapeType),p=new h({layerData:e,shapeType:n.shapeType}),d=p.attributes,v=p.indexArray,g=new t.BufferGeometry;g.setIndex(new t.Uint32BufferAttribute(v,1)),g.addAttribute("position",new t.Float32BufferAttribute(d.positions,3)),g.addAttribute("miter",new t.Float32BufferAttribute(d.miters,3)),g.addAttribute("a_color",new t.Float32BufferAttribute(d.colors,4)),g.addAttribute("pickingId",new t.Float32BufferAttribute(d.pickingIds,1)),g.addAttribute("normal",new t.Float32BufferAttribute(d.normals,3));var m=new Zt(Object.assign({},{u_opacity:o,u_xOffset:l,u_yOffset:f,u_coverage:a,u_activeColor:u.fill},ot(s)),{SHAPE:!1,LIGHTING:"square"!==n.shapeType}),y=new t.Mesh(g,m);return y}var Jt={viridis:new Uint8Array([68,1,84,255,68,2,86,255,69,4,87,255,69,5,89,255,70,7,90,255,70,8,92,255,70,10,93,255,70,11,94,255,71,13,96,255,71,14,97,255,71,16,99,255,71,17,100,255,71,19,101,255,72,20,103,255,72,22,104,255,72,23,105,255,72,24,106,255,72,26,108,255,72,27,109,255,72,28,110,255,72,29,111,255,72,31,112,255,72,32,113,255,72,33,115,255,72,35,116,255,72,36,117,255,72,37,118,255,72,38,119,255,72,40,120,255,72,41,121,255,71,42,122,255,71,44,122,255,71,45,123,255,71,46,124,255,71,47,125,255,70,48,126,255,70,50,126,255,70,51,127,255,70,52,128,255,69,53,129,255,69,55,129,255,69,56,130,255,68,57,131,255,68,58,131,255,68,59,132,255,67,61,132,255,67,62,133,255,66,63,133,255,66,64,134,255,66,65,134,255,65,66,135,255,65,68,135,255,64,69,136,255,64,70,136,255,63,71,136,255,63,72,137,255,62,73,137,255,62,74,137,255,62,76,138,255,61,77,138,255,61,78,138,255,60,79,138,255,60,80,139,255,59,81,139,255,59,82,139,255,58,83,139,255,58,84,140,255,57,85,140,255,57,86,140,255,56,88,140,255,56,89,140,255,55,90,140,255,55,91,141,255,54,92,141,255,54,93,141,255,53,94,141,255,53,95,141,255,52,96,141,255,52,97,141,255,51,98,141,255,51,99,141,255,50,100,142,255,50,101,142,255,49,102,142,255,49,103,142,255,49,104,142,255,48,105,142,255,48,106,142,255,47,107,142,255,47,108,142,255,46,109,142,255,46,110,142,255,46,111,142,255,45,112,142,255,45,113,142,255,44,113,142,255,44,114,142,255,44,115,142,255,43,116,142,255,43,117,142,255,42,118,142,255,42,119,142,255,42,120,142,255,41,121,142,255,41,122,142,255,41,123,142,255,40,124,142,255,40,125,142,255,39,126,142,255,39,127,142,255,39,128,142,255,38,129,142,255,38,130,142,255,38,130,142,255,37,131,142,255,37,132,142,255,37,133,142,255,36,134,142,255,36,135,142,255,35,136,142,255,35,137,142,255,35,138,141,255,34,139,141,255,34,140,141,255,34,141,141,255,33,142,141,255,33,143,141,255,33,144,141,255,33,145,140,255,32,146,140,255,32,146,140,255,32,147,140,255,31,148,140,255,31,149,139,255,31,150,139,255,31,151,139,255,31,152,139,255,31,153,138,255,31,154,138,255,30,155,138,255,30,156,137,255,30,157,137,255,31,158,137,255,31,159,136,255,31,160,136,255,31,161,136,255,31,161,135,255,31,162,135,255,32,163,134,255,32,164,134,255,33,165,133,255,33,166,133,255,34,167,133,255,34,168,132,255,35,169,131,255,36,170,131,255,37,171,130,255,37,172,130,255,38,173,129,255,39,173,129,255,40,174,128,255,41,175,127,255,42,176,127,255,44,177,126,255,45,178,125,255,46,179,124,255,47,180,124,255,49,181,123,255,50,182,122,255,52,182,121,255,53,183,121,255,55,184,120,255,56,185,119,255,58,186,118,255,59,187,117,255,61,188,116,255,63,188,115,255,64,189,114,255,66,190,113,255,68,191,112,255,70,192,111,255,72,193,110,255,74,193,109,255,76,194,108,255,78,195,107,255,80,196,106,255,82,197,105,255,84,197,104,255,86,198,103,255,88,199,101,255,90,200,100,255,92,200,99,255,94,201,98,255,96,202,96,255,99,203,95,255,101,203,94,255,103,204,92,255,105,205,91,255,108,205,90,255,110,206,88,255,112,207,87,255,115,208,86,255,117,208,84,255,119,209,83,255,122,209,81,255,124,210,80,255,127,211,78,255,129,211,77,255,132,212,75,255,134,213,73,255,137,213,72,255,139,214,70,255,142,214,69,255,144,215,67,255,147,215,65,255,149,216,64,255,152,216,62,255,155,217,60,255,157,217,59,255,160,218,57,255,162,218,55,255,165,219,54,255,168,219,52,255,170,220,50,255,173,220,48,255,176,221,47,255,178,221,45,255,181,222,43,255,184,222,41,255,186,222,40,255,189,223,38,255,192,223,37,255,194,223,35,255,197,224,33,255,200,224,32,255,202,225,31,255,205,225,29,255,208,225,28,255,210,226,27,255,213,226,26,255,216,226,25,255,218,227,25,255,221,227,24,255,223,227,24,255,226,228,24,255,229,228,25,255,231,228,25,255,234,229,26,255,236,229,27,255,239,229,28,255,241,229,29,255,244,230,30,255,246,230,32,255,248,230,33,255,251,231,35,255,253,231,37,255]),inferno:new Uint8Array([0,0,4,255,1,0,5,255,1,1,6,255,1,1,8,255,2,1,10,255,2,2,12,255,2,2,14,255,3,2,16,255,4,3,18,255,4,3,20,255,5,4,23,255,6,4,25,255,7,5,27,255,8,5,29,255,9,6,31,255,10,7,34,255,11,7,36,255,12,8,38,255,13,8,41,255,14,9,43,255,16,9,45,255,17,10,48,255,18,10,50,255,20,11,52,255,21,11,55,255,22,11,57,255,24,12,60,255,25,12,62,255,27,12,65,255,28,12,67,255,30,12,69,255,31,12,72,255,33,12,74,255,35,12,76,255,36,12,79,255,38,12,81,255,40,11,83,255,41,11,85,255,43,11,87,255,45,11,89,255,47,10,91,255,49,10,92,255,50,10,94,255,52,10,95,255,54,9,97,255,56,9,98,255,57,9,99,255,59,9,100,255,61,9,101,255,62,9,102,255,64,10,103,255,66,10,104,255,68,10,104,255,69,10,105,255,71,11,106,255,73,11,106,255,74,12,107,255,76,12,107,255,77,13,108,255,79,13,108,255,81,14,108,255,82,14,109,255,84,15,109,255,85,15,109,255,87,16,110,255,89,16,110,255,90,17,110,255,92,18,110,255,93,18,110,255,95,19,110,255,97,19,110,255,98,20,110,255,100,21,110,255,101,21,110,255,103,22,110,255,105,22,110,255,106,23,110,255,108,24,110,255,109,24,110,255,111,25,110,255,113,25,110,255,114,26,110,255,116,26,110,255,117,27,110,255,119,28,109,255,120,28,109,255,122,29,109,255,124,29,109,255,125,30,109,255,127,30,108,255,128,31,108,255,130,32,108,255,132,32,107,255,133,33,107,255,135,33,107,255,136,34,106,255,138,34,106,255,140,35,105,255,141,35,105,255,143,36,105,255,144,37,104,255,146,37,104,255,147,38,103,255,149,38,103,255,151,39,102,255,152,39,102,255,154,40,101,255,155,41,100,255,157,41,100,255,159,42,99,255,160,42,99,255,162,43,98,255,163,44,97,255,165,44,96,255,166,45,96,255,168,46,95,255,169,46,94,255,171,47,94,255,173,48,93,255,174,48,92,255,176,49,91,255,177,50,90,255,179,50,90,255,180,51,89,255,182,52,88,255,183,53,87,255,185,53,86,255,186,54,85,255,188,55,84,255,189,56,83,255,191,57,82,255,192,58,81,255,193,58,80,255,195,59,79,255,196,60,78,255,198,61,77,255,199,62,76,255,200,63,75,255,202,64,74,255,203,65,73,255,204,66,72,255,206,67,71,255,207,68,70,255,208,69,69,255,210,70,68,255,211,71,67,255,212,72,66,255,213,74,65,255,215,75,63,255,216,76,62,255,217,77,61,255,218,78,60,255,219,80,59,255,221,81,58,255,222,82,56,255,223,83,55,255,224,85,54,255,225,86,53,255,226,87,52,255,227,89,51,255,228,90,49,255,229,92,48,255,230,93,47,255,231,94,46,255,232,96,45,255,233,97,43,255,234,99,42,255,235,100,41,255,235,102,40,255,236,103,38,255,237,105,37,255,238,106,36,255,239,108,35,255,239,110,33,255,240,111,32,255,241,113,31,255,241,115,29,255,242,116,28,255,243,118,27,255,243,120,25,255,244,121,24,255,245,123,23,255,245,125,21,255,246,126,20,255,246,128,19,255,247,130,18,255,247,132,16,255,248,133,15,255,248,135,14,255,248,137,12,255,249,139,11,255,249,140,10,255,249,142,9,255,250,144,8,255,250,146,7,255,250,148,7,255,251,150,6,255,251,151,6,255,251,153,6,255,251,155,6,255,251,157,7,255,252,159,7,255,252,161,8,255,252,163,9,255,252,165,10,255,252,166,12,255,252,168,13,255,252,170,15,255,252,172,17,255,252,174,18,255,252,176,20,255,252,178,22,255,252,180,24,255,251,182,26,255,251,184,29,255,251,186,31,255,251,188,33,255,251,190,35,255,250,192,38,255,250,194,40,255,250,196,42,255,250,198,45,255,249,199,47,255,249,201,50,255,249,203,53,255,248,205,55,255,248,207,58,255,247,209,61,255,247,211,64,255,246,213,67,255,246,215,70,255,245,217,73,255,245,219,76,255,244,221,79,255,244,223,83,255,244,225,86,255,243,227,90,255,243,229,93,255,242,230,97,255,242,232,101,255,242,234,105,255,241,236,109,255,241,237,113,255,241,239,117,255,241,241,121,255,242,242,125,255,242,244,130,255,243,245,134,255,243,246,138,255,244,248,142,255,245,249,146,255,246,250,150,255,248,251,154,255,249,252,157,255,250,253,161,255,252,255,164,255]),rainbow:{colors:["#96005A","#0000C8","#0019FF","#0098FF","#2CFF96","#97FF00","#FFEA00","#FF6F00","#FF0000"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},jet:{colors:["#000083","#003CAA","#05FFFF","#FFFF00","#FA0000","#800000"],positions:[0,.125,.375,.625,.875,1]},hsv:{colors:["#ff0000","#fdff02","#f7ff02","#00fc04","#00fc0a","#01f9ff","#0200fd","#0800fd","#ff00fb","#ff00f5","#ff0006"],positions:[0,.169,.173,.337,.341,.506,.671,.675,.839,.843,1]},hot:{colors:["#000000","#e60000","#ffd200","#ffffff"],positions:[0,.3,.6,1]},cool:{colors:["#00ffff","#ff00ff"],positions:[0,1]},spring:{colors:["#ff00ff","#ffff00"],positions:[0,1]},summer:{colors:["#008066","#ffff66"],positions:[0,1]},autumn:{colors:["#ff0000","#ffff00"],positions:[0,1]},winter:{colors:["#0000ff","#00ff80"],positions:[0,1]},bone:{colors:["#000000","#545474","#a9c8c8","#ffffff"],positions:[0,.376,.753,1]},copper:{colors:["#000000","#ffa066","#ffc77f"],positions:[0,.804,1]},greys:{colors:["#000000","#ffffff"],positions:[0,1]},yignbu:{colors:["#081d58","#253494","#225ea8","#1d91c0","#41b6c4","#7fcdbb","#c7e9b4","#edf8d9","#ffffd9"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},greens:{colors:["#00441b","#006d2c","#238b45","#41ab5d","#74c476","#a1d99b","#c7e9c0","#e5f5e0","#f7fcf5"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},wind:{colors:["#3288bd","#66c2a5","#abdda4","#e6f598","#fee08b","#fdae61","#f46d43","#d53e4f"],positions:[0,.1,.2,.6,.7,.8,.9,1]},yiorrd:{colors:["#800026","#bd0026","#e31a1c","#fc4e2a","#fd8d3c","#feb24c","#fed976","#ffeda0","#ffffcc"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},bluered:{colors:["#0000ff","#ff0000"],positions:[0,1]},rdbu:{colors:["#050aac","#6a89f7","#bebebe","#dcaa84","#e6915a","#b20a1c"],positions:[0,.35,.5,.6,.7,1]},picnic:{colors:["#0000ff","#3399ff","#66ccff","#99ccff","#ccccff","#ffffff","#ffccff","#ff99ff","#ff66cc","#ff6666","#ff0000"],positions:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]},portland:{colors:["#0c3383","#0a88ba","#f2d338","#f28f38","#d91e1e"],positions:[0,.25,.5,.75,1]},blackbody:{colors:["#000000","#e60000","#e6d200","#ffffff","#a0c8ff"],positions:[0,.2,.4,.7,1]},earth:{colors:["#000082","#00b4b4","#28d228","#e6e632","#784614","#ffffff"],positions:[0,.1,.2,.4,.6,1]},electric:{colors:["#000000","#1e0064","#780064","#a05a00","#e6c800","#fffadc"],positions:[0,.15,.4,.6,.8,1]},magma:new Uint8Array([0,0,4,255,1,0,5,255,1,1,6,255,1,1,8,255,2,1,9,255,2,2,11,255,2,2,13,255,3,3,15,255,3,3,18,255,4,4,20,255,5,4,22,255,6,5,24,255,6,5,26,255,7,6,28,255,8,7,30,255,9,7,32,255,10,8,34,255,11,9,36,255,12,9,38,255,13,10,41,255,14,11,43,255,16,11,45,255,17,12,47,255,18,13,49,255,19,13,52,255,20,14,54,255,21,14,56,255,22,15,59,255,24,15,61,255,25,16,63,255,26,16,66,255,28,16,68,255,29,17,71,255,30,17,73,255,32,17,75,255,33,17,78,255,34,17,80,255,36,18,83,255,37,18,85,255,39,18,88,255,41,17,90,255,42,17,92,255,44,17,95,255,45,17,97,255,47,17,99,255,49,17,101,255,51,16,103,255,52,16,105,255,54,16,107,255,56,16,108,255,57,15,110,255,59,15,112,255,61,15,113,255,63,15,114,255,64,15,116,255,66,15,117,255,68,15,118,255,69,16,119,255,71,16,120,255,73,16,120,255,74,16,121,255,76,17,122,255,78,17,123,255,79,18,123,255,81,18,124,255,82,19,124,255,84,19,125,255,86,20,125,255,87,21,126,255,89,21,126,255,90,22,126,255,92,22,127,255,93,23,127,255,95,24,127,255,96,24,128,255,98,25,128,255,100,26,128,255,101,26,128,255,103,27,128,255,104,28,129,255,106,28,129,255,107,29,129,255,109,29,129,255,110,30,129,255,112,31,129,255,114,31,129,255,115,32,129,255,117,33,129,255,118,33,129,255,120,34,129,255,121,34,130,255,123,35,130,255,124,35,130,255,126,36,130,255,128,37,130,255,129,37,129,255,131,38,129,255,132,38,129,255,134,39,129,255,136,39,129,255,137,40,129,255,139,41,129,255,140,41,129,255,142,42,129,255,144,42,129,255,145,43,129,255,147,43,128,255,148,44,128,255,150,44,128,255,152,45,128,255,153,45,128,255,155,46,127,255,156,46,127,255,158,47,127,255,160,47,127,255,161,48,126,255,163,48,126,255,165,49,126,255,166,49,125,255,168,50,125,255,170,51,125,255,171,51,124,255,173,52,124,255,174,52,123,255,176,53,123,255,178,53,123,255,179,54,122,255,181,54,122,255,183,55,121,255,184,55,121,255,186,56,120,255,188,57,120,255,189,57,119,255,191,58,119,255,192,58,118,255,194,59,117,255,196,60,117,255,197,60,116,255,199,61,115,255,200,62,115,255,202,62,114,255,204,63,113,255,205,64,113,255,207,64,112,255,208,65,111,255,210,66,111,255,211,67,110,255,213,68,109,255,214,69,108,255,216,69,108,255,217,70,107,255,219,71,106,255,220,72,105,255,222,73,104,255,223,74,104,255,224,76,103,255,226,77,102,255,227,78,101,255,228,79,100,255,229,80,100,255,231,82,99,255,232,83,98,255,233,84,98,255,234,86,97,255,235,87,96,255,236,88,96,255,237,90,95,255,238,91,94,255,239,93,94,255,240,95,94,255,241,96,93,255,242,98,93,255,242,100,92,255,243,101,92,255,244,103,92,255,244,105,92,255,245,107,92,255,246,108,92,255,246,110,92,255,247,112,92,255,247,114,92,255,248,116,92,255,248,118,92,255,249,120,93,255,249,121,93,255,249,123,93,255,250,125,94,255,250,127,94,255,250,129,95,255,251,131,95,255,251,133,96,255,251,135,97,255,252,137,97,255,252,138,98,255,252,140,99,255,252,142,100,255,252,144,101,255,253,146,102,255,253,148,103,255,253,150,104,255,253,152,105,255,253,154,106,255,253,155,107,255,254,157,108,255,254,159,109,255,254,161,110,255,254,163,111,255,254,165,113,255,254,167,114,255,254,169,115,255,254,170,116,255,254,172,118,255,254,174,119,255,254,176,120,255,254,178,122,255,254,180,123,255,254,182,124,255,254,183,126,255,254,185,127,255,254,187,129,255,254,189,130,255,254,191,132,255,254,193,133,255,254,194,135,255,254,196,136,255,254,198,138,255,254,200,140,255,254,202,141,255,254,204,143,255,254,205,144,255,254,207,146,255,254,209,148,255,254,211,149,255,254,213,151,255,254,215,153,255,254,216,154,255,253,218,156,255,253,220,158,255,253,222,160,255,253,224,161,255,253,226,163,255,253,227,165,255,253,229,167,255,253,231,169,255,253,233,170,255,253,235,172,255,252,236,174,255,252,238,176,255,252,240,178,255,252,242,180,255,252,244,182,255,252,246,184,255,252,247,185,255,252,249,187,255,252,251,189,255,252,253,191,255]),plasma:new Uint8Array([13,8,135,255,16,7,136,255,19,7,137,255,22,7,138,255,25,6,140,255,27,6,141,255,29,6,142,255,32,6,143,255,34,6,144,255,36,6,145,255,38,5,145,255,40,5,146,255,42,5,147,255,44,5,148,255,46,5,149,255,47,5,150,255,49,5,151,255,51,5,151,255,53,4,152,255,55,4,153,255,56,4,154,255,58,4,154,255,60,4,155,255,62,4,156,255,63,4,156,255,65,4,157,255,67,3,158,255,68,3,158,255,70,3,159,255,72,3,159,255,73,3,160,255,75,3,161,255,76,2,161,255,78,2,162,255,80,2,162,255,81,2,163,255,83,2,163,255,85,2,164,255,86,1,164,255,88,1,164,255,89,1,165,255,91,1,165,255,92,1,166,255,94,1,166,255,96,1,166,255,97,0,167,255,99,0,167,255,100,0,167,255,102,0,167,255,103,0,168,255,105,0,168,255,106,0,168,255,108,0,168,255,110,0,168,255,111,0,168,255,113,0,168,255,114,1,168,255,116,1,168,255,117,1,168,255,119,1,168,255,120,1,168,255,122,2,168,255,123,2,168,255,125,3,168,255,126,3,168,255,128,4,168,255,129,4,167,255,131,5,167,255,132,5,167,255,134,6,166,255,135,7,166,255,136,8,166,255,138,9,165,255,139,10,165,255,141,11,165,255,142,12,164,255,143,13,164,255,145,14,163,255,146,15,163,255,148,16,162,255,149,17,161,255,150,19,161,255,152,20,160,255,153,21,159,255,154,22,159,255,156,23,158,255,157,24,157,255,158,25,157,255,160,26,156,255,161,27,155,255,162,29,154,255,163,30,154,255,165,31,153,255,166,32,152,255,167,33,151,255,168,34,150,255,170,35,149,255,171,36,148,255,172,38,148,255,173,39,147,255,174,40,146,255,176,41,145,255,177,42,144,255,178,43,143,255,179,44,142,255,180,46,141,255,181,47,140,255,182,48,139,255,183,49,138,255,184,50,137,255,186,51,136,255,187,52,136,255,188,53,135,255,189,55,134,255,190,56,133,255,191,57,132,255,192,58,131,255,193,59,130,255,194,60,129,255,195,61,128,255,196,62,127,255,197,64,126,255,198,65,125,255,199,66,124,255,200,67,123,255,201,68,122,255,202,69,122,255,203,70,121,255,204,71,120,255,204,73,119,255,205,74,118,255,206,75,117,255,207,76,116,255,208,77,115,255,209,78,114,255,210,79,113,255,211,81,113,255,212,82,112,255,213,83,111,255,213,84,110,255,214,85,109,255,215,86,108,255,216,87,107,255,217,88,106,255,218,90,106,255,218,91,105,255,219,92,104,255,220,93,103,255,221,94,102,255,222,95,101,255,222,97,100,255,223,98,99,255,224,99,99,255,225,100,98,255,226,101,97,255,226,102,96,255,227,104,95,255,228,105,94,255,229,106,93,255,229,107,93,255,230,108,92,255,231,110,91,255,231,111,90,255,232,112,89,255,233,113,88,255,233,114,87,255,234,116,87,255,235,117,86,255,235,118,85,255,236,119,84,255,237,121,83,255,237,122,82,255,238,123,81,255,239,124,81,255,239,126,80,255,240,127,79,255,240,128,78,255,241,129,77,255,241,131,76,255,242,132,75,255,243,133,75,255,243,135,74,255,244,136,73,255,244,137,72,255,245,139,71,255,245,140,70,255,246,141,69,255,246,143,68,255,247,144,68,255,247,145,67,255,247,147,66,255,248,148,65,255,248,149,64,255,249,151,63,255,249,152,62,255,249,154,62,255,250,155,61,255,250,156,60,255,250,158,59,255,251,159,58,255,251,161,57,255,251,162,56,255,252,163,56,255,252,165,55,255,252,166,54,255,252,168,53,255,252,169,52,255,253,171,51,255,253,172,51,255,253,174,50,255,253,175,49,255,253,177,48,255,253,178,47,255,253,180,47,255,253,181,46,255,254,183,45,255,254,184,44,255,254,186,44,255,254,187,43,255,254,189,42,255,254,190,42,255,254,192,41,255,253,194,41,255,253,195,40,255,253,197,39,255,253,198,39,255,253,200,39,255,253,202,38,255,253,203,38,255,252,205,37,255,252,206,37,255,252,208,37,255,252,210,37,255,251,211,36,255,251,213,36,255,251,215,36,255,250,216,36,255,250,218,36,255,249,220,36,255,249,221,37,255,248,223,37,255,248,225,37,255,247,226,37,255,247,228,37,255,246,230,38,255,246,232,38,255,245,233,38,255,245,235,39,255,244,237,39,255,243,238,39,255,243,240,39,255,242,242,39,255,241,244,38,255,241,245,37,255,240,247,36,255,240,249,33,255])},Qt=function(t){function e(e){t.call(this,e),this.init()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){var t=this,e=this.get("data"),n=[],r=[],i=[];e.forEach(function(e){var o=e.coordinates,a=e.size,s=t._addDir(-1,1),u=t._addDir(1,1),c=t._addDir(-1,-1),l=t._addDir(1,-1);n.push.apply(n,o.concat(o,o,o,o,o)),r.push.apply(r,s.concat(c,l,u,s,l)),i.push(a,a,a,a,a,a)}),this.attributes={vertices:n,dirs:r,weights:i}},e.prototype._addVertex=function(t,e,n){var r=2*t[0]+(e+1)/2,i=2*t[1]+(n+1)/2,o=t[2];return[r,i,o]},e.prototype._addDir=function(t,e){var n=(t+1)/2,r=(e+1)/2;return[n,r]},e}(t.Base);function $t(t){var e=te(t),n=ee(e);return n}function te(t){var e=t,n=document.createElement("canvas"),r=n.getContext("2d");n.width=1,n.height=256;var i=r.createLinearGradient(0,0,0,256),o=null;if("string"===typeof e&&(e=Jt[t]),"[object Object]"===Object.prototype.toString.call(e)){for(var a=e.positions[0],s=e.positions[e.positions.length-1],u=0;u<e.colors.length;++u){var c=(e.positions[u]-a)/(s-a);i.addColorStop(c,e.colors[u])}r.fillStyle=i,r.fillRect(0,0,1,256),o=new Uint8ClampedArray(r.getImageData(0,0,1,256).data)}return"[object Uint8Array]"===Object.prototype.toString.call(e)&&(o=r.createImageData(1,256)),new ImageData(o,1,256)}function ee(e){var n=new t.Texture(e);return n.wrapS=t.ClampToEdgeWrapping,n.wrapT=t.ClampToEdgeWrapping,n.magFilter=t.NearestFilter,n.minFilter=t.NearestFilter,n.format=t.RGBAFormat,n.type=t.UnsignedByteType,n.needsUpdate=!0,n}var ne=function(t){function e(e,n,r){void 0===n&&(n={}),t.call(this,r);var i=this.getDefaultParameters(),o=i.uniforms,a=i.defines,s=$("heatmap_color"),u=s.vs,c=s.fs;this.uniforms=Object.assign(o,this.setUniform(e)),this.type="HeatmapColorizeMaterial",this.defines=Object.assign(a,n),this.vertexShader=u,this.fragmentShader=c,this.transparent=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultParameters=function(){return{uniforms:{u_intensity:{value:1},u_texture:{value:null},u_rampColors:{value:0},u_opacity:{value:1}},defines:{}}},e}(k),re=function(e){function n(n,r,i){void 0===r&&(r={}),e.call(this,i);var o=this.getDefaultParameters(),a=o.uniforms,s=o.defines,u=$("heatmap_intensity"),c=u.vs,l=u.fs;this.uniforms=Object.assign(a,this.setUniform(n)),this.type="heatmap_intensity",this.defines=Object.assign(s,r),this.vertexShader=c,this.blending=t.AdditiveBlending,this.fragmentShader=l,this.depthTest=!1,this.transparent=!0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultParameters=function(){return{uniforms:{u_intensity:{value:10},u_zoom:{value:4},u_radius:{value:10}},defines:{}}},n}(k),ie=function(e,n,r,i,o){this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==o?o:1,this.oldClearColor=new t.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!1,this.needsSwap=!1};ie.prototype={render:function(t,e,n,r){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),t.render(this.scene,this.camera,n,this.clear),this.clearColor&&t.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}};var oe=function(e,n){this.textureID=void 0!==n?n:"tDiffuse",e instanceof t.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=t.UniformsUtils.clone(e.uniforms),this.material=new t.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!0,this.camera=new t.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new t.Scene,this.quad=new t.Mesh(new t.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)};oe.prototype={render:function(t,e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),t.autoClear=!1,this.quad.material=this.material,this.renderToScreen?t.render(this.scene,this.camera):t.render(this.scene,this.camera,e,this.clear),t.autoClear=!0}};var ae={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},se=function(t,e){this.scene=t,this.camera=e,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1};se.prototype={render:function(t,e,n,r){var i,o,a=t.context;a.colorMask(!1,!1,!1,!1),a.depthMask(!1),this.inverse?(i=0,o=1):(i=1,o=0),a.enable(a.STENCIL_TEST),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.ALWAYS,i,4294967295),a.clearStencil(o),t.render(this.scene,this.camera,n,this.clear),t.render(this.scene,this.camera,e,this.clear),a.colorMask(!0,!0,!0,!0),a.depthMask(!0),a.stencilFunc(a.EQUAL,1,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)}};var ue=function(){this.enabled=!0};ue.prototype={render:function(t,e,n,r){var i=t.context;i.disable(i.STENCIL_TEST)}};var ce=function(e,n){if(this.renderer=e,void 0===n){var r=e.getPixelRatio(),i=Math.floor(e.context.canvas.width/r)||1,o=Math.floor(e.context.canvas.height/r)||1,a={minFilter:t.LinearFilter,magFilter:t.LinearFilter,format:t.RGBAFormat,stencilBuffer:!1};n=new t.WebGLRenderTarget(i,o,a)}this.renderTarget1=n,this.renderTarget2=n.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===ae&&console.error("EffectComposer relies on THREE.CopyShader"),this.copyPass=new oe(ae)};function le(t,e){var n=new ce(t),r=function(){var t=1;n.setSize(e.clientWidth*t,e.clientHeight*t)};return window.addEventListener("resize",r,!1),r(),n}function fe(t,e){var n=e.get("styleOptions").rampColors;e.rampColors=$t(n);var r=new he(t,e),i=new pe(e);i.renderToScreen=!0;var o=new le(e.scene._engine._renderer,e.scene._container);return o.id=e.layerId,o.addPass(r),o.addPass(i),e.scene._engine.update(),e._updateStyle=function(t){t.rampColors&&(t.rampColors=$t(t.rampColors));var e={};for(var n in t)e["u_"+n]=t[n];r.scene.children[0].material.updateUninform(e),i.scene.children[0].material.updateUninform(e)},o}function he(e,n){var r=new t.Scene,i=n.get("styleOptions"),o=e,a=n.scene._engine._camera,s=new Qt({data:o}),u=s.attributes,c=new t.BufferGeometry;c.addAttribute("position",new t.Float32BufferAttribute(u.vertices,3)),c.addAttribute("a_dir",new t.Float32BufferAttribute(u.dirs,2)),c.addAttribute("a_weight",new t.Float32BufferAttribute(u.weights,1));var l=new re({u_intensity:i.intensity,u_radius:i.radius,u_zoom:n.scene.getZoom()},{}),f=new t.Mesh(c,l);r.add(f),r.onBeforeRender=function(){var t=n.scene.getZoom();f.material.setUniformsValue("u_zoom",t)};var h=new ie(r,a);return h}function pe(t){var e=t.get("styleOptions"),n=new ne({u_rampColors:t.rampColors,u_opacity:e.opacity||1},{}),r=new oe(n,"u_texture");return r}function de(t){var e=$("image"),n=e.vs,r=e.fs,i=new k({uniforms:{u_opacity:{value:t.u_opacity},u_texture:{value:t.u_texture}},vertexShader:n,fragmentShader:r,transparent:!0,depthTest:!1});return i}function ve(e,n){var r=new t.BufferGeometry;r.addAttribute("position",new t.Float32BufferAttribute(e.vertices,3)),r.addAttribute("uv",new t.Float32BufferAttribute(e.uvs,2));var i=n.opacity,o=new de({u_texture:e.texture,u_opacity:i});return new t.Mesh(r,o)}ce.prototype={swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},visible:!0,type:"composer",addPass:function(t){this.passes.push(t)},insertPass:function(t,e){this.passes.splice(e,0,t)},render:function(t){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var e,n,r=!1,i=this.passes.length;for(n=0;n<i;n++)if(e=this.passes[n],e.enabled){if(e.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),e.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}e instanceof se?r=!0:e instanceof ue&&(r=!1)}},reset:function(t){if(void 0===t){t=this.renderTarget1.clone();var e=this.renderer.getPixelRatio();t.setSize(Math.floor(this.renderer.context.canvas.width/e),Math.floor(this.renderer.context.canvas.height/e))}this.renderTarget1.dispose(),this.renderTarget1=t,this.renderTarget2.dispose(),this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e)},destory:function(){this.renderTarget1.dispose(),this.renderTarget2.dispose()}},D("polygon","fill",st),D("polygon","extrude",st),D("polygon","line",ft),D("polygon","animate",ht),D("line","line",Ct),D("line","arc",Lt),D("line","greatCircle",Lt),D("point","image",zt),D("point","normal",Gt),D("point","stroke",Ht),D("point","text",jt),D("point","fill",Wt),D("point","shape",pt),D("point","extrude",pt),D("heatmap","square",Kt),D("heatmap","squareColumn",Kt),D("heatmap","heatmap",fe),D("heatmap","shape",Xt),D("image","image",ve),D("text","text",jt);var ge=function(t){function e(e,n){t.call(this,e,n),this.set("type","polygon")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shape=function(t){return this.shape=t,this.set("shape",t),this.set("shapeType","polygon"),this},e.prototype.draw=function(){this.type="polygon";var t=this.get("animateOptions");t.enable&&(this.shape="animate"),this.add(F(this.type,this.shape)(this.layerData,this))},e.prototype.update=function(){this.updateFilter(this.layerMesh)},e}(I);ge.type="polygon";var me=t.Global.pointShape,ye=function(t){function e(e,n){t.call(this,e,n),this.set("type","point")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(){this.type="point",this.shapeType=this._getShape();var t=F(this.type,this.shapeType)(this.layerData,this);this.add(t)},e.prototype._getShape=function(){var t=null;if(!this.layerData[0].hasOwnProperty("shape"))return"normal";for(var e=0;e<this.layerData.length;e++)if(t=this.layerData[e].shape,void 0!==t)break;return-1!==me["2d"].indexOf(t)?"fill":-1!==me["3d"].indexOf(t)?"extrude":-1!==this.scene.image.imagesIds.indexOf(t)?"image":"text"},e.prototype.zoomchange=function(e){var n=this;t.prototype.zoomchange.call(this,e),requestAnimationFrame(function(){n._updateData()})},e.prototype.dragend=function(e){var n=this;t.prototype.dragend.call(this,e),requestAnimationFrame(function(){n._updateData()})},e.prototype.resize=function(){t.prototype.resize.call(this),"text"===this.shapeType&&this.repaint()},e.prototype._updateData=function(){if(this.layerSource.get("isCluster")){var t=this.scene.getBounds().toBounds(),e=t.getSouthWest(),n=t.getNorthEast(),r=this.scene.getZoom(),i=Math.max(n.lng-e.lng,n.lat-e.lat)/2,o=[e.lng,e.lat,n.lng,n.lat],a=this.layerSource.get("cluster"),s=a.bbox,u=a.zoom;if(!(s&&s[0]<o[0]&&s[1]<o[1]&&s[2]>o[2]&&s[3]<o[3]&&Math.abs(r-u)<.5)){var c=[e.lng-i,e.lat-i,n.lng+i,n.lat+i];this.layerSource.updateCusterData(Math.floor(r-1),c),this.repaint()}}},e}(I);ye.type="point";var _e=function(t){function e(e,n){t.call(this,e,n),this.set("type","line")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shape=function(e,n){return t.prototype.shape.call(this,e,n),this.shapeType=e,this.set("shape",e),this},e.prototype.preRender=function(){this.animateDuration>0&&this.animateDuration<this.scene._engine.clock.getElapsedTime()&&(this.layerMesh.material.setDefinesvalue("ANIMATE",!1),this.scene.stopAnimate(),this.emit("animateEnd"),this.animateDuration=1/0)},e.prototype.draw=function(){this.type="line",this.add(F("line",this.shapeType||"line")(this.layerData,this))},e}(I);_e.type="line";var be=function(e){function n(t){e.call(this,t),this.init()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var e=this,n=this.get("layerData"),r=n[0].coordinates,i=n[0].images,o=r[0].concat([r[1][0]],[r[0][1]],[0],r[1],r[0],r[1],[r[0][0]],[r[1][1]],[0]),a=i;if(t.Util.isArray(i)){a=i[0];var s=i.map(function(t){return e._getTexture(t)});this.u_rasters=s}var u=[0,1,1,1,1,0,0,1,1,0,0,0],c=new t.Texture(a);c.magFilter=t.LinearFilter,c.minFilter=t.LinearMipMapLinearFilter,c.needsUpdate=!0;var l={vertices:new Float32Array(o),uvs:new Float32Array(u)};this.attributes=l,this.texture=c},n.prototype._getTexture=function(e){var n=new t.Texture(e);n.magFilter=t.LinearFilter,n.minFilter=t.LinearFilter},n}(t.Base),xe=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.draw=function(){var e=this;this.type="image";var n=this.layerSource,r=this.get("styleOptions"),i=r.opacity;return n.originData.images.then(function(n){e.layerData[0].images=n;var r=new be({layerData:e.layerData});e.initGeometry(r.attributes);var o=new de({u_texture:r.texture,u_opacity:i}),a=new t.Mesh(e.geometry,o);e.add(a),e.scene._engine.update()}),this},n.prototype.initGeometry=function(e){this.geometry=new t.BufferGeometry,this.geometry.addAttribute("position",new t.Float32BufferAttribute(e.vertices,3)),this.geometry.addAttribute("uv",new t.Float32BufferAttribute(e.uvs,2))},n}(I);function we(t){var e=$("raster"),n=e.vs,r=e.fs,i=new k({uniforms:{u_opacity:{value:t.u_opacity},u_texture:{value:t.u_texture},u_colorTexture:{value:t.u_colorTexture},u_min:{value:t.u_min},u_max:{value:t.u_max},u_extent:{value:t.u_extent},u_dimension:{value:t.u_dimension}},vertexShader:n,fragmentShader:r,transparent:!1});return i}var Me=function(e){function n(t){e.call(this,t),this.init()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var e=this.get("layerData"),n=e.dataArray[0],r=n.coordinates,i=n.width,o=n.data,a=n.height,s=r[0].concat([r[1][0]],[r[0][1]],[0],r[1],r[0],r[1],[r[0][0]],[r[1][1]],[0]),u=[0,1,1,1,1,0,0,1,1,0,0,0],c=this.get("size"),l=new t.DataTexture(new Float32Array(o),i,a,t.LuminanceFormat,t.FloatType);l.needsUpdate=!0;var f=this.get("rampColors"),h=this.getColorRamp(f),p=this._getTexture(h);this.position=s,this.uv=u,this.u_raster=l,this.u_extent=[r[0][0],r[0][1],r[1][0],r[1][1]],this.u_colorTexture=p;var d=this._buildTriangles(i,a,c,this.u_extent),v={vertices:new Float32Array(d.vertices),uvs:new Float32Array(d.uvs),indices:d.indices,dimension:d.dimension};this.attributes=v},n.prototype.getColorRamp=function(t){var e=t,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,0),o=null;if("string"===typeof e&&(e=Jt[t]),"[object Object]"===Object.prototype.toString.call(e)){for(var a=e.positions[0],s=e.positions[e.positions.length-1],u=0;u<e.colors.length;++u){var c=(e.positions[u]-a)/(s-a);i.addColorStop(c,e.colors[u])}r.fillStyle=i,r.fillRect(0,0,256,1),o=new Uint8ClampedArray(r.getImageData(0,0,256,1).data)}return"[object Uint8Array]"===Object.prototype.toString.call(e)&&(o=r.createImageData(256,1)),new ImageData(o,16,16)},n.prototype._getTexture=function(e){var n=new t.Texture(e);return n.magFilter=t.LinearFilter,n.minFilter=t.LinearFilter,n.format=t.RGBAFormat,n.type=t.UnsignedByteType,n.generateMipmaps=!0,n.needsUpdate=!0,n},n.prototype._buildTriangles=function(t,e,n,r){void 0===n&&(n=2);for(var i=[],o=[],a=[],s=Math.floor(t/n),u=Math.floor(e/n),c=s+1,l=u+1,f=(r[2]-r[0])/c,h=(r[3]-r[1])/l,p=0;p<l;p++)for(var d=p*n,v=0;v<c;v++){var g=v*n;o.push(r[0]+g*f,(e-d)*h+r[1],0),a.push(v/s),a.push(p/u)}for(var m=0;m<u;m++)for(var y=0;y<s;y++){var _=y+c*m,b=y+c*(m+1),x=y+1+c*(m+1),w=y+1+c*m;i.push(_,b,w),i.push(b,x,w)}return{uvs:a,indices:i,vertices:o,dimension:[s,u]}},n}(t.Base),Ee=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.draw=function(){this.type="raster";var e=this.layerSource,n=this.get("styleOptions"),r=new Me({layerData:e.data,rampColors:n.rampColors});this.initGeometry(r.attributes);var i=e.data.dataArray[0],o=new we({u_texture:r.u_raster,u_colorTexture:r.u_colorTexture,u_opacity:1,u_extent:r.u_extent,u_min:i.min,u_max:i.max,u_dimension:r.attributes.dimension}),a=new t.Mesh(this.geometry,o);return this.add(a),this},n.prototype.animateFunc=function(){var t=this,e=this.get("animateOptions");this.material.setValue("u_bands",this.animateData.index%3),this.material.setValue("u_texture",this.animateData.rasters[Math.floor(this.animateData.index/3)%8]),this.animateData.index++,e&&e(this.animateData.index),setTimeout(function(){t.animateId=requestAnimationFrame(t.animateFunc.bind(t))},500)},n.prototype.cancelAnimate=function(){window.cancelAnimationFrame(this.animateId)},n.prototype.initGeometry=function(e){this.geometry=new t.BufferGeometry,this.geometry.setIndex(e.indices),this.geometry.addAttribute("position",new t.Float32BufferAttribute(e.vertices,3)),this.geometry.addAttribute("uv",new t.Float32BufferAttribute(e.uvs,2))},n}(I),Oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shape=function(t){return this.shapeType=t,this},e.prototype.draw=function(){this.type="heatmap",this.shapeType||(this.shapeType="heatmap");var t="heatmap"===this.shapeType?"heatmap":"shape";this.add(F("heatmap",t)(this.layerData,this,this.layerSource))},e}(I),Se=function(t,e){void 0===t&&(t=50),void 0===e&&(e=function(){}),this.limit=t,this.destroy=e,this._order=[],this.clear()};Se.prototype.clear=function(){var t=this;this._order.forEach(function(e){t.delete(e)}),this._cache={},this._order=[]},Se.prototype.get=function(t){var e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e},Se.prototype.set=function(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))},Se.prototype.delete=function(t){var e=this._cache[t];e&&(this._deleteCache(t),this._deleteOrder(t),this.destroy(e,t))},Se.prototype._deleteCache=function(t){delete this._cache[t]},Se.prototype._deleteOrder=function(t){var e=this._order.findIndex(function(e){return e===t});e>=0&&this._order.splice(e,1)},Se.prototype._appendOrder=function(t){this._order.push(t)};var Te=function(t,e){void 0===t&&(t=50),this._cache=new Se(t,e)};Te.prototype.getTile=function(t){return this._cache.get(t)},Te.prototype.setTile=function(t,e){this._cache.set(e,t)},Te.prototype.removeTile=function(t){return this._cache.delete(t)},Te.prototype.destory=function(){this._cache.clear()};var je=/\{([zxy])\}/g,Ae=function(e){function n(t,n){e.call(this,n),this.cfg=n,this.urlTemplate=t,this._tileDataCache=new Te(50,this.tileDestroy),this.type="tile"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getTileData=function(t,e,n){var r=this,i=[t,e,n].join("_"),o=this._tileDataCache.getTile(i);if(!o){var a=new Promise(function(i){o?setTimeout(function(){i(o)},0):r._requestTileData(t,e,n,i)});return o={loading:!0,data:a},this._tileDataCache.setTile(o,i),o}return o},n.prototype._init=function(){var t=this.get("parser");this.set("minSourceZoom",t&&t.minZoom||0),this.set("maxSourceZoom",t&&t.maxZoom||18)},n.prototype._generateSource=function(t,n,r,i){this.cfg.parser.tile=[t,n,r];var o=new e(Object.assign({},this.cfg,{mapType:this.get("mapType"),data:i,tile:[t,n,r]}));return o},n.prototype._requestTileData=function(e,n,r,i){var o=this,a={x:e,y:n,z:r},s=this._getTileURL(a),u=[e,n,r].join("_");this.xhrRequest=t.getArrayBuffer({url:s},function(t,a){if(t)return o._noData=!0,void o._tileDataCache.setTile({loaded:!0,data:{data:null}},u);var s=o._generateSource(e,n,r,a.data);o._tileDataCache.setTile({loaded:!0,data:s},u),i(s)})},n.prototype.getRequestUrl=function(t,e,n){var r={x:t,y:e,z:n};return this._getTileURL(r)},n.prototype._getTileURL=function(t){return t.s||(t.s=String.fromCharCode(97+Math.floor(3*Math.random()))),je.lastIndex=0,this.urlTemplate.replace(je,function(e,n){return t[n]})},n.prototype.tileDestroy=function(t){if(t&&t.data&&!t.loading&&t.data.data&&t.data.data.dataArray){var e=t.data;e.destroy()}},n}(t.Source),Ce=function(t,e){void 0===t&&(t=50),this._cache=new Se(t,e)};Ce.prototype.getTile=function(t){return this._cache.get(t)},Ce.prototype.setTile=function(t,e){this._cache.set(e,t)},Ce.prototype.destory=function(){this._cache.clear()},Ce.prototype.setNeedUpdate=function(){var t=this;this._cache._order.forEach(function(e){var n=t._cache.get(e);n.needUpdate=!0})};var Le=function(t,e){return Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Le(t,e)};function Pe(t,e){function n(){this.constructor=t}Le(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ie=function(){return Ie=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ie.apply(this,arguments)};function Re(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Fe(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function De(t,e){return function(n,r){e(n,r,t)}}function ke(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function Ne(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r["throw"](t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Be(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function ze(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function Ue(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function Ge(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function Ve(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e=e.concat(Ge(t[n]));return e}function He(){for(var t=arguments,e=0,n=0,r=arguments.length;n<r;n++)e+=t[n].length;var i=Array(e),o=0;for(n=0;n<r;n++)for(var a=arguments[n],s=0,u=a.length;s<u;s++,o++)i[o]=a[s];return i}function qe(t){return this instanceof qe?(this.v=t,this):new qe(t)}function We(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{u(i[t](e))}catch(t){f(o[0][3],t)}}function u(t){t.value instanceof qe?Promise.resolve(t.value.v).then(c,l):f(o[0][2],t)}function c(t){s("next",t)}function l(t){s("throw",t)}function f(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Ye(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:qe(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function Xe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof Ue?Ue(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){e=t[n](e),i(r,o,e.done,e.value)})}}function i(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}}function Ze(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ke(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Je(t){return t&&t.__esModule?t:{default:t}}var Qe=Object.freeze({__proto__:null,__extends:Pe,get __assign(){return Ie},__rest:Re,__decorate:Fe,__param:De,__metadata:ke,__awaiter:Ne,__generator:Be,__exportStar:ze,__values:Ue,__read:Ge,__spread:Ve,__spreadArrays:He,__await:qe,__asyncGenerator:We,__asyncDelegator:Ye,__asyncValues:Xe,__makeTemplateObject:Ze,__importStar:Ke,__importDefault:Je}),$e=t.createCommonjsModule(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=o,e.equals=a;var n=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;function r(t){e.ARRAY_TYPE=t}var i=Math.PI/180;function o(t){return t*i}function a(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))}});t.unwrapExports($e);$e.setMatrixArrayType,$e.toRadian,$e.equals,$e.EPSILON,$e.ARRAY_TYPE,$e.RANDOM;var tn=t.createCommonjsModule(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.fromMat4=o,e.clone=a,e.copy=s,e.fromValues=u,e.set=c,e.identity=l,e.transpose=f,e.invert=h,e.adjoint=p,e.determinant=d,e.multiply=v,e.translate=g,e.rotate=m,e.scale=y,e.fromTranslation=_,e.fromRotation=b,e.fromScaling=x,e.fromMat2d=w,e.fromQuat=M,e.normalFromMat4=E,e.projection=O,e.str=S,e.frob=T,e.add=j,e.subtract=A,e.multiplyScalar=C,e.multiplyScalarAndAdd=L,e.exactEquals=P,e.equals=I;var n=r($e);function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new n.ARRAY_TYPE(9);return n.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,r,i,o,a,s,u,c){var l=new n.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=r,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l}function c(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=n*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(l*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1],d=n[2],v=n[3],g=n[4],m=n[5],y=n[6],_=n[7],b=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*r+g*a+m*c,t[4]=v*i+g*s+m*l,t[5]=v*o+g*u+m*f,t[6]=y*r+_*a+b*c,t[7]=y*i+_*s+b*l,t[8]=y*o+_*u+b*f,t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*i+p*s+l,t[8]=h*o+p*u+f,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*r,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=l,t[8]=f,t}function y(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-d,t[3]=l-m,t[6]=h+g,t[1]=l+m,t[4]=1-c-d,t[7]=p-v,t[2]=h-g,t[5]=p+v,t[8]=1-c-f,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*c-o*a,x=r*u-i*s,w=r*c-o*s,M=i*c-o*u,E=l*v-f*d,O=l*g-h*d,S=l*m-p*d,T=f*g-h*v,j=f*m-p*v,A=h*m-p*g,C=y*A-_*j+b*T+x*S-w*O+M*E;return C?(C=1/C,t[0]=(s*A-u*j+c*T)*C,t[1]=(u*S-a*A-c*O)*C,t[2]=(a*j-s*S+c*E)*C,t[3]=(i*j-r*A-o*T)*C,t[4]=(n*A-i*S+o*O)*C,t[5]=(r*S-n*j-o*E)*C,t[6]=(v*M-g*w+m*x)*C,t[7]=(g*b-d*M-m*_)*C,t[8]=(d*w-v*b+m*y)*C,t):null}function O(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function S(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function T(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function j(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function A(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function C(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function L(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function I(t,e){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=e[0],p=e[1],d=e[2],v=e[3],g=e[4],m=e[5],y=e[6],_=e[7],b=e[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-v)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-_)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-b)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))}e.mul=v,e.sub=A});t.unwrapExports(tn);tn.sub,tn.mul,tn.create,tn.fromMat4,tn.clone,tn.copy,tn.fromValues,tn.set,tn.identity,tn.transpose,tn.invert,tn.adjoint,tn.determinant,tn.multiply,tn.translate,tn.rotate,tn.scale,tn.fromTranslation,tn.fromRotation,tn.fromScaling,tn.fromMat2d,tn.fromQuat,tn.normalFromMat4,tn.projection,tn.str,tn.frob,tn.add,tn.subtract,tn.multiplyScalar,tn.multiplyScalarAndAdd,tn.exactEquals,tn.equals;var en=t.createCommonjsModule(function(t,e){e.__esModule=!0,tn.translate=function(t,e,n){var r=Array(9);return tn.fromTranslation(r,n),tn.multiply(t,r,e)},tn.rotate=function(t,e,n){var r=Array(9);return tn.fromRotation(r,n),tn.multiply(t,r,e)},tn.scale=function(t,e,n){var r=Array(9);return tn.fromScaling(r,n),tn.multiply(t,r,e)},tn.transform=function(t,e){for(var n=[].concat(t),r=0,i=e.length;r<i;r+=1){var o=e[r];switch(o[0]){case"t":tn.translate(n,n,[o[1],o[2]]);break;case"s":tn.scale(n,n,[o[1],o[2]]);break;case"r":tn.rotate(n,n,o[1]);break;default:break}}return n},e["default"]=tn});t.unwrapExports(en);var nn=t.createCommonjsModule(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.length=a,e.fromValues=s,e.copy=u,e.set=c,e.add=l,e.subtract=f,e.multiply=h,e.divide=p,e.ceil=d,e.floor=v,e.min=g,e.max=m,e.round=y,e.scale=_,e.scaleAndAdd=b,e.distance=x,e.squaredDistance=w,e.squaredLength=M,e.negate=E,e.inverse=O,e.normalize=S,e.dot=T,e.cross=j,e.lerp=A,e.hermite=C,e.bezier=L,e.random=P,e.transformMat4=I,e.transformMat3=R,e.transformQuat=F,e.rotateX=D,e.rotateY=k,e.rotateZ=N,e.angle=B,e.str=z,e.exactEquals=U,e.equals=G;var n=r($e);function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function s(t,e,r){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function p(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function M(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function O(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function A(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function C(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function L(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*h,t}function P(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function R(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function F(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,p=i*h-o*f,d=o*l-r*h,v=r*f-i*l,g=2*a;return l*=g,f*=g,h*=g,p*=2,d*=2,v*=2,t[0]=s+l+p,t[1]=u+f+d,t[2]=c+h+v,t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function k(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function N(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e){var n=s(t[0],t[1],t[2]),r=s(e[0],e[1],e[2]);S(n,n),S(r,r);var i=T(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function z(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function G(t,e){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}e.sub=f,e.mul=h,e.div=p,e.dist=x,e.sqrDist=w,e.len=a,e.sqrLen=M,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s=void 0,u=void 0;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()});t.unwrapExports(nn);nn.forEach,nn.sqrLen,nn.len,nn.sqrDist,nn.dist,nn.div,nn.mul,nn.sub,nn.create,nn.clone,nn.length,nn.fromValues,nn.copy,nn.set,nn.add,nn.subtract,nn.multiply,nn.divide,nn.ceil,nn.floor,nn.min,nn.max,nn.round,nn.scale,nn.scaleAndAdd,nn.distance,nn.squaredDistance,nn.squaredLength,nn.negate,nn.inverse,nn.normalize,nn.dot,nn.cross,nn.lerp,nn.hermite,nn.bezier,nn.random,nn.transformMat4,nn.transformMat3,nn.transformQuat,nn.rotateX,nn.rotateY,nn.rotateZ,nn.angle,nn.str,nn.exactEquals,nn.equals;var rn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t){void 0===t&&(t={}),this.matrix=[1,0,0,0,1,0,0,0,1],this.isTransposed=!1,Object.assign(this,t),this.init()}return t.prototype.init=function(){var t=this.start,e=this.end,n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};this.center=n,this.width=Math.abs(e.x-t.x),this.height=Math.abs(e.y-t.y)},t.prototype._swapDim=function(t){var e=this[t];if(e){var n=e.start;e.start=e.end,e.end=n}},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.convertDim=function(t,e){var n=this[e],r=n.start,i=n.end;return r+t*(i-r)},t.prototype.invertDim=function(t,e){var n=this[e],r=n.start,i=n.end;return(t-r)/(i-r)},t.prototype.convertPoint=function(t){return t},t.prototype.invertPoint=function(t){return t},t.prototype.applyMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,i=[t,e,n];return nn.transformMat3(i,i,r),i},t.prototype.invertMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,i=en["default"].invert([],r),o=[t,e,n];return nn.transformMat3(o,o,i),o},t.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},t.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(t){var e=this.matrix,n=this.center;return en["default"].translate(e,e,[-n.x,-n.y]),en["default"].rotate(e,e,t),en["default"].translate(e,e,[n.x,n.y]),this},t.prototype.reflect=function(t){switch(t){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this},t.prototype.scale=function(t,e){var n=this.matrix,r=this.center;return en["default"].translate(n,n,[-r.x,-r.y]),en["default"].scale(n,n,[t,e]),en["default"].translate(n,n,[r.x,r.y]),this},t.prototype.translate=function(t,e){var n=this.matrix;return en["default"].translate(n,n,[t,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t}();e["default"]=n});t.unwrapExports(rn);var on=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(t){return t>0?Math.floor(t):Math.ceil(t)};function r(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function i(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}e.trunc=n,e.formatNum=r,e.wrapNum=i});t.unwrapExports(on);on.trunc,on.formatNum;var an=on.wrapNum,sn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t,e,n){return this.clone()._add(r(t,e,n))},t.prototype._add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t,e,n){return this.clone()._subtract(r(t,e,n))},t.prototype._subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.divideBy=function(t){return this.clone()._divideBy(t)},t.prototype._divideBy=function(t){return this.x/=t,this.y/=t,this},t.prototype.multiplyBy=function(t){return this.clone()._multiplyBy(t)},t.prototype._multiplyBy=function(t){return this.x*=t,this.y*=t,this},t.prototype.scaleBy=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.unscaleBy=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.round=function(){return this.clone()._round()},t.prototype._round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.floor=function(){return this.clone()._floor()},t.prototype._floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.prototype.ceil=function(){return this.clone()._ceil()},t.prototype._ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.trunc=function(){return this.clone()._trunc()},t.prototype._trunc=function(){return this.x=on.trunc(this.x),this.y=on.trunc(this.y),this},t.prototype.distanceTo=function(t){var e=r(t),n=e.x-this.x,i=e.y-this.y;return Math.sqrt(n*n+i*i)},t.prototype.equals=function(t,e){var n=r(t),i=Math.max(Math.abs(this.x-n.x),Math.abs(this.y-n.y));return i<=(void 0===e?1e-9:e)},t.prototype.contains=function(t){var e=r(t);return Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},t.prototype.toString=function(){return"Point("+on.formatNum(this.x)+", "+on.formatNum(this.y)+")"},t}();function r(t,e,r){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new n(t.x,t.y):new n(t,e,r)}e.Point=n,e.toPoint=r});t.unwrapExports(sn);sn.Point,sn.toPoint;var un=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t,e){if(t){var n=e?[t,e]:t;if(Array.isArray(n))for(var r=0,i=n.length;r<i;r+=1)this.extend(n[r])}}return t.prototype.extend=function(t){var e=sn.toPoint(t);return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},t.prototype.getCenter=function(t){return new sn.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},t.prototype.getBottomLeft=function(){return new sn.Point(this.min.x,this.max.y)},t.prototype.getTopRight=function(){return new sn.Point(this.max.x,this.min.y)},t.prototype.getBottomRight=function(){return this.max},t.prototype.getTopLeft=function(){return this.min},t.prototype.getSize=function(){return this.max.subtract(this.min)},t.prototype.contains=function(e){var n,i,o=e;return o=o instanceof sn.Point||"number"===typeof o[0]?sn.toPoint(o):r(o),o instanceof t?(n=o.min,i=o.max):n=i=e,n.x>=this.min.x&&i.x<=this.max.x&&n.y>=this.min.y&&i.y<=this.max.y},t.prototype.intersect=function(t){var e=r(t),n=this.min,i=this.max,o=e.min,a=e.max,s=a.x>=n.x&&o.x<=i.x,u=a.y>=n.y&&o.y<=i.y;return s&&u},t.prototype.overlaps=function(t){var e=r(t),n=this.min,i=this.max,o=e.min,a=e.max,s=a.x>n.x&&o.x<i.x,u=a.y>n.y&&o.y<i.y;return s&&u},t.prototype.isValid=function(){return!(!this.min||!this.max)},t}();function r(t,e){return!t||t instanceof n?t:new n(t,e)}e.Bounds=n,e.toBounds=r});t.unwrapExports(un);un.Bounds,un.toBounds;var cn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t,e){if(t){var n=e?[t,e]:t;if(Array.isArray(n))for(var r=0,i=n.length;r<i;r+=1)this.extend(n[r])}}return t.prototype.extend=function(e){var n,i,o=this.southWest,a=this.northEast;if(e instanceof ln.LngLat)n=e,i=e;else{if(!(e instanceof t))return e&&Array.isArray(e)?Array.isArray(e[0])?this.extend(r(e)):this.extend(ln.toLngLat(e)):this;if(n=e.southWest,i=e.northEast,!n||!i)return this}return o||a?(o.lat=Math.min(n.lat,o.lat),o.lng=Math.min(n.lng,o.lng),a.lat=Math.max(i.lat,a.lat),a.lng=Math.max(i.lng,a.lng)):(this.southWest=new ln.LngLat(n.lng,n.lat),this.northEast=new ln.LngLat(i.lng,i.lat)),this},t.prototype.pad=function(e){var n=this.southWest,r=this.northEast,i=Math.abs(n.lat-r.lat)*e,o=Math.abs(n.lng-r.lng)*e;return new t(new ln.LngLat(n.lng-o,n.lat-i),new ln.LngLat(r.lng+o,r.lat+i))},t.prototype.getCenter=function(){return new ln.LngLat((this.southWest.lng+this.northEast.lng)/2,(this.southWest.lat+this.northEast.lat)/2)},t.prototype.getSouthWest=function(){return this.southWest},t.prototype.getNorthEast=function(){return this.northEast},t.prototype.getNorthWest=function(){return new ln.LngLat(this.getWest(),this.getNorth())},t.prototype.getSouthEast=function(){return new ln.LngLat(this.getEast(),this.getSouth())},t.prototype.getWest=function(){return this.southWest.lng},t.prototype.getSouth=function(){return this.southWest.lat},t.prototype.getNorth=function(){return this.northEast.lat},t.prototype.getEast=function(){return this.northEast.lng},t.prototype.contains=function(e){var n=e;n=Array.isArray(n)&&"number"===typeof n[0]||n instanceof ln.LngLat||"lat"in n?ln.toLngLat(n):r(n);var i,o,a=this.southWest,s=this.northEast;return n instanceof t?(i=n.getSouthWest(),o=n.getNorthEast()):i=o=n,i.lat>=a.lat&&o.lat<=s.lat&&i.lng>=a.lng&&o.lng<=s.lng},t.prototype.intersects=function(t){var e=r(t),n=this.southWest,i=this.northEast,o=e.getSouthWest(),a=e.getNorthEast(),s=a.lat>=n.lat&&o.lat<=i.lat,u=a.lng>=n.lng&&o.lng<=i.lng;return s&&u},t.prototype.overlaps=function(t){var e=r(t),n=this.southWest,i=this.northEast,o=e.getSouthWest(),a=e.getNorthEast(),s=a.lat>n.lat&&o.lat<i.lat,u=a.lng>n.lng&&o.lng<i.lng;return s&&u},t.prototype.toBBoxString=function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},t.prototype.equals=function(t,e){if(!t)return!1;var n=r(t);return this.southWest.equals(n.getSouthWest(),e)&&this.northEast.equals(n.getNorthEast(),e)},t.prototype.isValid=function(){return!(!this.southWest||!this.northEast)},t}();function r(t,e){return t instanceof n?t:void 0!==e?new n(t,e):new n(t)}e.LngLatBounds=n,e.toLngLatBounds=r});t.unwrapExports(cn);cn.LngLatBounds,cn.toLngLatBounds;var ln=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t,e,n){if(isNaN(e)||isNaN(t))throw new Error("\u65e0\u6548\u7684\u7ecf\u7eac\u5ea6\u53c2\u6570: ("+t+",' "+e);this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}return t.prototype.equals=function(t,e){if(!t)return!1;var n=r(t);if(void 0===n)return!1;var i=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return i<=(void 0===e?1e-9:e)},t.prototype.toString=function(t){return"LngLat("+on.formatNum(this.lng,t)+", "+on.formatNum(this.lat,t)+")"},t.prototype.distanceTo=function(t){return vn.earth.distance(this,r(t))},t.prototype.wrap=function(){return vn.earth.wrapLngLat(this)},t.prototype.toBounds=function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return cn.toLngLatBounds([this.lng-n,this.lat-e],[this.lng+n,this.lat+e])},t.prototype.clone=function(){return new t(this.lng,this.lat,this.alt)},t}();function r(t,e,r){if(t instanceof n)return t;if(Array.isArray(t)&&"object"!==typeof t[0]){if(3===t.length)return new n(t[0],t[1],t[2]);if(2===t.length)return new n(t[0],t[1])}if(void 0===t||null===t)throw new Error("\u65e0\u6548\u7684\u7ecf\u7eac\u5ea6\u53c2\u6570: ("+t+", "+e+")");if("object"===typeof t&&"lat"in t)return new n(t.lng,"lng"in t?t.lat:0,t.alt);if(void 0===e)throw new Error("\u65e0\u6548\u7684\u7ecf\u7eac\u5ea6\u53c2\u6570: ("+t+", "+e+")");return new n(Number(t),e,r)}e.LngLat=n,e.toLngLat=r});t.unwrapExports(ln);ln.LngLat;var fn=ln.toLngLat,hn=t.createCommonjsModule(function(t,e){e.__esModule=!0,e.sphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new sn.Point(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new ln.LngLat(t.x*e/this.R,(2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e)},bounds:function(){var t=6378137*Math.PI;return new un.Bounds([-t,-t],[t,t])}()}});t.unwrapExports(hn);hn.sphericalMercator;var pn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(){function t(t,e,n,r){if(Array.isArray(t))return this.a=t[0],this.b=t[1],this.c=t[2],void(this.d=t[3]);this.a=t,this.b=e,this.c=n,this.d=r}return t.prototype.transform=function(t,e){return this._transform(t.clone(),e)},t.prototype._transform=function(t,e){var n=e||1;return t.x=n*(this.a*t.x+this.b),t.y=n*(this.c*t.y+this.d),t},t.prototype.untransform=function(t,e){var n=e||1;return new sn.Point((t.x/n-this.b)/this.a,(t.y/n-this.d)/this.c)},t}();e.Transformation=n});t.unwrapExports(pn);pn.Transformation;var dn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=.5/(Math.PI*hn.sphericalMercator.R),r=new pn.Transformation(n,.5,-n,.5);e.CRS={wrapLng:[-180,180],wrapLat:null,projection:hn.sphericalMercator,transformation:r,lngLatToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation.transform(n,r)},pointToLngLat:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},zoom:function(t){return Math.log(t/256)/Math.LN2},scale:function(t){return 256*Math.pow(2,t)},getProjectedBounds:function(t){if(this.infinite)return new un.Bounds([[1/0,1/0],[1/0,1/0]]);var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return new un.Bounds(r,i)},infinite:!1,wrapLngLat:function(t){var e=Array.isArray(this.wrapLng)?on.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=Array.isArray(this.wrapLat)?on.wrapNum(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new ln.LngLat(e,n,r)},wrapLngLatBounds:function(t){var e=t.getCenter(),n=this.wrapLngLat(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast(),s=new ln.LngLat(o.lng-i,o.lat-r),u=new ln.LngLat(a.lng-i,a.lat-r);return new cn.LngLatBounds(s,u)}}});t.unwrapExports(dn);dn.CRS;var vn=t.createCommonjsModule(function(e,n){n.__esModule=!0,n.earth=t.lib.mix({},dn.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}})});t.unwrapExports(vn);vn.earth;var gn=t.createCommonjsModule(function(e,n){n.__esModule=!0;var r=.5/(Math.PI*hn.sphericalMercator.R),i=new pn.Transformation(r,.5,-r,.5);n.epsg3857=t.lib.mix({},vn.earth,{code:"EPSG:3857",projection:hn.sphericalMercator,transformation:i}),n.epsg900913=t.lib.mix({},n.epsg3857,{code:"EPSG:900913"})});t.unwrapExports(gn);var mn=gn.epsg3857,yn=(gn.epsg900913,t.createCommonjsModule(function(t,e){e.__esModule=!0,e.lngLatProjection={project:function(t){return new sn.Point(t.lng,t.lat)},unproject:function(t){return new ln.LngLat(t.x,t.y)},bounds:new un.Bounds([-180,-90],[180,90])}}));t.unwrapExports(yn);yn.lngLatProjection;var _n=t.createCommonjsModule(function(e,n){n.__esModule=!0;var r=new pn.Transformation(1/180,1,-1/180,.5);n.epsg4326=t.lib.mix({},vn.earth,{code:"EPSG:4326",projection:yn.lngLatProjection,transformation:r})});t.unwrapExports(_n);_n.epsg4326;var bn=t.createCommonjsModule(function(e,n){n.__esModule=!0;var r=new pn.Transformation(1,0,-1,0);n.simple=t.lib.mix({},dn.CRS,{projection:yn.lngLatProjection,transformation:r,scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0})});t.unwrapExports(bn);bn.simple;var xn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n={epsg3857:gn.epsg3857,epsg4326:_n.epsg4326,simple:bn.simple,earth:vn.earth,epsg900913:gn.epsg900913};e.getCRS=function(t){return n[t.toLowerCase()]}});t.unwrapExports(xn);xn.getCRS;var wn=t.createCommonjsModule(function(t,e){e.__esModule=!0;var n=function(t){function e(e){var n=t.call(this,Qe.__assign({projection:"EPSG3857",zoom:7,mapCenter:[116.400146,39.926588]},e))||this;return n.type="geo",n.isGeo=!0,e.center?n.center=e.center:n.center=n.mapCenter,n._init(),n}return Qe.__extends(e,t),e.prototype._init=function(){var t=this.start,e=this.end;this.center=ln.toLngLat(this.center),this.width=Math.abs(e.x-t.x),this.height=Math.abs(e.y-t.y),this.crs=xn.getCRS(this.projection)},e.prototype.getZoom=function(){return this.zoom},e.prototype.setZoom=function(t){this.zoom=t},e.prototype.setCenter=function(t){this.center=ln.toLngLat(t)},e.prototype.getCenter=function(){return this.center},e.prototype.convertPoint=function(t){var e=[t.x,t.y],n=this.project(ln.toLngLat(e),this.zoom).round(),r=this.getPixelOrigin(),i=n.subtract(r);return{x:i.x,y:i.y}},e.prototype.invertPoint=function(t){var e=sn.toPoint(t),n=this.getPixelOrigin(),r=e.add(n),i=this.unproject(r,this.zoom);return{x:i.lng,y:i.lat}},e.prototype.layerPointToLatLng=function(t){var e=this.getPixelOrigin(),n=t.add(e);return this.unproject(n,this.zoom)},e.prototype.latLngToLayerPoint=function(t){var e=this.project(ln.toLngLat(t),this.zoom).round(),n=this.getPixelOrigin();return e.subtract(n)},e.prototype.getPixelOrigin=function(){var t=this.width/2,e=this.height/2;return this.crs.lngLatToPoint(ln.toLngLat(this.center),this.zoom).subtract({y:e,x:t})},e.prototype.project=function(t,e){var n=void 0===e?this.zoom:e;return this.crs.lngLatToPoint(ln.toLngLat(t),n)},e.prototype.unproject=function(t,e){var n=void 0===e?this.zoom:e;return this.crs.pointToLngLat(sn.toPoint(t),n)},e.prototype.distance=function(t,e){return this.crs.distance(ln.toLngLat(t),ln.toLngLat(e))},e}(rn["default"]);e["default"]=n});t.unwrapExports(wn);var Mn=t.createCommonjsModule(function(t,e){e.__esModule=!0,e.GeoCoordinates=wn,e.Bounds=un.Bounds,e.toBounds=un.toBounds,e.LngLat=ln.LngLat,e.toLngLat=ln.toLngLat,e.LngLatBounds=cn.LngLatBounds,e.toLngLatBounds=cn.toLngLatBounds,e.Point=sn.Point,e.toPoint=sn.toPoint});t.unwrapExports(Mn);Mn.GeoCoordinates;var En=Mn.Bounds,On=Mn.toBounds,Sn=(Mn.LngLat,Mn.toLngLat),Tn=(Mn.LngLatBounds,Mn.toLngLatBounds),jn=Mn.Point,An=(Mn.toPoint,t.Global.pointShape),Cn=function(e){function n(n,r){e.call(this,n,Object.assign({},r,{minSourceZoom:0,maxSOurceZoom:18,keepBuffer:2})),this._tileCache=new Ce(50,this._destroyTile),this._crs=mn,this._tiles=new t.Object3D,this._tiles.frustumCulled=!1,this._tileKeys=[],this.tileList={},this.type=this.get("layerType"),this.workerPool=this.scene.workerPool}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.shape=function(t,n){var r=this.get("layerType");return"point"===r?e.prototype.shape.call(this,t,n):(this.shape=t,this)},n.prototype.source=function(t,e){return void 0===e&&(e={}),t instanceof Ae?(t.set("mapType",this.scene.mapType),this.tileSource=t):(e.mapType=this.scene.mapType,this.tileSource=new Ae(t,e),this.sourceCfg=Object.assign({},e,{url:t})),this},n.prototype._initControllers=function(){var t=new j.Picking({layer:this}),e=new j.Interaction({layer:this});this.set("pickingController",t),this.set("interacionController",e)},n.prototype.render=function(){return this._visibleWithZoom(),this._updateDraw(),this.scene._engine.update(),this},n.prototype.draw=function(){this._object3D.add(this._tiles),this._calculateLOD()},n.prototype.drawTile=function(){},n.prototype.zoomchange=function(t){var n=this;e.prototype.zoomchange.call(this,t),this._visibleWithZoom(),requestAnimationFrame(function(){n._calculateLOD()}),this._calculateLOD()},n.prototype.dragend=function(t){var n=this;e.prototype.dragend.call(this,t),requestAnimationFrame(function(){n._calculateLOD()})},n.prototype._calculateLOD=function(){var t=this,e=Math.floor(this.scene.getZoom())-1,n=this.get("minZoom"),r=this.get("maxZoom"),i=this.tileSource.get("minSourceZoom"),o=this.tileSource.get("maxSourceZoom"),a=this.scene.getZoom();if(this.tileZoom=e>o?o:e,a<n||a>=r||a<i)return this._removeTiles(),void(this._object3D.visible=!1);this.get("visible")&&(this._object3D.visible=!0),this.show(),this.updateTileList=[];var s=this.scene.getCenter(),u=this._crs.lngLatToPoint(Sn(s.lng,s.lat),this.tileZoom),c=u.divideBy(256).floor(),l=this._getPixelBounds(),f=this._pxBoundsToTileRange(l),h=this.get("keepBuffer");if(this.noPruneRange=new En(f.getBottomLeft().subtract([h,-h]),f.getTopRight().add([h,-h])),!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var p=f.min.y;p<=f.max.y;p++)for(var d=f.min.x;d<=f.max.x;d++){var v=[d,p,this.tileZoom],g=this.tileList[v.join("_")];g?g.current=!0:(this.tileList[v.join("_")]={current:!0,coords:v},this.updateTileList.push(v))}this.updateTileList.sort(function(t,e){var n=t,r=e,i=Math.pow(1*n[0]-c.x,2)+Math.pow(1*n[1]-c.y,2),o=Math.pow(1*r[0]-c.x,2)+Math.pow(1*r[1]-c.y,2);return i-o}),this._pruneTiles(),this.updateTileList.forEach(function(e){var n=e.join("_");t.tileList[n].current&&t._requestTile(n,t)})},n.prototype._getShape=function(t){var e=null;if(!t[0].hasOwnProperty("shape"))return"normal";for(var n=0;n<t.length;n++)if(e=t[n].shape,void 0!==e)break;return-1!==An["2d"].indexOf(e)?"circle":-1!==An["3d"].indexOf(e)?"fill":-1!==this.scene.image.imagesIds.indexOf(e)?"image":"text"},n.prototype._updateTileList=function(t,e,n){var r=[t,e,n].join("_"),i=this.tileList[r];i?i.current=!0:(this.tileList[r]={current:!0,active:!1,coords:r.split("_")},this.updateTileList.push(r))},n.prototype._requestTile=function(t,e){var n=this,r=this.tileList[t];if(r){var i=this._tileCache.getTile(t);if(i){if("composer"===i.getMesh().type)return this.scene._engine.composerLayers.push(i.getMesh()),this.scene._engine.update(),void this._pruneTiles();i.needUpdate&&(i.updateColor(),i.needUpdate=!1),this._tiles.add(i.getMesh()),r.active=!0,this._addPickTile(i.getMesh()),this._tileKeys.push(t),this.scene._engine.update(),this._pruneTiles()}else i=this._createTile(t,e),i.on("tileLoaded",function(){r.active=!0;var e=i.getMesh();if(e.name=t,n._tileCache.setTile(i,t),n._tileKeys.push(t),"composer"===e.type)return n.scene._engine.composerLayers.push(e),n.scene._engine.update(),void n._pruneTiles();0!==e.children.length&&(n._tiles.add(i.getMesh()),n._addPickTile(i.getMesh())),n.scene._engine.update(),n._pruneTiles()})}},n.prototype._addPickTile=function(t){if("image"!==this.type){var e=this.get("pickingController"),n=t.children[0];n.name=t.name,e.addPickMesh(n)}},n.prototype.getSelectFeature=function(t,e){var n=this.tileZoom,r=this._crs.lngLatToPoint(Sn(e.lng,e.lat),n),i=r.divideBy(256).floor(),o=[i.x,i.y,n].join("_"),a=this._tileCache.getTile(o),s=a?a.getSelectFeature(t):null;return{feature:s}},n.prototype._pruneTiles=function(){var t,e=this.tileZoom;for(var n in this.tileList){var r=this.tileList[n].coords;r[2]===e&&this.noPruneRange.contains(new jn(r[0],r[1]))||(this.tileList[n].current=!1)}for(var i in this.tileList)t=this.tileList[i],t.retain=t.current;for(var o in this.tileList)if(t=this.tileList[o],t.current&&!t.active){var a=o.split("_").map(function(t){return 1*t}),s=a[0],u=a[1],c=a[2];this._retainParent(s,u,c,c-5)||this._retainChildren(s,u,c,c+2)}this._removeOutTiles()},n.prototype._retainParent=function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=this.tileList[[i,o,a].join("_")];return s&&s.active?(s.retain=!0,!0):(s&&s.loaded&&(s.retain=!0),a>r&&this._retainParent(i,o,a,r))},n.prototype._retainChildren=function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=[i,o,n+1].join("_"),s=this.tileList[a];s&&s.active?s.retain=!0:(s&&s.loaded&&(s.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},n.prototype._removeOutTiles=function(){var t=this;for(var e in this.tileList)if(!this.tileList[e].retain){var n=this._tileCache.getTile(e);if(n){n._abortRequest();var r=this.get("pickingController");r&&r.removePickMeshByName(n.getMesh().name),this._tiles.remove(n.getMesh())}n&&"composer"===n.getMesh().type&&(this.scene._engine.composerLayers=this.scene._engine.composerLayers.filter(function(t){return t.name!==n.getMesh().name})),delete this.tileList[e]}this._tiles.children.length>Object.keys(this.tileList).length&&this._tiles.children.forEach(function(e){var n=e.name;t.tileList[n]||t._tiles.remove(e)}),this.scene._engine.update()},n.prototype._removeTiles=function(){if(this.hide(),this._tiles&&this._tiles.children){for(var t=this._tiles.children.length-1;t>=0;t--)this._tiles.remove(this._tiles.children[t]);this.tileList=[],this._tileKeys=[],this._tileCache.destory();var e=this.get("pickingController");e.removeAllMesh()}},n.prototype._getPixelBounds=function(){var t,e,n=this.scene.getBounds().toBounds(),r=n.getNorthEast(),i=n.getSouthWest(),o=this.tileZoom,a=this.scene.getCenter(),s=this._crs.lngLatToPoint(Sn(r.lng,r.lat),o),u=this._crs.lngLatToPoint(Sn(i.lng,i.lat),o),c=this._crs.lngLatToPoint(Sn(a.lng,a.lat),o),l=c.y-s.y,f=u.y-c.y;if(a.lng-r.lng>0||a.lng-i.lng<0){var h=256*Math.pow(2,o)/360*(180-r.lng)+256*Math.pow(2,o)/360*(i.lng+180);a.lng-r.lng>0?(t=256*Math.pow(2,o)/360*(a.lng-r.lng),e=h-t):(e=256*Math.pow(2,o)/360*(i.lng-a.lng),t=h-e)}else t=256*Math.pow(2,o)/360*(a.lng-i.lng),e=256*Math.pow(2,o)/360*(r.lng-a.lng);var p=new En(c.subtract(t,l),c.add(e,f));return p},n.prototype._pxBoundsToTileRange=function(t){return new En(t.min.divideBy(256).floor(),t.max.divideBy(256).ceil().subtract([1,1]))},n.prototype._wrapCoords=function(t){var e=[0,Math.pow(2,t[2])],n=an(t[0],e);return[n,t[1],t[2]]},n.prototype._destroyTile=function(t){t.destroy(),t=null},n.prototype._updateDraw=function(){var e=this,n=this.get("preAttrOptions"),r=this.get("attrOptions"),i=this.get("preStyleOption"),o=this.get("styleOptions");if(void 0===n&&void 0===i)return this._scaleByZoom(),this._initControllers(),this._initInteraction(),this._initMapEvent(),this.draw(),void this._setPreOption();if(!(!this._tiles.children.length>0)&&this._object3D.visible){if(t.Util.isEqual(n.color,r.color)&&t.Util.isEqual(n.filter,r.filter)||(this._tileCache.setNeedUpdate(),this._tiles.children.forEach(function(t){var n=e._tileCache.getTile(t.name);n.updateColor(),n.needUpdate=!1,e.scene._engine.update()})),t.Util.isEqual(n.size,r.size),t.Util.isEqual(n.shape,r.shape),!t.Util.isEqual(i,o)){var a={};t.Util.each(A(i,o),function(t){var e=t.type,n=t.key,r=t.value;"remove"!==e&&(a[n]=r)}),this._tiles.children(function(t){e._tileCache.get(t.name).updateStyle()})}this._setPreOption()}},n.prototype.destroy=function(){},n}(I),Ln=180/Math.PI,Pn=/\{([zxy])\}/g,In=function(e){function n(n,r,i){var o=this;e.call(this,{scales:{},attrs:{}}),this.layer=i,this._tile=n.split("_").map(function(t){return 1*t}),this._path=r,this._tileLnglatBounds=this._tileLnglatBounds(this._tile),this._tileBounds=this._tileBounds(this._tileLnglatBounds),this._center=this._tileBounds.getCenter(),this._centerLnglat=this._tileLnglatBounds.getCenter(),this._object3D=new t.Object3D({name:n}),this._object3D.frustumCulled=!1,this._object3D.onBeforeRender=function(){},this._isLoaded=!1,this.requestTileAsync(function(t){return o._init(t)})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype._init=function(t){this.layerSource=t,null!==this.layerSource.data?(this.isValid=!0,this._initControllers(),this._createMesh()):this.isValid=!1},n.prototype.repaint=function(){this._initControllers(),this._createMesh()},n.prototype.requestTileAsync=function(t){var e=this.layer.tileSource.getTileData(this._tile[0],this._tile[1],this._tile[2]);e.loaded?t(e.data):e.data.then(function(e){t(e)})},n.prototype._initControllers=function(){var t=new j.Mapping({layer:this.layer,mesh:this}),e=new j.Buffer({layer:this.layer,mesh:this});this.set("mappingController",t),this.set("bufferController",e)},n.prototype._createMesh=function(){},n.prototype._getTileURL=function(t){return t.s||(t.s=String.fromCharCode(97+Math.floor(3*Math.random()))),Pn.lastIndex=0,this._path.replace(Pn,function(e,n){return t[n]})},n.prototype._tileBounds=function(t){var e=this.layer.scene.project([t.getNorthEast().lng,t.getNorthEast().lat]),n=this.layer.scene.project([t.getSouthWest().lng,t.getSouthWest().lat]);return On(n,e)},n.prototype.getMesh=function(){return this._object3D},n.prototype._tileLnglatBounds=function(t){var e=this._tile2lng(t[0]+1,t[2]),n=this._tile2lng(t[0],t[2]),r=this._tile2lat(t[1]+1,t[2]),i=this._tile2lat(t[1],t[2]);return Tn([n,i],[e,r])},n.prototype._tile2lng=function(t,e){return t/Math.pow(2,e)*360-180},n.prototype._tile2lat=function(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return Ln*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))},n.prototype._retainParent=function(t,e,n,r){void 0===r&&(r=5);var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=[+i,+o,+a],u=this._tiles[s];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>r&&this._retainParent(i,o,a,r))},n.prototype.updateColor=function(){var t=this.get("bufferController");this.get("mappingController").update(),t._updateColorAttributes(this.getMesh().children[0])},n.prototype.updateStyle=function(){var t=this.get("bufferController");t._updateStyle(this.getMesh().children[0])},n.prototype._preRender=function(){},n.prototype.destroy=function(){e.prototype.destroy.call(this),o(this._object3D)},n}(t.Base),Rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.requestTileAsync=function(){var t=this;setTimeout(function(){t._mesh||t._requestTile()},0)},e.prototype._requestTile=function(){var t=this._createDebugMesh();this._createMesh(t),this.emit("tileLoaded")},e.prototype._getBufferData=function(t){var e=this._tileBounds.getTopLeft(),n=this._tileBounds.getBottomRight(),r=[[e.x,e.y,0],[n.x,n.y,0]];return[{coordinates:r,images:t}]},e.prototype._createMesh=function(t){if(this._center){this._layerData=this._getBufferData(t);var e=new be({layerData:this._layerData});e.attributes.texture=e.texture;var n=this.layer.get("styleOptions"),r=ve(e.attributes,n);return this._object3D.add(r),this._object3D}},e.prototype._createDebugMesh=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=256,t.height=256,e.font="Bold 20px Helvetica Neue, Verdana, Arial",e.fillStyle="#ff0000",e.fillText(this._tile.join("/"),20,20),e.strokeStyle="red",e.rect(0,0,256,256),e.stroke(),t},e.prototype._abortRequest=function(){this._image&&(this._image.src="")},e.prototype.updateColor=function(){},e.prototype.getSelectFeature=function(){return{}},e.prototype.destroy=function(){this._abortRequest(),this._image=null,t.prototype.destroy.call(this)},e}(In),Fn=function(t){function e(e,n){t.call(this,e,n),this.type="image"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createTile=function(t,e){return new Rn(t,this.url,e)},e}(Cn),Dn=function(t){function e(e,n,r){t.call(this,r);var i=this.getDefaultParameters(),o=i.uniforms,a=i.defines,s=$("mask_quard"),u=s.vs,c=s.fs;this.uniforms=Object.assign(o,this.setUniform(e)),this.type="MaskMaterial",this.defines=Object.assign(a,n),this.vertexShader=u,this.fragmentShader=c,this.transparent=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefaultParameters=function(){return{uniforms:{},defines:{}}},e}(k),kn=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype._createMesh=function(){var t=this,e=this.layerData;return"point"===this.layer.get("layerType")&&(this.layer.shape=this.layer._getShape(e)),this.mesh=F(this.layer.get("layerType"),this.layer.shape)(e,this.layer),"composer"!==this.mesh.type?(this.mesh.onBeforeRender=function(e){t._renderMask(e)},this.mesh.onAfterRender=function(t){var e=t.context;e.clear(e.STENCIL_BUFFER_BIT),e.disable(e.STENCIL_TEST)},this._object3D.add(this.mesh)):this._object3D=this.mesh,setTimeout(function(){t.emit("tileLoaded")},0),this._object3D},n.prototype._renderMask=function(e){var n=this.layer.scene.getZoom();if(a(this.mesh,{u_time:this.layer.scene._engine.clock.getElapsedTime(),u_zoom:n}),"point"!==this.layer.get("layerType")){var r=new t.Scene;this.maskScene=r;var i=this._tileMaskMesh();r.add(i);var o=e.context;e.autoClear=!1,e.clearDepth(),o.enable(o.STENCIL_TEST),o.stencilOp(o.REPLACE,o.REPLACE,o.REPLACE),o.stencilFunc(o.ALWAYS,1,4294967295),o.clearStencil(0),o.clear(o.STENCIL_BUFFER_BIT),o.colorMask(!1,!1,!1,!1),this.layer.scene._engine.renderScene(r),o.colorMask(!0,!0,!0,!0),o.depthMask(!1),e.clearDepth(),o.stencilFunc(o.EQUAL,1,4294967295),o.stencilOp(o.KEEP,o.KEEP,o.KEEP)}},n.prototype._tileMaskMesh=function(){var e=this._tileBounds,n=[e.getBottomLeft().x,e.getBottomLeft().y,0],r=[e.getBottomRight().x,e.getBottomRight().y,0],i=[e.getTopLeft().x,e.getTopLeft().y,0],o=[e.getTopRight().x,e.getTopRight().y,0],a=n.concat(o,r,n,i,o),s=new t.BufferGeometry;s.addAttribute("position",new t.Float32BufferAttribute(a,3));var u=new Dn,c=new t.Mesh(s,u);return c},n.prototype._abortRequest=function(){this.xhrRequest&&this.xhrRequest.abort()},n.prototype.getSelectFeature=function(t){var e=this.layerSource.originData.featureKeys[t];if(e&&void 0!==e.index){var n=e.index;return this.layerSource.originData.dataArray[n]}return null},n.prototype.destroy=function(){e.prototype.destroy.call(this),o(this.maskScene),this._object3D=null,this.maskScene=null,this.layerData=null},n}(In),Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createTile=function(t,e){return new kn(t,this.url,e)},e}(Cn),Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shape=function(e,n){return t.prototype.shape.call(this,e,n),this.shape="text",this},e.prototype.draw=function(){this.type="text",this.add(F(this.type,this.shape)(this.layerData,this))},e}(I);p("PolygonLayer",ge),p("PointLayer",ye),p("LineLayer",_e),p("ImageLayer",xe),p("RasterLayer",Ee),p("HeatmapLayer",Oe),p("TileLayer",Cn),p("ImageTileLayer",Fn),p("VectorTileLayer",Nn),p("TextLayer",Bn);var zn=function(e){function n(){e.call(this);var t=window.devicePixelRatio||1;this.imageWidth=64*t,this.canvas=document.createElement("canvas"),this.canvas.style.cssText+="height: 512px;width: 512px;",this.canvas.width=8*this.imageWidth,this.canvas.height=8*this.imageWidth,this.ctx=this.canvas.getContext("2d"),this.images=[],this.imagesCount=0,this.imagePos={},this.imagesIds=[]}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addImage=function(e,n){var r=this;this.imagesCount++,this.imagesIds.push(e);var i=this.imagesCount,o=i%8*this.imageWidth,a=parseInt(i/8)*this.imageWidth;if(this.imagePos[e]={x:o/this.canvas.width,y:a/this.canvas.height},this.texture=new t.Texture(this.canvas),"string"===typeof n)t.getImage({url:n},function(n,i){i.id=e,r.images.push(i),r.ctx.drawImage(i,o,a,r.imageWidth,r.imageWidth),r.texture.magFilter=t.LinearFilter,r.texture.minFilter=t.LinearFilter,r.texture.needsUpdate=!0,r.emit("imageLoaded")});else{var s=n.width,u=n.height,c=n.channels,l=new Uint8Array(s*u*c),f=new Image;f.width=s,f.height=u,f.data=l,f.id=e,this.images.push(f),this.ctx.drawImage(f,o,a,this.imageWidth,this.imageWidth),this.texture=new t.CanvasTexture(this.canvas),this.imagePos[e]={x:o>>9,y:a>>9},this.texture.needsUpdate=!0,this.emit("imageLoaded")}},n.prototype.removeImage=function(){},n}(t.EventEmitter),Un=Hn,Gn=Hn,Vn=1e20;function Hn(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function qn(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(Wn(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(Wn(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function Wn(t,e,n,r,i){n[0]=0,r[0]=-Vn,r[1]=+Vn;for(var o=1,a=0;o<i;o++){var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);while(s<=r[a])a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);a++,n[a]=o,r[a]=s,r[a+1]=+Vn}for(o=0,a=0;o<i;o++){while(r[a+1]<o)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}Hn.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?Vn:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?Vn:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(qn(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),qn(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n},Un.default=Gn;var Yn=30;function Xn(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Zn(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping;void 0===a&&(a={});var s=t.xOffset;void 0===s&&(s=0);var u=t.yOffset;void 0===u&&(u=0);var c=0,l=s;Array.from(e).forEach(function(t,e){if(!a[t]){var r=n(t,e);l+Yn>o&&(l=0,c++),a[t]={x:l,y:u+c*Yn,width:Yn,height:Yn,advance:r},l+=Yn}});var f=r+2*i;return{mapping:a,xOffset:l,yOffset:u+c*f,canvasHeight:Xn(u+(c+1)*f)}}var Kn=ur(),Jn="sans-serif",Qn="normal",$n=24,tr=3,er=.25,nr=8,rr=1024,ir=1,or=1,ar=3,sr=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function ur(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function cr(t,e,n,r){t.font=r+" "+n+"px "+e,t.fillStyle="black",t.textBaseline="middle"}function lr(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}var fr=function(){this.props={fontFamily:Jn,fontWeight:Qn,characterSet:Kn,fontSize:$n,buffer:tr,sdf:!0,cutoff:er,radius:nr},this._key=null,this._texture=new t.Texture,this.cache=new Se(ar)},hr={texture:{configurable:!0},mapping:{configurable:!0},scale:{configurable:!0},fontAtlas:{configurable:!0}};hr.texture.get=function(){return this._texture},hr.mapping.get=function(){var t=this.cache.get(this._key);return t&&t.mapping},hr.scale.get=function(){return or},hr.fontAtlas.get=function(){return this._fontAtlas},fr.prototype.setProps=function(t){var e=this;void 0===t&&(t={}),sr.forEach(function(n){n in t&&(e.props[n]=t[n])});var n=this._key;this._key=this._getKey();var r=this._getNewChars(this._key,this.props.characterSet),i=this.cache.get(this._key);if(i&&0===r.length)this._key!==n&&this._updateTexture(i);else{var o=this._generateFontAtlas(this._key,r,i);this._fontAtlas=o,this._updateTexture(o),this.cache.set(this._key,o)}},fr.prototype._updateTexture=function(e){var n=e.data;this._texture=new t.CanvasTexture(n),this._texture.minFilter=t.LinearFilter,this._texture.magFilter=t.LinearFilter,this._texture.flipY=!1,this._texture.format=t.AlphaFormat,this._texture.needUpdate=!0},fr.prototype._generateFontAtlas=function(t,e,n){var r=this.props,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=n&&n.data;f||(f=document.createElement("canvas"),f.width=rr);var h=f.getContext("2d");cr(h,i,a,o);var p=Zn(Object.assign({getFontWidth:function(t){return h.measureText(t).width},fontHeight:a*or,buffer:s,characterSet:e,maxCanvasWidth:rr},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),d=p.mapping,v=p.canvasHeight,g=p.xOffset,m=p.yOffset;if(f.height!==v){var y=h.getImageData(0,0,f.width,f.height);f.height=v,h.putImageData(y,0,0)}if(cr(h,i,a,o),u)for(var _=new Un(a,s,c,l,i,o),b=h.getImageData(0,0,_.size,_.size),x=0,w=e;x<w.length;x+=1){var M=w[x];lr(_.draw(M),b),h.putImageData(b,d[M].x,d[M].y)}else for(var E=0,O=e;E<O.length;E+=1){var S=O[E];h.fillText(S,d[S].x,d[S].y+a*ir)}return{xOffset:g,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}},fr.prototype._getKey=function(){var t=this.props,e=t.fontFamily,n=t.fontWeight,r=t.fontSize,i=t.buffer,o=t.sdf,a=t.radius,s=t.cutoff;return o?e+" "+n+" "+r+" "+i+" "+a+" "+s:e+" "+n+" "+r+" "+i},fr.prototype._getNewChars=function(t,e){var n=this.cache.get(t);if(!n)return e;var r=[],i=n.mapping,o=Object.keys(i);o=new Set(o);var a=e;return a instanceof Array&&(a=new Set(a)),a.forEach(function(t){o.has(t)||r.push(t)}),r},Object.defineProperties(fr.prototype,hr);var pr='precision highp float;\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\nuniform float u_strokeWidth;uniform vec4 u_stroke;uniform sampler2D u_texture;varying vec2 v_rs;varying vec2 v_uv;varying vec4 v_color;varying float v_shape;const float u_buffer=.75;uniform vec4 u_activeColor;const float u_gamma=.08;const vec3 halo=vec3(1.);void main(){\n#ifdef TEXCOORD_0\nvec2 pos=v_uv+gl_PointCoord/512.*64.;pos.y=1.-pos.y;vec4 textureColor=texture2D(u_texture,pos);\n#ifdef PICK\nif(worldId.x==0.&&worldId.y==0.&& worldId.z==0.&& textureColor==vec4(0.)){discard;return;}gl_FragColor=worldId;return;\n#endif\nif(v_color==vec4(0.)){gl_FragColor=textureColor; \n}else {gl_FragColor=step(0.01,textureColor.x)*v_color;}return;\n#endif\nif(v_color.a==0.)discard;vec4 pcolor=v_color;float ro=v_rs.x;float ri=v_rs.y;float d=0.;if(ro<3.){gl_FragColor=pcolor;return;}vec2 st=gl_PointCoord*2.-1.;float a=atan(st.x,st.y)+PI;float r=TWO_PI/v_shape;float ratio=1.+(1.1-smoothstep(2.8,6.,v_shape));float dis2center=cos(floor(.5+a/r)*r-a)*length(st)*ro*ratio;float alpha=smoothstep(ro,ro+.1,dis2center);if(alpha==1.){discard;}if(u_strokeWidth>0.){if(dis2center>ro-u_strokeWidth){gl_FragColor=vec4(u_stroke.xyz,u_stroke.a*(ro-dis2center));return;}else if(dis2center>ri){gl_FragColor=u_stroke;return;}}if(dis2center>ri-u_strokeWidth){float factor=ri-dis2center;if(u_strokeWidth==0.){float a=pcolor.a*factor;gl_FragColor=vec4(pcolor.rgb,a);}else{float a=u_stroke.a*(1.-factor)+pcolor.a*factor;gl_FragColor=vec4(u_stroke.rgb*(1.-factor)+pcolor.rgb*factor,a);}}else{gl_FragColor=pcolor;}\n#pragma include "pick"\n}',dr="precision highp float;attribute vec4 a_color;attribute float a_size;attribute float a_shape;uniform vec4 u_stroke;uniform float u_strokeWidth;uniform float u_opacity;uniform float u_zoom;varying vec4 v_color;varying vec2 v_rs;varying vec2 v_uv;varying float v_shape;uniform float u_activeId;uniform vec4 u_activeColor;void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId) {v_color=u_activeColor;}gl_Position= matModelViewProjection *vec4(position,1.0);gl_PointSize=a_size;v_rs=vec2(a_size,a_size-u_strokeWidth);\n#ifdef TEXCOORD_0\nv_uv=uv;\n#endif\n#ifdef SHAPE\nv_shape=a_shape;\n#endif\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",vr='precision highp float;uniform vec4 u_baseColor : [ 1.0,0,0,1.0 ];uniform vec4 u_brightColor : [ 1.0,0,0,1.0 ];uniform vec4 u_windowColor : [ 1.0,0,0,1.0 ];uniform float u_zoom : 0;uniform float u_time : 0;uniform float u_near : 0;uniform float u_far : 1;\n#ifdef ANIMATE\nvarying vec2 v_texCoord;\n#endif\nvarying vec4 v_color;vec3 getWindowColor(float n,float hot,vec3 brightColor,vec3 darkColor) {float s=step(hot,n);vec3 color=mix(brightColor,vec3(0.9,0.9,1.0),n);return mix(darkColor,color,s);}float random (vec2 st) {return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);}float LinearizeDepth() \n{float z=gl_FragCoord.z*2.0-1.0;  \nreturn (2.0*u_near*u_far)/(u_far+u_near-z*(u_far-u_near));\t\n}vec3 fog(vec3 color,vec3 fogColor,float depth){float fogFactor=clamp(depth,0.0,1.0);vec3 output_color=mix(fogColor,color,fogFactor);return output_color;}float sdRect(vec2 p,vec2 sz) {  \nvec2 d=abs(p)-sz;float outside=length(max(d,0.));float inside=min(max(d.x,d.y),0.);return outside+inside;}void main() {if(v_color.w==0.0) {discard;return;}vec3 baseColor=u_baseColor.xyz;vec3 brightColor=u_brightColor.xyz;vec3 windowColor=u_windowColor.xyz;float targetColId=5.;float depth=1.0-LinearizeDepth()/u_far*u_zoom;  \nvec3 fogColor=vec3(23.0/255.0,31.0/255.0,51.0/255.0); \n#ifdef ANIMATE \nif(v_texCoord.x < 0.) {vec3 foggedColor=fog(baseColor.xyz+vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);gl_FragColor=vec4( foggedColor,v_color.w);}else {vec2 st=v_texCoord; \nvec2  UvScale=v_texCoord;float tStep=min(0.08,max(0.05*(18.0-u_zoom),0.02));float tStart=0.25*tStep;float tEnd=0.75*tStep;float u=mod(UvScale.x,tStep);float v=mod(UvScale.y,tStep);float ux=floor(UvScale.x/tStep);float uy=floor(UvScale.y/tStep);float n=random(vec2(ux,uy));float lightP=u_time;float head=1.0-step(0.005,st.y);/*step3*/float sU=step(tStart,u)-step(tEnd,u);float sV=step(tStart,v)-step(tEnd,v);vec2 windowSize=vec2(abs(tEnd-tStart),abs(tEnd-tStart));float dist=sdRect(vec2(u,v),windowSize);float s=sU*sV;float curColId=floor(UvScale.x/tStep);float sCol=step(targetColId-0.2,curColId)-step(targetColId+0.2,curColId);float mLightP=mod(lightP,2.);float sRow=step(mLightP-0.2,st.y)-step(mLightP,st.y);if(ux==targetColId){n=0.;}float timeP=min(0.75,abs ( sin(u_time/6.0) ) );float hot=smoothstep(1.0,0.0,timeP);vec3 color=mix(baseColor,getWindowColor(n,hot,brightColor,windowColor),s);float sFinal=s*sCol*sRow;color+=mix(baseColor,brightColor,sFinal*n);color=color*v_color.rgb;vec3 foggedColor=fog(color,fogColor,depth);gl_FragColor=vec4(foggedColor,1.0); \n}\n#else\ngl_FragColor=vec4(v_color.xyz,v_color.w);\n#endif\n#pragma include "pick"\n}',gr='precision highp float;attribute vec4 a_color; \n#ifdef SHAPE\nattribute vec3 a_size;attribute vec3 a_shape;\n#endif\n#ifdef ANIMATE\nattribute vec2 faceUv;varying vec2 v_texCoord;\n#endif\nvarying vec4 v_color;uniform float u_zoom : 0;uniform float u_opacity : 1.0;uniform float u_activeId :-1;uniform vec4 u_activeColor : [1.0,0.0,0.0,1.0];\n#pragma include "lighting"\nvoid main() {\n#ifdef ANIMATE\nv_texCoord=faceUv;\n#endif\nv_color=a_color;v_color.a*=u_opacity;float scale=pow(2.0,(20.0-u_zoom));vec3 offset=vec3(0.);\n#ifdef SHAPE\noffset=vec3(a_size*scale*a_shape);\n#endif\ngl_Position=projectionMatrix*modelViewMatrix*vec4(position+offset,1.);\n#ifdef LIGHTING\nif (normal !=vec3(0.,0.,1.0)) {vec3 viewDir=normalize(cameraPosition-position);v_color.rgb*=calc_lighting(position,normal,viewDir);}\n#endif\nif(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}',mr='precision highp float;varying vec4 v_color;void main() {gl_FragColor=v_color;\n#pragma include "pick"\n}',yr='precision highp float;attribute vec3 miter;attribute vec4 a_color;uniform float u_xOffset;uniform float u_yOffset;uniform float u_coverage;uniform float u_opacity;uniform float u_activeId;uniform vec4 u_activeColor;varying vec4 v_color;\n#pragma include "lighting"\nvoid main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId) {v_color=u_activeColor;}float x=position.x+miter.x*u_xOffset*u_coverage;float y=position.y+miter.y*u_yOffset*u_coverage;float z=position.z+miter.z;\n#ifdef LIGHTING\nvec3 viewDir=normalize(cameraPosition-vec3(x,y,z));v_color.rgb*=calc_lighting(vec3(x,y,z),normal,viewDir);\n#endif\ngl_Position=matModelViewProjection*vec4(x,y,z,1.0);\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}',_r='precision highp float;varying vec4 v_color;void main() {gl_FragColor=v_color;\n#pragma include "pick"\n}',br='precision highp float;attribute vec3 miter;attribute vec3 a_shape;attribute float a_size;attribute vec4 a_color;uniform float u_radius;uniform float u_coverage;uniform float u_opacity;uniform float u_angle;uniform float u_activeId;uniform vec4 u_activeColor;varying vec4 v_color;\n#pragma include "lighting"\nvoid main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;mat2 rotationMatrix=mat2(cos(u_angle),sin(u_angle),-sin(u_angle),cos(u_angle));v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId) {v_color=u_activeColor;}vec2 offset=vec2(rotationMatrix*miter.xy*u_radius*u_coverage );float x=position.x+offset.x;float y=position.y+offset.y;float z=miter.z*a_size;\n#ifdef LIGHTING\nvec3 viewDir=normalize(cameraPosition-vec3(x,y,z));v_color.rgb*=calc_lighting(vec3(x,y,z),normal,viewDir);\n#endif\ngl_Position=matModelViewProjection*vec4(x,y,z,1.0);\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}',xr='uniform float u_blur : 0;uniform float u_opacity : 1;uniform float u_strokeWidth : 1;uniform vec4 u_stroke : [1,1,1,1];uniform float u_strokeOpacity : 1;varying vec4 v_data;varying vec4 v_color;varying float v_radius;\n#pragma include "sdf_2d"\nvoid main() {int shape=int(v_data.w);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(u_blur,antialiasblur);float r=v_radius/(v_radius+u_strokeWidth);float outer_df;float inner_df;if (shape==0) {outer_df=sdCircle(v_data.xy,1.0);inner_df=sdCircle(v_data.xy,r);} else if (shape==1) {outer_df=sdEquilateralTriangle(1.1*v_data.xy);inner_df=sdEquilateralTriangle(1.1/r*v_data.xy);} else if (shape==2) {outer_df=sdBox(v_data.xy,vec2(1.));inner_df=sdBox(v_data.xy,vec2(r));} else if (shape==3) {outer_df=sdPentagon(v_data.xy,0.8);inner_df=sdPentagon(v_data.xy,r*0.8);} else if (shape==4) {outer_df=sdHexagon(v_data.xy,0.8);inner_df=sdHexagon(v_data.xy,r*0.8);} else if (shape==5) {outer_df=sdOctogon(v_data.xy,1.0);inner_df=sdOctogon(v_data.xy,r);} else if (shape==6) {outer_df=sdHexagram(v_data.xy,0.52);inner_df=sdHexagram(v_data.xy,r*0.52);} else if (shape==7) {outer_df=sdRhombus(v_data.xy,vec2(1.0));inner_df=sdRhombus(v_data.xy,vec2(r));} else if (shape==8) {outer_df=sdVesica(v_data.xy,1.1,0.8);inner_df=sdVesica(v_data.xy,r*1.1,r*0.8);}float opacity_t=smoothstep(0.0,antialiased_blur,outer_df);float color_t=u_strokeWidth < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,inner_df\n);gl_FragColor=opacity_t*mix(v_color*u_opacity,u_stroke*u_strokeOpacity*v_color.a,color_t);\n#pragma include "pick"\n}',wr='\nattribute vec4 a_color;attribute float a_size;attribute float a_shape;attribute vec2 miter;uniform float u_zoom : 1;uniform float u_stroke_width : 2;uniform float u_activeId : 0;uniform vec4 u_activeColor : [ 1.0,0,0,1.0 ];varying vec4 v_data;varying vec4 v_color;varying float v_radius;\n#pragma include "decode"\nvoid main() {v_color=a_color;vec2 extrude=miter;float radius=a_size;v_radius=radius;float zoom_scale=pow(2.,20.-u_zoom);vec2 offset=miter*(radius+u_stroke_width)*zoom_scale;gl_Position=projectionMatrix*modelViewMatrix*vec4(position.xy+offset,0.0,1.0);float antialiasblur=1.0/(radius+u_stroke_width);v_data=vec4(extrude,antialiasblur,a_shape);if(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}',Mr='precision highp float;varying float v_pickingId;varying vec4 v_color;void main() {if(v_pickingId <-0.1) {discard;}\n#ifdef ANIMATE \nif (vTime > 1.0 || vTime < 0.0) {discard;} \n#endif\ngl_FragColor=v_color;\n#pragma include "pick"\n}',Er="precision highp float;attribute float a_miter;attribute vec3 a_size;attribute vec3 a_shape;uniform float u_strokeWidth;uniform float u_strokeOpacity;uniform vec4 u_activeColor;uniform float u_activeId;uniform vec4 u_stroke;uniform float u_zoom;uniform float u_time;varying float vTime;varying float v_pickingId;varying vec4 v_color;void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;float scale=pow(2.0,(20.0-u_zoom));vec3 newposition=position+(a_size+vec3(u_strokeWidth/2.,u_strokeWidth/2.,0))*scale*a_shape+vec3(0.,a_size.y*scale/4.,0.);;\n#ifdef ANIMATE \nvTime=1.0-(mod(u_time*50.,3600.)-position.z)/100.;\n#endif\nv_color=u_stroke;v_color.a*=u_strokeOpacity;v_pickingId=pickingId;if(v_pickingId==u_activeId) {v_color=u_activeColor;}vec3 pointPos=newposition.xyz+vec3(normal*u_strokeWidth*scale/2.0*a_miter);gl_Position=matModelViewProjection*vec4(pointPos,1.0);\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",Or="precision highp float;varying vec4 v_color;void main(){gl_FragColor=v_color;}",Sr="precision highp float;attribute vec4 a_color;attribute float a_size;varying vec4 v_color;uniform float u_activeId;uniform vec4 u_activeColor;uniform float u_opacity;void main(){mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId){v_color=u_activeColor;}gl_Position=matModelViewProjection*vec4(position,1.);gl_PointSize=a_size;\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",Tr='precision highp float;uniform float u_opacity : 1.0;uniform float u_dash_offset : 0.0;uniform float u_dash_ratio : 0.0;uniform float u_blur : 0.9;varying vec4 v_color;uniform float u_time : 0;\n#if defined DASHLINE  || defined ANIMATE\nvarying float v_distance_ratio;\n#endif\nvarying float v_dash_array;varying float v_time;varying vec2 v_normal;\n#ifdef TEXTURE\nuniform sampler2D u_texture;varying vec2 v_uv;varying float v_texture_y;varying float v_texture_percent;\n#endif\n#ifdef ANIMATE \nuniform float u_duration : 2.0;uniform float u_interval : 1.0;uniform float u_trailLength : 0.2;\n#endif\nvoid main() {\n#ifdef TEXTURE\nfloat texture_y_fract=fract(v_texture_y);if (texture_y_fract <=v_texture_percent) {vec4 tex_color=texture2D(u_texture,vec2(v_uv.x,1.0-0.125-v_uv.y+(texture_y_fract/v_texture_percent)*0.125));gl_FragColor=vec4(mix(v_color.rgb,tex_color.rgb,tex_color.a),v_color.a);} else {gl_FragColor=v_color;}\n#else\ngl_FragColor=v_color;\n#endif\n#ifdef DASHLINE\nfloat time=0.;\n#ifdef ANIMATE \ntime=u_time/1000.;\n#endif\ngl_FragColor.a*=u_opacity*ceil(mod(v_distance_ratio+u_dash_offset+time,v_dash_array)-(v_dash_array*u_dash_ratio));\n#else\ngl_FragColor.a*=u_opacity;\n#endif\n#ifdef ANIMATE \nfloat alpha=1.0-fract( mod(1.0-v_distance_ratio,u_interval)*(1.0/u_interval)+u_time/u_duration);alpha=(alpha+u_trailLength-1.0)/u_trailLength;alpha=smoothstep(0.,1.,alpha);gl_FragColor.a*=alpha;\n#endif\nfloat blur=1.-smoothstep(u_blur,1.,length(v_normal));gl_FragColor.a*=blur;\n#pragma include "pick"\n}',jr="attribute float a_miter;attribute vec4 a_color;attribute float a_size;attribute float a_distance;attribute float a_dash_array;attribute float a_total_distance;uniform float u_zoom;uniform float u_time : 0;uniform float u_activeId : 0;uniform vec4 u_activeColor : [ 1.0,0,0,1.0 ];varying float v_time;varying vec4 v_color;varying float v_dash_array;varying vec2 v_normal;\n#if defined DASHLINE  || defined ANIMATE\nvarying float v_distance_ratio;\n#endif\n#ifdef ANIMATE \nuniform float u_duration : 2.0;uniform float u_interval : 1.0;uniform float u_trailLength : 0.2;\n#endif\n#ifdef TEXTURE\nattribute vec2 a_texture_coord;uniform float u_pattern_spacing : 0.0;varying vec2 v_uv;varying float v_texture_y;varying float v_texture_percent;\n#endif\nvoid main() {float extrude_scale=pow(2.0,20.0-u_zoom);v_color=a_color;v_dash_array=a_dash_array*pow(2.0,20.0-u_zoom);float distance_ratio=a_distance/a_total_distance;\n#if defined DASHLINE  || defined ANIMATE\nv_distance_ratio=distance_ratio;\n#endif\n#ifdef TEXTURE\nv_uv=vec2(a_texture_coord.x+0.125,a_texture_coord.y);if (a_miter > 0.0) {v_uv.x=a_texture_coord.x;}v_texture_y=a_distance/extrude_scale/(a_size+u_pattern_spacing);v_texture_percent=a_size/(a_size+u_pattern_spacing);\n#endif\nv_normal=vec2(normal*sign(a_miter));vec3 offset=vec3(normal*a_size*extrude_scale/2.0*a_miter);gl_Position=projectionMatrix*modelViewMatrix*vec4(position.xy+offset.xy,0.,1.0);if(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",Ar='precision mediump float;uniform float u_opacity;varying vec4 v_color;uniform float u_time : 0;\n#if defined DASHLINE  || defined ANIMATE\nvarying float v_distance_ratio;\n#endif\n#ifdef ANIMATE \nuniform float u_duration : 2.0;uniform float u_interval : 1.0;uniform float u_trailLength : 0.2;\n#endif\nvoid main() {if(v_color.a==0.){discard;}gl_FragColor=v_color;gl_FragColor.a=v_color.a*u_opacity;\n#ifdef ANIMATE\nfloat alpha=1.0-fract( mod(1.0-v_distance_ratio,u_interval)*(1.0/u_interval)+u_time/u_duration);gl_FragColor.a*=alpha;\n#endif\n#pragma include "pick"\n}',Cr="precision mediump float;attribute vec4 a_color;attribute vec4 a_instance;attribute float a_size;uniform float u_zoom;uniform float u_time;uniform float u_activeId : 0;uniform vec4 u_activeColor : [ 1.0,0,0,1.0 ];uniform mat4 matModelViewProjection;uniform float segmentNumber;  \nvarying vec4 v_color;\n#ifdef ANIMATE\nvarying float v_distance_ratio;\n#endif\nfloat maps (float value,float start1,float stop1,float start2,float stop2) {return start2+(stop2-start2)*((value-start1)/(stop1-start1));}float getSegmentRatio(float index) {return smoothstep(0.0,1.0,index/(segmentNumber-1.0));}float paraboloid(vec2 source,vec2 target,float ratio) {vec2 x=mix(source,target,ratio);vec2 center=mix(source,target,0.5);float dSourceCenter=distance(source,center);float dXCenter=distance(x,center);return (dSourceCenter+dXCenter)*(dSourceCenter-dXCenter);}vec3 getPos(vec2 source,vec2 target,float segmentRatio) {float vertex_height=paraboloid(source,target,segmentRatio);return vec3(mix(source,target,segmentRatio),sqrt(max(0.0,vertex_height)));}vec2 getExtrusionOffset(vec2 line_clipspace,float offset_direction) {vec2 dir_screenspace=normalize(line_clipspace);dir_screenspace=vec2(-dir_screenspace.y,dir_screenspace.x);vec2 offset=dir_screenspace*offset_direction*a_size*pow(2.0,20.0-u_zoom)/2.0;return offset;}void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;vec2 source=a_instance.rg;vec2 target=a_instance.ba;float segmentIndex=position.x;float segmentRatio=getSegmentRatio(segmentIndex);float indexDir=mix(-1.0,1.0,step(segmentIndex,0.0));float nextSegmentRatio=getSegmentRatio(segmentIndex+indexDir);vec3 curr=getPos(source,target,segmentRatio);vec3 next=getPos(source,target,nextSegmentRatio);vec2 offset=getExtrusionOffset((next.xy-curr.xy)*indexDir,position.y);\n#ifdef ANIMATE\nv_distance_ratio=segmentIndex/segmentNumber;\n#endif\ngl_Position=matModelViewProjection*vec4(vec3(curr+vec3(offset,0.0)),1.0);v_color=a_color;if(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",Lr='#define PI 3.1415926535\nprecision mediump float;attribute vec4 a_color;attribute vec4 a_instance;attribute float a_size;uniform float u_zoom;uniform float u_time;uniform float u_activeId : 0;uniform vec4 u_activeColor : [ 1.0,0,0,1.0 ];uniform mat4 matModelViewProjection;uniform float segmentNumber;  \nvarying vec4 v_color;\n#ifdef ANIMATE\nvarying float v_distance_ratio;\n#endif\n#pragma include "project"\nfloat maps (float value,float start1,float stop1,float start2,float stop2) {return start2+(stop2-start2)*((value-start1)/(stop1-start1));}float getSegmentRatio(float index) {return smoothstep(0.0,1.0,index/(segmentNumber-1.));}float paraboloid(vec2 source,vec2 target,float ratio) {vec2 x=mix(source,target,ratio);vec2 center=mix(source,target,0.5);float dSourceCenter=distance(source,center);float dXCenter=distance(x,center);return (dSourceCenter+dXCenter)*(dSourceCenter-dXCenter);}vec3 getPos(vec2 source,vec2 target,float segmentRatio) {float vertex_height=paraboloid(source,target,segmentRatio);return vec3(mix(source,target,segmentRatio),sqrt(max(0.0,vertex_height)));}vec2 getExtrusionOffset(vec2 line_clipspace,float offset_direction) {vec2 dir_screenspace=normalize(line_clipspace);dir_screenspace=vec2(-dir_screenspace.y,dir_screenspace.x);vec2 offset=dir_screenspace*offset_direction*a_size*pow(2.0,20.0-u_zoom)/2.0;return offset;}float getAngularDist (vec2 source,vec2 target) {vec2 delta=source-target;vec2 sin_half_delta=sin(delta/2.0);float a=sin_half_delta.y*sin_half_delta.y+cos(source.y)*cos(target.y)*sin_half_delta.x*sin_half_delta.x;return 2.0*atan(sqrt(a),sqrt(1.0-a));}vec2 interpolate (vec2 source,vec2 target,float angularDist,float t) {if(abs(angularDist-PI) < 0.001) {return (1.0-t)*source+t*target;}float a=sin((1.0-t)*angularDist)/sin(angularDist);float b=sin(t*angularDist)/sin(angularDist);vec2 sin_source=sin(source);vec2 cos_source=cos(source);vec2 sin_target=sin(target);vec2 cos_target=cos(target);float x=a*cos_source.y*cos_source.x+b*cos_target.y*cos_target.x;float y=a*cos_source.y*sin_source.x+b*cos_target.y*sin_target.x;float z=a*sin_source.y+b*sin_target.y;return vec2(atan(y,x),atan(z,sqrt(x*x+y*y)));}void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;vec2 source=radians(unProjectFlat(a_instance.rg));vec2 target=radians(unProjectFlat(a_instance.ba));float angularDist=getAngularDist(source,target);float segmentIndex=position.x;float segmentRatio=getSegmentRatio(segmentIndex);float indexDir=mix(-1.0,1.0,step(segmentIndex,0.0));float nextSegmentRatio=getSegmentRatio(segmentIndex+indexDir);\n#ifdef ANIMATE\nv_distance_ratio=segmentIndex/segmentNumber;\n#endif\nvec3 curr=vec3(degrees(interpolate(source,target,angularDist,segmentRatio)),0.0);vec3 next=vec3(degrees(interpolate(source,target,angularDist,nextSegmentRatio)),0.0);vec2 offset=getExtrusionOffset((ProjectFlat(next.xy)-ProjectFlat(curr.xy))*indexDir,position.y);gl_Position=matModelViewProjection*vec4(vec3(vec3(ProjectFlat(curr.xy),2.)+vec3(offset,0.0)),1.0);v_color=a_color;if(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}',Pr='precision highp float;varying vec4 v_color;varying float vTime;void main() {vec4 color=v_color;\n#ifdef ANIMATE \nif (vTime > 1.0 || vTime < 0.0) {discard;} \ncolor.a=color.a*vTime*1.5;\n#endif\ngl_FragColor=color;\n#pragma include "pick"\n}',Ir="precision highp float;attribute vec4 a_color;uniform float currentTime;uniform float u_time;uniform float u_opacity;varying float vTime;varying vec4 v_color;uniform float u_activeId;uniform vec4 u_activeColor;void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef ANIMATE \nvTime=1.0-(mod(u_time*50.,3600.)-position.z)/100.;\n#endif\ngl_Position=matModelViewProjection*vec4(position.xy,10.,1.0);\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",Rr="varying vec2 v_uv;void main(){v_uv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4( position,1.0 );}",Fr="uniform sampler2D u_texture;uniform sampler2D u_rampColors;uniform float u_opacity;varying vec2 v_uv;void main(){float intensity=texture2D(u_texture,v_uv).r;vec4 color=texture2D(u_rampColors,vec2(0.5,1.0-intensity));gl_FragColor=color;gl_FragColor.a=color.a*smoothstep(0.,0.05,intensity)*u_opacity;}",Dr="precision highp float;uniform float u_intensity;varying float v_weight;varying vec2 v_extrude;void main(){float GAUSS_COEF=0.3989422804014327;float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=v_weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,val,val,val);}",kr="precision highp float;attribute float a_weight;attribute vec2 a_dir;uniform float u_intensity;uniform float u_radius;uniform float u_zoom;varying vec2 v_extrude;varying float v_weight;void main(){v_weight=a_weight;float GAUSS_COEF=0.3989422804014327;float ZERO=1.0/255.0/16.0;float extrude_x=a_dir.x*2.0-1.0;float extrude_y=a_dir.y*2.0-1.0;vec2 extrude_dir=normalize(vec2(extrude_x,extrude_y));float S=sqrt(-2.0*log(ZERO/a_weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=extrude_dir*S;vec2 extrude= v_extrude*u_radius*pow(2.0,20.0-u_zoom); \nvec4 pos=vec4( position.xy+extrude,0.0,1.0);gl_Position=projectionMatrix*modelViewMatrix*pos;}",Nr='uniform sampler2D u_sdf_map;uniform float u_gamma_scale : 0.5;uniform float u_font_size : 24;uniform float u_opacity : 1.0;uniform vec4 u_stroke : [0,0,0,1];uniform float u_strokeWidth : 2.0;uniform float u_halo_blur : 0.5;varying vec4 v_color;varying vec2 v_uv;varying float v_gamma_scale;void main() {float dist=texture2D(u_sdf_map,v_uv).a;float fontScale=u_font_size/24.0;lowp float buff=(6.0-u_strokeWidth/fontScale)/SDF_PX;highp float gamma=(u_halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);highp float gamma_scaled=gamma*v_gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=mix(v_color*u_opacity,u_stroke,smoothstep(0.,0.5,1.-dist))*alpha;\n#pragma include "pick"\n}',Br="attribute vec2 a_pos;attribute vec2 a_tex;attribute vec2 a_offset;attribute vec4 a_color;attribute float a_size;uniform vec2 u_sdf_map_size;uniform vec2 u_viewport_size;uniform float u_activeId : 0;uniform vec4 u_activeColor : [1.0,0.0,0.0,1.0];varying vec2 v_uv;varying float v_gamma_scale;varying vec4 v_color;void main() {v_color=a_color;v_uv=a_tex/u_sdf_map_size;float fontScale=a_size/24.;vec4 projected_position=projectionMatrix*modelViewMatrix*vec4(a_pos,0.,1.);gl_Position=vec4(projected_position.xy/projected_position.w+a_offset*fontScale/u_viewport_size*2.,0.0,1.0);v_gamma_scale=gl_Position.w;if (pickingId==u_activeId) {v_color=u_activeColor;}\n#ifdef PICK\nworldId=id_toPickColor(pickingId);\n#endif\n}",zr="precision highp float;varying vec2 v_texCoord;void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_texCoord=uv;gl_Position= matModelViewProjection*vec4(position,1.0);}",Ur="precision mediump float;uniform sampler2D u_texture;uniform float u_opacity;varying vec2 v_texCoord;void main() {vec4 color=texture2D(u_texture,vec2(v_texCoord.x,1.0-v_texCoord.y));gl_FragColor=color*u_opacity;}",Gr="precision highp float;uniform vec4 u_extent;uniform sampler2D u_texture;uniform float u_opacity;uniform float u_size;uniform sampler2D u_colorTexture;uniform float u_min;uniform float u_max;varying vec2 v_texCoord;varying vec4 v_color;void main() {mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;float value=texture2D(u_texture,uv)[0];v_texCoord=uv;value=clamp(value,u_min,u_max);float value1= (value-u_min)/(u_max-u_min);vec2 ramp_pos=vec2(fract(16.0*(1.0-value1)),floor(16.0*(1.0-value1))/16.0);v_color=texture2D(u_colorTexture,ramp_pos);v_color.a*=u_opacity;vec2 range=u_extent.zw-u_extent.xy;gl_Position= matModelViewProjection*vec4(position.xy,value*100.,1.0);}",Vr="precision highp float;uniform sampler2D u_texture;uniform sampler2D u_colorTexture;uniform vec2 u_dimension;varying vec2 v_texCoord;varying vec4 v_color;uniform float u_min;uniform float u_max;uniform vec4 u_extent;\n#define PI 3.141592653589793\nvoid main() {vec2 u_latrange=vec2(3.83718,53.5636);float u_zoom=7.0;float u_maxzoom=10.0;vec2 epsilon=1.0/u_dimension;vec2 u_light=vec2(0.5000,5.8469);vec4 u_accent=vec4(0.,0.,0.,1.);vec4 u_highlight=vec4(1.0);vec4 u_shadow=vec4(0.,0.,0.,1.);float a=texture2D(u_texture,v_texCoord-epsilon)[0];float b=texture2D(u_texture,v_texCoord+vec2(0,-epsilon.y))[0];float c=texture2D(u_texture,v_texCoord+vec2(epsilon.x-epsilon.y))[0];float d=texture2D(u_texture,v_texCoord+vec2(-epsilon.x,0))[0];float e=texture2D(u_texture,v_texCoord)[0];float f=texture2D(u_texture,v_texCoord+vec2(epsilon.x,0))[0];float g=texture2D(u_texture,v_texCoord+vec2(-epsilon.x,epsilon.y))[0];float h=texture2D(u_texture,v_texCoord+vec2(0,epsilon.y))[0];float i=texture2D(u_texture,v_texCoord+epsilon)[0];float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_texCoord.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*v_color*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=v_color;}",Hr="attribute vec4 a_color;uniform float u_zoom;uniform float u_opacity;varying vec4 v_color;uniform float u_activeId;uniform vec4 u_activeColor;void main(){mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;v_color=a_color;v_color.a*=u_opacity;if(pickingId==u_activeId){v_color=u_activeColor;}gl_Position=projectionMatrix*vec4(position.xy/4096.,0.,1.);}",qr="varying vec4 v_color;void main(){gl_FragColor=v_color;}",Wr="precision highp float;void main(){mat4 matModelViewProjection=projectionMatrix*modelViewMatrix;gl_Position= matModelViewProjection*vec4(position,1.0);}",Yr="precision highp float;void main() {gl_FragColor=vec4(0.0,0.,0.,1.0);}",Xr="#define PI 3.14159265359\n#define TWO_PI 6.28318530718",Zr="vec4 id_toPickColor(float pickingId) {float id=step(0.,pickingId)*pickingId;vec3 a=fract(vec3(1.0/255.0,1.0/(255.0*255.0),1.0/(255.0*255.0*255.0))*id);a-=a.xxy*vec3(0.0,1.0/255.0,1.0/255.0);vec4 worldColor=vec4(a,1);return worldColor;}",Kr="#define SHIFT_RIGHT17 1.0/131072.0\n#define SHIFT_RIGHT18 1.0/262144.0\n#define SHIFT_RIGHT19 1.0/524288.0\n#define SHIFT_RIGHT20 1.0/1048576.0\n#define SHIFT_RIGHT21 1.0/2097152.0\n#define SHIFT_RIGHT22 1.0/4194304.0\n#define SHIFT_RIGHT23 1.0/8388608.0\n#define SHIFT_RIGHT24 1.0/16777216.0\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}",Jr='\nuniform float u_ambient : 1.0;uniform float u_diffuse : 1.0;uniform float u_specular : 1.0;uniform int u_num_of_directional_lights : 1;uniform int u_num_of_spot_lights : 0;\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n#pragma include "common"\nstruct DirectionalLight {vec3 direction;vec3 ambient;vec3 diffuse;vec3 specular;};struct SpotLight {vec3 position;vec3 direction;vec3 ambient;vec3 diffuse;vec3 specular;float constant;float linear;float quadratic;float angle;float blur;float exponent;};uniform DirectionalLight u_directional_lights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];uniform SpotLight u_spot_lights[MAX_NUM_OF_SPOT_LIGHTS];vec3 calc_directional_light(DirectionalLight light,vec3 normal,vec3 viewDir) {vec3 lightDir=normalize(light.direction);float diff=max(dot(normal,lightDir),0.0);vec3 halfwayDir=normalize(lightDir+viewDir);float spec=pow(max(dot(normal,halfwayDir),0.0),SHININESS);vec3 ambient=light.ambient*u_ambient;vec3 diffuse=light.diffuse*diff*u_diffuse;vec3 specular=light.specular*spec*u_specular;return ambient+diffuse+specular;}vec3 calc_lighting(vec3 position,vec3 normal,vec3 viewDir) {vec3 weight=vec3(0.0);for (int i=0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {if (i >=u_num_of_directional_lights) {break;}weight+=calc_directional_light(u_directional_lights[i],normal,viewDir);}return weight;}',Qr="#ifdef PICK\nif(worldId.x==0.&&worldId.y==0.&& worldId.z==0.){discard;return;}gl_FragColor=worldId;return;\n#endif",$r="/***2D signed distance field functions*@see http:*/float ndot(vec2 a,vec2 b ) { return a.x*b.x-a.y*b.y; }float sdCircle(vec2 p,float r) {return length(p)-r;}float sdEquilateralTriangle(vec2 p) {const float k=sqrt(3.0);p.x=abs(p.x)-1.0;p.y=p.y+1.0/k;if( p.x+k*p.y > 0.0 ) p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;p.x-=clamp( p.x,-2.0,0.0 );return-length(p)*sign(p.y);}float sdBox(vec2 p,vec2 b) {vec2 d=abs(p)-b;return length(max(d,vec2(0)))+min(max(d.x,d.y),0.0);}float sdPentagon(vec2 p,float r) {const vec3 k=vec3(0.809016994,0.587785252,0.726542528);p.x=abs(p.x);p-=2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);p-=2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);p-=vec2(clamp(p.x,-r*k.z,r*k.z),r);    \nreturn length(p)*sign(p.y);}float sdHexagon(vec2 p,float r) {const vec3 k=vec3(-0.866025404,0.5,0.577350269);p=abs(p);p-=2.0*min(dot(k.xy,p),0.0)*k.xy;p-=vec2(clamp(p.x,-k.z*r,k.z*r),r);return length(p)*sign(p.y);}float sdOctogon(vec2 p,float r) {const vec3 k=vec3(-0.9238795325,0.3826834323,0.4142135623 );p=abs(p);p-=2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);p-=2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);p-=vec2(clamp(p.x,-k.z*r,k.z*r),r);return length(p)*sign(p.y);}float sdHexagram(vec2 p,float r) {const vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);p=abs(p);p-=2.0*min(dot(k.xy,p),0.0)*k.xy;p-=2.0*min(dot(k.yx,p),0.0)*k.yx;p-=vec2(clamp(p.x,r*k.z,r*k.w),r);return length(p)*sign(p.y);}float sdRhombus(vec2 p,vec2 b) {vec2 q=abs(p);float h=clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);float d=length( q-0.5*b*vec2(1.0-h,1.0+h) );return d*sign( q.x*b.y+q.y*b.x-b.x*b.y );}float sdVesica(vec2 p,float r,float d) {p=abs(p);float b=sqrt(r*r-d*d);return ((p.y-b)*d>p.x*b) \n? length(p-vec2(0.0,b)): length(p-vec2(-d,0.0))-r;}",ti="#define PI 3.1415926535\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){float maxs=85.0511287798;float lat=max(min(maxs,lnglat.y),-maxs);float scale=268435456.;float d=PI/180.;float x=lnglat.x*d;float y=lat*d;y=log(tan((PI/4.)+(y/2.)));float a=.5/PI,b=.5,c=-.5/PI;d=.5;x=scale*(a*x+b)-215440491.;y=scale*(c*y+d)-106744817.;return vec2(x,y);}vec2 unProjectFlat(vec2 px){float a=.5/PI;float b=.5;float c=-.5/PI;float d=.5;float scale=268435456.;float x=((px.x+215440491.)/scale-b)/a;float y=((px.y+106744817.)/scale-d)/c;y=(atan(pow(E,y))-(PI/4.))*2.;d=PI/180.;float lat=y/d;float lng=x/d;return vec2(lng,lat);}";function ei(){Q("point",{vs:dr,fs:pr}),Q("common",{vs:Xr,fs:Xr}),Q("decode",{vs:Kr,fs:""}),Q("lighting",{vs:Jr,fs:""}),Q("pick",{vs:"",fs:Qr}),Q("sdf_2d",{vs:"",fs:$r}),Q("project",{vs:ti,fs:""}),Q("pick_color",{vs:Zr,fs:Zr}),Q("circle",{vs:wr,fs:xr}),Q("polygon",{vs:gr,fs:vr}),Q("grid",{vs:yr,fs:mr}),Q("hexagon",{vs:br,fs:_r}),Q("pointline",{vs:Er,fs:Mr}),Q("pointnormal",{vs:Sr,fs:Or}),Q("meshline",{vs:jr,fs:Tr}),Q("arcline",{vs:Cr,fs:Ar}),Q("greatcircle",{vs:Lr,fs:Ar}),Q("line",{vs:Ir,fs:Pr}),Q("heatmap_color",{vs:Rr,fs:Fr}),Q("heatmap_intensity",{vs:kr,fs:Dr}),Q("text",{vs:Br,fs:Nr}),Q("image",{vs:zr,fs:Ur}),Q("raster",{vs:Gr,fs:Vr}),Q("tilepolygon",{vs:Hr,fs:qr}),Q("mask_quard",{vs:Wr,fs:Yr})}function ni(){return new Worker(Gi.workerUrl)}var ri=function(){this.active={}};ri.prototype.acquire=function(t){if(!this.workers){this.workers=[];while(this.workers.length<ri.workerCount)this.workers.push(new ni)}return this.active[t]=!0,this.workers.slice()},ri.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},ri.workerCount=Math.max(Math.floor(window.navigator.hardwareConcurrency/2),1);var ii=/\{([zxy])\}/g,oi=function(t){function e(e,n){t.call(this,Object.assign({},{type:"vector"},e)),this.cfg=e,this.workerController=n,this.urlTemplate=this.get("url")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadTile=function(t,e){var n=t.id.split("_"),r=this._getTileURL({x:n[0],y:n[1],z:n[2]}),i=Object.assign({},{id:t.id,type:"vector"},this.cfg,{url:r});function o(t,n){e(t,n)}t.workerID=this.workerController.send("loadTile",i,o.bind(this))},e.prototype.abortTile=function(t){this.workerController.send("abortTile",{id:t.id,type:this.get("type"),sourceID:this.get("sourceID")},void 0,t.workerID)},e.prototype.unloadTile=function(t){this.workerController.send("removeTile",{id:t.id,type:this.get("type"),sourceID:this.get("sourceID")},void 0,t.workerID)},e.prototype._getTileURL=function(t){return t.s||(t.s=String.fromCharCode(97+Math.floor(3*Math.random()))),ii.lastIndex=0,this.urlTemplate.replace(ii,function(e,n){return t[n]})},e}(t.Base),ai=180/Math.PI,si=function(e,n){this.layer=e,this._object3D=new t.Object3D,this._object3D.name=n.tileId,this._tile=n.tileId.split("_").map(function(t){return 1*t}),this._tileLnglatBounds=this._tileLnglatBounds(this._tile),this._tileBounds=this._tileBounds(this._tileLnglatBounds),this._center=this._tileBounds.getCenter(),this._centerLnglat=this._tileLnglatBounds.getCenter(),this._init(n),this.maskScene=new t.Scene;var r=this._tileMaskMesh();this.maskScene.add(r),this._bufferData=n};si.prototype._init=function(t){this._createMesh(t)},si.prototype.getFeatureIndex=function(t){return this._bufferData.featureKey.indexOf(t)},si.prototype._createMesh=function(t){var e=this;return this.mesh=F(this.layer.get("type"),t.shape)(null,this.layer,t.buffer),"composer"!==this.mesh.type?(this.mesh.onBeforeRender=function(t){e._renderMask(t);var n=e.layer.scene.getZoom();a(e._object3D,{u_time:e.layer.scene._engine.clock.getElapsedTime(),u_zoom:n})},this.mesh.onAfterRender=function(t){var e=t.context;e.clear(e.STENCIL_BUFFER_BIT),e.disable(e.STENCIL_TEST)},this._object3D.add(this.mesh)):this._object3D=this.mesh,this._object3D},si.prototype.getMesh=function(){return this._object3D},si.prototype._renderMask=function(t){if("point"!==this.layer.get("layerType")){var e=t.context;t.autoClear=!1,t.clearDepth(),e.enable(e.STENCIL_TEST),e.stencilOp(e.REPLACE,e.REPLACE,e.REPLACE),e.stencilFunc(e.ALWAYS,1,4294967295),e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT),e.colorMask(!1,!1,!1,!1),this.layer.scene._engine.renderScene(this.maskScene),e.colorMask(!0,!0,!0,!0),e.depthMask(!1),t.clearDepth(),e.stencilFunc(e.EQUAL,1,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}},si.prototype._tileMaskMesh=function(){var e=this._tileBounds,n=[e.getBottomLeft().x,e.getBottomLeft().y,0],r=[e.getBottomRight().x,e.getBottomRight().y,0],i=[e.getTopLeft().x,e.getTopLeft().y,0],o=[e.getTopRight().x,e.getTopRight().y,0],a=new Float32Array(n.concat(o,r,n,i,o)),s=new t.BufferGeometry;s.addAttribute("position",new t.Float32BufferAttribute(a,3));var u=new Dn,c=new t.Mesh(s,u);return c},si.prototype.getSelectFeature=function(t){var e=this.layerSource.originData.featureKeys[t];if(e&&void 0!==e.index){var n=e.index;return this.layerSource.originData.dataArray[n]}return null},si.prototype._tileBounds=function(t){var e=this.layer.scene.project([t.getNorthEast().lng,t.getNorthEast().lat]),n=this.layer.scene.project([t.getSouthWest().lng,t.getSouthWest().lat]);return On(n,e)},si.prototype._tileLnglatBounds=function(t){var e=this._tile2lng(t[0]+1,t[2]),n=this._tile2lng(t[0],t[2]),r=this._tile2lat(t[1]+1,t[2]),i=this._tile2lat(t[1],t[2]);return Tn([n,i],[e,r])},si.prototype._tile2lng=function(t,e){return t/Math.pow(2,e)*360-180},si.prototype._tile2lat=function(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return ai*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))},si.prototype.destroy=function(){o(this._object3D),o(this.maskScene),this._object3D=null,this.maskScene=null,this.layerData=null};var ui=function(e){function n(t,n){e.call(this,Object.assign({},{cacheLimit:50,minZoom:0,maxZoom:18,keepBuffer:0},n)),this._tileMap={},this.tileList={},this.scene=t,this._tileCache=new Ce(this.get("cacheLimit"),this._destroyTile.bind(this)),this._crs=mn,this.layers=this.scene.getLayers(),this._source=new oi(n,this.scene.style.WorkerController),this.layersTiles={}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLayerById=function(t){for(var e=this.scene.getLayers(),n=0;n<e.length;n+=1)if(e[n].layerId===1*t)return e[n]},n.prototype.update=function(){var t=this;this._calculateTileIDs();for(var e=function(e){var n=t.updateTileList[e].join("_"),r=t.tileList[n];r.loading=!0;var i=t._tileCache.getTile(n);if(void 0===i)t._source.loadTile(r,function(e,n){e||void 0===n||(t._renderTile(r,n),r.active=!0),r.loaded=!0,t._pruneTiles()});else{for(var o in r.active=!0,r.loaded=!0,i.mesh){var a=t.getLayerById(o),s=i.mesh[o];a.tiles.add(s.getMesh()),t._addPickMesh(a,s.getMesh()),t.scene._engine.update()}t._pruneTiles()}},n=0;n<t.updateTileList.length;n++)e(n)},n.prototype._renderTile=function(t,e){var n=t.id,r={rawData:e.rawTileData,mesh:{}};for(var i in e.buffer){var o=this.getLayerById(i),a=new si(o,e.buffer[i]);r.mesh[i]=a,o.tiles.add(a.getMesh()),this._addPickMesh(o,a.getMesh()),this.scene._engine.update()}this._tileCache.setTile(r,n)},n.prototype.getSelectFeature=function(t,e,n){var r=this.tileZoom,i=this._crs.lngLatToPoint(Sn(n.lng,n.lat),r),o=i.divideBy(256).floor(),a=this._getParentTile(o.x,o.y,r,r-3),s=this.getLayerById(e),u=s.get("sourceOption").parser.sourceLayer,c=a.mesh[e].getFeatureIndex(t),l=this._getVectorFeature(a.rawData,u,c);return l?l.toGeoJSON(o.x,o.y,r):{}},n.prototype._getParentTile=function(t,e,n,r){if(n<r)return null;var i=[t,e,n].join("_"),o=this._tileCache.getTile(i);return o||this._getParentTile(Math.floor(t/2),Math.floor(e/2),n-1)},n.prototype._getVectorFeature=function(e,n,r){var i=new t.VectorTile(new t.PBF(e));if(!(r<0))return i.layers[n].feature(r)},n.prototype._calculateTileIDs=function(){this._tileMap={},this.updateTileList=[];var t=Math.floor(this.scene.getZoom()),e=this.get("minZoom"),n=this.get("maxZoom");this.tileZoom=t>n?n:t;var r=this.scene.getZoom();if(r<e)this._removeTiles();else{var i=this._getPixelBounds(),o=this._pxBoundsToTileRange(i),a=this.get("keepBuffer"),s=this.scene.getCenter(),u=this.scene.crs.lngLatToPoint(Sn(s.lng,s.lat),this.tileZoom),c=u.divideBy(256).floor();if(this._noPruneRange=new En(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a])),!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l=o.min.y;l<=o.max.y;l++)for(var f=o.min.x;f<=o.max.x;f++){var h=[f,l,this.tileZoom],p=this.tileList[h.join("_")];p&&p.loading?(p.current=!0,p.retain=!0):(this.tileList[h.join("_")]={current:!0,active:!1,retain:!0,loading:!1,coords:h,id:h.join("_")},this.updateTileList.push(h))}this.updateTileList.sort(function(t,e){var n=t,r=e,i=Math.pow(1*n[0]-c.x,2)+Math.pow(1*n[1]-c.y,2),o=Math.pow(1*r[0]-c.x,2)+Math.pow(1*r[1]-c.y,2);return i-o}),this._pruneTiles()}},n.prototype._getPixelBounds=function(){var t,e,n=this.scene.getBounds().toBounds(),r=n.getNorthEast(),i=n.getSouthWest(),o=this.tileZoom,a=this.scene.getCenter(),s=this.scene.crs.lngLatToPoint(Sn(r.lng,r.lat),o),u=this.scene.crs.lngLatToPoint(Sn(i.lng,i.lat),o),c=this.scene.crs.lngLatToPoint(Sn(a.lng,a.lat),o),l=c.y-s.y,f=u.y-c.y;if(a.lng-r.lng>0||a.lng-i.lng<0){var h=256*Math.pow(2,o)/360*(180-r.lng)+256*Math.pow(2,o)/360*(i.lng+180);a.lng-r.lng>0?(t=256*Math.pow(2,o)/360*(a.lng-r.lng),e=h-t):(e=256*Math.pow(2,o)/360*(i.lng-a.lng),t=h-e)}else t=256*Math.pow(2,o)/360*(a.lng-i.lng),e=256*Math.pow(2,o)/360*(r.lng-a.lng);var p=new En(c.subtract(t,l),c.add(e,f));return p},n.prototype._pxBoundsToTileRange=function(t){return new En(t.min.divideBy(256).floor(),t.max.divideBy(256).ceil().subtract([1,1]))},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.reload=function(){},n.prototype._reloadTile=function(){},n.prototype._removeTile=function(){},n.prototype.clearTiles=function(){},n.prototype._pruneTiles=function(){var t,e=this.tileZoom;for(var n in this.tileList){var r=this.tileList[n].coords;r[2]===e&&this._noPruneRange.contains(new jn(r[0],r[1]))||(this.tileList[n].current=!1,this.tileList[n].retain=!1)}for(var i in this.tileList)if(t=this.tileList[i],t.current&&!t.active){var o=i.split("_").map(function(t){return 1*t}),a=o[0],s=o[1],u=o[2];this._retainParent(a,s,u,u-5)||this._retainChildren(a,s,u,u+2)}this._removeOutTiles()},n.prototype._retainParent=function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=this.tileList[[i,o,a].join("_")];return s&&s.active?(s.retain=!0,s.current=!0,!0):(s&&s.loaded&&(s.retain=!0),a>r&&this._retainParent(i,o,a,r))},n.prototype._retainChildren=function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=[i,o,n+1].join("_"),s=this.tileList[a];s&&s.active?(s.retain=!0,s.current=!0):(s&&s.loaded&&(s.retain=!0,s.current=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},n.prototype._addPickMesh=function(t,e){if("image"!==this.type){var n=t.get("pickingController"),r=e.children[0];r.name=e.name,n.addPickMesh(r)}},n.prototype._removeOutTiles=function(){var t=this;for(var e in this.tileList)this.tileList[e].retain||(this._abortTile(this.tileList[e]),this._unloadTile(this.tileList[e]),delete this.tileList[e]);for(var n=this.scene.getLayers(),r=function(e){var r=t.get("sourceID"),i=n[e].get("sourceOption").id;if(i!==r)return{};n[e].tiles.children.forEach(function(r){var i=r.name;if(!t.tileList[i]){n[e].tiles.remove(r);var o=n[e].get("pickingController");o&&o.removePickMeshByName(i)}})},i=0;i<n.length;i++){var o=r(i);if(o)return o.v}},n.prototype._destroyTile=function(t,e){this._unloadTile(e)},n}(t.Base),ci=1;function li(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0===--r&&n(o,i)})})}var fi=function t(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=ci++;for(var r=this.workerPool.acquire(this.id),i=0;i<r.length;i++){var o=r[i],a=new t.Actor(o,n,this.id);a.name="Worker "+i,this.actors.push(a)}};fi.prototype.broadcast=function(t,e,n){n=n||function(){},li(this.actors,function(n,r){n.send(t,e,r)},n)},fi.prototype.send=function(t,e,n,r){return("number"!==typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n,r),r},fi.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},fi.Actor=t.Actor;var hi=["mappingController","interacionController","pickingController","interactions","eventController"],pi=function(t){function e(e,n){t.call(this,n),this.scene=e,this._sourceCaches={},this.WorkerPool=new ri,this._tileMap={},this.WorkerController=new fi(this.WorkerPool,this),this.layerStyles={},this.layers=[],this.addMapEvent()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addSource=function(t,e){if(void 0!==this._sourceCaches[t])throw new Error("SourceID \u5df2\u5b58\u5728");e.sourceID=t,this._sourceCaches[t]=new ui(this.scene,e)},e.prototype.getSource=function(t){return this._sourceCaches[t]},e.prototype.addLayer=function(t){var e=t.layerId;this.layers[e]=t},e.prototype._addTileStyle=function(t){var e=t.layerId,n={};for(var r in t)-1===hi.indexOf(r)&&(n[r]=t[r]);this.layerStyles[e]=n,this._layerStyleGroupBySourceID(),this.WorkerController.broadcast("setLayers",this.layerStyles)},e.prototype.removeTileStyle=function(t){delete this.layerStyles[t],this._layerStyleGroupBySourceID()},e.prototype._layerStyleGroupBySourceID=function(){var t=[];for(var e in this.layerStyles){var n=this.layerStyles[e].sourceOption.id,r=this.layerStyles[e].sourceOption.parser.sourceLayer;t[n]||(t[n]={}),t[n][r]||(t[n][r]=[]),t[n][r].push(this.layerStyles[e])}this.sourceStyles=t},e.prototype.update=function(t){for(var e in this._addTileStyle(t),this._sourceCaches)this._sourceCaches[e].update(this.layers,this.sourceStyles[e])},e.prototype.addMapEvent=function(){var t=this;this.mapEventHander=b(function(){requestAnimationFrame(function(){for(var e in t._sourceCaches)t._sourceCaches[e].update(t.layers,t.sourceStyles[e])})},200),this.scene.map.on("zoomchange",this.mapEventHander),this.scene.map.on("dragend",this.mapEventHander)},e.prototype.clearMapEvent=function(){this.scene.map.off("zoomchange",this.mapEventHander),this.scene.map.off("dragend",this.mapEventHander)},e.prototype.destroy=function(){this.WorkerController.remove()},e}(t.Base);function di(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function vi(t){return di(t).split(/\s+/)}var gi=window.document.documentElement.style;function mi(t){if(!gi)return t[0];for(var e=0;e<t.length;e++)if(t[e]in gi)return t[e];return t[0]}function yi(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function _i(t){var e=t.parentNode;e&&e.removeChild(t)}function bi(t,e){if(void 0!==t.classList)for(var n=vi(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!wi(t,e)){var o=Ei(t);Mi(t,(o?o+" ":"")+e)}}function xi(t,e){void 0!==t.classList?t.classList.remove(e):Mi(t,di((" "+Ei(t)+" ").replace(" "+e+" "," ")))}function wi(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Ei(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function Mi(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Ei(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Oi(t){while(t.firstChild)t.removeChild(t.firstChild)}var Si=mi(["transform","WebkitTransform"]);function Ti(t,e){t.style[Si]=e}var ji=function(e){t.Util.assign(this,e),this._initControlPos()};ji.prototype.addControl=function(t){t.addTo(this.scene)},ji.prototype.removeControl=function(t){return t.remove(),this},ji.prototype._initControlPos=function(){var t=this._controlCorners={},e="l7-",n=this._controlContainer=yi("div",e+"control-container",this.scene.getContainer());function r(r,i){var o=e+r+" "+e+i;t[r+i]=yi("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},ji.prototype.clearControlPos=function(){for(var t in this._controlCorners)_i(this._controlCorners[t]);_i(this._controlContainer),delete this._controlCorners,delete this._controlContainer};var Ai=function(t){function e(e){t.call(this,Object.assign({},{position:"topright"},e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setPosition=function(t){var e=this._scene;return e&&e.removeControl(this),this.set("position",t),e&&e.addControl(this),this},e.prototype.getContainer=function(){return this._container},e.prototype.addTo=function(t){this.remove(),this.isShow=!0,this._scene=t;var e=this._container=this.onAdd(t),n=this.get("position"),r=t.get("controlController")._controlCorners[n];return bi(e,"l7-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},e.prototype.hide=function(){var t=this._container;bi(t,"l7-control-hide"),this.isShow=!1},e.prototype.show=function(){var t=this._container;xi(t,"l7-control-hide"),this.isShow=!0},e.prototype.remove=function(){if(!this._scene)return this;_i(this._container)},e.prototype._refocusOnMap=function(t){this._scene&&t&&t.screenX>0&&t.screenY>0&&this._scene.getContainer().focus()},e}(t.Base),Ci=function(e){function n(n){e.call(this,Object.assign({},{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},n)),t.bindAll(["_updateDisabled","_zoomIn","_zoomOut"],this),this._disabled=!1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){var e="l7-control-zoom",n=yi("div",e+" l7-bar");return this._zoomInButton=this._createButton(this.get("zoomInText"),this.get("zoomInTitle"),e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(this.get("zoomOutText"),this.get("zoomOutTitle"),e+"-out",n,this._zoomOut),t.on("zoomend",this._updateDisabled),t.on("zoomchange",this._updateDisabled),this._updateDisabled(),n},n.prototype.onRemove=function(t){t.off("zoomend",this._updateDisabled),t.off("zoomchange",this._updateDisabled)},n.prototype.disable=function(){return this._disabled=!0,this._updateDisabled(),this},n.prototype.enable=function(){return this._disabled=!1,this._updateDisabled(),this},n.prototype._zoomIn=function(){!this._disabled&&this._scene.getZoom()<this._scene.get("maxZoom")&&this._scene.zoomIn()},n.prototype._zoomOut=function(){!this._disabled&&this._scene.getZoom()>this._scene.get("minZoom")&&this._scene.zoomOut()},n.prototype._createButton=function(t,e,n,r,i){var o=yi("a",n,r);return o.innerHTML=t,o.href="#",o.tile=e,o.addEventListener("click",i),o},n.prototype._updateDisabled=function(){var t=this._scene,e="l7-disabled";xi(this._zoomInButton,e),xi(this._zoomOutButton,e),(this._disabled||t.getZoom()<=t.get("minZoom"))&&bi(this._zoomOutButton,e),(this._disabled||t.getZoom()>=t.get("maxZoom"))&&bi(this._zoomInButton,e)},n}(Ai),Li=function(e){function n(n){e.call(this,Object.assign({},{position:"bottomleft",maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1},n)),t.bindAll(["_update"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){var e="l7-control-scale",n=yi("div",e);return this._addScales(e+"-line",n),t.on(this.get("updateWhenIdle")?"moveend":"mapmove",this._update),this._update(),n},n.prototype.onRemove=function(t){t.off(this.get("updateWhenIdle")?"moveend":"mapmove",this._update)},n.prototype._addScales=function(t,e){this.get("metric")&&(this._mScale=yi("div",t,e)),this.get("imperial")&&(this._iScale=yi("div",t,e))},n.prototype._update=function(){var t=this._scene,e=this._scene.getSize().height/2,n=t.containerToLngLat({x:0,y:e}),r=t.containerToLngLat({x:this.get("maxWidth"),y:e}),i=t.crs.distance(fn(n.lng,n.lat),fn(r.lng,r.lat));this._updateScales(i)},n.prototype._updateScales=function(t){this.get("metric")&&t&&this._updateMetric(t),this.get("imperial")&&t&&this._updateImperial(t)},n.prototype._updateMetric=function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},n.prototype._updateImperial=function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},n.prototype._updateScale=function(t,e,n){t.style.width=Math.round(this.get("maxWidth")*n)+"px",t.innerHTML=e},n.prototype._getRoundNum=function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n},n}(Ai),Pi=function(t){function e(e){t.call(this,Object.assign({},{position:"bottomright",prefix:'<a href="https://antv.alipay.com/zh-cn/l7/1.x/index.html" title="\u5730\u7406\u7a7a\u95f4\u6570\u636e\u53ef\u89c6\u5316\u5f15\u64ce">AntV L7</a>'},e)),this._attributions={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this._container=yi("div","l7-control-attribution");var e=t.getLayers();for(var n in e)e[n].get("attribution")&&this.addAttribution(e[n].get("attribution"));return this._update(),this._container},e.prototype.setPrefix=function(t){return this.set("prefix",t),this._update(),this},e.prototype.addAttribution=function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},e.prototype.removeAttribution=function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},e.prototype._update=function(){if(this._scene){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.get("prefix")&&n.push(this.get("prefix")),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},e}(Ai),Ii=function(e){function n(n){e.call(this,Object.assign({},{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1},n)),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;var r=this.get("baseLayers"),i=this.get("overlayers");for(var o in r)this._addLayer(r[o],o);for(var a in i)this._addLayer(i[a],a,!0);t.bindAll(["_checkDisabledLayers","_onLayerChange","collapse","extend","expand","_onInputClick"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this._initLayout(),this._update(),this._scene=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("remove",this._onLayerChange),this._layers[e].layer.on("add",this._onLayerChange);return this._container},n.prototype.addTo=function(t){e.prototype.addTo.call(this,t)},n.prototype.addVisualLayer=function(t,e){return this._addLayer(t,e,!0),this._scene?this._update():this},n.prototype._initLayout=function(){var t="l7-control-layers",e=this._container=yi("div",t),n=this.get("collapsed");e.setAttribute("aria-haspopup",!0);var r=this._form=yi("form",t+"-list");n&&(this._scene.on("click",this.collapse),e.addEventListener("mouseenter",this.expand),e.addEventListener("mouseleave",this.collapse));var i=this._layersLink=yi("a",t+"-toggle",e);i.href="#",i.title="Layers",n||this.expand(),this._baseLayersList=yi("div",t+"-base",r),this._separator=yi("div",t+"-separator",r),this._overlaysList=yi("div",t+"-overlays",r),e.appendChild(r)},n.prototype._update=function(){if(!this._container)return this;Oi(this._baseLayersList),Oi(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.get("hideSingleBase")&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},n.prototype.expand=function(){bi(this._container,"l7-control-layers-expanded"),this._form.style.height=null;var t=this._scene.getSize().height-(this._container.offsetTop+50);return t<this._form.clientHeight?(bi(this._form,"l7-control-layers-scrollbar"),this._form.style.height=t+"px"):xi(this._form,"l7-control-layers-scrollbar"),this._checkDisabledLayers(),this},n.prototype.collapse=function(){return xi(this._container,"l7-control-layers-expanded"),this},n.prototype._checkDisabledLayers=function(){for(var t,e,n=this._layerControlInputs,r=this._scene.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._scene.getLayer(t.layerId),t.disabled=void 0!==e.get("minZoom")&&r<e.get("minZoom")||r<e.get("maxZoom")!==void 0&&r>e.get("maxZoom")},n.prototype._addLayer=function(t,e,n){var r=this;this._scene&&(t.on("add",this._onLayerChange),t.on("remove",this._onLayerChange)),this._layers.push({layer:t,name:e,overlay:n}),this.get("sortLayers")&&this._layers.sort(function(t,e){return r.get("sortFunction")(t.layer,e.layer,t.name,e.name)}),this.get("autoZIndex")&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},n.prototype._expandIfNotCollapsed=function(){return this._scene&&!this.get("collapsed")&&this.expand(),this},n.prototype._onLayerChange=function(t){this._handlingClick||this._update();var e=this._scene.getLayer(t.target.layerId),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},n.prototype._createRadioElement=function(t,e){var n='<input type="radio" class="l7-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},n.prototype._addItem=function(t){var e,n=document.createElement("label"),r=!!this._scene.getLayer(t.layer.layerId);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="l7-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("l7-base-layers",r),this._layerControlInputs.push(e),e.layerId=t.layer.layerId,e.addEventListener("click",this._onInputClick);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");n.appendChild(o),o.appendChild(e),o.appendChild(i);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),this._checkDisabledLayers(),n},n.prototype._onInputClick=function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._scene.getLayer(t.layerId),t.checked?r.push(e):t.checked||i.push(e);for(var a=0;a<i.length;a++)i[a].hide();for(var s=0;s<r.length;s++)r[s].show();this._handlingClick=!1,this._refocusOnMap()},n}(Ai),Ri=Object.freeze({__proto__:null,Base:Ai,Zoom:Ci,Scale:Li,Attribution:Pi,Layers:Ii}),Fi=["mouseout","mouseover","mousedown","mouseleave","touchstart","touchmove","touchend","mouseup","rightclick","click","dblclick"],Di=function(e){function n(t){e.call(this,t),this._initMap(),this.crs=mn,this.fontAtlasManager=new fr,this._layers=[],this.animateCount=0}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefaultCfg=function(){return t.Global.scene},n.prototype._initEngine=function(t){this._engine=new l(t,this),this.addImage(),this.registerMapEvent(),ei()},n.prototype._initContoller=function(){var t=new ji({scene:this});if(this.set("controlController",t),this.get("zoomControl")){var e=(new Ci).addTo(this);this.set("zoomControl",e)}if(this.get("scaleControl")){var n=(new Li).addTo(this);this.set("scaleControl",n)}if(this.get("attributionControl")){var r=(new Pi).addTo(this);this.set("attributionControl",r)}},n.prototype.addPickMesh=function(t){this._engine._picking.add(t)},n.prototype._initMap=function(){var e=this;this.mapContainer=this._getSceneContainer(),this.mapType=this.get("mapType")||"amap";var n=t.getMap(this.mapType),r=new n(this.mapContainer,this._attrs);r.mixMap(this),this._container=r.container,r.on("mapLoad",function(){e.map=r.map,e._markerContainier=r.l7_marker_Container,e._initEngine(r.renderDom),r.asyncCamera(e._engine),e.initLayer(),e._registEvents();var t=e.get("hash");if(t){var n=M("hash"),i=new n({layer:e});i._onHashChange()}e.style=new pi(e,{}),e._initContoller(),e.emit("loaded")})},n.prototype._getSceneContainer=function(){var t=this.get("id");return"string"===typeof t?document.getElementById(t):t instanceof HTMLElement?t:void 0},n.prototype.initLayer=function(){var t=this,e=function(e){n.prototype[e]=function(n){var r=new f[e](t,n);return t._layers.push(r),r}};for(var r in f)e(r)},n.prototype.addTileSource=function(t,e){this.style.addSource(t,e)},n.prototype.getTileSource=function(t){return this.style.getSource(t)},n.prototype.on=function(t,n){this.map&&this.map.on(t,n),e.prototype.on.call(this,t,n)},n.prototype.off=function(t,n){this.map&&this.map.off(t,n),e.prototype.off.call(this,t,n)},n.prototype.addImage=function(){var t=this;this.image=new zn,this.image.on("imageLoaded",function(){t._engine.update()})},n.prototype._initEvent=function(){},n.prototype.getLayers=function(){return this._layers},n.prototype.getLayer=function(t){var e=!1;return this._layers.forEach(function(n){n.layerId!==t||(e=n)}),e},n.prototype._addLayer=function(){},n.prototype.getContainer=function(){return this._container},n.prototype.getMarkerContainer=function(){return this._markerContainier},n.prototype.map2Png=function(){this.scene._engine.update();var t=this.scene._engine._renderer.domElement.toDataURL(),e=this.scene.map.getContainer().getElementsByClassName("amap-layer")[0].toDataURL();return[e,t]},n.prototype._registEvents=function(){var t=this;this._eventHander=function(e){"CANVAS"===e.target.nodeName&&t._engine._picking.pickdata(e)},this._throttleHander=b(this._eventHander,30),Fi.forEach(function(e){t._container.addEventListener(e,t._eventHander,!0)}),this._container.addEventListener("mousemove",this._throttleHander,!0)},n.prototype._unRegistEvents=function(){var t=this;Fi.forEach(function(e){t._container.removeEventListener(e,t._eventHander,!0)}),this._container.removeEventListener("mousemove",this._throttleHander,!0)},n.prototype.removeLayer=function(t){var e=this._layers.indexOf(t);e>-1&&this._layers.splice(e,1),t.destroy(),t=null,this._engine.update()},n.prototype.startAnimate=function(){0===this.animateCount&&(this.unRegsterMapEvent(),this._engine.run()),this.animateCount++},n.prototype.stopAnimate=function(){1===this.animateCount&&(this._engine.stop(),this.registerMapEvent()),this.animateCount++},n.prototype.registerMapEvent=function(){var t=this;this._updateRender=function(){return t._engine.update()},this.map.on("mapmove",this._updateRender),this.map.on("camerachange",this._updateRender),this.map.on("resize",this._updateRender)},n.prototype.unRegsterMapEvent=function(){this.map.off("mapmove",this._updateRender),this.map.off("camerachange",this._updateRender),this.map.off("resize",this._updateRender)},n.prototype.addControl=function(t){return this.get("controlController").addControl(t),this},n.prototype.removeControl=function(t){this.get("controlController").removeControl(t)},n.prototype.render=function(){this._engine.update()},n.prototype.destroy=function(){this.get("controlController").clearControlPos(),e.prototype.destroy.call(this),this._layers.forEach(function(t){t.destroy()}),this._layers.length=0,this.image=null,this.fontAtlasManager=null,this.style.destroy(),this.style=null,this._engine.destroy(),this._engine=null,this.map.destroy(),this.unRegsterMapEvent(),this._unRegistEvents()},n}(t.Base),ki={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ni(t,e,n){var r=t.classList;for(var i in ki)r.remove("l7-"+n+"-anchor-"+i);r.add("l7-"+n+"-anchor-"+e)}var Bi=function(e){function n(n){e.call(this,Object.assign({},{closeButton:!0,closeOnClick:!0,maxWidth:"240px",anchor:"bottom"},n)),this.timeout=0,t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){var e=this;return this._scene=t,this._scene.on("camerachange",this._update),this._update(),this.get("closeOnClick")&&(this.timeout=setTimeout(function(){e._scene&&e._scene.on("click",e._onClickClose)},30)),this},n.prototype.setLnglat=function(t){return this.lngLat=t,this._scene&&this._scene.on("camerachange",this._update),this._update(t),this},n.prototype._update=function(){var t=this,e=this.lngLat;this._scene&&e&&this._content&&(this._container||(this._container=this.creatDom("div","l7-popup",this._scene.getMarkerContainer().parentNode),this._tip=this.creatDom("div","l7-popup-tip",this._container),this._container.appendChild(this._content),this.get("className")&&this.get("className").split(" ").forEach(function(e){return t._container.classList.add(e)}),this._container.addEventListener("mousedown",function(t){t.stopPropagation()})),this.get("maxWidth")&&this._container.style.maxWidth!==this.get("maxWidth")&&(this._container.style.maxWidth=this.get("maxWidth")),this._updatePosition(),Ti(this._container,""+ki[this.get("anchor")]),Ni(this._container,this.get("anchor"),"popup"))},n.prototype._updatePosition=function(){if(this._scene){var t=this._scene.lngLatToContainer(this.lngLat);this._container.style.left=t.x+"px",this._container.style.top=t.y+"px"}},n.prototype.setHTML=function(t){var e,n=window.document.createDocumentFragment(),r=window.document.createElement("body");r.innerHTML=t;while(1){if(e=r.firstChild,!e)break;n.appendChild(e)}return this.setDOMContent(n)},n.prototype.setText=function(t){return this.setDOMContent(window.document.createTextNode(t))},n.prototype.setMaxWidth=function(t){return this.set("maxWidth",t),this._update(),this},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&_i(this._content),this._content=yi("div","l7-popup-content",this._container),this.get("closeButton")&&(this._closeButton=yi("button","l7-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._onClickClose=function(){this.remove()},n.prototype.creatDom=function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r},n.prototype.removeDom=function(t){t.parentNode&&t.parentNode.removeChild(t)},n.prototype.remove=function(){return this._content&&this.removeDom(this._content),this._container&&(this.removeDom(this._container),delete this._container),this._scene&&(this._scene.off("camerachange",this._update),this._scene.off("click",this._onClickClose),delete this._scene),clearTimeout(this.timeout),this.emit("close"),this},n.prototype.isOpen=function(){return!!this._scene},n}(t.Base),zi=function(e){function n(n){e.call(this,Object.assign({},{element:"",anchor:"bottom",offset:[0,0],color:"#2f54eb",draggable:!1},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._init()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype._init=function(){var t=this,e=this.get("element");if(!e){this._defaultMarker=!0,e=yi("div"),this.set("element",e);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","48px"),n.setAttributeNS(null,"width","48px"),n.setAttributeNS(null,"viewBox","0 0 1024 1024");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),r.setAttributeNS(null,"fill",this.get("color")),n.appendChild(r),e.appendChild(n)}bi(e,"l7-marker"),e.addEventListener("click",function(e){t._onMapClick(e)}),Ni(e,this.get("anchor"),"marker"),this._popup=null},n.prototype.addTo=function(t){return this.remove(),this._scene=t,this._scene.getMarkerContainer().appendChild(this.get("element")),this._scene.on("camerachange",this._update),this.setDraggable(this.get("draggable")),this._update(),this},n.prototype.remove=function(){return this._scene&&(this._scene.off("click",this._onMapClick),this._scene.off("move",this._update),this._scene.off("moveend",this._update),this._scene.off("mousedown",this._addDragHandler),this._scene.off("touchstart",this._addDragHandler),this._scene.off("mouseup",this._onUp),this._scene.off("touchend",this._onUp),delete this._scene),_i(this.get("element")),this._popup&&this._popup.remove(),this},n.prototype.setLnglat=function(t){return this._lngLat=t,this._popup&&this._popup.setLnglat(this._lngLat),this},n.prototype.getLnglat=function(){return this._lngLat},n.prototype.getElement=function(){return this.get("element")},n.prototype.setPopup=function(t){return this._popup=t,this._lngLat&&this._popup.setLnglat(this._lngLat),this},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._scene),this):this},n.prototype.getPopup=function(){return this._popup},n.prototype.getOffset=function(){},n.prototype.setDraggable=function(){},n.prototype.isDraggable=function(){return this._draggable},n.prototype._update=function(){this._scene&&(this._updatePosition(),Ti(this.get("element"),""+ki[this.get("anchor")]))},n.prototype._onMapClick=function(){var t=this.get("element");this._popup&&t&&this.togglePopup()},n.prototype._updatePosition=function(){if(this._scene){var t=this._pos=this._scene.lngLatToContainer(this._lngLat);this.get("element").style.left=t.x+"px",this.get("element").style.top=t.y+"px"}},n.prototype._bubbleUp=function(){var t=this,e=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","rightclick","click","dblclick","wheel"],n=this.get("element");e.forEach(function(e){n.addEventListener(e,function(n){t._scene.emit(e,n)})})},n.prototype._addDragHandler=function(){},n.prototype._onUp=function(){},n}(t.Base),Ui=t.Global.version,Gi={version:Ui,Scene:Di,Source:t.Source,TileSource:Ae,registerParser:t.registerParser,registerTransform:t.registerTransform,registerLayer:p,registerInteraction:E,getInteraction:M,Popup:Bi,Marker:zi,Control:Ri};return Gi}),n})},cQSq:function(t,e,n){(function(e,n){t.exports=n()})("undefined"!==typeof self&&self,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=195)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(103);n.d(e,"geoArea",function(){return r["c"]});var i=n(197);n.d(e,"geoBounds",function(){return i["a"]});var o=n(198);n.d(e,"geoCentroid",function(){return o["a"]});var a=n(104);n.d(e,"geoCircle",function(){return a["b"]});var s=n(65);n.d(e,"geoClipExtent",function(){return s["b"]});var u=n(217);n.d(e,"geoContains",function(){return u["a"]});var c=n(122);n.d(e,"geoDistance",function(){return c["a"]});var l=n(218);n.d(e,"geoGraticule",function(){return l["a"]}),n.d(e,"geoGraticule10",function(){return l["b"]});var f=n(219);n.d(e,"geoInterpolate",function(){return f["a"]});var h=n(123);n.d(e,"geoLength",function(){return h["a"]});var p=n(220);n.d(e,"geoPath",function(){return p["a"]});var d=n(125);n.d(e,"geoAlbers",function(){return d["a"]});var v=n(230);n.d(e,"geoAlbersUsa",function(){return v["a"]});var g=n(231);n.d(e,"geoAzimuthalEqualArea",function(){return g["b"]}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return g["a"]});var m=n(232);n.d(e,"geoAzimuthalEquidistant",function(){return m["b"]}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return m["a"]});var y=n(233);n.d(e,"geoConicConformal",function(){return y["b"]}),n.d(e,"geoConicConformalRaw",function(){return y["a"]});var _=n(68);n.d(e,"geoConicEqualArea",function(){return _["b"]}),n.d(e,"geoConicEqualAreaRaw",function(){return _["a"]});var b=n(234);n.d(e,"geoConicEquidistant",function(){return b["b"]}),n.d(e,"geoConicEquidistantRaw",function(){return b["a"]});var x=n(127);n.d(e,"geoEquirectangular",function(){return x["a"]}),n.d(e,"geoEquirectangularRaw",function(){return x["b"]});var w=n(235);n.d(e,"geoGnomonic",function(){return w["a"]}),n.d(e,"geoGnomonicRaw",function(){return w["b"]});var M=n(236);n.d(e,"geoIdentity",function(){return M["a"]});var E=n(17);n.d(e,"geoProjection",function(){return E["a"]}),n.d(e,"geoProjectionMutator",function(){return E["b"]});var O=n(71);n.d(e,"geoMercator",function(){return O["a"]}),n.d(e,"geoMercatorRaw",function(){return O["c"]});var S=n(237);n.d(e,"geoOrthographic",function(){return S["a"]}),n.d(e,"geoOrthographicRaw",function(){return S["b"]});var T=n(238);n.d(e,"geoStereographic",function(){return T["a"]}),n.d(e,"geoStereographicRaw",function(){return T["b"]});var j=n(239);n.d(e,"geoTransverseMercator",function(){return j["a"]}),n.d(e,"geoTransverseMercatorRaw",function(){return j["b"]});var A=n(50);n.d(e,"geoRotation",function(){return A["a"]});var C=n(22);n.d(e,"geoStream",function(){return C["a"]});var L=n(51);n.d(e,"geoTransform",function(){return L["a"]})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"m",function(){return s}),n.d(e,"n",function(){return u}),n.d(e,"p",function(){return c}),n.d(e,"q",function(){return l}),n.d(e,"r",function(){return f}),n.d(e,"t",function(){return h}),n.d(e,"w",function(){return p}),n.d(e,"x",function(){return d}),n.d(e,"y",function(){return v}),n.d(e,"F",function(){return g}),n.d(e,"k",function(){return m}),n.d(e,"l",function(){return y}),n.d(e,"s",function(){return _}),n.d(e,"o",function(){return b}),n.d(e,"u",function(){return x}),n.d(e,"C",function(){return w}),n.d(e,"D",function(){return M}),n.d(e,"E",function(){return E}),n.d(e,"H",function(){return O}),n.d(e,"j",function(){return S}),n.d(e,"v",function(){return T}),e["z"]=j,e["e"]=A,e["b"]=C,e["B"]=L,e["G"]=P,e["A"]=I,e["i"]=R,e["d"]=F,e["c"]=D;var r=Math.abs,i=Math.atan,o=Math.atan2,a=(Math.ceil,Math.cos),s=Math.exp,u=Math.floor,c=Math.log,l=Math.max,f=Math.min,h=Math.pow,p=Math.round,d=Math.sign||function(t){return t>0?1:t<0?-1:0},v=Math.sin,g=Math.tan,m=1e-6,y=1e-12,_=Math.PI,b=_/2,x=_/4,w=Math.SQRT1_2,M=L(2),E=L(_),O=2*_,S=180/_,T=_/180;function j(t){return t?t/Math.sin(t):1}function A(t){return t>1?b:t<-1?-b:Math.asin(t)}function C(t){return t>1?0:t<-1?_:Math.acos(t)}function L(t){return t>0?Math.sqrt(t):0}function P(t){return t=s(2*t),(t-1)/(t+1)}function I(t){return(s(t)-s(-t))/2}function R(t){return(s(t)+s(-t))/2}function F(t){return c(t+L(t*t+1))}function D(t){return c(t+L(t*t-1))}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var o=n(3),a=n(77),s=n(76),u=n(356),c=n(139),l=n(39),f=n(84),h=function(t){function e(n){var r;void 0===n&&(n={state:{}}),r=t.call(this)||this;var a=i(i(r));return o(a,{_onChangeTimer:null,DataSet:e,isDataSet:!0,views:{}},n),r}r(e,t);var n=e.prototype;return n._getUniqueViewName=function(){var t=this,e=u("view_");while(t.views[e])e=u("view_");return e},n.createView=function(t,e){void 0===e&&(e={});var n=this;if(a(t)&&(t=n._getUniqueViewName()),s(t)&&(e=t,t=n._getUniqueViewName()),n.views[t])throw new Error("data view exists: "+t);var r=new l(n,e);return n.views[t]=r,r},n.getView=function(t){return this.views[t]},n.setView=function(t,e){this.views[t]=e},n.setState=function(t,e){var n=this;n.state[t]=e,n._onChangeTimer&&(clearTimeout(n._onChangeTimer),n._onChangeTimer=null),n._onChangeTimer=setTimeout(function(){n.emit("statechange",t,e)},16)},e}(c);o(h,{CONSTANTS:f,DataSet:h,DataView:l,View:l,connectors:{},transforms:{},registerConnector:function(t,e){h.connectors[t]=e},getConnector:function(t){return h.connectors[t]||h.connectors.default},registerTransform:function(t,e){h.transforms[t]=e},getTransform:function(t){return h.transforms[t]||h.transforms.default}},f),l.DataSet=h,o(h.prototype,{view:h.prototype.createView}),h.version="0.10.2",t.exports=h},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}var r=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t};t.exports=r},function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"j",function(){return i}),n.d(e,"o",function(){return o}),n.d(e,"l",function(){return a}),n.d(e,"q",function(){return s}),n.d(e,"w",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"r",function(){return l}),n.d(e,"a",function(){return f}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return p}),n.d(e,"g",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"k",function(){return g}),n.d(e,"n",function(){return m}),n.d(e,"p",function(){return y}),n.d(e,"t",function(){return _}),n.d(e,"s",function(){return b}),n.d(e,"u",function(){return x}),n.d(e,"v",function(){return w}),e["b"]=M,e["c"]=E,e["m"]=O;var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,c=180/o,l=o/180,f=Math.abs,h=Math.atan,p=Math.atan2,d=Math.cos,v=Math.ceil,g=Math.exp,m=(Math.floor,Math.log),y=Math.pow,_=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,w=Math.tan;function M(t){return t>1?0:t<-1?o:Math.acos(t)}function E(t){return t>1?a:t<-1?-a:Math.asin(t)}function O(t){return(t=_(t/2))*t}},function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"j",function(){return i}),n.d(e,"o",function(){return o}),n.d(e,"l",function(){return a}),n.d(e,"q",function(){return s}),n.d(e,"w",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"r",function(){return l}),n.d(e,"a",function(){return f}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return p}),n.d(e,"g",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"k",function(){return g}),n.d(e,"n",function(){return m}),n.d(e,"p",function(){return y}),n.d(e,"t",function(){return _}),n.d(e,"s",function(){return b}),n.d(e,"u",function(){return x}),n.d(e,"v",function(){return w}),e["b"]=M,e["c"]=E,e["m"]=O;var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,c=180/o,l=o/180,f=Math.abs,h=Math.atan,p=Math.atan2,d=Math.cos,v=Math.ceil,g=Math.exp,m=(Math.floor,Math.log),y=Math.pow,_=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,w=Math.tan;function M(t){return t>1?0:t<-1?o:Math.acos(t)}function E(t){return t>1?a:t<-1?-a:Math.asin(t)}function O(t){return(t=_(t/2))*t}},function(t,e,n){var r=n(41),i=Array.isArray?Array.isArray:function(t){return r(t,"Array")};t.exports=i},function(t,e,n){var r=n(6),i=n(10),o="Invalid field: it must be a string!",a="Invalid fields: it must be an array!";t.exports={getField:function(t,e){var n=t.field,a=t.fields;if(i(n))return n;if(r(n))return console.warn(o),n[0];if(console.warn(o+" will try to get fields instead."),i(a))return a;if(r(a)&&a.length)return a[0];if(e)return e;throw new TypeError(o)},getFields:function(t,e){var n=t.field,o=t.fields;if(r(o))return o;if(i(o))return console.warn(a),[o];if(console.warn(a+" will try to get field instead."),i(n))return console.warn(a),[n];if(r(n)&&n.length)return console.warn(a),n;if(e)return e;throw new TypeError(a)}}},function(t,e,n){var r;try{r=n(169)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){var r=n(76),i=n(6),o=function(t,e){if(t){var n=void 0;if(i(t)){for(var o=0,a=t.length;o<a;o++)if(n=e(t[o],o),!1===n)break}else if(r(t))for(var s in t)if(t.hasOwnProperty(s)&&(n=e(t[s],s),!1===n))break}};t.exports=o},function(t,e,n){var r=n(41),i=function(t){return r(t,"String")};t.exports=i},function(t,e,n){var r=n(41),i=function(t){return r(t,"Function")};t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(16).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function a(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function s(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function u(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)}function c(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)}function l(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}}function f(t){var e=r.map(r.range(v(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e}function h(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})}function p(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!==0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})}function d(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)}function v(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}function g(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function m(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}}function y(t,e){return e()}t.exports={addDummyNode:o,simplify:a,asNonCompoundGraph:s,successorWeights:u,predecessorWeights:c,intersectRect:l,buildLayerMatrix:f,normalizeRanks:h,removeEmptyRanks:p,addBorderNode:d,maxRank:v,partition:g,time:m,notime:y}},function(t,e,n){var r;try{r=n(169)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(109);n.d(e,"bisect",function(){return r["c"]}),n.d(e,"bisectRight",function(){return r["b"]}),n.d(e,"bisectLeft",function(){return r["a"]});var i=n(30);n.d(e,"ascending",function(){return i["a"]});var o=n(110);n.d(e,"bisector",function(){return o["a"]});var a=n(201);n.d(e,"cross",function(){return a["a"]});var s=n(202);n.d(e,"descending",function(){return s["a"]});var u=n(112);n.d(e,"deviation",function(){return u["a"]});var c=n(114);n.d(e,"extent",function(){return c["a"]});var l=n(203);n.d(e,"histogram",function(){return l["a"]});var f=n(206);n.d(e,"thresholdFreedmanDiaconis",function(){return f["a"]});var h=n(207);n.d(e,"thresholdScott",function(){return h["a"]});var p=n(118);n.d(e,"thresholdSturges",function(){return p["a"]});var d=n(208);n.d(e,"max",function(){return d["a"]});var v=n(209);n.d(e,"mean",function(){return v["a"]});var g=n(210);n.d(e,"median",function(){return g["a"]});var m=n(211);n.d(e,"merge",function(){return m["a"]});var y=n(119);n.d(e,"min",function(){return y["a"]});var _=n(111);n.d(e,"pairs",function(){return _["a"]});var b=n(212);n.d(e,"permute",function(){return b["a"]});var x=n(66);n.d(e,"quantile",function(){return x["a"]});var w=n(116);n.d(e,"range",function(){return w["a"]});var M=n(213);n.d(e,"scan",function(){return M["a"]});var E=n(214);n.d(e,"shuffle",function(){return E["a"]});var O=n(215);n.d(e,"sum",function(){return O["a"]});var S=n(117);n.d(e,"ticks",function(){return S["a"]}),n.d(e,"tickIncrement",function(){return S["b"]}),n.d(e,"tickStep",function(){return S["c"]});var T=n(120);n.d(e,"transpose",function(){return T["a"]});var j=n(113);n.d(e,"variance",function(){return j["a"]});var A=n(216);n.d(e,"zip",function(){return A["a"]})},function(t,e,n){var r=n(6),i=n(11),o=n(10),a=n(352),s=n(353);t.exports=function(t,e,n){void 0===n&&(n=[]);var u,c=t;n&&n.length&&(c=s(t,n)),i(e)?u=e:r(e)?u=function(t){return"_"+e.map(function(e){return t[e]}).join("-")}:o(e)&&(u=function(t){return"_"+t[e]});var l=a(c,u);return l}},function(t,e,n){var r;try{r=n(433)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){"use strict";e["a"]=d,e["b"]=v;var r=n(226),i=n(227),o=n(65),a=n(105),s=n(67),u=n(4),c=n(50),l=n(51),f=n(70),h=n(228),p=Object(l["b"])({point:function(t,e){this.stream.point(t*u["r"],e*u["r"])}});function d(t){return v(function(){return t})()}function v(t){var e,n,l,d,v,g,m,y,_,b,x=150,w=480,M=250,E=0,O=0,S=0,T=0,j=0,A=null,C=r["a"],L=null,P=s["a"],I=.5,R=Object(h["a"])(k,I);function F(t){return t=v(t[0]*u["r"],t[1]*u["r"]),[t[0]*x+n,l-t[1]*x]}function D(t){return t=v.invert((t[0]-n)/x,(l-t[1])/x),t&&[t[0]*u["h"],t[1]*u["h"]]}function k(t,r){return t=e(t,r),[t[0]*x+n,l-t[1]*x]}function N(){v=Object(a["a"])(d=Object(c["b"])(S,T,j),e);var t=e(E,O);return n=w-t[0]*x,l=M+t[1]*x,B()}function B(){return _=b=null,F}return F.stream=function(t){return _&&b===t?_:_=p(C(d,R(P(b=t))))},F.clipAngle=function(t){return arguments.length?(C=+t?Object(i["a"])(A=t*u["r"],6*u["r"]):(A=null,r["a"]),B()):A*u["h"]},F.clipExtent=function(t){return arguments.length?(P=null==t?(L=g=m=y=null,s["a"]):Object(o["a"])(L=+t[0][0],g=+t[0][1],m=+t[1][0],y=+t[1][1]),B()):null==L?null:[[L,g],[m,y]]},F.scale=function(t){return arguments.length?(x=+t,N()):x},F.translate=function(t){return arguments.length?(w=+t[0],M=+t[1],N()):[w,M]},F.center=function(t){return arguments.length?(E=t[0]%360*u["r"],O=t[1]%360*u["r"],N()):[E*u["h"],O*u["h"]]},F.rotate=function(t){return arguments.length?(S=t[0]%360*u["r"],T=t[1]%360*u["r"],j=t.length>2?t[2]%360*u["r"]:0,N()):[S*u["h"],T*u["h"],j*u["h"]]},F.precision=function(t){return arguments.length?(R=Object(h["a"])(k,I=t*t),B()):Object(u["u"])(I)},F.fitExtent=function(t,e){return Object(f["a"])(F,t,e)},F.fitSize=function(t,e){return Object(f["b"])(F,t,e)},function(){return e=t.apply(this,arguments),F.invert=e.invert&&D,N()}}},function(t,e,n){"use strict";e["a"]=d,e["b"]=v;var r=n(336),i=n(338),o=n(145),a=n(144),s=n(150),u=n(5),c=n(78),l=n(81),f=n(154),h=n(339),p=Object(l["b"])({point:function(t,e){this.stream.point(t*u["r"],e*u["r"])}});function d(t){return v(function(){return t})()}function v(t){var e,n,l,d,v,g,m,y,_,b,x=150,w=480,M=250,E=0,O=0,S=0,T=0,j=0,A=null,C=r["a"],L=null,P=s["a"],I=.5,R=Object(h["a"])(k,I);function F(t){return t=v(t[0]*u["r"],t[1]*u["r"]),[t[0]*x+n,l-t[1]*x]}function D(t){return t=v.invert((t[0]-n)/x,(l-t[1])/x),t&&[t[0]*u["h"],t[1]*u["h"]]}function k(t,r){return t=e(t,r),[t[0]*x+n,l-t[1]*x]}function N(){v=Object(a["a"])(d=Object(c["b"])(S,T,j),e);var t=e(E,O);return n=w-t[0]*x,l=M+t[1]*x,B()}function B(){return _=b=null,F}return F.stream=function(t){return _&&b===t?_:_=p(C(d,R(P(b=t))))},F.clipAngle=function(t){return arguments.length?(C=+t?Object(i["a"])(A=t*u["r"],6*u["r"]):(A=null,r["a"]),B()):A*u["h"]},F.clipExtent=function(t){return arguments.length?(P=null==t?(L=g=m=y=null,s["a"]):Object(o["a"])(L=+t[0][0],g=+t[0][1],m=+t[1][0],y=+t[1][1]),B()):null==L?null:[[L,g],[m,y]]},F.scale=function(t){return arguments.length?(x=+t,N()):x},F.translate=function(t){return arguments.length?(w=+t[0],M=+t[1],N()):[w,M]},F.center=function(t){return arguments.length?(E=t[0]%360*u["r"],O=t[1]%360*u["r"],N()):[E*u["h"],O*u["h"]]},F.rotate=function(t){return arguments.length?(S=t[0]%360*u["r"],T=t[1]%360*u["r"],j=t.length>2?t[2]%360*u["r"]:0,N()):[S*u["h"],T*u["h"],j*u["h"]]},F.precision=function(t){return arguments.length?(R=Object(h["a"])(k,I=t*t),B()):Object(u["u"])(I)},F.fitExtent=Object(f["a"])(F),F.fitSize=Object(f["b"])(F),function(){return e=t.apply(this,arguments),F.invert=e.invert&&D,N()}}},function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+r}function n(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function r(t,e){var r,i,o=n(t),a=0;if(2===e)for(i=0;i<t.length;i++)a+=(r=t[i]-o)*r;else for(i=0;i<t.length;i++)a+=Math.pow(t[i]-o,e);return a}function i(t){if(0===t.length)throw new Error("variance requires at least one data point");return r(t,2)/t.length}function o(t){if(1===t.length)return 0;var e=i(t);return Math.sqrt(e)}function a(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(r<i&&(r=i,n=e),i=1,e=t[o]):i++;return n}function s(t){return t.slice().sort(function(t,e){return t-e})}function u(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function c(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function l(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||1<e)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function f(t,e,n,r){for(n=n||0,r=r||t.length-1;n<r;){if(600<r-n){var i=r-n+1,o=e-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*s*(i-s)/i);o-i/2<0&&(u*=-1),f(t,e,Math.max(n,Math.floor(e-o*s/i+u)),Math.min(r,Math.floor(e+(i-o)*s/i+u)))}var c=t[e],l=n,p=r;for(h(t,n,e),t[r]>c&&h(t,n,r);l<p;){for(h(t,l,p),l++,p--;t[l]<c;)l++;for(;t[p]>c;)p--}t[n]===c?h(t,n,p):h(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function h(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(g(t.length,e[r]));n.push(t.length-1),n.sort(v);for(var i=[0,n.length-1];i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var s=Math.floor((a+o)/2);d(t,n[s],n[a],n[o]),i.push(a,s,s,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=l(n,e[i]);return r}return d(n,g(n.length,e),0,n.length-1),l(n,e)}function d(t,e,n,r){e%1==0?f(t,e,n,r):(f(t,e=Math.floor(e),n,r),f(t,e+1,e+1,r))}function v(t,e){return t-e}function g(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}function m(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var n=function(t,e){for(var n=0,r=0,i=t.length;r<i;)e<=t[n=r+i>>>1]?i=n:r=-~n;return r}(t,e);if(t[n]!==e)return n/t.length;n++;var r=function(t,e){for(var n=0,r=0,i=t.length;r<i;)e>=t[n=r+i>>>1]?r=-~n:i=n;return r}(t,e);if(r===n)return n/t.length;var i=r-n+1;return i*(r+n)/2/i/t.length}function y(t){var e=p(t,.75),n=p(t,.25);if("number"==typeof e&&"number"==typeof n)return e-n}function _(t){return+p(t,.5)}function b(t){for(var e=_(t),n=[],r=0;r<t.length;r++)n.push(Math.abs(t[r]-e));return _(n)}function x(t,e){e=e||Math.random;for(var n,r,i=t.length;0<i;)r=Math.floor(e()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}function w(t,e){return x(t.slice().slice(),e)}function M(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}function E(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],o=0;o<e;o++)i.push(0);n.push(i)}return n}function O(t,e,n,r){var i;if(0<t){var o=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*o*o}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function S(t,e,n,r,i,o,a){if(!(e<t)){var s=Math.floor((t+e)/2);r[n][s]=r[n-1][s-1],i[n][s]=s;var u=n;n<t&&(u=Math.max(u,i[n][t-1]||0)),u=Math.max(u,i[n-1][s]||0);var c,l,f,h=s-1;e<r.length-1&&(h=Math.min(h,i[n][e+1]||0));for(var p=h;u<=p&&!((c=O(p,s,o,a))+r[n-1][u-1]>=r[n][s]);--p)(l=O(u,s,o,a)+r[n-1][u-1])<r[n][s]&&(r[n][s]=l,i[n][s]=u),u++,(f=c+r[n-1][p-1])<r[n][s]&&(r[n][s]=f,i[n][s]=p);S(t,s-1,n,r,i,o,a),S(s+1,e,n,r,i,o,a)}}function T(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var r=n(t),i=n(e),o=0,a=0;a<t.length;a++)o+=(t[a]-r)*(e[a]-i);return o/(t.length-1)}function j(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return r(t,2)/(t.length-1)}function A(t){var e=j(t);return Math.sqrt(e)}function C(t,e,n,r){return(t*e+n*r)/(e+r)}function L(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return Math.sqrt(e/t.length)}function P(){this.totalCount=0,this.data={}}function I(){this.weights=[],this.bias=0}P.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},P.prototype.score=function(t){var e,n={};for(var r in t){var i=t[r];for(e in this.data)n[e]={},this.data[e][r]?n[e][r+"_"+i]=(this.data[e][r][i]||0)/this.totalCount:n[e][r+"_"+i]=0}var o={};for(e in n)for(var a in o[e]=0,n[e])o[e]+=n[e][a];return o},I.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return 0<(e+=this.bias)?1:0},I.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if(n!==e){for(var r=e-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*t[i];this.bias+=r}return this};var R=1e-4;function F(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,n=2;n<=t;n++)e*=n;return e}var D=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],k=Math.log(Math.sqrt(2*Math.PI)),N={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},B=Math.sqrt(2*Math.PI),z={gaussian:function(t){return Math.exp(-.5*t*t)/B}},U={nrd:function(t){var e=A(t),n=y(t);return"number"==typeof n&&(e=Math.min(e,n/1.34)),1.06*e*Math.pow(t.length,-.2)}};function G(t,e,n){var r,i;if(void 0===e)r=z.gaussian;else if("string"==typeof e){if(!z[e])throw new Error('Unknown kernel "'+e+'"');r=z[e]}else r=e;if(void 0===n)i=U.nrd(t);else if("string"==typeof n){if(!U[n])throw new Error('Unknown bandwidth method "'+n+'"');i=U[n](t)}else i=n;return function(e){var n=0,o=0;for(n=0;n<t.length;n++)o+=r((e-t[n])/i);return o/i/t.length}}var V=Math.sqrt(2*Math.PI);function H(t){for(var e=t,n=t,r=1;r<15;r++)e+=n*=t*t/(2*r+1);return Math.round(1e4*(.5+e/V*Math.exp(-t*t/2)))/1e4}for(var q=[],W=0;W<=3.09;W+=.01)q.push(H(W));function Y(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return 0<=t?1-n:n-1}function X(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return 0<=t?n:-n}function Z(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}t.linearRegression=function(t){var e,n,r=t.length;if(1===r)n=t[e=0][1];else{for(var i,o,a,s=0,u=0,c=0,l=0,f=0;f<r;f++)s+=o=(i=t[f])[0],u+=a=i[1],c+=o*o,l+=o*a;n=u/r-(e=(r*l-s*u)/(r*c-s*s))*s/r}return{m:e,b:n}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.standardDeviation=o,t.rSquared=function(t,e){if(t.length<2)return 1;for(var n,r=0,i=0;i<t.length;i++)r+=t[i][1];n=r/t.length;for(var o=0,a=0;a<t.length;a++)o+=Math.pow(n-t[a][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/o},t.mode=function(t){return a(s(t))},t.modeFast=function(t){for(var e,n=new Map,r=0,i=0;i<t.length;i++){var o=n.get(t[i]);void 0===o?o=1:o++,r<o&&(e=t[i],r=o),n.set(t[i],o)}if(0===r)throw new Error("mode requires at last one data point");return e},t.modeSorted=a,t.min=u,t.max=c,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],n=t[0],r=1;r<t.length;r++)t[r]>n&&(n=t[r]),t[r]<e&&(e=t[r]);return[e,n]},t.minSorted=function(t){return t[0]},t.maxSorted=function(t){return t[t.length-1]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.sum=e,t.sumSimple=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e},t.product=function(t){for(var e=1,n=0;n<t.length;n++)e*=t[n];return e},t.quantile=p,t.quantileSorted=l,t.quantileRank=function(t,e){return m(s(t),e)},t.quantileRankSorted=m,t.interquartileRange=y,t.iqr=y,t.medianAbsoluteDeviation=b,t.mad=b,t.chunk=function(t,e){var n=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},t.sampleWithReplacement=function(t,e,n){if(0===t.length)return[];n=n||Math.random;for(var r=t.length,i=[],o=0;o<e;o++){var a=Math.floor(n()*r);i.push(t[a])}return i},t.shuffle=w,t.shuffleInPlace=x,t.sample=function(t,e,n){return w(t,n).slice(0,e)},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=s(t);if(1===M(n))return[n];var r=E(e,n.length),i=E(e,n.length);!function(t,e,n){for(var r,i=e[0].length,o=t[Math.floor(i/2)],a=[],s=[],u=0;u<i;++u)r=t[u]-o,0===u?(a.push(r),s.push(r*r)):(a.push(a[u-1]+r),s.push(s[u-1]+r*r)),e[0][u]=O(0,u,a,s),n[0][u]=0;for(var c=1;c<e.length;++c)S(c<e.length-1?c:i-1,i-1,c,e,n,a,s)}(n,r,i);for(var o=[],a=i[0].length-1,u=i.length-1;0<=u;u--){var c=i[u][a];o[u]=n.slice(c,a+1),0<u&&(a=c-1)}return o},t.uniqueCountSorted=M,t.sumNthPowerDeviations=r,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var n=u(t),r=c(t),i=[n],o=(r-n)/e,a=1;a<e;a++)i.push(i[0]+o*a);return i.push(r),i},t.sampleCovariance=T,t.sampleCorrelation=function(t,e){return T(t,e)/A(t)/A(e)},t.sampleVariance=j,t.sampleStandardDeviation=A,t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,r=n(t),i=0,o=0,a=0;a<t.length;a++)i+=(e=t[a]-r)*e,o+=e*e*e;var s=t.length-1,u=Math.sqrt(i/s),c=t.length;return c*o/((c-1)*(c-2)*Math.pow(u,3))},t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var r,i=n(t),o=0,a=0,s=0;s<e;s++)o+=(r=t[s]-i)*r,a+=r*r*r*r;return(e-1)/((e-2)*(e-3))*(e*(e+1)*a/(o*o)-3*(e-1))},t.permutationsHeap=function(t){for(var e=new Array(t.length),n=[t.slice()],r=0;r<t.length;r++)e[r]=0;for(r=0;r<t.length;)if(e[r]<r){var i=0;r%2!=0&&(i=e[r]);var o=t[i];t[i]=t[r],t[r]=o,n.push(t.slice()),e[r]++,r=0}else e[r]=0,r++;return n},t.combinations=function t(e,n){var r,i,o,a,s=[];for(r=0;r<e.length;r++)if(1===n)s.push([e[r]]);else for(o=t(e.slice(r+1,e.length),n-1),i=0;i<o.length;i++)(a=o[i]).unshift(e[r]),s.push(a);return s},t.combinationsReplacement=function t(e,n){for(var r=[],i=0;i<e.length;i++)if(1===n)r.push([e[i]]);else for(var o=t(e.slice(i,e.length),n-1),a=0;a<o.length;a++)r.push([e[i]].concat(o[a]));return r},t.addToMean=function(t,e,n){return t+(n-t)/(e+1)},t.combineMeans=C,t.combineVariances=function(t,e,n,r,i,o){var a=C(e,n,i,o);return(n*(t+Math.pow(e-a,2))+o*(r+Math.pow(i-a,2)))/(n+o)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[n]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[n]}return t.length/e},t.average=n,t.mean=n,t.median=_,t.medianSorted=function(t){return l(t,.5)},t.subtractFromMean=function(t,e,n){return(t*e-n)/(e-1)},t.rootMeanSquare=L,t.rms=L,t.variance=i,t.tTest=function(t,e){return(n(t)-e)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,r){var i=t.length,o=e.length;if(!i||!o)return null;r||(r=0);var a=n(t),s=n(e),u=j(t),c=j(e);if("number"==typeof a&&"number"==typeof s&&"number"==typeof u&&"number"==typeof c){var l=((i-1)*u+(o-1)*c)/(i+o-2);return(a-s-r)/Math.sqrt(l*(1/i+1/o))}},t.BayesianClassifier=P,t.bayesian=P,t.PerceptronModel=I,t.perceptron=I,t.epsilon=R,t.factorial=F,t.gamma=function t(e){if("number"==typeof(n=e)&&isFinite(n)&&Math.floor(n)===n)return e<=0?NaN:F(e-1);var n;if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var r=e+.25;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(r,2)-1/12960/Math.pow(r,3)-257/207360/Math.pow(r,4)-52/2612736/Math.pow(r,5)+5741173/9405849600/Math.pow(r,6)+37529/18811699200/Math.pow(r,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=D[0],n=1;n<15;n++)e+=D[n]/(t+n);var r=5.2421875+t;return k+Math.log(e)-r+(t+.5)*Math.log(r)},t.bernoulliDistribution=function(t){if(t<0||1<t)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||1<e||t<=0||t%1!=0)){for(var n=0,r=0,i=[],o=1;i[n]=o*Math.pow(e,n)*Math.pow(1-e,t-n),r+=i[n],o=o*(t-++n+1)/n,r<1-R;);return i}},t.poissonDistribution=function(t){if(!(t<=0)){for(var e=0,n=0,r=[],i=1;r[e]=Math.exp(-t)*Math.pow(t,e)/i,n+=r[e],i*=++e,n<1-R;);return r}},t.chiSquaredDistributionTable=N,t.chiSquaredGoodnessOfFit=function(t,e,r){for(var i,o,a=0,s=e(n(t)),u=[],c=[],l=0;l<t.length;l++)void 0===u[t[l]]&&(u[t[l]]=0),u[t[l]]++;for(l=0;l<u.length;l++)void 0===u[l]&&(u[l]=0);for(o in s)o in u&&(c[+o]=s[o]*t.length);for(o=c.length-1;0<=o;o--)c[o]<3&&(c[o-1]+=c[o],c.pop(),u[o-1]+=u[o],u.pop());for(o=0;o<u.length;o++)a+=Math.pow(u[o]-c[o],2)/c[o];return i=u.length-1-1,N[i][r]<a},t.kernelDensityEstimation=G,t.kde=G,t.zScore=function(t,e,n){return(t-e)/n},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),n=Math.min(Math.round(100*e),q.length-1);return 0<=t?q[n]:+(1-q[n]).toFixed(4)},t.standardNormalTable=q,t.errorFunction=Y,t.erf=Y,t.inverseErrorFunction=X,t.probit=function(t){return 0===t?t=R:1<=t&&(t=1-R),Math.sqrt(2)*X(2*t-1)},t.permutationTest=function(t,e,r,i){if(void 0===i&&(i=1e4),void 0===r&&(r="two_side"),"two_side"!==r&&"greater"!==r&&"less"!==r)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=n(t)-n(e),a=new Array(i),s=t.concat(e),u=Math.floor(s.length/2),c=0;c<i;c++){x(s);var l=s.slice(0,u),f=s.slice(u,s.length),h=n(l)-n(f);a[c]=h}var p=0;if("two_side"===r)for(c=0;c<=i;c++)Math.abs(a[c])>=Math.abs(o)&&(p+=1);else if("greater"===r)for(c=0;c<=i;c++)a[c]>=o&&(p+=1);else for(c=0;c<=i;c++)a[c]<=o&&(p+=1);return p/i},t.bisect=function(t,e,n,r,i){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<r;o++){var a=(e+n)/2;if(0===t(a)||Math.abs((n-e)/2)<i)return a;Z(t(a))===Z(t(e))?e=a:n=a}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=Z,t.numericSort=s,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";function r(){}e["a"]=r},function(t,e,n){"use strict";e["c"]=o,e["b"]=a,n.d(e,"d",function(){return s});var r=n(0),i=n(1);function o(t,e){var n,r=t*Object(i["y"])(e),o=30;do{e-=n=(e+Object(i["y"])(e)-r)/(1+Object(i["h"])(e))}while(Object(i["a"])(n)>i["k"]&&--o>0);return e/2}function a(t,e,n){function r(r,a){return[t*r*Object(i["h"])(a=o(n,a)),e*Object(i["y"])(a)]}return r.invert=function(r,o){return o=Object(i["e"])(o/e),[r/(t*Object(i["h"])(o)),Object(i["e"])((2*o+Object(i["y"])(2*o))/n)]},r}var s=a(i["D"]/i["o"],i["D"],i["s"]);e["a"]=function(){return Object(r["geoProjection"])(s).scale(169.529)}},function(t,e,n){"use strict";function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,i=-1,o=n.length;while(++i<o)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)a(n[r],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)s(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,i=-1,o=n.length;while(++i<o)r(n[i],e)}};function a(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function s(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)a(t[n],e,1);e.polygonEnd()}e["a"]=function(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";var r=n(14),i=n(0),o=n(1);function a(t,e){return Object(o["a"])(t[0]-e[0])<o["k"]&&Object(o["a"])(t[1]-e[1])<o["k"]}function s(t,e){var n,r,i,o=-1,a=t.length,s=t[0],u=[];while(++o<a){n=t[o],r=(n[0]-s[0])/e,i=(n[1]-s[1])/e;for(var c=0;c<e;++c)u.push([s[0]+c*r,s[1]+c*i]);s=n}return u.push(n),u}function u(t){var e,n,i,a,u,c,l,f=[],h=t[0].length;for(l=0;l<h;++l)e=t[0][l],n=e[0][0],i=e[0][1],a=e[1][1],u=e[2][0],c=e[2][1],f.push(s([[n+o["k"],i+o["k"]],[n+o["k"],a-o["k"]],[u-o["k"],a-o["k"]],[u-o["k"],c+o["k"]]],30));for(l=t[1].length-1;l>=0;--l)e=t[1][l],n=e[0][0],i=e[0][1],a=e[1][1],u=e[2][0],c=e[2][1],f.push(s([[u-o["k"],c-o["k"]],[u-o["k"],a+o["k"]],[n+o["k"],a+o["k"]],[n+o["k"],i-o["k"]]],30));return{type:"Polygon",coordinates:[Object(r["merge"])(f)]}}e["a"]=function(t,e){var n=u(e);e=e.map(function(t){return t.map(function(t){return[[t[0][0]*o["v"],t[0][1]*o["v"]],[t[1][0]*o["v"],t[1][1]*o["v"]],[t[2][0]*o["v"],t[2][1]*o["v"]]]})});var r=e.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]})});function s(n,r){for(var i=r<0?-1:1,o=e[+(r<0)],a=0,s=o.length-1;a<s&&n>o[a][2][0];++a);var u=t(n-o[a][1][0],r);return u[0]+=t(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],u}t.invert&&(s.invert=function(n,i){for(var o=r[+(i<0)],u=e[+(i<0)],c=0,l=o.length;c<l;++c){var f=o[c];if(f[0][0]<=n&&n<f[1][0]&&f[0][1]<=i&&i<f[1][1]){var h=t.invert(n-t(u[c][1][0],0)[0],i);return h[0]+=u[c][1][0],a(s(h[0],h[1]),[n,i])?h:null}}});var c=Object(i["geoProjection"])(s),l=c.stream;return c.stream=function(t){var e=c.rotate(),r=l(t),o=(c.rotate([0,0]),l(t));return c.rotate(e),r.sphere=function(){Object(i["geoStream"])(n,o)},r},c}},function(t,e,n){var r=n(9),i=n(11),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(r)}),e};t.exports=o},function(t,e,n){"use strict";function r(){}e["a"]=r},function(t,e,n){"use strict";function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,i=-1,o=n.length;while(++i<o)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)a(n[r],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)s(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,i=-1,o=n.length;while(++i<o)r(n[i],e)}};function a(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function s(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)a(t[n],e,1);e.polygonEnd()}e["a"]=function(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";e["a"]=function(t){return function(){return t}}},function(t,e,n){var r=n(3);t.exports={assign:r}},function(t,e,n){"use strict";function r(){this.reset()}e["a"]=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){o(i,t,this.t),o(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function o(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}},function(t,e,n){"use strict";e["a"]=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";var r=n(0),i=n(1);e["a"]=function(t){var e=0,n=Object(r["geoProjectionMutator"])(t),o=n(e);return o.parallel=function(t){return arguments.length?n(e=t*i["v"]):e*i["j"]},o}},function(t,e,n){var r=n(9),i=n(54),o=Object.prototype.hasOwnProperty,a=function(t,e){if(null===t||!i(t))return{};var n={};return r(e,function(e){o.call(t,e)&&(n[e]=t[e])}),n};t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(349);n.d(e,"path",function(){return r["a"]})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(369);n.d(e,"cluster",function(){return r["a"]});var i=n(86);n.d(e,"hierarchy",function(){return i["c"]});var o=n(381);n.d(e,"pack",function(){return o["a"]});var a=n(160);n.d(e,"packSiblings",function(){return a["a"]});var s=n(161);n.d(e,"packEnclose",function(){return s["a"]});var u=n(383);n.d(e,"partition",function(){return u["a"]});var c=n(384);n.d(e,"stratify",function(){return c["a"]});var l=n(385);n.d(e,"tree",function(){return l["a"]});var f=n(386);n.d(e,"treemap",function(){return f["a"]});var h=n(387);n.d(e,"treemapBinary",function(){return h["a"]});var p=n(45);n.d(e,"treemapDice",function(){return p["a"]});var d=n(55);n.d(e,"treemapSlice",function(){return d["a"]});var v=n(388);n.d(e,"treemapSliceDice",function(){return v["a"]});var g=n(88);n.d(e,"treemapSquarify",function(){return g["a"]});var m=n(389);n.d(e,"treemapResquarify",function(){return m["a"]})},function(t,e,n){"use strict";e["g"]=i,e["a"]=o,e["d"]=a,e["c"]=s,e["b"]=u,e["f"]=c,e["e"]=l;var r=n(4);function i(t){return[Object(r["e"])(t[1],t[0]),Object(r["c"])(t[2])]}function o(t){var e=t[0],n=t[1],i=Object(r["g"])(n);return[i*Object(r["g"])(e),i*Object(r["t"])(e),Object(r["t"])(n)]}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function u(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function c(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function l(t){var e=Object(r["u"])(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}},function(t,e,n){"use strict";e["a"]=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";e["b"]=i,e["a"]=o;var r=n(4);function i(t){return function(e,n){var i=Object(r["g"])(e),o=Object(r["g"])(n),a=t(i*o);return[a*o*Object(r["t"])(e),a*Object(r["t"])(n)]}}function o(t){return function(e,n){var i=Object(r["u"])(e*e+n*n),o=t(i),a=Object(r["t"])(o),s=Object(r["g"])(o);return[Object(r["e"])(e*a,i*s),Object(r["c"])(i&&n*a/i)]}}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[t*Object(i["h"])(e),e]}o.invert=function(t,e){return[t/Object(i["h"])(e),e]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(152.63)}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var o=n(139),a=n(3),s=n(40),u=n(40),c=n(320),l=n(9),f=n(6),h=n(54),p=n(140),d=n(76),v=n(10),g=n(24),m=n(32);function y(t){var e={};return l(t,function(t,n){d(t)&&t.isView?e[n]=t:f(t)?e[n]=t.concat([]):h(t)?e[n]=s(t):e[n]=t}),e}var _=function(t){function e(e,n){var r;r=t.call(this)||this;var o=i(i(r));if(n=n||{},e=e||{},e.isDataSet||(n=e,e=null),a(o,{dataSet:e,loose:!e,dataType:"table",isView:!0,isDataView:!0,origin:[],rows:[],transforms:[],watchingStates:null},n),!o.loose){var s=o.watchingStates;e.on("statechange",function(t){f(s)?s.indexOf(t)>-1&&o._reExecute():o._reExecute()})}return r}r(e,t);var n=e.prototype;return n._parseStateExpression=function(t){var e=this.dataSet,n=/^\$state\.(\w+)/.exec(t);return n?e.state[n[1]]:t},n._preparseOptions=function(t){var e=this,n=y(t);return e.loose?n:(l(n,function(t,r){v(t)&&/^\$state\./.test(t)&&(n[r]=e._parseStateExpression(t))}),n)},n._prepareSource=function(t,n){var r=this,i=e.DataSet;if(r._source={source:t,options:n},n)n=r._preparseOptions(n),r.origin=i.getConnector(n.type)(t,n,r);else if(t instanceof e||v(t))r.origin=i.getConnector("default")(t,r.dataSet);else if(f(t))r.origin=t;else{if(!d(t)||!t.type)throw new TypeError("Invalid source");n=r._preparseOptions(t),r.origin=i.getConnector(n.type)(n,r)}return r.rows=u(r.origin),r},n.source=function(t,e){var n=this;return n._prepareSource(t,e),n._reExecuteTransforms(),n.trigger("change"),n},n.transform=function(t){void 0===t&&(t={});var e=this;return e.transforms.push(t),e._executeTransform(t),e},n._executeTransform=function(t){var n=this;t=n._preparseOptions(t);var r=e.DataSet.getTransform(t.type);r(n,t)},n._reExecuteTransforms=function(){var t=this;t.transforms.forEach(function(e){t._executeTransform(e)})},n.addRow=function(t){this.rows.push(t)},n.removeRow=function(t){this.rows.splice(t,1)},n.updateRow=function(t,e){a(this.rows[t],e)},n.findRows=function(t){return this.rows.filter(function(e){return p(e,t)})},n.findRow=function(t){return c(this.rows,t)},n.getColumnNames=function(){var t=this.rows[0];return t?g(t):[]},n.getColumnName=function(t){return this.getColumnNames()[t]},n.getColumnIndex=function(t){var e=this.getColumnNames();return e.indexOf(t)},n.getColumn=function(t){return this.rows.map(function(e){return e[t]})},n.getColumnData=function(t){return this.getColumn(t)},n.getSubset=function(t,e,n){for(var r=[],i=t;i<=e;i++)r.push(m(this.rows[i],n));return r},n.toString=function(t){var e=this;return t?JSON.stringify(e.rows,null,2):JSON.stringify(e.rows)},n._reExecute=function(){var t=this,e=t._source,n=e.source,r=e.options;t._prepareSource(n,r),t._reExecuteTransforms(),t.trigger("change")},e}(o);t.exports=_},function(t,e,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(6),o=function t(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||null===e)return e;var n=void 0;if(i(e)){n=[];for(var o=0,a=e.length;o<a;o++)"object"===r(e[o])&&null!=e[o]?n[o]=t(e[o]):n[o]=e[o]}else for(var s in n={},e)"object"===r(e[s])&&null!=e[s]?n[s]=t(e[s]):n[s]=e[s];return n};t.exports=o},function(t,e){var n={}.toString,r=function(t,e){return n.call(t)==="[object "+e+"]"};t.exports=r},function(t,e,n){"use strict";function r(){this.reset()}e["a"]=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){o(i,t,this.t),o(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function o(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}},function(t,e,n){"use strict";e["g"]=i,e["a"]=o,e["d"]=a,e["c"]=s,e["b"]=u,e["f"]=c,e["e"]=l;var r=n(5);function i(t){return[Object(r["e"])(t[1],t[0]),Object(r["c"])(t[2])]}function o(t){var e=t[0],n=t[1],i=Object(r["g"])(n);return[i*Object(r["g"])(e),i*Object(r["t"])(e),Object(r["t"])(n)]}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function u(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function c(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function l(t){var e=Object(r["u"])(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}},function(t,e,n){"use strict";e["b"]=i,e["a"]=o;var r=n(5);function i(t){return function(e,n){var i=Object(r["g"])(e),o=Object(r["g"])(n),a=t(i*o);return[a*o*Object(r["t"])(e),a*Object(r["t"])(n)]}}function o(t){return function(e,n){var i=Object(r["u"])(e*e+n*n),o=t(i),a=Object(r["t"])(o),s=Object(r["g"])(o);return[Object(r["e"])(e*a,i*s),Object(r["c"])(i&&n*a/i)]}}},function(t,e,n){"use strict";e["a"]=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;while(++s<u)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return s}),n.d(e,"k",function(){return u}),n.d(e,"l",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"g",function(){return h}),n.d(e,"m",function(){return p}),e["b"]=d,e["c"]=v;var r=Math.abs,i=Math.atan2,o=Math.cos,a=Math.max,s=Math.min,u=Math.sin,c=Math.sqrt,l=1e-12,f=Math.PI,h=f/2,p=2*f;function d(t){return t>1?0:t<-1?f:Math.acos(t)}function v(t){return t>=1?h:t<=-1?-h:Math.asin(t)}},function(t,e,n){"use strict";e["a"]=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}},function(t,e,n){"use strict";e["a"]=function(t){var e=t.length,n=new Array(e);while(--e>=0)n[e]=e;return n}},function(t,e,n){"use strict";n.d(e,"f",function(){return h}),n.d(e,"g",function(){return p}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return a}),e["d"]=g;var r,i,o,a,s=n(513),u=n(191),c=n(192),l=n(100),f=n(99),h=1e-6,p=1e-12;function d(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function v(t,e){return e[1]-t[1]||e[0]-t[0]}function g(t,e){var n,h,p,d=t.sort(v).pop();a=[],i=new Array(t.length),r=new f["b"],o=new f["b"];while(1)if(p=c["c"],d&&(!p||d[1]<p.y||d[1]===p.y&&d[0]<p.x))d[0]===n&&d[1]===h||(Object(s["a"])(d),n=d[0],h=d[1]),d=t.pop();else{if(!p)break;Object(s["b"])(p.arc)}if(Object(u["d"])(),e){var g=+e[0][0],m=+e[0][1],y=+e[1][0],_=+e[1][1];Object(l["a"])(g,m,y,_),Object(u["b"])(g,m,y,_)}this.edges=a,this.cells=i,r=o=a=i=null}g.prototype={constructor:g,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Object(u["a"])(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length){var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;while(++u<o)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&d(s,a,l)<0&&t.push([s.data,a.data,l.data])}}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){var r,i,o=this,a=o._found||0,s=o.cells.length;while(!(i=o.cells[a]))if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<l&&(l=f,a=s.index)}})}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}}},function(t,e,n){"use strict";e["b"]=a;var r=n(105),i=n(4);function o(t,e){return[t>i["o"]?t-i["w"]:t<-i["o"]?t+i["w"]:t,e]}function a(t,e,n){return(t%=i["w"])?e||n?Object(r["a"])(u(t),c(e,n)):u(t):e||n?c(e,n):o}function s(t){return function(e,n){return e+=t,[e>i["o"]?e-i["w"]:e<-i["o"]?e+i["w"]:e,n]}}function u(t){var e=s(t);return e.invert=s(-t),e}function c(t,e){var n=Object(i["g"])(t),r=Object(i["t"])(t),o=Object(i["g"])(e),a=Object(i["t"])(e);function s(t,e){var s=Object(i["g"])(e),u=Object(i["g"])(t)*s,c=Object(i["t"])(t)*s,l=Object(i["t"])(e),f=l*n+u*r;return[Object(i["e"])(c*o-f*a,u*n-l*r),Object(i["c"])(f*o+c*a)]}return s.invert=function(t,e){var s=Object(i["g"])(e),u=Object(i["g"])(t)*s,c=Object(i["t"])(t)*s,l=Object(i["t"])(e),f=l*o-c*a;return[Object(i["e"])(c*o+l*a,u*n+f*r),Object(i["c"])(f*n-u*r)]},s}o.invert=o,e["a"]=function(t){function e(e){return e=t(e[0]*i["r"],e[1]*i["r"]),e[0]*=i["h"],e[1]*=i["h"],e}return t=a(t[0]*i["r"],t[1]*i["r"],t.length>2?t[2]*i["r"]:0),e.invert=function(e){return e=t.invert(e[0]*i["r"],e[1]*i["r"]),e[0]*=i["h"],e[1]*=i["h"],e},e}},function(t,e,n){"use strict";function r(t){return function(e){var n=new i;for(var r in t)n[r]=t[r];return n.stream=e,n}}function i(){}e["b"]=r,e["a"]=function(t){return{stream:r(t)}},i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";var r=n(1);e["a"]=function(t,e,n,i,o,a,s,u){function c(c,l){if(!l)return[t*c/r["s"],0];var f=l*l,h=t+f*(e+f*(n+f*i)),p=l*(o-1+f*(a-u+f*s)),d=(h*h+p*p)/(2*p),v=c*Object(r["e"])(h/d)/r["s"];return[d*Object(r["y"])(v),l*(1+f*u)+d*(1-Object(r["h"])(v))]}return arguments.length<8&&(u=0),c.invert=function(c,l){var f,h,p=r["s"]*c/t,d=l,v=50;do{var g=d*d,m=t+g*(e+g*(n+g*i)),y=d*(o-1+g*(a-u+g*s)),_=m*m+y*y,b=2*y,x=_/b,w=x*x,M=Object(r["e"])(m/x)/r["s"],E=p*M,O=m*m,S=(2*e+g*(4*n+6*g*i))*d,T=o+g*(3*a+5*g*s),j=2*(m*S+y*(T-1)),A=2*(T-1),C=(j*b-_*A)/(b*b),L=Object(r["h"])(E),P=Object(r["y"])(E),I=x*L,R=x*P,F=p/r["s"]*(1/Object(r["B"])(1-O/w))*(S*x-m*C)/w,D=R-c,k=d*(1+g*u)+x-I-l,N=C*P+I*F,B=I*M,z=1+C-(C*L-R*F),U=R*M,G=N*U-z*B;if(!G)break;p-=f=(k*N-D*z)/G,d-=h=(D*U-k*B)/G}while((Object(r["a"])(f)>r["k"]||Object(r["a"])(h)>r["k"])&&--v>0);return[p,d]},c}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(294);function a(t,e,n){var o,s,u=e.edges,c=u.length,l={type:"MultiPoint",coordinates:e.face},f=e.face.filter(function(t){return 90!==Object(i["a"])(t[1])}),h=Object(r["geoBounds"])({type:"MultiPoint",coordinates:f}),p=!1,d=-1,v=h[1][0]-h[0][0],g=180===v||360===v?[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]:Object(r["geoCentroid"])(l);if(n)while(++d<c)if(u[d]===n)break;++d;for(var m=0;m<c;++m)s=u[(m+d)%c],Array.isArray(s)?(p||(t.point((o=Object(r["geoInterpolate"])(s[0],g)(i["k"]))[0],o[1]),p=!0),t.point((o=Object(r["geoInterpolate"])(s[1],g)(i["k"]))[0],o[1])):(p=!1,s!==n&&a(t,s,e))}function s(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function u(t,e){for(var n,r,i=t.length,o=null,a=0;a<i;++a){n=t[a];for(var s=e.length;--s>=0;)if(r=e[s],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}function c(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}function l(t){return t.project.invert||t.children&&t.children.some(l)}e["a"]=function(t,e,n){function f(t,e){if(t.edges=c(t.face),e.face){var n=t.shared=u(t.face,e.face),r=Object(o["a"])(n.map(e.project),n.map(t.project));t.transform=e.transform?Object(o["c"])(e.transform,r):r;for(var i=e.edges,a=0,l=i.length;a<l;++a)s(n[0],i[a][1])&&s(n[1],i[a][0])&&(i[a]=t),s(n[0],i[a][0])&&s(n[1],i[a][1])&&(i[a]=t);for(i=t.edges,a=0,l=i.length;a<l;++a)s(n[0],i[a][0])&&s(n[1],i[a][1])&&(i[a]=e),s(n[0],i[a][1])&&s(n[1],i[a][0])&&(i[a]=e)}else t.transform=e.transform;return t.children&&t.children.forEach(function(e){f(e,t)}),t}function h(t,n){var r,o=e(t,n),a=o.project([t*i["j"],n*i["j"]]);return(r=o.transform)?[r[0]*a[0]+r[1]*a[1]+r[2],-(r[3]*a[0]+r[4]*a[1]+r[5])]:(a[1]=-a[1],a)}function p(t,e){var n=t.project.invert,r=t.transform,i=e;if(r&&(r=Object(o["b"])(r),i=[r[0]*i[0]+r[1]*i[1]+r[2],r[3]*i[0]+r[4]*i[1]+r[5]]),n&&t===d(a=n(i)))return a;for(var a,s=t.children,u=0,c=s&&s.length;u<c;++u)if(a=p(s[u],e))return a}function d(t){return e(t[0]*i["v"],t[1]*i["v"])}n=null==n?-i["s"]/6:n,f(t,{transform:[Object(i["h"])(n),Object(i["y"])(n),0,-Object(i["y"])(n),Object(i["h"])(n),0]}),l(t)&&(h.invert=function(e,n){var r=p(t,[e,-n]);return r&&(r[0]*=i["v"],r[1]*=i["v"],r)});var v=Object(r["geoProjection"])(h),g=v.stream;return v.stream=function(e){var n=v.rotate(),r=g(e),i=(v.rotate([0,0]),g(e));return v.rotate(n),r.sphere=function(){i.polygonStart(),i.lineStart(),a(i,t),i.lineEnd(),i.polygonEnd()},r},v}},function(t,e,n){var r=n(321),i=n(41),o=function(t){if(!r(t)||!i(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};t.exports=o},function(t,e,n){"use strict";e["a"]=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;while(++s<u)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}},function(t,e,n){var r=n(41),i=function(t){return r(t,"Number")};t.exports=i},function(t,e){t.exports=function(t,e){var n=e||1,r=t[0],i=t[1],o=[],a=r;while(a<i)o.push(a),a+=n;return o.push(i),o}},function(t,e,n){var r=n(19),i=r.standardDeviation,o=r.interquartileRange;t.exports={silverman:function(t){var e=i(t),n=4*Math.pow(e,5),r=3*t.length;return Math.pow(n/r,.2)},nrd:function(t){var e=i(t),n=o(t);return"number"===typeof n&&(e=Math.min(e,n/1.34)),1.06*e*Math.pow(t.length,-.2)}}},function(t,e,n){"use strict";var r=n(8);function i(t){var e={};function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var a=r.minBy(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0),o.rank=a}r.forEach(t.sources(),n)}function o(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}t.exports={longestPath:i,slack:o}},function(t,e,n){"use strict";function r(t){this._context=t}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}},e["a"]=function(t){return new r(t)}},function(t,e,n){"use strict";e["a"]=function(){}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function i(t){this._context=t}e["b"]=r,e["a"]=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function i(t,e){this._context=t,this._k=(1-e)/6}e["b"]=r,e["a"]=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:r(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n})(0)},function(t,e,n){var r=n(193),i=function(){function t(t,e){void 0===e&&(e={});var n=this;n.options=e,n.rootNode=r(t,e)}var e=t.prototype;return e.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){"use strict";e["a"]=l;var r=n(4),i=n(106),o=n(200),a=n(107),s=n(14),u=1e9,c=-u;function l(t,e,n,l){function f(r,i){return t<=r&&r<=n&&e<=i&&i<=l}function h(r,i,o,a){var s=0,u=0;if(null==r||(s=p(r,o))!==(u=p(i,o))||v(r,i)<0^o>0)do{a.point(0===s||3===s?t:n,s>1?l:e)}while((s=(s+o+4)%4)!==u);else a.point(i[0],i[1])}function p(i,o){return Object(r["a"])(i[0]-t)<r["i"]?o>0?0:3:Object(r["a"])(i[0]-n)<r["i"]?o>0?2:1:Object(r["a"])(i[1]-e)<r["i"]?o>0?1:0:o>0?3:2}function d(t,e){return v(t.x,e.x)}function v(t,e){var n=p(t,1),r=p(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var p,v,g,m,y,_,b,x,w,M,E,O=r,S=Object(i["a"])(),T={point:j,lineStart:P,lineEnd:I,polygonStart:C,polygonEnd:L};function j(t,e){f(t,e)&&O.point(t,e)}function A(){for(var e=0,n=0,r=v.length;n<r;++n)for(var i,o,a=v[n],s=1,u=a.length,c=a[0],f=c[0],h=c[1];s<u;++s)i=f,o=h,c=a[s],f=c[0],h=c[1],o<=l?h>l&&(f-i)*(l-o)>(h-o)*(t-i)&&++e:h<=l&&(f-i)*(l-o)<(h-o)*(t-i)&&--e;return e}function C(){O=S,p=[],v=[],E=!0}function L(){var t=A(),e=E&&t,n=(p=Object(s["merge"])(p)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),h(null,null,1,r),r.lineEnd()),n&&Object(a["a"])(p,d,t,h,r),r.polygonEnd()),O=r,p=v=g=null}function P(){T.point=R,v&&v.push(g=[]),M=!0,w=!1,b=x=NaN}function I(){p&&(R(m,y),_&&w&&S.rejoin(),p.push(S.result())),T.point=j,w&&O.lineEnd()}function R(r,i){var a=f(r,i);if(v&&g.push([r,i]),M)m=r,y=i,_=a,M=!1,a&&(O.lineStart(),O.point(r,i));else if(a&&w)O.point(r,i);else{var s=[b=Math.max(c,Math.min(u,b)),x=Math.max(c,Math.min(u,x))],h=[r=Math.max(c,Math.min(u,r)),i=Math.max(c,Math.min(u,i))];Object(o["a"])(s,h,t,e,n,l)?(w||(O.lineStart(),O.point(s[0],s[1])),O.point(h[0],h[1]),a||O.lineEnd(),E=!1):a&&(O.lineStart(),O.point(r,i),E=!1)}b=r,x=i,w=a}return T}}e["b"]=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=l(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}},function(t,e,n){"use strict";var r=n(36);e["a"]=function(t,e,n){if(null==n&&(n=r["a"]),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,a=Math.floor(o),s=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return s+(u-s)*(o-a)}}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";e["a"]=a;var r=n(4),i=n(69),o=n(229);function a(t,e){var n=Object(r["t"])(t),i=(n+Object(r["t"])(e))/2;if(Object(r["a"])(i)<r["i"])return Object(o["a"])(t);var a=1+n*(2*i-n),s=Object(r["u"])(a)/i;function u(t,e){var n=Object(r["u"])(a-2*i*Object(r["t"])(e))/i;return[n*Object(r["t"])(t*=i),s-n*Object(r["g"])(t)]}return u.invert=function(t,e){var n=s-e;return[Object(r["e"])(t,Object(r["a"])(n))/i*Object(r["s"])(n),Object(r["c"])((a-(t*t+n*n)*i*i)/(2*i))]},u}e["b"]=function(){return Object(i["a"])(a).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";e["a"]=o;var r=n(4),i=n(17);function o(t){var e=0,n=r["o"]/3,o=Object(i["b"])(t),a=o(e,n);return a.parallels=function(t){return arguments.length?o(e=t[0]*r["r"],n=t[1]*r["r"]):[e*r["h"],n*r["h"]]},a}},function(t,e,n){"use strict";e["a"]=o,e["b"]=a;var r=n(22),i=n(124);function o(t,e,n){var o=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),Object(r["a"])(n,t.stream(i["a"]));var u=i["a"].result(),c=Math.min(o/(u[1][0]-u[0][0]),a/(u[1][1]-u[0][1])),l=+e[0][0]+(o-c*(u[1][0]+u[0][0]))/2,f=+e[0][1]+(a-c*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*c).translate([l,f])}function a(t,e,n){return o(t,[[0,0],e],n)}},function(t,e,n){"use strict";e["c"]=a,e["b"]=s;var r=n(4),i=n(50),o=n(17);function a(t,e){return[t,Object(r["n"])(Object(r["v"])((r["l"]+e)/2))]}function s(t){var e,n,s,u=Object(o["a"])(t),c=u.center,l=u.scale,f=u.translate,h=u.clipExtent,p=null;function d(){var o=r["o"]*l(),c=u(Object(i["a"])(u.rotate()).invert([0,0]));return h(null==p?[[c[0]-o,c[1]-o],[c[0]+o,c[1]+o]]:t===a?[[Math.max(c[0]-o,p),e],[Math.min(c[0]+o,n),s]]:[[p,Math.max(c[1]-o,e)],[n,Math.min(c[1]+o,s)]])}return u.scale=function(t){return arguments.length?(l(t),d()):l()},u.translate=function(t){return arguments.length?(f(t),d()):f()},u.center=function(t){return arguments.length?(c(t),d()):c()},u.clipExtent=function(t){return arguments.length?(null==t?p=e=n=s=null:(p=+t[0][0],e=+t[0][1],n=+t[1][0],s=+t[1][1]),d()):null==p?null:[[p,e],[n,s]]},d()}a.invert=function(t,e){return[t,2*Object(r["d"])(Object(r["k"])(e))-r["l"]]},e["a"]=function(){return s(a).scale(961/r["w"])}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["B"])(1-Object(i["y"])(e));return[2/i["E"]*t*n,i["E"]*(1-n)]}o.invert=function(t,e){var n=(n=e/i["E"]-1)*n;return[n>0?t*Object(i["B"])(i["s"]/n)/2:0,Object(i["e"])(1-n)]},e["b"]=function(){return Object(r["geoProjection"])(o).scale(95.6464).center([0,30])}},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s}),e["c"]=u;var r=n(0),i=n(21),o=n(38),a=.7109889596207567,s=.0528035274542;function u(t,e){return e>-a?(t=Object(i["d"])(t,e),t[1]+=s,t):Object(o["b"])(t,e)}u.invert=function(t,e){return e>-a?i["d"].invert(t,e-s):o["b"].invert(t,e)},e["a"]=function(){return Object(r["geoProjection"])(u).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}},function(t,e,n){"use strict";var r=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];e["a"]=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return r[t]})})},function(t,e,n){"use strict";var r=n(0),i=n(1);e["a"]=function(t){var e=t(i["o"],0)[0]-t(-i["o"],0)[0];function n(n,r){var o=Object(i["a"])(n)<i["o"],a=t(o?n:n>0?n-i["s"]:n+i["s"],r),s=(a[0]-a[1])*i["C"],u=(a[0]+a[1])*i["C"];if(o)return[s,u];var c=e*i["C"],l=s>0^u>0?-1:1;return[l*s-Object(i["x"])(u)*c,l*u-Object(i["x"])(s)*c]}return t.invert&&(n.invert=function(n,r){var o=(n+r)*i["C"],a=(r-n)*i["C"],s=Object(i["a"])(o)<.5*e&&Object(i["a"])(a)<.5*e;if(!s){var u=e*i["C"],c=o>0^a>0?-1:1,l=-c*n+(a>0?1:-1)*u,f=-c*r+(o>0?1:-1)*u;o=(-l-f)*i["C"],a=(l-f)*i["C"]}var h=t.invert(o,a);return s||(h[0]+=o>0?i["s"]:-i["s"]),h}),Object(r["geoProjection"])(n).rotate([-90,-90,45]).clipAngle(179.999)}},function(t,e){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t){var e="undefined"===typeof t?"undefined":n(t);return null!==t&&"object"===e||"function"===e};t.exports=r},function(t,e){var n=function(t){return null===t||void 0===t};t.exports=n},function(t,e,n){"use strict";e["b"]=a;var r=n(144),i=n(5);function o(t,e){return[t>i["o"]?t-i["w"]:t<-i["o"]?t+i["w"]:t,e]}function a(t,e,n){return(t%=i["w"])?e||n?Object(r["a"])(u(t),c(e,n)):u(t):e||n?c(e,n):o}function s(t){return function(e,n){return e+=t,[e>i["o"]?e-i["w"]:e<-i["o"]?e+i["w"]:e,n]}}function u(t){var e=s(t);return e.invert=s(-t),e}function c(t,e){var n=Object(i["g"])(t),r=Object(i["t"])(t),o=Object(i["g"])(e),a=Object(i["t"])(e);function s(t,e){var s=Object(i["g"])(e),u=Object(i["g"])(t)*s,c=Object(i["t"])(t)*s,l=Object(i["t"])(e),f=l*n+u*r;return[Object(i["e"])(c*o-f*a,u*n-l*r),Object(i["c"])(f*o+c*a)]}return s.invert=function(t,e){var s=Object(i["g"])(e),u=Object(i["g"])(t)*s,c=Object(i["t"])(t)*s,l=Object(i["t"])(e),f=l*o-c*a;return[Object(i["e"])(c*o+l*a,u*n+f*r),Object(i["c"])(f*n-u*r)]},s}o.invert=o,e["a"]=function(t){function e(e){return e=t(e[0]*i["r"],e[1]*i["r"]),e[0]*=i["h"],e[1]*=i["h"],e}return t=a(t[0]*i["r"],t[1]*i["r"],t.length>2?t[2]*i["r"]:0),e.invert=function(e){return e=t.invert(e[0]*i["r"],e[1]*i["r"]),e[0]*=i["h"],e[1]*=i["h"],e},e}},function(t,e,n){"use strict";e["a"]=o;var r=n(5),i=n(80);function o(t,e){var n=Object(r["t"])(t),i=(n+Object(r["t"])(e))/2,o=1+n*(2*i-n),a=Object(r["u"])(o)/i;function s(t,e){var n=Object(r["u"])(o-2*i*Object(r["t"])(e))/i;return[n*Object(r["t"])(t*=i),a-n*Object(r["g"])(t)]}return s.invert=function(t,e){var n=a-e;return[Object(r["e"])(t,n)/i,Object(r["c"])((o-(t*t+n*n)*i*i)/(2*i))]},s}e["b"]=function(){return Object(i["a"])(o).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";e["a"]=o;var r=n(5),i=n(18);function o(t){var e=0,n=r["o"]/3,o=Object(i["b"])(t),a=o(e,n);return a.parallels=function(t){return arguments.length?o(e=t[0]*r["r"],n=t[1]*r["r"]):[e*r["h"],n*r["h"]]},a}},function(t,e,n){"use strict";function r(t){function e(){}var n=e.prototype=Object.create(i.prototype);for(var r in t)n[r]=t[r];return function(t){var n=new e;return n.stream=t,n}}function i(){}e["b"]=r,e["a"]=function(t){return{stream:r(t)}},i.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";e["c"]=o,e["b"]=a;var r=n(18),i=n(5);function o(t,e){return[t,Object(i["n"])(Object(i["v"])((i["l"]+e)/2))]}function a(t){var e,n=Object(r["a"])(t),o=n.scale,a=n.translate,s=n.clipExtent;return n.scale=function(t){return arguments.length?(o(t),e&&n.clipExtent(null),n):o()},n.translate=function(t){return arguments.length?(a(t),e&&n.clipExtent(null),n):a()},n.clipExtent=function(t){if(!arguments.length)return e?null:s();if(e=null==t){var r=i["o"]*o(),u=a();t=[[u[0]-r,u[1]-r],[u[0]+r,u[1]+r]]}return s(t),n},n.clipExtent(null)}o.invert=function(t,e){return[t,2*Object(i["d"])(Object(i["k"])(e))-i["l"]]},e["a"]=function(){return a(o).scale(961/i["w"])}},function(t,e,n){var r=n(9),i=n(11),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(n)}),e};t.exports=o},function(t,e){t.exports={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},function(t,e,n){"use strict";var r={},i={},o=34,a=10,s=13;function u(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function c(t,e){var n=u(t);return function(r,i){return e(n(r),i,t)}}function l(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}e["a"]=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function f(t,e){var n,r,i=h(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?c(t,e):u(t)});return i.columns=r||[],i}function h(t,e){var u,c=[],l=t.length,f=0,h=0,p=l<=0,d=!1;function v(){if(p)return i;if(d)return d=!1,r;var e,u,c=f;if(t.charCodeAt(c)===o){while(f++<l&&t.charCodeAt(f)!==o||t.charCodeAt(++f)===o);return(e=f)>=l?p=!0:(u=t.charCodeAt(f++))===a?d=!0:u===s&&(d=!0,t.charCodeAt(f)===a&&++f),t.slice(c+1,e-1).replace(/""/g,'"')}while(f<l){if((u=t.charCodeAt(e=f++))===a)d=!0;else if(u===s)d=!0,t.charCodeAt(f)===a&&++f;else if(u!==n)continue;return t.slice(c,e)}return p=!0,t.slice(c,l)}t.charCodeAt(l-1)===a&&--l,t.charCodeAt(l-1)===s&&--l;while((u=v())!==i){var g=[];while(u!==r&&u!==i)g.push(u),u=v();e&&null==(g=e(g,h++))||c.push(g)}return c}function p(e,n){return null==n&&(n=l(e)),[n.map(g).join(t)].concat(e.map(function(e){return n.map(function(t){return g(e[t])}).join(t)})).join("\n")}function d(t){return t.map(v).join("\n")}function v(e){return e.map(g).join(t)}function g(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:f,parseRows:h,format:p,formatRows:d}}},function(t,e,n){"use strict";e["c"]=d,e["b"]=y,e["a"]=_;var r=n(370),i=n(371),o=n(372),a=n(373),s=n(374),u=n(375),c=n(376),l=n(377),f=n(378),h=n(379),p=n(380);function d(t,e){var n,r,i,o,a,s=new _(t),u=+t.value&&(s.value=t.value),c=[s];null==e&&(e=g);while(n=c.pop())if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new _(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(y)}function v(){return d(this).eachBefore(m)}function g(t){return t.children}function m(t){t.data=t.data.data}function y(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function _(t){this.data=t,this.depth=this.height=0,this.parent=null}_.prototype=d.prototype={constructor:_,count:r["a"],each:i["a"],eachAfter:a["a"],eachBefore:o["a"],sum:s["a"],sort:u["a"],path:c["a"],ancestors:l["a"],descendants:f["a"],leaves:h["a"],links:p["a"],copy:v}},function(t,e,n){"use strict";function r(t){return null==t?null:i(t)}function i(t){if("function"!==typeof t)throw new Error;return t}e["a"]=r,e["b"]=i},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),e["c"]=a;var r=n(45),i=n(55),o=(1+Math.sqrt(5))/2;function a(t,e,n,o,a,s){var u,c,l,f,h,p,d,v,g,m,y,_=[],b=e.children,x=0,w=0,M=b.length,E=e.value;while(x<M){l=a-n,f=s-o;do{h=b[w++].value}while(!h&&w<M);for(p=d=h,m=Math.max(f/l,l/f)/(E*t),y=h*h*m,g=Math.max(d/y,y/p);w<M;++w){if(h+=c=b[w].value,c<p&&(p=c),c>d&&(d=c),y=h*h*m,v=Math.max(d/y,y/p),v>g){h-=c;break}g=v}_.push(u={value:h,dice:l<f,children:b.slice(x,w)}),u.dice?Object(r["a"])(u,n,o,a,E?o+=f*h/E:s):Object(i["a"])(u,n,o,E?n+=l*h/E:a,s),E-=h,x=w}return _}e["a"]=function t(e){function n(t,n,r,i,o){a(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(o)},function(t,e,n){"use strict";var r=n(165);e["a"]=function(t){if(null==t)return r["a"];var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,c=t.length,l=new Array(c);l[0]=(e+=t[0])*i+a,l[1]=(n+=t[1])*o+s;while(u<c)l[u]=t[u],++u;return l}}},function(t,e,n){"use strict";e["b"]=a;var r=n(392),i=n(89);function o(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=a(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function a(t,e){var n=Object(i["a"])(t.transform),o=t.arcs;function a(t,e){e.length&&e.pop();for(var i=o[t<0?~t:t],a=0,s=i.length;a<s;++a)e.push(n(i[a],a));t<0&&Object(r["a"])(e,s)}function s(t){return n(t)}function u(t){for(var e=[],n=0,r=t.length;n<r;++n)a(t[n],e);return e.length<2&&e.push(e[0]),e}function c(t){var e=u(t);while(e.length<4)e.push(e[0]);return e}function l(t){return t.map(c)}function f(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(f)};case"Point":e=s(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(s);break;case"LineString":e=u(t.arcs);break;case"MultiLineString":e=t.arcs.map(u);break;case"Polygon":e=l(t.arcs);break;case"MultiPolygon":e=t.arcs.map(l);break;default:return null}return{type:n,coordinates:e}}return f(e)}e["a"]=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return o(t,e)})}:o(t,e)}},function(t,e){var n=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)};t.exports=n},function(t,e){function n(t){return Math.abs(t)<=1?.5:0}function r(t){var e=1-Math.pow(Math.abs(t),3);return Math.pow(e,3)}t.exports={boxcar:n,cosine:function(t){return Math.abs(t)<=1?Math.PI/4*Math.cos(Math.PI/2*t):0},epanechnikov:function(t){return Math.abs(t)<1?.75*(1-t*t):0},gaussian:function(t){return.3989422804*Math.exp(-.5*t*t)},quartic:function(t){if(Math.abs(t)<1){var e=1-t*t;return.9375*e*e}return 0},triangular:function(t){var e=Math.abs(t);return e<1?1-e:0},tricube:function(t){return Math.abs(t)<1?70/81*r(t):0},triweight:function(t){if(Math.abs(t)<1){var e=1-t*t;return 35/32*e*e*e}return 0},uniform:n}},function(t,e,n){"use strict";var r=n(13);t.exports=s;var i="\0",o="\0",a="\x01";function s(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function u(t,e){t[e]?t[e]++:t[e]=1}function c(t,e){--t[e]||delete t[e]}function l(t,e,n,o){var s=""+e,u=""+n;if(!t&&s>u){var c=s;s=u,u=c}return s+a+u+a+(r.isUndefined(o)?i:o)}function f(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function h(t,e){return l(t,e.v,e.w,e.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(t){return this._label=t,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},s.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},s.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},s.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},s.prototype.node=function(t){return this._nodes[t]},s.prototype.hasNode=function(t){return r.has(this._nodes,t)},s.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},s.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=o;else{e+="";for(var n=e;!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},s.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},s.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},s.prototype.children=function(t){if(r.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},s.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},s.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},s.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},s.prototype.isLeaf=function(t){var e;return e=this.isDirected()?this.successors(t):this.neighbors(t),0===e.length},s.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,o(t))}),e},s.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},s.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"===typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var s=l(this._isDirected,t,e,n);if(r.has(this._edgeLabels,s))return o&&(this._edgeLabels[s]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=o?i:this._defaultEdgeLabelFn(t,e,n);var c=f(this._isDirected,t,e,n);return t=c.v,e=c.w,Object.freeze(c),this._edgeObjs[s]=c,u(this._preds[e],t),u(this._sucs[t],e),this._in[e][s]=c,this._out[t][s]=c,this._edgeCount++,this},s.prototype.edge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?h(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?h(this._isDirected,arguments[0]):l(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],c(this._preds[e],t),c(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},s.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},s.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},s.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r="$";function i(){}function o(t,e){var n=new i;if(t instanceof i)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,a=t.length;if(null==e)while(++o<a)n.set(o,t[o]);else while(++o<a)n.set(e(r=t[o],o,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}i.prototype=o.prototype={constructor:i,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}},e["a"]=o},function(t,e,n){"use strict";var r=n(33),i=n(27),o=n(60),a=n(96);e["a"]=function(){var t=a["a"],e=a["b"],n=Object(i["a"])(!0),s=null,u=o["a"],c=null;function l(i){var o,a,l,f=i.length,h=!1;for(null==s&&(c=u(l=Object(r["path"])())),o=0;o<=f;++o)!(o<f&&n(a=i[o],o,i))===h&&((h=!h)?c.lineStart():c.lineEnd()),h&&c.point(+t(a,o,i),+e(a,o,i));if(l)return c=null,l+""||null}return l.x=function(e){return arguments.length?(t="function"===typeof e?e:Object(i["a"])(+e),l):t},l.y=function(t){return arguments.length?(e="function"===typeof t?t:Object(i["a"])(+t),l):e},l.defined=function(t){return arguments.length?(n="function"===typeof t?t:Object(i["a"])(!!t),l):n},l.curve=function(t){return arguments.length?(u=t,null!=s&&(c=u(s)),l):u},l.context=function(t){return arguments.length?(null==t?s=c=null:c=u(s=t),l):s},l}},function(t,e,n){"use strict";function r(t){return t[0]}function i(t){return t[1]}e["a"]=r,e["b"]=i},function(t,e,n){"use strict";e["a"]=o;var r=n(46),i=n(63);function o(t,e,n){var i=t._x1,o=t._y1,a=t._x2,s=t._y2;if(t._l01_a>r["f"]){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,o=(o*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>r["f"]){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/f,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(i,o,a,s,t._x2,t._y2)}function a(t,e){this._context=t,this._alpha=e}a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:o(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new a(t,e):new i["a"](t,0)}return n.alpha=function(e){return t(+e)},n})(.5)},function(t,e,n){"use strict";e["b"]=i;var r=n(48);function i(t){var e,n=0,r=-1,i=t.length;while(++r<i)(e=+t[r][1])&&(n+=e);return n}e["a"]=function(t){var e=t.map(i);return Object(r["a"])(t).sort(function(t,n){return e[t]-e[n]})}},function(t,e,n){"use strict";function r(){this._=null}function i(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function o(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function a(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function s(t){while(t.L)t=t.L;return t}e["a"]=i,r.prototype={constructor:r,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){t=t.R;while(t.L)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=s(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);e.L=e.R=null,e.U=n,e.C=!0,t=e;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(o(this,n),t=n,n=t.U),n.C=!1,r.C=!0,a(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(a(this,n),t=n,n=t.U),n.C=!1,r.C=!0,o(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,u=t.L,c=t.R;if(n=u?c?s(c):u:c,i?i.L===t?i.L=n:i.R=n:this._=n,u&&c?(r=n.C,n.C=t.C,n.L=u,u.U=n,n!==c?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=c,c.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,o(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,a(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,o(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,a(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,o(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,a(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e["b"]=r},function(t,e,n){"use strict";e["c"]=i,e["b"]=o,e["d"]=a,e["a"]=c;var r=n(49);function i(t,e,n,i){var o=[null,null],s=r["e"].push(o)-1;return o.left=t,o.right=e,n&&a(o,t,e,n),i&&a(o,e,t,i),r["b"][t.index].halfedges.push(s),r["b"][e.index].halfedges.push(s),o}function o(t,e,n){var r=[e,n];return r.left=t,r}function a(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function s(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],f=s[1],h=0,p=1,d=l-u,v=f-c;if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-c,v||!(o>0)){if(o/=v,v<0){if(o<h)return;o<p&&(p=o)}else if(v>0){if(o>p)return;o>h&&(h=o)}if(o=i-c,v||!(o<0)){if(o/=v,v<0){if(o>p)return;o>h&&(h=o)}else if(v>0){if(o<h)return;o<p&&(p=o)}return!(h>0||p<1)||(h>0&&(t[0]=[u+h*d,c+h*v]),p<1&&(t[1]=[u+p*d,c+p*v]),!0)}}}}}function u(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,f=c[0],h=c[1],p=l[0],d=l[1],v=(f+p)/2,g=(h+d)/2;if(d===h){if(v<e||v>=r)return;if(f>p){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=(f-p)/(d-h),s=g-a*v,a<-1||a>1)if(f>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function c(t,e,n,i){var o,a=r["e"].length;while(a--)u(o=r["e"][a],t,e,n,i)&&s(o,t,e,n,i)&&(Math.abs(o[0][0]-o[1][0])>r["f"]||Math.abs(o[0][1]-o[1][1])>r["f"])||delete r["e"][a]}},function(t,e,n){var r={compactBox:n(516),dendrogram:n(518),indented:n(520),mindmap:n(522)};t.exports=r},function(t,e,n){var r=n(194),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=function(t){return o.indexOf(t)>-1},s=i[0];t.exports=function(t,e,n){var o=e.direction||s;if(e.isHorizontal=a(o),o&&-1===i.indexOf(o))throw new TypeError("Invalid direction: "+o);if(o===i[0])n(t,e);else if(o===i[1])n(t,e),t.right2left();else if(o===i[2])n(t,e);else if(o===i[3])n(t,e),t.bottom2top();else if(o===i[4]||o===i[5]){var u=r(t,e),c=u.left,l=u.right;n(c,e),n(l,e),e.isHorizontal?c.right2left():c.bottom2top(),l.translate(c.x-l.x,c.y-l.y),t.x=c.x,t.y=l.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}return t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var r,i,o,a,s,u=n(29),c=n(4),l=n(20),f=n(22),h=Object(u["a"])(),p=Object(u["a"])(),d={point:l["a"],lineStart:l["a"],lineEnd:l["a"],polygonStart:function(){h.reset(),d.lineStart=v,d.lineEnd=g},polygonEnd:function(){var t=+h;p.add(t<0?c["w"]+t:t),this.lineStart=this.lineEnd=this.point=l["a"]},sphere:function(){p.add(c["w"])}};function v(){d.point=m}function g(){y(r,i)}function m(t,e){d.point=y,r=t,i=e,t*=c["r"],e*=c["r"],o=t,a=Object(c["g"])(e=e/2+c["q"]),s=Object(c["t"])(e)}function y(t,e){t*=c["r"],e*=c["r"],e=e/2+c["q"];var n=t-o,r=n>=0?1:-1,i=r*n,u=Object(c["g"])(e),l=Object(c["t"])(e),f=s*l,p=a*u+f*Object(c["g"])(i),d=f*r*Object(c["t"])(i);h.add(Object(c["e"])(d,p)),o=t,a=u,s=l}e["c"]=function(t){return p.reset(),Object(f["a"])(t,d),2*p}},function(t,e,n){"use strict";e["a"]=s;var r=n(35),i=n(199),o=n(4),a=n(50);function s(t,e,n,i,a,s){if(n){var c=Object(o["g"])(e),l=Object(o["t"])(e),f=i*n;null==a?(a=e+i*o["w"],s=e-f/2):(a=u(c,a),s=u(c,s),(i>0?a<s:a>s)&&(a+=i*o["w"]));for(var h,p=a;i>0?p>s:p<s;p-=f)h=Object(r["g"])([c,-l*Object(o["g"])(p),-l*Object(o["t"])(p)]),t.point(h[0],h[1])}}function u(t,e){e=Object(r["a"])(e),e[0]-=t,Object(r["e"])(e);var n=Object(o["b"])(-e[1]);return((-e[2]<0?-n:n)+o["w"]-o["i"])%o["w"]}e["b"]=function(){var t,e,n=Object(i["a"])([0,0]),r=Object(i["a"])(90),u=Object(i["a"])(6),c={point:l};function l(n,r){t.push(n=e(n,r)),n[0]*=o["h"],n[1]*=o["h"]}function f(){var i=n.apply(this,arguments),l=r.apply(this,arguments)*o["r"],f=u.apply(this,arguments)*o["r"];return t=[],e=Object(a["b"])(-i[0]*o["r"],-i[1]*o["r"],0).invert,s(c,l,f,1),i={type:"Polygon",coordinates:[t]},t=e=null,i}return f.center=function(t){return arguments.length?(n="function"===typeof t?t:Object(i["a"])([+t[0],+t[1]]),f):n},f.radius=function(t){return arguments.length?(r="function"===typeof t?t:Object(i["a"])(+t),f):r},f.precision=function(t){return arguments.length?(u="function"===typeof t?t:Object(i["a"])(+t),f):u},f}},function(t,e,n){"use strict";e["a"]=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";var r=n(20);e["a"]=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r["a"],rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";var r=n(108);function i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function o(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}e["a"]=function(t,e,n,a,s){var u,c,l=[],f=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,o=t[0],a=t[e];if(Object(r["a"])(o,a)){for(s.lineStart(),u=0;u<e;++u)s.point((o=t[u])[0],o[1]);s.lineEnd()}else l.push(n=new i(o,t,null,!0)),f.push(n.o=new i(o,null,n,!1)),l.push(n=new i(a,t,null,!1)),f.push(n.o=new i(a,null,n,!0))}}),l.length){for(f.sort(e),o(l),o(f),u=0,c=f.length;u<c;++u)f[u].e=n=!n;var h,p,d=l[0];while(1){var v=d,g=!0;while(v.v)if((v=v.n)===d)return;h=v.z,s.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(u=0,c=h.length;u<c;++u)s.point((p=h[u])[0],p[1]);else a(v.x,v.n.x,1,s);v=v.n}else{if(g)for(h=v.p.z,u=h.length-1;u>=0;--u)s.point((p=h[u])[0],p[1]);else a(v.x,v.p.x,-1,s);v=v.p}v=v.o,h=v.z,g=!g}while(!v.v);s.lineEnd()}}}},function(t,e,n){"use strict";var r=n(4);e["a"]=function(t,e){return Object(r["a"])(t[0]-e[0])<r["i"]&&Object(r["a"])(t[1]-e[1])<r["i"]}},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var r=n(30),i=n(110),o=Object(i["a"])(r["a"]),a=o.right,s=o.left;e["c"]=a},function(t,e,n){"use strict";var r=n(30);function i(t){return function(e,n){return Object(r["a"])(t(e),n)}}e["a"]=function(t){return 1===t.length&&(t=i(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e["b"]=r,e["a"]=function(t,e){null==e&&(e=r);var n=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);while(n<i)a[n]=e(o,o=t[++n]);return a}},function(t,e,n){"use strict";var r=n(113);e["a"]=function(t,e){var n=Object(r["a"])(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var r=n(36);e["a"]=function(t,e){var n,i,o=t.length,a=0,s=-1,u=0,c=0;if(null==e)while(++s<o)isNaN(n=Object(r["a"])(t[s]))||(i=n-u,u+=i/++a,c+=i*(n-u));else while(++s<o)isNaN(n=Object(r["a"])(e(t[s],s,t)))||(i=n-u,u+=i/++a,c+=i*(n-u));if(a>1)return c/(a-1)}},function(t,e,n){"use strict";e["a"]=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){while(++a<o)if(null!=(n=t[a])&&n>=n){r=i=n;while(++a<o)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}}else while(++a<o)if(null!=(n=e(t[a],a,t))&&n>=n){r=i=n;while(++a<o)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=Array.prototype,i=r.slice,o=r.map},function(t,e,n){"use strict";e["a"]=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);while(++r<i)o[r]=t+r*n;return o}},function(t,e,n){"use strict";e["b"]=a,e["c"]=s;var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,e,n){var a=(e-t)/Math.max(0,n),s=Math.floor(Math.log(a)/Math.LN10),u=a/Math.pow(10,s);return s>=0?(u>=r?10:u>=i?5:u>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(u>=r?10:u>=i?5:u>=o?2:1)}function s(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),u=a/s;return u>=r?s*=10:u>=i?s*=5:u>=o&&(s*=2),e<t?-s:s}e["a"]=function(t,e,n){var r,i,o,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=a(t,e,n))||!isFinite(s))return[];if(s>0){t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-t+1));while(++u<i)o[u]=(t+u)*s}else{t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(t-e+1));while(++u<i)o[u]=(t-u)/s}return r&&o.reverse(),o}},function(t,e,n){"use strict";e["a"]=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e["a"]=function(t,e){var n,r,i=t.length,o=-1;if(null==e){while(++o<i)if(null!=(n=t[o])&&n>=n){r=n;while(++o<i)null!=(n=t[o])&&r>n&&(r=n)}}else while(++o<i)if(null!=(n=e(t[o],o,t))&&n>=n){r=n;while(++o<i)null!=(n=e(t[o],o,t))&&r>n&&(r=n)}return r}},function(t,e,n){"use strict";var r=n(119);function i(t){return t.length}e["a"]=function(t){if(!(a=t.length))return[];for(var e=-1,n=Object(r["a"])(t,i),o=new Array(n);++e<n;)for(var a,s=-1,u=o[e]=new Array(a);++s<a;)u[s]=t[s][e];return o}},function(t,e,n){"use strict";var r=n(29),i=n(35),o=n(4),a=Object(r["a"])();e["a"]=function(t,e){var n=e[0],r=e[1],s=[Object(o["t"])(n),-Object(o["g"])(n),0],u=0,c=0;a.reset();for(var l=0,f=t.length;l<f;++l)if(p=(h=t[l]).length)for(var h,p,d=h[p-1],v=d[0],g=d[1]/2+o["q"],m=Object(o["t"])(g),y=Object(o["g"])(g),_=0;_<p;++_,v=x,m=M,y=E,d=b){var b=h[_],x=b[0],w=b[1]/2+o["q"],M=Object(o["t"])(w),E=Object(o["g"])(w),O=x-v,S=O>=0?1:-1,T=S*O,j=T>o["o"],A=m*M;if(a.add(Object(o["e"])(A*S*Object(o["t"])(T),y*E+A*Object(o["g"])(T))),u+=j?O+S*o["w"]:O,j^v>=n^x>=n){var C=Object(i["c"])(Object(i["a"])(d),Object(i["a"])(b));Object(i["e"])(C);var L=Object(i["c"])(s,C);Object(i["e"])(L);var P=(j^O>=0?-1:1)*Object(o["c"])(L[2]);(r>P||r===P&&(C[0]||C[1]))&&(c+=j^O>=0?1:-1)}}return(u<-o["i"]||u<o["i"]&&a<-o["i"])^1&c}},function(t,e,n){"use strict";var r=n(123),i=[null,null],o={type:"LineString",coordinates:i};e["a"]=function(t,e){return i[0]=t,i[1]=e,Object(r["a"])(o)}},function(t,e,n){"use strict";var r,i,o,a=n(29),s=n(4),u=n(20),c=n(22),l=Object(a["a"])(),f={sphere:u["a"],point:u["a"],lineStart:h,lineEnd:u["a"],polygonStart:u["a"],polygonEnd:u["a"]};function h(){f.point=d,f.lineEnd=p}function p(){f.point=f.lineEnd=u["a"]}function d(t,e){t*=s["r"],e*=s["r"],r=t,i=Object(s["t"])(e),o=Object(s["g"])(e),f.point=v}function v(t,e){t*=s["r"],e*=s["r"];var n=Object(s["t"])(e),a=Object(s["g"])(e),u=Object(s["a"])(t-r),c=Object(s["g"])(u),f=Object(s["t"])(u),h=a*f,p=o*n-i*a*c,d=i*n+o*a*c;l.add(Object(s["e"])(Object(s["u"])(h*h+p*p),d)),r=t,i=n,o=a}e["a"]=function(t){return l.reset(),Object(c["a"])(t,f),+l}},function(t,e,n){"use strict";var r=n(20),i=1/0,o=i,a=-i,s=a,u={point:c,lineStart:r["a"],lineEnd:r["a"],polygonStart:r["a"],polygonEnd:r["a"],result:function(){var t=[[i,o],[a,s]];return a=s=-(o=i=1/0),t}};function c(t,e){t<i&&(i=t),t>a&&(a=t),e<o&&(o=e),e>s&&(s=e)}e["a"]=u},function(t,e,n){"use strict";var r=n(68);e["a"]=function(){return Object(r["b"])().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";var r=n(106),i=n(107),o=n(4),a=n(121),s=n(14);function u(t){return t.length>1}function c(t,e){return((t=t.x)[0]<0?t[1]-o["l"]-o["i"]:o["l"]-t[1])-((e=e.x)[0]<0?e[1]-o["l"]-o["i"]:o["l"]-e[1])}e["a"]=function(t,e,n,o){return function(l,f){var h,p,d,v=e(f),g=l.invert(o[0],o[1]),m=Object(r["a"])(),y=e(m),_=!1,b={point:x,lineStart:M,lineEnd:E,polygonStart:function(){b.point=O,b.lineStart=S,b.lineEnd=T,p=[],h=[]},polygonEnd:function(){b.point=x,b.lineStart=M,b.lineEnd=E,p=Object(s["merge"])(p);var t=Object(a["a"])(h,g);p.length?(_||(f.polygonStart(),_=!0),Object(i["a"])(p,c,t,n,f)):t&&(_||(f.polygonStart(),_=!0),f.lineStart(),n(null,null,1,f),f.lineEnd()),_&&(f.polygonEnd(),_=!1),p=h=null},sphere:function(){f.polygonStart(),f.lineStart(),n(null,null,1,f),f.lineEnd(),f.polygonEnd()}};function x(e,n){var r=l(e,n);t(e=r[0],n=r[1])&&f.point(e,n)}function w(t,e){var n=l(t,e);v.point(n[0],n[1])}function M(){b.point=w,v.lineStart()}function E(){b.point=x,v.lineEnd()}function O(t,e){d.push([t,e]);var n=l(t,e);y.point(n[0],n[1])}function S(){y.lineStart(),d=[]}function T(){O(d[0][0],d[0][1]),y.lineEnd();var t,e,n,r,i=y.clean(),o=m.result(),a=o.length;if(d.pop(),h.push(d),d=null,a)if(1&i){if(n=o[0],(e=n.length-1)>0){for(_||(f.polygonStart(),_=!0),f.lineStart(),t=0;t<e;++t)f.point((r=n[t])[0],r[1]);f.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(u))}return b}}},function(t,e,n){"use strict";e["b"]=i;var r=n(17);function i(t,e){return[t,e]}i.invert=i,e["a"]=function(){return Object(r["a"])(i).scale(152.63)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(240);n.d(e,"geoAiry",function(){return r["b"]}),n.d(e,"geoAiryRaw",function(){return r["a"]});var i=n(129);n.d(e,"geoAitoff",function(){return i["b"]}),n.d(e,"geoAitoffRaw",function(){return i["a"]});var o=n(241);n.d(e,"geoArmadillo",function(){return o["b"]}),n.d(e,"geoArmadilloRaw",function(){return o["a"]});var a=n(130);n.d(e,"geoAugust",function(){return a["b"]}),n.d(e,"geoAugustRaw",function(){return a["a"]});var s=n(242);n.d(e,"geoBaker",function(){return s["b"]}),n.d(e,"geoBakerRaw",function(){return s["a"]});var u=n(243);n.d(e,"geoBerghaus",function(){return u["b"]}),n.d(e,"geoBerghausRaw",function(){return u["a"]});var c=n(131);n.d(e,"geoBoggs",function(){return c["b"]}),n.d(e,"geoBoggsRaw",function(){return c["a"]});var l=n(244);n.d(e,"geoBonne",function(){return l["b"]}),n.d(e,"geoBonneRaw",function(){return l["a"]});var f=n(245);n.d(e,"geoBottomley",function(){return f["b"]}),n.d(e,"geoBottomleyRaw",function(){return f["a"]});var h=n(246);n.d(e,"geoBromley",function(){return h["b"]}),n.d(e,"geoBromleyRaw",function(){return h["a"]});var p=n(247);n.d(e,"geoChamberlin",function(){return p["c"]}),n.d(e,"geoChamberlinRaw",function(){return p["b"]}),n.d(e,"geoChamberlinAfrica",function(){return p["a"]});var d=n(72);n.d(e,"geoCollignon",function(){return d["b"]}),n.d(e,"geoCollignonRaw",function(){return d["a"]});var v=n(248);n.d(e,"geoCraig",function(){return v["b"]}),n.d(e,"geoCraigRaw",function(){return v["a"]});var g=n(249);n.d(e,"geoCraster",function(){return g["b"]}),n.d(e,"geoCrasterRaw",function(){return g["a"]});var m=n(132);n.d(e,"geoCylindricalEqualArea",function(){return m["b"]}),n.d(e,"geoCylindricalEqualAreaRaw",function(){return m["a"]});var y=n(250);n.d(e,"geoCylindricalStereographic",function(){return y["b"]}),n.d(e,"geoCylindricalStereographicRaw",function(){return y["a"]});var _=n(251);n.d(e,"geoEckert1",function(){return _["a"]}),n.d(e,"geoEckert1Raw",function(){return _["b"]});var b=n(252);n.d(e,"geoEckert2",function(){return b["a"]}),n.d(e,"geoEckert2Raw",function(){return b["b"]});var x=n(253);n.d(e,"geoEckert3",function(){return x["a"]}),n.d(e,"geoEckert3Raw",function(){return x["b"]});var w=n(254);n.d(e,"geoEckert4",function(){return w["a"]}),n.d(e,"geoEckert4Raw",function(){return w["b"]});var M=n(255);n.d(e,"geoEckert5",function(){return M["a"]}),n.d(e,"geoEckert5Raw",function(){return M["b"]});var E=n(256);n.d(e,"geoEckert6",function(){return E["a"]}),n.d(e,"geoEckert6Raw",function(){return E["b"]});var O=n(257);n.d(e,"geoEisenlohr",function(){return O["a"]}),n.d(e,"geoEisenlohrRaw",function(){return O["b"]});var S=n(258);n.d(e,"geoFahey",function(){return S["a"]}),n.d(e,"geoFaheyRaw",function(){return S["b"]});var T=n(259);n.d(e,"geoFoucaut",function(){return T["a"]}),n.d(e,"geoFoucautRaw",function(){return T["b"]});var j=n(260);n.d(e,"geoGilbert",function(){return j["a"]});var A=n(261);n.d(e,"geoGingery",function(){return A["a"]}),n.d(e,"geoGingeryRaw",function(){return A["b"]});var C=n(262);n.d(e,"geoGinzburg4",function(){return C["a"]}),n.d(e,"geoGinzburg4Raw",function(){return C["b"]});var L=n(263);n.d(e,"geoGinzburg5",function(){return L["a"]}),n.d(e,"geoGinzburg5Raw",function(){return L["b"]});var P=n(264);n.d(e,"geoGinzburg6",function(){return P["a"]}),n.d(e,"geoGinzburg6Raw",function(){return P["b"]});var I=n(265);n.d(e,"geoGinzburg8",function(){return I["a"]}),n.d(e,"geoGinzburg8Raw",function(){return I["b"]});var R=n(266);n.d(e,"geoGinzburg9",function(){return R["a"]}),n.d(e,"geoGinzburg9Raw",function(){return R["b"]});var F=n(133);n.d(e,"geoGringorten",function(){return F["a"]}),n.d(e,"geoGringortenRaw",function(){return F["b"]});var D=n(135);n.d(e,"geoGuyou",function(){return D["a"]}),n.d(e,"geoGuyouRaw",function(){return D["b"]});var k=n(268);n.d(e,"geoHammer",function(){return k["a"]}),n.d(e,"geoHammerRaw",function(){return k["b"]});var N=n(269);n.d(e,"geoHammerRetroazimuthal",function(){return N["a"]}),n.d(e,"geoHammerRetroazimuthalRaw",function(){return N["b"]});var B=n(270);n.d(e,"geoHealpix",function(){return B["a"]}),n.d(e,"geoHealpixRaw",function(){return B["b"]});var z=n(271);n.d(e,"geoHill",function(){return z["a"]}),n.d(e,"geoHillRaw",function(){return z["b"]});var U=n(136);n.d(e,"geoHomolosine",function(){return U["a"]}),n.d(e,"geoHomolosineRaw",function(){return U["b"]});var G=n(23);n.d(e,"geoInterrupt",function(){return G["a"]});var V=n(272);n.d(e,"geoInterruptedBoggs",function(){return V["a"]});var H=n(273);n.d(e,"geoInterruptedHomolosine",function(){return H["a"]});var q=n(274);n.d(e,"geoInterruptedMollweide",function(){return q["a"]});var W=n(275);n.d(e,"geoInterruptedMollweideHemispheres",function(){return W["a"]});var Y=n(276);n.d(e,"geoInterruptedSinuMollweide",function(){return Y["a"]});var X=n(277);n.d(e,"geoInterruptedSinusoidal",function(){return X["a"]});var Z=n(278);n.d(e,"geoKavrayskiy7",function(){return Z["a"]}),n.d(e,"geoKavrayskiy7Raw",function(){return Z["b"]});var K=n(279);n.d(e,"geoLagrange",function(){return K["a"]}),n.d(e,"geoLagrangeRaw",function(){return K["b"]});var J=n(280);n.d(e,"geoLarrivee",function(){return J["a"]}),n.d(e,"geoLarriveeRaw",function(){return J["b"]});var Q=n(281);n.d(e,"geoLaskowski",function(){return Q["a"]}),n.d(e,"geoLaskowskiRaw",function(){return Q["b"]});var $=n(282);n.d(e,"geoLittrow",function(){return $["a"]}),n.d(e,"geoLittrowRaw",function(){return $["b"]});var tt=n(283);n.d(e,"geoLoximuthal",function(){return tt["a"]}),n.d(e,"geoLoximuthalRaw",function(){return tt["b"]});var et=n(284);n.d(e,"geoMiller",function(){return et["a"]}),n.d(e,"geoMillerRaw",function(){return et["b"]});var nt=n(285);n.d(e,"geoModifiedStereographic",function(){return nt["a"]}),n.d(e,"geoModifiedStereographicRaw",function(){return nt["g"]}),n.d(e,"geoModifiedStereographicAlaska",function(){return nt["b"]}),n.d(e,"geoModifiedStereographicGs48",function(){return nt["c"]}),n.d(e,"geoModifiedStereographicGs50",function(){return nt["d"]}),n.d(e,"geoModifiedStereographicMiller",function(){return nt["f"]}),n.d(e,"geoModifiedStereographicLee",function(){return nt["e"]});var rt=n(21);n.d(e,"geoMollweide",function(){return rt["a"]}),n.d(e,"geoMollweideRaw",function(){return rt["d"]});var it=n(286);n.d(e,"geoMtFlatPolarParabolic",function(){return it["a"]}),n.d(e,"geoMtFlatPolarParabolicRaw",function(){return it["b"]});var ot=n(287);n.d(e,"geoMtFlatPolarQuartic",function(){return ot["a"]}),n.d(e,"geoMtFlatPolarQuarticRaw",function(){return ot["b"]});var at=n(288);n.d(e,"geoMtFlatPolarSinusoidal",function(){return at["a"]}),n.d(e,"geoMtFlatPolarSinusoidalRaw",function(){return at["b"]});var st=n(289);n.d(e,"geoNaturalEarth",function(){return st["a"]}),n.d(e,"geoNaturalEarthRaw",function(){return st["b"]});var ut=n(290);n.d(e,"geoNaturalEarth2",function(){return ut["a"]}),n.d(e,"geoNaturalEarth2Raw",function(){return ut["b"]});var ct=n(291);n.d(e,"geoNellHammer",function(){return ct["a"]}),n.d(e,"geoNellHammerRaw",function(){return ct["b"]});var lt=n(292);n.d(e,"geoPatterson",function(){return lt["a"]}),n.d(e,"geoPattersonRaw",function(){return lt["b"]});var ft=n(293);n.d(e,"geoPolyconic",function(){return ft["a"]}),n.d(e,"geoPolyconicRaw",function(){return ft["b"]});var ht=n(53);n.d(e,"geoPolyhedral",function(){return ht["a"]});var pt=n(295);n.d(e,"geoPolyhedralButterfly",function(){return pt["a"]});var dt=n(296);n.d(e,"geoPolyhedralCollignon",function(){return dt["a"]});var vt=n(297);n.d(e,"geoPolyhedralWaterman",function(){return vt["a"]});var gt=n(298);n.d(e,"geoProject",function(){return gt["a"]});var mt=n(302);n.d(e,"geoGringortenQuincuncial",function(){return mt["a"]});var yt=n(137);n.d(e,"geoPeirceQuincuncial",function(){return yt["a"]}),n.d(e,"geoPierceQuincuncial",function(){return yt["a"]});var _t=n(303);n.d(e,"geoQuantize",function(){return _t["a"]});var bt=n(75);n.d(e,"geoQuincuncial",function(){return bt["a"]});var xt=n(304);n.d(e,"geoRectangularPolyconic",function(){return xt["a"]}),n.d(e,"geoRectangularPolyconicRaw",function(){return xt["b"]});var wt=n(305);n.d(e,"geoRobinson",function(){return wt["a"]}),n.d(e,"geoRobinsonRaw",function(){return wt["b"]});var Mt=n(306);n.d(e,"geoSatellite",function(){return Mt["a"]}),n.d(e,"geoSatelliteRaw",function(){return Mt["b"]});var Et=n(73);n.d(e,"geoSinuMollweide",function(){return Et["a"]}),n.d(e,"geoSinuMollweideRaw",function(){return Et["c"]});var Ot=n(38);n.d(e,"geoSinusoidal",function(){return Ot["a"]}),n.d(e,"geoSinusoidalRaw",function(){return Ot["b"]});var St=n(307);n.d(e,"geoStitch",function(){return St["a"]});var Tt=n(308);n.d(e,"geoTimes",function(){return Tt["a"]}),n.d(e,"geoTimesRaw",function(){return Tt["b"]});var jt=n(309);n.d(e,"geoTwoPointAzimuthal",function(){return jt["a"]}),n.d(e,"geoTwoPointAzimuthalRaw",function(){return jt["b"]}),n.d(e,"geoTwoPointAzimuthalUsa",function(){return jt["c"]});var At=n(310);n.d(e,"geoTwoPointEquidistant",function(){return At["a"]}),n.d(e,"geoTwoPointEquidistantRaw",function(){return At["b"]}),n.d(e,"geoTwoPointEquidistantUsa",function(){return At["c"]});var Ct=n(311);n.d(e,"geoVanDerGrinten",function(){return Ct["a"]}),n.d(e,"geoVanDerGrintenRaw",function(){return Ct["b"]});var Lt=n(312);n.d(e,"geoVanDerGrinten2",function(){return Lt["a"]}),n.d(e,"geoVanDerGrinten2Raw",function(){return Lt["b"]});var Pt=n(313);n.d(e,"geoVanDerGrinten3",function(){return Pt["a"]}),n.d(e,"geoVanDerGrinten3Raw",function(){return Pt["b"]});var It=n(314);n.d(e,"geoVanDerGrinten4",function(){return It["a"]}),n.d(e,"geoVanDerGrinten4Raw",function(){return It["b"]});var Rt=n(315);n.d(e,"geoWagner4",function(){return Rt["a"]}),n.d(e,"geoWagner4Raw",function(){return Rt["b"]});var Ft=n(316);n.d(e,"geoWagner6",function(){return Ft["a"]}),n.d(e,"geoWagner6Raw",function(){return Ft["b"]});var Dt=n(317);n.d(e,"geoWagner7",function(){return Dt["a"]}),n.d(e,"geoWagner7Raw",function(){return Dt["b"]});var kt=n(318);n.d(e,"geoWiechel",function(){return kt["a"]}),n.d(e,"geoWiechelRaw",function(){return kt["b"]});var Nt=n(319);n.d(e,"geoWinkel3",function(){return Nt["a"]}),n.d(e,"geoWinkel3Raw",function(){return Nt["b"]})},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["h"])(e),r=Object(i["z"])(Object(i["b"])(n*Object(i["h"])(t/=2)));return[2*n*Object(i["y"])(t)*r,Object(i["y"])(e)*r]}o.invert=function(t,e){if(!(t*t+4*e*e>i["s"]*i["s"]+i["k"])){var n=t,r=e,o=25;do{var a,s=Object(i["y"])(n),u=Object(i["y"])(n/2),c=Object(i["h"])(n/2),l=Object(i["y"])(r),f=Object(i["h"])(r),h=Object(i["y"])(2*r),p=l*l,d=f*f,v=u*u,g=1-d*c*c,m=g?Object(i["b"])(f*c)*Object(i["B"])(a=1/g):a=0,y=2*m*f*u-t,_=m*l-e,b=a*(d*v+m*f*c*p),x=a*(.5*s*h-2*m*l*u),w=.25*a*(h*u-m*l*d*s),M=a*(p*c+m*v*f),E=x*w-M*b;if(!E)break;var O=(_*x-y*M)/E,S=(y*w-_*b)/E;n-=O,r-=S}while((Object(i["a"])(O)>i["k"]||Object(i["a"])(S)>i["k"])&&--o>0);return[n,r]}},e["b"]=function(){return Object(r["geoProjection"])(o).scale(152.63)}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["F"])(e/2),r=Object(i["B"])(1-n*n),o=1+r*Object(i["h"])(t/=2),a=Object(i["y"])(t)*r/o,s=n/o,u=a*a,c=s*s;return[4/3*a*(3+u-3*c),4/3*s*(3+3*u-c)]}o.invert=function(t,e){if(t*=3/8,e*=3/8,!t&&Object(i["a"])(e)>1)return null;var n=t*t,r=e*e,o=1+n+r,a=Object(i["B"])((o-Object(i["B"])(o*o-4*e*e))/2),s=Object(i["e"])(a)/3,u=a?Object(i["c"])(Object(i["a"])(e/a))/3:Object(i["d"])(Object(i["a"])(t))/3,c=Object(i["h"])(s),l=Object(i["i"])(u),f=l*l-c*c;return[2*Object(i["x"])(t)*Object(i["g"])(Object(i["A"])(u)*c,.25-f),2*Object(i["x"])(e)*Object(i["g"])(l*Object(i["y"])(s),.25+f)]},e["b"]=function(){return Object(r["geoProjection"])(o).scale(66.1603)}},function(t,e,n){"use strict";e["a"]=u;var r=n(0),i=n(21),o=n(1),a=2.00276,s=1.11072;function u(t,e){var n=Object(i["c"])(o["s"],e);return[a*t/(1/Object(o["h"])(e)+s/Object(o["h"])(n)),(e+o["D"]*Object(o["y"])(n))/a]}u.invert=function(t,e){var n,r,i=a*e,u=e<0?-o["u"]:o["u"],c=25;do{r=i-o["D"]*Object(o["y"])(u),u-=n=(Object(o["y"])(2*u)+2*u-o["s"]*Object(o["y"])(r))/(2*Object(o["h"])(2*u)+2+o["s"]*Object(o["h"])(r)*o["D"]*Object(o["h"])(u))}while(Object(o["a"])(n)>o["k"]&&--c>0);return r=i-o["D"]*Object(o["y"])(u),[t*(1/Object(o["h"])(r)+s/Object(o["h"])(u))/a,r]},e["b"]=function(){return Object(r["geoProjection"])(u).scale(160.857)}},function(t,e,n){"use strict";e["a"]=o;var r=n(1),i=n(31);function o(t){var e=Object(r["h"])(t);function n(t,n){return[t*e,Object(r["y"])(n)/e]}return n.invert=function(t,n){return[t/e,Object(r["e"])(n*e)]},n}e["b"]=function(){return Object(i["a"])(o).parallel(38.58).scale(195.044)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(1),o=n(134);function a(t,e){var n=Object(i["x"])(t),r=Object(i["x"])(e),o=Object(i["h"])(e),a=Object(i["h"])(t)*o,u=Object(i["y"])(t)*o,c=Object(i["y"])(r*e);t=Object(i["a"])(Object(i["g"])(u,c)),e=Object(i["e"])(a),Object(i["a"])(t-i["o"])>i["k"]&&(t%=i["o"]);var l=s(t>i["s"]/4?i["o"]-t:t,e);return t>i["s"]/4&&(c=l[0],l[0]=-l[1],l[1]=-c),l[0]*=n,l[1]*=-r,l}function s(t,e){if(e===i["o"])return[0,0];var n,r,o=Object(i["y"])(e),a=o*o,s=a*a,u=1+s,c=1+3*s,l=1-s,f=Object(i["e"])(1/Object(i["B"])(u)),h=l+a*u*f,p=(1-o)/h,d=Object(i["B"])(p),v=p*u,g=Object(i["B"])(v),m=d*l;if(0===t)return[0,-(m+a*g)];var y,_=Object(i["h"])(e),b=1/_,x=2*o*_,w=(-3*a+f*c)*x,M=(-h*_-(1-o)*w)/(h*h),E=.5*M/d,O=l*E-2*a*d*x,S=a*u*M+p*c*x,T=-b*x,j=-b*S,A=-2*b*O,C=4*t/i["s"];if(t>.222*i["s"]||e<i["s"]/4&&t>.175*i["s"]){if(n=(m+a*Object(i["B"])(v*(1+s)-m*m))/(1+s),t>i["s"]/4)return[n,n];var L=n,P=.5*n;n=.5*(P+L),r=50;do{var I=Object(i["B"])(v-n*n),R=n*(A+T*I)+j*Object(i["e"])(n/g)-C;if(!R)break;R<0?P=n:L=n,n=.5*(P+L)}while(Object(i["a"])(L-P)>i["k"]&&--r>0)}else{n=i["k"],r=25;do{var F=n*n,D=Object(i["B"])(v-F),k=A+T*D,N=n*k+j*Object(i["e"])(n/g)-C,B=k+(j-T*F)/D;n-=y=D?N/B:0}while(Object(i["a"])(y)>i["k"]&&--r>0)}return[n,-m-a*Object(i["B"])(v-n*n)]}function u(t,e){var n=0,r=1,o=.5,a=50;while(1){var s=o*o,u=Object(i["B"])(o),c=Object(i["e"])(1/Object(i["B"])(1+s)),l=1-s+o*(1+s)*c,f=(1-u)/l,h=Object(i["B"])(f),p=f*(1+s),d=h*(1-s),v=p-t*t,g=Object(i["B"])(v),m=e+d+o*g;if(Object(i["a"])(r-n)<i["l"]||0===--a||0===m)break;m>0?n=o:r=o,o=.5*(n+r)}if(!a)return null;var y=Object(i["e"])(u),_=Object(i["h"])(y),b=1/_,x=2*u*_,w=(-3*o+c*(1+3*s))*x,M=(-l*_-(1-u)*w)/(l*l),E=.5*M/h,O=(1-s)*E-2*o*h*x,S=-2*b*O,T=-b*x,j=-b*(o*(1+s)*M+f*(1+3*s)*x);return[i["s"]/4*(t*(S+T*g)+j*Object(i["e"])(t/Object(i["B"])(p))),y]}a.invert=function(t,e){Object(i["a"])(t)>1&&(t=2*Object(i["x"])(t)-t),Object(i["a"])(e)>1&&(e=2*Object(i["x"])(e)-e);var n=Object(i["x"])(t),r=Object(i["x"])(e),o=-n*t,a=-r*e,s=a/o<1,c=u(s?a:o,s?o:a),l=c[0],f=c[1],h=Object(i["h"])(f);return s&&(l=-i["o"]-l),[n*(Object(i["g"])(Object(i["y"])(l)*h,-Object(i["y"])(f))+i["s"]),r*Object(i["e"])(Object(i["h"])(l)*h)]},e["a"]=function(){return Object(r["geoProjection"])(Object(o["a"])(a)).scale(239.75)}},function(t,e,n){"use strict";var r=n(1);e["a"]=function(t){var e=t(r["o"],0)[0]-t(-r["o"],0)[0];function n(n,i){var o=n>0?-.5:.5,a=t(n+o*r["s"],i);return a[0]-=o*e,a}return t.invert&&(n.invert=function(n,i){var o=n>0?-.5:.5,a=t.invert(n+o*e,i),s=a[0]-o*r["s"];return s<-r["s"]?s+=2*r["s"]:s>r["s"]&&(s-=2*r["s"]),a[0]=s,a}),n}},function(t,e,n){"use strict";e["b"]=s;var r=n(0),i=n(267),o=n(1),a=n(134);function s(t,e){var n=(o["D"]-1)/(o["D"]+1),r=Object(o["B"])(1-n*n),a=Object(i["a"])(o["o"],r*r),s=-1,c=Object(o["p"])(Object(o["F"])(o["s"]/4+Object(o["a"])(e)/2)),l=Object(o["m"])(s*c)/Object(o["B"])(n),f=u(l*Object(o["h"])(s*t),l*Object(o["y"])(s*t)),h=Object(i["b"])(f[0],f[1],r*r);return[-h[1],(e>=0?1:-1)*(.5*a-h[0])]}function u(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?o["o"]:-o["o"])-Object(o["g"])(i,2*t)),-.25*Object(o["p"])(i*i+4*n)+.5*Object(o["p"])(r*r+n)]}function c(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}s.invert=function(t,e){var n=(o["D"]-1)/(o["D"]+1),r=Object(o["B"])(1-n*n),a=Object(i["a"])(o["o"],r*r),s=-1,u=Object(i["c"])(.5*a-e,-t,r*r),l=c(u[0],u[1]),f=Object(o["g"])(l[1],l[0])/s;return[f,2*Object(o["f"])(Object(o["m"])(.5/s*Object(o["p"])(n*l[0]*l[0]+n*l[1]*l[1])))-o["o"]]},e["a"]=function(){return Object(r["geoProjection"])(Object(a["a"])(s)).scale(151.496)}},function(t,e,n){"use strict";e["b"]=u;var r=n(0),i=n(1),o=n(21),a=n(38),s=n(73);function u(t,e){return Object(i["a"])(e)>s["b"]?(t=Object(o["d"])(t,e),t[1]-=e>0?s["d"]:-s["d"],t):Object(a["b"])(t,e)}u.invert=function(t,e){return Object(i["a"])(e)>s["b"]?o["d"].invert(t,e+(e>0?s["d"]:-s["d"])):a["b"].invert(t,e)},e["a"]=function(){return Object(r["geoProjection"])(u).scale(152.63)}},function(t,e,n){"use strict";var r=n(135),i=n(75);e["a"]=function(){return Object(i["a"])(r["b"]).scale(111.48)}},function(t,e,n){"use strict";var r=n(0),i=n(1);e["a"]=function(t,e,n){var o=Object(r["geoInterpolate"])(e,n),a=o(.5),s=Object(r["geoRotation"])([-a[0],-a[1]])(e),u=o.distance/2,c=-Object(i["e"])(Object(i["y"])(s[1]*i["v"])/Object(i["y"])(u)),l=[-a[0],-a[1],-(s[0]>0?i["s"]-c:c)*i["j"]],f=Object(r["geoProjection"])(t(u)).rotate(l),h=Object(r["geoRotation"])(l),p=f.center;return delete f.rotate,f.center=function(t){return arguments.length?p(h(t)):h.invert(p())},f.clipAngle(90)}},function(t,e,n){var r;(function(e){"use strict";function i(){}var o=i.prototype,a=e.EventEmitter;function s(t,e){var n=t.length;while(n--)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}function c(t){return"function"===typeof t||t instanceof RegExp||!(!t||"object"!==typeof t)&&c(t.listener)}o.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},o.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},o.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},o.addListener=function(t,e){if(!c(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"===typeof e;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},o.on=u("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=u("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=s(i[r],e),-1!==n&&i[r].splice(n,1));return this},o.off=u("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,n){var r,i,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!==typeof e||e instanceof RegExp){r=n.length;while(r--)o.call(this,e,n[r])}else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"===typeof i?o.call(this,r,i):a.call(this,r,i));return this},o.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},o.removeAllListeners=u("removeEvent"),o.emitEvent=function(t,e){var n,r,i,o,a,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)r=n[i],!0===r.once&&this.removeListener(t,r.listener),a=r.listener.apply(this,e||[]),a===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},o.trigger=u("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=a,i},r=function(){return i}.call(e,n,e,t),void 0===r||(t.exports=r)})(this||{})},function(t,e,n){var r=n(24),i=n(77);function o(t,e){var n=r(e),o=n.length;if(i(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}t.exports=o},function(t,e,n){var r=n(11),i=n(10),o=n(0),a=n(128),s=n(322);t.exports=function(t,e){if(r(t))return e?t:t();if(i(t)){if(o[t])return e?o[t]:o[t]();if(a[t])return e?a[t]:a[t]();if(s[t])return e?s[t]:s[t]()}return null}},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var r,i,o,a,s,u=n(42),c=n(5),l=n(25),f=n(26),h=Object(u["a"])(),p=Object(u["a"])(),d={point:l["a"],lineStart:l["a"],lineEnd:l["a"],polygonStart:function(){h.reset(),d.lineStart=v,d.lineEnd=g},polygonEnd:function(){var t=+h;p.add(t<0?c["w"]+t:t),this.lineStart=this.lineEnd=this.point=l["a"]},sphere:function(){p.add(c["w"])}};function v(){d.point=m}function g(){y(r,i)}function m(t,e){d.point=y,r=t,i=e,t*=c["r"],e*=c["r"],o=t,a=Object(c["g"])(e=e/2+c["q"]),s=Object(c["t"])(e)}function y(t,e){t*=c["r"],e*=c["r"],e=e/2+c["q"];var n=t-o,r=n>=0?1:-1,i=r*n,u=Object(c["g"])(e),l=Object(c["t"])(e),f=s*l,p=a*u+f*Object(c["g"])(i),d=f*r*Object(c["t"])(i);h.add(Object(c["e"])(d,p)),o=t,a=u,s=l}e["c"]=function(t){return p.reset(),Object(f["a"])(t,d),2*p}},function(t,e,n){"use strict";e["a"]=s;var r=n(43),i=n(326),o=n(5),a=n(78);function s(t,e,n,i,a,s){if(n){var c=Object(o["g"])(e),l=Object(o["t"])(e),f=i*n;null==a?(a=e+i*o["w"],s=e-f/2):(a=u(c,a),s=u(c,s),(i>0?a<s:a>s)&&(a+=i*o["w"]));for(var h,p=a;i>0?p>s:p<s;p-=f)h=Object(r["g"])([c,-l*Object(o["g"])(p),-l*Object(o["t"])(p)]),t.point(h[0],h[1])}}function u(t,e){e=Object(r["a"])(e),e[0]-=t,Object(r["e"])(e);var n=Object(o["b"])(-e[1]);return((-e[2]<0?-n:n)+o["w"]-o["i"])%o["w"]}e["b"]=function(){var t,e,n=Object(i["a"])([0,0]),r=Object(i["a"])(90),u=Object(i["a"])(6),c={point:l};function l(n,r){t.push(n=e(n,r)),n[0]*=o["h"],n[1]*=o["h"]}function f(){var i=n.apply(this,arguments),l=r.apply(this,arguments)*o["r"],f=u.apply(this,arguments)*o["r"];return t=[],e=Object(a["b"])(-i[0]*o["r"],-i[1]*o["r"],0).invert,s(c,l,f,1),i={type:"Polygon",coordinates:[t]},t=e=null,i}return f.center=function(t){return arguments.length?(n="function"===typeof t?t:Object(i["a"])([+t[0],+t[1]]),f):n},f.radius=function(t){return arguments.length?(r="function"===typeof t?t:Object(i["a"])(+t),f):r},f.precision=function(t){return arguments.length?(u="function"===typeof t?t:Object(i["a"])(+t),f):u},f}},function(t,e,n){"use strict";e["a"]=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";e["a"]=l;var r=n(5),i=n(146),o=n(327),a=n(147),s=n(14),u=1e9,c=-u;function l(t,e,n,l){function f(r,i){return t<=r&&r<=n&&e<=i&&i<=l}function h(r,i,o,a){var s=0,u=0;if(null==r||(s=p(r,o))!==(u=p(i,o))||v(r,i)<0^o>0)do{a.point(0===s||3===s?t:n,s>1?l:e)}while((s=(s+o+4)%4)!==u);else a.point(i[0],i[1])}function p(i,o){return Object(r["a"])(i[0]-t)<r["i"]?o>0?0:3:Object(r["a"])(i[0]-n)<r["i"]?o>0?2:1:Object(r["a"])(i[1]-e)<r["i"]?o>0?1:0:o>0?3:2}function d(t,e){return v(t.x,e.x)}function v(t,e){var n=p(t,1),r=p(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var p,v,g,m,y,_,b,x,w,M,E,O=r,S=Object(i["a"])(),T={point:j,lineStart:P,lineEnd:I,polygonStart:C,polygonEnd:L};function j(t,e){f(t,e)&&O.point(t,e)}function A(){for(var e=0,n=0,r=v.length;n<r;++n)for(var i,o,a=v[n],s=1,u=a.length,c=a[0],f=c[0],h=c[1];s<u;++s)i=f,o=h,c=a[s],f=c[0],h=c[1],o<=l?h>l&&(f-i)*(l-o)>(h-o)*(t-i)&&++e:h<=l&&(f-i)*(l-o)<(h-o)*(t-i)&&--e;return e}function C(){O=S,p=[],v=[],E=!0}function L(){var t=A(),e=E&&t,n=(p=Object(s["merge"])(p)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),h(null,null,1,r),r.lineEnd()),n&&Object(a["a"])(p,d,t,h,r),r.polygonEnd()),O=r,p=v=g=null}function P(){T.point=R,v&&v.push(g=[]),M=!0,w=!1,b=x=NaN}function I(){p&&(R(m,y),_&&w&&S.rejoin(),p.push(S.result())),T.point=j,w&&O.lineEnd()}function R(r,i){var a=f(r,i);if(v&&g.push([r,i]),M)m=r,y=i,_=a,M=!1,a&&(O.lineStart(),O.point(r,i));else if(a&&w)O.point(r,i);else{var s=[b=Math.max(c,Math.min(u,b)),x=Math.max(c,Math.min(u,x))],h=[r=Math.max(c,Math.min(u,r)),i=Math.max(c,Math.min(u,i))];Object(o["a"])(s,h,t,e,n,l)?(w||(O.lineStart(),O.point(s[0],s[1])),O.point(h[0],h[1]),a||O.lineEnd(),E=!1):a&&(O.lineStart(),O.point(r,i),E=!1)}b=r,x=i,w=a}return T}}e["b"]=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=l(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}},function(t,e,n){"use strict";var r=n(25);e["a"]=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r["a"],rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";var r=n(148);function i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function o(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}e["a"]=function(t,e,n,a,s){var u,c,l=[],f=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,o=t[0],a=t[e];if(Object(r["a"])(o,a)){for(s.lineStart(),u=0;u<e;++u)s.point((o=t[u])[0],o[1]);s.lineEnd()}else l.push(n=new i(o,t,null,!0)),f.push(n.o=new i(o,null,n,!1)),l.push(n=new i(a,t,null,!1)),f.push(n.o=new i(a,null,n,!0))}}),l.length){for(f.sort(e),o(l),o(f),u=0,c=f.length;u<c;++u)f[u].e=n=!n;var h,p,d=l[0];while(1){var v=d,g=!0;while(v.v)if((v=v.n)===d)return;h=v.z,s.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(u=0,c=h.length;u<c;++u)s.point((p=h[u])[0],p[1]);else a(v.x,v.n.x,1,s);v=v.n}else{if(g)for(h=v.p.z,u=h.length-1;u>=0;--u)s.point((p=h[u])[0],p[1]);else a(v.x,v.p.x,-1,s);v=v.p}v=v.o,h=v.z,g=!g}while(!v.v);s.lineEnd()}}}},function(t,e,n){"use strict";var r=n(5);e["a"]=function(t,e){return Object(r["a"])(t[0]-e[0])<r["i"]&&Object(r["a"])(t[1]-e[1])<r["i"]}},function(t,e,n){"use strict";var r,i,o,a=n(42),s=n(5),u=n(25),c=n(26),l=Object(a["a"])(),f={sphere:u["a"],point:u["a"],lineStart:h,lineEnd:u["a"],polygonStart:u["a"],polygonEnd:u["a"]};function h(){f.point=d,f.lineEnd=p}function p(){f.point=f.lineEnd=u["a"]}function d(t,e){t*=s["r"],e*=s["r"],r=t,i=Object(s["t"])(e),o=Object(s["g"])(e),f.point=v}function v(t,e){t*=s["r"],e*=s["r"];var n=Object(s["t"])(e),a=Object(s["g"])(e),u=Object(s["a"])(t-r),c=Object(s["g"])(u),f=Object(s["t"])(u),h=a*f,p=o*n-i*a*c,d=i*n+o*a*c;l.add(Object(s["e"])(Object(s["u"])(h*h+p*p),d)),r=t,i=n,o=a}e["a"]=function(t){return l.reset(),Object(c["a"])(t,f),+l}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";var r=n(25),i=1/0,o=i,a=-i,s=a,u={point:c,lineStart:r["a"],lineEnd:r["a"],polygonStart:r["a"],polygonEnd:r["a"],result:function(){var t=[[i,o],[a,s]];return a=s=-(o=i=1/0),t}};function c(t,e){t<i&&(i=t),t>a&&(a=t),e<o&&(o=e),e>s&&(s=e)}e["a"]=u},function(t,e,n){"use strict";var r=n(79);e["a"]=function(){return Object(r["b"])().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";var r=n(146),i=n(147),o=n(5),a=n(337),s=n(14);function u(t){return t.length>1}function c(t,e){return((t=t.x)[0]<0?t[1]-o["l"]-o["i"]:o["l"]-t[1])-((e=e.x)[0]<0?e[1]-o["l"]-o["i"]:o["l"]-e[1])}e["a"]=function(t,e,n,o){return function(l,f){var h,p,d,v=e(f),g=l.invert(o[0],o[1]),m=Object(r["a"])(),y=e(m),_=!1,b={point:x,lineStart:M,lineEnd:E,polygonStart:function(){b.point=O,b.lineStart=S,b.lineEnd=T,p=[],h=[]},polygonEnd:function(){b.point=x,b.lineStart=M,b.lineEnd=E,p=Object(s["merge"])(p);var t=Object(a["a"])(h,g);p.length?(_||(f.polygonStart(),_=!0),Object(i["a"])(p,c,t,n,f)):t&&(_||(f.polygonStart(),_=!0),f.lineStart(),n(null,null,1,f),f.lineEnd()),_&&(f.polygonEnd(),_=!1),p=h=null},sphere:function(){f.polygonStart(),f.lineStart(),n(null,null,1,f),f.lineEnd(),f.polygonEnd()}};function x(e,n){var r=l(e,n);t(e=r[0],n=r[1])&&f.point(e,n)}function w(t,e){var n=l(t,e);v.point(n[0],n[1])}function M(){b.point=w,v.lineStart()}function E(){b.point=x,v.lineEnd()}function O(t,e){d.push([t,e]);var n=l(t,e);y.point(n[0],n[1])}function S(){y.lineStart(),d=[]}function T(){O(d[0][0],d[0][1]),y.lineEnd();var t,e,n,r,i=y.clean(),o=m.result(),a=o.length;if(d.pop(),h.push(d),d=null,a)if(1&i){if(n=o[0],(e=n.length-1)>0){for(_||(f.polygonStart(),_=!0),f.lineStart(),t=0;t<e;++t)f.point((r=n[t])[0],r[1]);f.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(u))}return b}}},function(t,e,n){"use strict";e["b"]=a,e["a"]=s;var r=n(26),i=n(151);function o(t,e,n){var o=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),Object(r["a"])(n,t.stream(i["a"]));var u=i["a"].result(),c=Math.min(o/(u[1][0]-u[0][0]),a/(u[1][1]-u[0][1])),l=+e[0][0]+(o-c*(u[1][0]+u[0][0]))/2,f=+e[0][1]+(a-c*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*c).translate([l,f])}function a(t){return function(e,n){return o(t,[[0,0],e],n)}}function s(t){return function(e,n){return o(t,e,n)}}},function(t,e,n){"use strict";e["b"]=i;var r=n(18);function i(t,e){return[t,e]}i.invert=i,e["a"]=function(){return Object(r["a"])(i).scale(152.63)}},function(t,e,n){var r=n(6),i=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(e))for(var i=0;i<e.length;i+=1)t(e[i],n);else n.push(e);return n};t.exports=i},function(t,e){t.exports=function(t){for(var e=1/t,n=[],r=0;r<=1;r+=e)n.push(r);return n}},function(t,e,n){var r=n(159),i=n(40),o=n(0),a=o.geoPath,s=n(2),u=s.GEO,c=s.registerConnector,l=a();function f(t,e,n){n.dataType=u;var o=i(t.features);return o.forEach(function(t){t.name=t.properties.name,t.longitude=[],t.latitude=[];var e=t.pathData=l(t),n=r(e);n._path.forEach(function(e){t.longitude.push(e[1]),t.latitude.push(e[2])});var i=l.centroid(t);t.centroidX=i[0],t.centroidY=i[1]}),o}c("geo",f),c("geojson",f),c("GeoJSON",f),t.exports=f},function(t,e,n){var r=n(362),i=n(363),o=n(364);function a(t){if(!(this instanceof a))return new a(t);this._path=i(t)?t:r(t),this._path=o(this._path),this._path=u(this._path)}function s(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function u(t){for(var e=[],n=["L",0,0],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"M":n=["L",o[1],o[2]],e.push(o);break;case"Z":e.push(n);break;default:e.push(o)}}return e}t.exports=a,a.prototype.at=function(t,e){return this._walk(t,e).pos},a.prototype.length=function(){return this._walk(null).length},a.prototype._walk=function(t,e){var n=[0,0],r=[0,0,0],i=0,o=1.045;"number"===typeof t&&(t*=o);for(var a=0;a<this._path.length;a++){var u=this._path[a];if("M"===u[0]){if(n[0]=u[1],n[1]=u[2],0===t)return{length:i,pos:n}}else if("C"===u[0]){r[0]=n[0],r[1]=n[1],r[2]=i;for(var c=100,l=0;l<=c;l++){var f=l/c,h=g(u,f),p=m(u,f);if(i+=s(n[0],n[1],h,p),n[0]=h,n[1]=p,"number"===typeof t&&i>=t){var d=(i-t)/(i-r[2]),v=[n[0]*(1-d)+r[0]*d,n[1]*(1-d)+r[1]*d];return{length:i,pos:v}}r[0]=n[0],r[1]=n[1],r[2]=i}}else if("Q"===u[0]){r[0]=n[0],r[1]=n[1],r[2]=i;for(c=100,l=0;l<=c;l++){f=l/c,h=y(u,f),p=_(u,f);if(i+=s(n[0],n[1],h,p),n[0]=h,n[1]=p,"number"===typeof t&&i>=t){d=(i-t)/(i-r[2]),v=[n[0]*(1-d)+r[0]*d,n[1]*(1-d)+r[1]*d];return{length:i,pos:v}}r[0]=n[0],r[1]=n[1],r[2]=i}}else if("L"===u[0]){if(r[0]=n[0],r[1]=n[1],r[2]=i,i+=s(n[0],n[1],u[1],u[2]),n[0]=u[1],n[1]=u[2],"number"===typeof t&&i>=t){d=(i-t)/(i-r[2]),v=[n[0]*(1-d)+r[0]*d,n[1]*(1-d)+r[1]*d];return{length:i,pos:v}}r[0]=n[0],r[1]=n[1],r[2]=i}}return{length:i/o,pos:n};function g(t,e){return Math.pow(1-e,3)*n[0]+3*Math.pow(1-e,2)*e*t[1]+3*(1-e)*Math.pow(e,2)*t[3]+Math.pow(e,3)*t[5]}function m(t,e){return Math.pow(1-e,3)*n[1]+3*Math.pow(1-e,2)*e*t[2]+3*(1-e)*Math.pow(e,2)*t[4]+Math.pow(e,3)*t[6]}function y(t,e){return Math.pow(1-e,2)*n[0]+2*(1-e)*e*t[1]+Math.pow(e,2)*t[3]}function _(t,e){return Math.pow(1-e,2)*n[1]+2*(1-e)*e*t[2]+Math.pow(e,2)*t[4]}}},function(t,e,n){"use strict";e["b"]=u;var r=n(161);function i(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((a*=a)-(o*=o))/(2*c),f=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=r+l*s+f*u,n.y=i+l*u-f*s}else n.x=r+a,n.y=i}function o(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function a(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function s(t){this._=t,this.next=null,this.previous=null}function u(t){if(!(c=t.length))return 0;var e,n,u,c,l,f,h,p,d,v,g;if(e=t[0],e.x=0,e.y=0,!(c>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(c>2))return e.r+n.r;i(n,e,u=t[2]),e=new s(e),n=new s(n),u=new s(u),e.next=u.previous=n,n.next=e.previous=u,u.next=n.previous=e;t:for(h=3;h<c;++h){i(e._,n._,u=t[h]),u=new s(u),p=n.next,d=e.previous,v=n._.r,g=e._.r;do{if(v<=g){if(o(p._,u._)){n=p,e.next=n,n.previous=e,--h;continue t}v+=p._.r,p=p.next}else{if(o(d._,u._)){e=d,e.next=n,n.previous=e,--h;continue t}g+=d._.r,d=d.previous}}while(p!==d.next);u.previous=e,u.next=n,e.next=n.previous=n=u,l=a(e);while((u=u.next)!==n)(f=a(u))<l&&(e=u,l=f);n=e.next}e=[n._],u=n;while((u=u.next)!==n)e.push(u._);for(u=Object(r["a"])(e),h=0;h<c;++h)e=t[h],e.x-=u.x,e.y-=u.y;return u.r}e["a"]=function(t){return u(t),t}},function(t,e,n){"use strict";var r=n(382);function i(t,e){var n,r;if(s(e,t))return[e];for(n=0;n<t.length;++n)if(o(e,t[n])&&s(l(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(o(l(t[n],t[r]),e)&&o(l(t[n],e),t[r])&&o(l(t[r],e),t[n])&&s(f(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function o(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function a(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function s(t,e){for(var n=0;n<e.length;++n)if(!a(t,e[n]))return!1;return!0}function u(t){switch(t.length){case 1:return c(t[0]);case 2:return l(t[0],t[1]);case 3:return f(t[0],t[1],t[2])}}function c(t){return{x:t.x,y:t.y,r:t.r}}function l(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function f(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=r-a,p=r-c,d=i-s,v=i-l,g=u-o,m=f-o,y=r*r+i*i-o*o,_=y-a*a-s*s+u*u,b=y-c*c-l*l+f*f,x=p*d-h*v,w=(d*b-v*_)/(2*x)-r,M=(v*g-d*m)/x,E=(p*_-h*b)/(2*x)-i,O=(h*m-p*g)/x,S=M*M+O*O-1,T=2*(o+w*M+E*O),j=w*w+E*E-o*o,A=-(S?(T+Math.sqrt(T*T-4*S*j))/(2*S):j/T);return{x:r+w+M*A,y:i+E+O*A,r:A}}e["a"]=function(t){var e,n,o=0,s=(t=Object(r["a"])(r["b"].call(t))).length,c=[];while(o<s)e=t[o],n&&a(n,e)?++o:(n=u(c=i(c,e)),o=0);return n}},function(t,e,n){"use strict";function r(){return 0}e["a"]=r,e["b"]=function(t){return function(){return t}}},function(t,e,n){"use strict";e["a"]=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}},function(t,e,n){"use strict";var r=n(89);e["a"]=function(t){var e,n=Object(r["a"])(t.transform),i=1/0,o=i,a=-i,s=-i;function u(t){t=n(t),t[0]<i&&(i=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>s&&(s=t[1])}function c(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(c);break;case"Point":u(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(u);break}}for(e in t.arcs.forEach(function(t){var e,r=-1,u=t.length;while(++r<u)e=n(t[r],r),e[0]<i&&(i=e[0]),e[0]>a&&(a=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1])}),t.objects)c(t.objects[e]);return[i,o,a,s]}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";e["a"]=function(t,e){var n={},r={},i={},o=[],a=-1;function s(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(t){var e,n,o=s(t),a=o[0],u=o[1];if(e=i[a])if(delete i[e.end],e.push(t),e.end=u,n=r[u]){delete r[n.start];var c=n===e?e:e.concat(n);r[c.start=e.start]=i[c.end=n.end]=c}else r[e.start]=i[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=a,n=i[a]){delete i[n.end];var l=n===e?e:n.concat(e);r[l.start=n.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=a]=i[e.end=u]=e}),u(i,r),u(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}},function(t,e,n){"use strict";var r=n(165);e["a"]=function(t){if(null==t)return r["a"];var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,c=t.length,l=new Array(c),f=Math.round((t[0]-a)/i),h=Math.round((t[1]-s)/o);l[0]=f-e,e=f,l[1]=h-n,n=h;while(u<c)l[u]=t[u],++u;return l}}},function(t,e,n){var r=n(91),i=Array.prototype.indexOf,o=function(t,e){return!!r(t)&&i.call(t,e)>-1};t.exports=o},function(t,e,n){(function(t,r){var i;(function(){var o,a="4.17.4",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",p=1,d=2,v=4,g=1,m=2,y=1,_=2,b=4,x=8,w=16,M=32,E=64,O=128,S=256,T=512,j=30,A="...",C=800,L=16,P=1,I=2,R=3,F=1/0,D=9007199254740991,k=1.7976931348623157e308,N=NaN,B=4294967295,z=B-1,U=B>>>1,G=[["ary",O],["bind",y],["bindKey",_],["curry",x],["curryRight",w],["flip",T],["partial",M],["partialRight",E],["rearg",S]],V="[object Arguments]",H="[object Array]",q="[object AsyncFunction]",W="[object Boolean]",Y="[object Date]",X="[object DOMException]",Z="[object Error]",K="[object Function]",J="[object GeneratorFunction]",Q="[object Map]",$="[object Number]",tt="[object Null]",et="[object Object]",nt="[object Promise]",rt="[object Proxy]",it="[object RegExp]",ot="[object Set]",at="[object String]",st="[object Symbol]",ut="[object Undefined]",ct="[object WeakMap]",lt="[object WeakSet]",ft="[object ArrayBuffer]",ht="[object DataView]",pt="[object Float32Array]",dt="[object Float64Array]",vt="[object Int8Array]",gt="[object Int16Array]",mt="[object Int32Array]",yt="[object Uint8Array]",_t="[object Uint8ClampedArray]",bt="[object Uint16Array]",xt="[object Uint32Array]",wt=/\b__p \+= '';/g,Mt=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Tt=RegExp(Ot.source),jt=RegExp(St.source),At=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/,Rt=/^\./,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,kt=RegExp(Dt.source),Nt=/^\s+|\s+$/g,Bt=/^\s+/,zt=/\s+$/,Ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Vt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,Zt=/^0b[01]+$/i,Kt=/^\[object .+?Constructor\]$/,Jt=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,te=/($^)/,ee=/['\n\r\u2028\u2029\\]/g,ne="\\ud800-\\udfff",re="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",oe="\\u20d0-\\u20ff",ae=re+ie+oe,se="\\u2700-\\u27bf",ue="a-z\\xdf-\\xf6\\xf8-\\xff",ce="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fe="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="A-Z\\xc0-\\xd6\\xd8-\\xde",de="\\ufe0e\\ufe0f",ve=ce+le+fe+he,ge="['\u2019]",me="["+ne+"]",ye="["+ve+"]",_e="["+ae+"]",be="\\d+",xe="["+se+"]",we="["+ue+"]",Me="[^"+ne+ve+be+se+ue+pe+"]",Ee="\\ud83c[\\udffb-\\udfff]",Oe="(?:"+_e+"|"+Ee+")",Se="[^"+ne+"]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ae="["+pe+"]",Ce="\\u200d",Le="(?:"+we+"|"+Me+")",Pe="(?:"+Ae+"|"+Me+")",Ie="(?:"+ge+"(?:d|ll|m|re|s|t|ve))?",Re="(?:"+ge+"(?:D|LL|M|RE|S|T|VE))?",Fe=Oe+"?",De="["+de+"]?",ke="(?:"+Ce+"(?:"+[Se,Te,je].join("|")+")"+De+Fe+")*",Ne="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Be="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",ze=De+Fe+ke,Ue="(?:"+[xe,Te,je].join("|")+")"+ze,Ge="(?:"+[Se+_e+"?",_e,Te,je,me].join("|")+")",Ve=RegExp(ge,"g"),He=RegExp(_e,"g"),qe=RegExp(Ee+"(?="+Ee+")|"+Ge+ze,"g"),We=RegExp([Ae+"?"+we+"+"+Ie+"(?="+[ye,Ae,"$"].join("|")+")",Pe+"+"+Re+"(?="+[ye,Ae+Le,"$"].join("|")+")",Ae+"?"+Le+"+"+Ie,Ae+"+"+Re,Be,Ne,be,Ue].join("|"),"g"),Ye=RegExp("["+Ce+ne+ae+de+"]"),Xe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ke=-1,Je={};Je[pt]=Je[dt]=Je[vt]=Je[gt]=Je[mt]=Je[yt]=Je[_t]=Je[bt]=Je[xt]=!0,Je[V]=Je[H]=Je[ft]=Je[W]=Je[ht]=Je[Y]=Je[Z]=Je[K]=Je[Q]=Je[$]=Je[et]=Je[it]=Je[ot]=Je[at]=Je[ct]=!1;var Qe={};Qe[V]=Qe[H]=Qe[ft]=Qe[ht]=Qe[W]=Qe[Y]=Qe[pt]=Qe[dt]=Qe[vt]=Qe[gt]=Qe[mt]=Qe[Q]=Qe[$]=Qe[et]=Qe[it]=Qe[ot]=Qe[at]=Qe[st]=Qe[yt]=Qe[_t]=Qe[bt]=Qe[xt]=!0,Qe[Z]=Qe[K]=Qe[ct]=!1;var $e={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rn=parseFloat,on=parseInt,an="object"==typeof t&&t&&t.Object===Object&&t,sn="object"==typeof self&&self&&self.Object===Object&&self,un=an||sn||Function("return this")(),cn="object"==typeof e&&e&&!e.nodeType&&e,ln=cn&&"object"==typeof r&&r&&!r.nodeType&&r,fn=ln&&ln.exports===cn,hn=fn&&an.process,pn=function(){try{return hn&&hn.binding&&hn.binding("util")}catch(t){}}(),dn=pn&&pn.isArrayBuffer,vn=pn&&pn.isDate,gn=pn&&pn.isMap,mn=pn&&pn.isRegExp,yn=pn&&pn.isSet,_n=pn&&pn.isTypedArray;function bn(t,e){return t.set(e[0],e[1]),t}function xn(t,e){return t.add(e),t}function wn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Mn(t,e,n,r){var i=-1,o=null==t?0:t.length;while(++i<o){var a=t[i];e(r,a,n(a),t)}return r}function En(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}function On(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function Sn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!e(t[n],n,t))return!1;return!0}function Tn(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function jn(t,e){var n=null==t?0:t.length;return!!n&&zn(t,e,0)>-1}function An(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}function Cn(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function Ln(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function Pn(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function In(t,e,n,r){var i=null==t?0:t.length;r&&i&&(n=t[--i]);while(i--)n=e(n,t[i],i,t);return n}function Rn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var Fn=Hn("length");function Dn(t){return t.split("")}function kn(t){return t.match(Ht)||[]}function Nn(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function Bn(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}function zn(t,e,n){return e===e?vr(t,e,n):Bn(t,Gn,n)}function Un(t,e,n,r){var i=n-1,o=t.length;while(++i<o)if(r(t[i],e))return i;return-1}function Gn(t){return t!==t}function Vn(t,e){var n=null==t?0:t.length;return n?Xn(t,e)/n:N}function Hn(t){return function(e){return null==e?o:e[t]}}function qn(t){return function(e){return null==t?o:t[e]}}function Wn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Yn(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Xn(t,e){var n,r=-1,i=t.length;while(++r<i){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Zn(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Kn(t,e){return Cn(e,function(e){return[e,t[e]]})}function Jn(t){return function(e){return t(e)}}function Qn(t,e){return Cn(e,function(e){return t[e]})}function $n(t,e){return t.has(e)}function tr(t,e){var n=-1,r=t.length;while(++n<r&&zn(e,t[n],0)>-1);return n}function er(t,e){var n=t.length;while(n--&&zn(e,t[n],0)>-1);return n}function nr(t,e){var n=t.length,r=0;while(n--)t[n]===e&&++r;return r}var rr=qn($e),ir=qn(tn);function or(t){return"\\"+nn[t]}function ar(t,e){return null==t?o:t[e]}function sr(t){return Ye.test(t)}function ur(t){return Xe.test(t)}function cr(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function lr(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function fr(t,e){return function(n){return t(e(n))}}function hr(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n];a!==e&&a!==h||(t[n]=h,o[i++]=n)}return o}function pr(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function dr(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function vr(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}function gr(t,e,n){var r=n+1;while(r--)if(t[r]===e)return r;return r}function mr(t){return sr(t)?br(t):Fn(t)}function yr(t){return sr(t)?xr(t):Dn(t)}var _r=qn(en);function br(t){var e=qe.lastIndex=0;while(qe.test(t))++e;return e}function xr(t){return t.match(qe)||[]}function wr(t){return t.match(We)||[]}var Mr=function t(e){e=null==e?un:Er.defaults(un.Object(),e,Er.pick(un,Ze));var n=e.Array,r=e.Date,i=e.Error,Ht=e.Function,ne=e.Math,re=e.Object,ie=e.RegExp,oe=e.String,ae=e.TypeError,se=n.prototype,ue=Ht.prototype,ce=re.prototype,le=e["__core-js_shared__"],fe=ue.toString,he=ce.hasOwnProperty,pe=0,de=function(){var t=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ve=ce.toString,ge=fe.call(re),me=un._,ye=ie("^"+fe.call(he).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=fn?e.Buffer:o,be=e.Symbol,xe=e.Uint8Array,we=_e?_e.allocUnsafe:o,Me=fr(re.getPrototypeOf,re),Ee=re.create,Oe=ce.propertyIsEnumerable,Se=se.splice,Te=be?be.isConcatSpreadable:o,je=be?be.iterator:o,Ae=be?be.toStringTag:o,Ce=function(){try{var t=Ka(re,"defineProperty");return t({},"",{}),t}catch(t){}}(),Le=e.clearTimeout!==un.clearTimeout&&e.clearTimeout,Pe=r&&r.now!==un.Date.now&&r.now,Ie=e.setTimeout!==un.setTimeout&&e.setTimeout,Re=ne.ceil,Fe=ne.floor,De=re.getOwnPropertySymbols,ke=_e?_e.isBuffer:o,Ne=e.isFinite,Be=se.join,ze=fr(re.keys,re),Ue=ne.max,Ge=ne.min,qe=r.now,We=e.parseInt,Ye=ne.random,Xe=se.reverse,$e=Ka(e,"DataView"),tn=Ka(e,"Map"),en=Ka(e,"Promise"),nn=Ka(e,"Set"),an=Ka(e,"WeakMap"),sn=Ka(re,"create"),cn=an&&new an,ln={},hn=Rs($e),pn=Rs(tn),Fn=Rs(en),Dn=Rs(nn),qn=Rs(an),vr=be?be.prototype:o,br=vr?vr.valueOf:o,xr=vr?vr.toString:o;function Mr(t){if(Tl(t)&&!ll(t)&&!(t instanceof jr)){if(t instanceof Tr)return t;if(he.call(t,"__wrapped__"))return Ds(t)}return new Tr(t)}var Or=function(){function t(){}return function(e){if(!Sl(e))return{};if(Ee)return Ee(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Sr(){}function Tr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function jr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Ar(){var t=new jr(this.__wrapped__);return t.__actions__=sa(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=sa(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=sa(this.__views__),t}function Cr(){if(this.__filtered__){var t=new jr(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Lr(){var t=this.__wrapped__.value(),e=this.__dir__,n=ll(t),r=e<0,i=n?t.length:0,o=es(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=Ge(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return zo(t,this.__actions__);var d=[];t:while(u--&&h<p){c+=e;var v=-1,g=t[c];while(++v<f){var m=l[v],y=m.iteratee,_=m.type,b=y(g);if(_==I)g=b;else if(!b){if(_==P)continue t;break t}}d[h++]=g}return d}function Pr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Ir(){this.__data__=sn?sn(null):{},this.size=0}function Rr(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Fr(t){var e=this.__data__;if(sn){var n=e[t];return n===l?o:n}return he.call(e,t)?e[t]:o}function Dr(t){var e=this.__data__;return sn?e[t]!==o:he.call(e,t)}function kr(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sn&&e===o?l:e,this}function Nr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Br(){this.__data__=[],this.size=0}function zr(t){var e=this.__data__,n=fi(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Se.call(e,n,1),--this.size,!0}function Ur(t){var e=this.__data__,n=fi(e,t);return n<0?o:e[n][1]}function Gr(t){return fi(this.__data__,t)>-1}function Vr(t,e){var n=this.__data__,r=fi(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Hr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function qr(){this.size=0,this.__data__={hash:new Pr,map:new(tn||Nr),string:new Pr}}function Wr(t){var e=Xa(this,t)["delete"](t);return this.size-=e?1:0,e}function Yr(t){return Xa(this,t).get(t)}function Xr(t){return Xa(this,t).has(t)}function Zr(t,e){var n=Xa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Kr(t){var e=-1,n=null==t?0:t.length;this.__data__=new Hr;while(++e<n)this.add(t[e])}function Jr(t){return this.__data__.set(t,l),this}function Qr(t){return this.__data__.has(t)}function $r(t){var e=this.__data__=new Nr(t);this.size=e.size}function ti(){this.__data__=new Nr,this.size=0}function ei(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ni(t){return this.__data__.get(t)}function ri(t){return this.__data__.has(t)}function ii(t,e){var n=this.__data__;if(n instanceof Nr){var r=n.__data__;if(!tn||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hr(r)}return n.set(t,e),this.size=n.size,this}function oi(t,e){var n=ll(t),r=!n&&cl(t),i=!n&&!r&&vl(t),o=!n&&!r&&!i&&Gl(t),a=n||r||i||o,s=a?Zn(t.length,oe):[],u=s.length;for(var c in t)!e&&!he.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||cs(c,u))||s.push(c);return s}function ai(t){var e=t.length;return e?t[_o(0,e-1)]:o}function si(t,e){return Ls(sa(t),mi(e,0,t.length))}function ui(t){return Ls(sa(t))}function ci(t,e,n){(n===o||al(t[e],n))&&(n!==o||e in t)||vi(t,e,n)}function li(t,e,n){var r=t[e];he.call(t,e)&&al(r,n)&&(n!==o||e in t)||vi(t,e,n)}function fi(t,e){var n=t.length;while(n--)if(al(t[n][0],e))return n;return-1}function hi(t,e,n,r){return Mi(t,function(t,i,o){e(r,t,n(t),o)}),r}function pi(t,e){return t&&ua(e,Of(e),t)}function di(t,e){return t&&ua(e,Sf(e),t)}function vi(t,e,n){"__proto__"==e&&Ce?Ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function gi(t,e){var r=-1,i=e.length,a=n(i),s=null==t;while(++r<i)a[r]=s?o:_f(t,e[r]);return a}function mi(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function yi(t,e,n,r,i,a){var s,u=e&p,c=e&d,l=e&v;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!Sl(t))return t;var f=ll(t);if(f){if(s=is(t),!u)return sa(t,s)}else{var h=ts(t),g=h==K||h==J;if(vl(t))return Zo(t,u);if(h==et||h==V||g&&!i){if(s=c||g?{}:os(t),!u)return c?la(t,di(s,t)):ca(t,pi(s,t))}else{if(!Qe[h])return i?t:{};s=as(t,h,yi,u)}}a||(a=new $r);var m=a.get(t);if(m)return m;a.set(t,s);var y=l?c?Va:Ga:c?Sf:Of,_=f?o:y(t);return En(_||t,function(r,i){_&&(i=r,r=t[i]),li(s,i,yi(r,e,n,i,t,a))}),s}function _i(t){var e=Of(t);return function(n){return bi(n,t,e)}}function bi(t,e,n){var r=n.length;if(null==t)return!r;t=re(t);while(r--){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function xi(t,e,n){if("function"!=typeof t)throw new ae(c);return Ts(function(){t.apply(o,n)},e)}function wi(t,e,n,r){var i=-1,o=jn,a=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=Cn(e,Jn(n))),r?(o=An,a=!1):e.length>=s&&(o=$n,a=!1,e=new Kr(e));t:while(++i<u){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,a&&h===h){var p=l;while(p--)if(e[p]===h)continue t;c.push(f)}else o(e,h,r)||c.push(f)}return c}Mr.templateSettings={escape:At,evaluate:Ct,interpolate:Lt,variable:"",imports:{_:Mr}},Mr.prototype=Sr.prototype,Mr.prototype.constructor=Mr,Tr.prototype=Or(Sr.prototype),Tr.prototype.constructor=Tr,jr.prototype=Or(Sr.prototype),jr.prototype.constructor=jr,Pr.prototype.clear=Ir,Pr.prototype["delete"]=Rr,Pr.prototype.get=Fr,Pr.prototype.has=Dr,Pr.prototype.set=kr,Nr.prototype.clear=Br,Nr.prototype["delete"]=zr,Nr.prototype.get=Ur,Nr.prototype.has=Gr,Nr.prototype.set=Vr,Hr.prototype.clear=qr,Hr.prototype["delete"]=Wr,Hr.prototype.get=Yr,Hr.prototype.has=Xr,Hr.prototype.set=Zr,Kr.prototype.add=Kr.prototype.push=Jr,Kr.prototype.has=Qr,$r.prototype.clear=ti,$r.prototype["delete"]=ei,$r.prototype.get=ni,$r.prototype.has=ri,$r.prototype.set=ii;var Mi=pa(Pi),Ei=pa(Ii,!0);function Oi(t,e){var n=!0;return Mi(t,function(t,r,i){return n=!!e(t,r,i),n}),n}function Si(t,e,n){var r=-1,i=t.length;while(++r<i){var a=t[r],s=e(a);if(null!=s&&(u===o?s===s&&!Ul(s):n(s,u)))var u=s,c=a}return c}function Ti(t,e,n,r){var i=t.length;n=Kl(n),n<0&&(n=-n>i?0:i+n),r=r===o||r>i?i:Kl(r),r<0&&(r+=i),r=n>r?0:Jl(r);while(n<r)t[n++]=e;return t}function ji(t,e){var n=[];return Mi(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Ai(t,e,n,r,i){var o=-1,a=t.length;n||(n=us),i||(i=[]);while(++o<a){var s=t[o];e>0&&n(s)?e>1?Ai(s,e-1,n,r,i):Ln(i,s):r||(i[i.length]=s)}return i}var Ci=da(),Li=da(!0);function Pi(t,e){return t&&Ci(t,e,Of)}function Ii(t,e){return t&&Li(t,e,Of)}function Ri(t,e){return Tn(e,function(e){return Ml(t[e])})}function Fi(t,e){e=qo(e,t);var n=0,r=e.length;while(null!=t&&n<r)t=t[Is(e[n++])];return n&&n==r?t:o}function Di(t,e,n){var r=e(t);return ll(t)?r:Ln(r,n(t))}function ki(t){return null==t?t===o?ut:tt:Ae&&Ae in re(t)?Ja(t):ws(t)}function Ni(t,e){return t>e}function Bi(t,e){return null!=t&&he.call(t,e)}function zi(t,e){return null!=t&&e in re(t)}function Ui(t,e,n){return t>=Ge(e,n)&&t<Ue(e,n)}function Gi(t,e,r){var i=r?An:jn,a=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];while(u--){var h=t[u];u&&e&&(h=Cn(h,Jn(e))),l=Ge(h.length,l),c[u]=!r&&(e||a>=120&&h.length>=120)?new Kr(u&&h):o}h=t[0];var p=-1,d=c[0];t:while(++p<a&&f.length<l){var v=h[p],g=e?e(v):v;if(v=r||0!==v?v:0,!(d?$n(d,g):i(f,g,r))){u=s;while(--u){var m=c[u];if(!(m?$n(m,g):i(t[u],g,r)))continue t}d&&d.push(g),f.push(v)}}return f}function Vi(t,e,n,r){return Pi(t,function(t,i,o){e(r,n(t),i,o)}),r}function Hi(t,e,n){e=qo(e,t),t=Es(t,e);var r=null==t?t:t[Is(su(e))];return null==r?o:wn(r,t,n)}function qi(t){return Tl(t)&&ki(t)==V}function Wi(t){return Tl(t)&&ki(t)==ft}function Yi(t){return Tl(t)&&ki(t)==Y}function Xi(t,e,n,r,i){return t===e||(null==t||null==e||!Tl(t)&&!Tl(e)?t!==t&&e!==e:Zi(t,e,n,r,Xi,i))}function Zi(t,e,n,r,i,o){var a=ll(t),s=ll(e),u=a?H:ts(t),c=s?H:ts(e);u=u==V?et:u,c=c==V?et:c;var l=u==et,f=c==et,h=u==c;if(h&&vl(t)){if(!vl(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new $r),a||Gl(t)?Na(t,e,n,r,i,o):Ba(t,e,u,n,r,i,o);if(!(n&g)){var p=l&&he.call(t,"__wrapped__"),d=f&&he.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,m=d?e.value():e;return o||(o=new $r),i(v,m,n,r,o)}}return!!h&&(o||(o=new $r),za(t,e,n,r,i,o))}function Ki(t){return Tl(t)&&ts(t)==Q}function Ji(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;t=re(t);while(i--){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<a){u=n[i];var c=u[0],l=t[c],f=u[1];if(s&&u[2]){if(l===o&&!(c in t))return!1}else{var h=new $r;if(r)var p=r(l,f,c,t,e,h);if(!(p===o?Xi(f,l,g|m,r,h):p))return!1}}return!0}function Qi(t){if(!Sl(t)||ds(t))return!1;var e=Ml(t)?ye:Kt;return e.test(Rs(t))}function $i(t){return Tl(t)&&ki(t)==it}function to(t){return Tl(t)&&ts(t)==ot}function eo(t){return Tl(t)&&Ol(t.length)&&!!Je[ki(t)]}function no(t){return"function"==typeof t?t:null==t?Ih:"object"==typeof t?ll(t)?uo(t[0],t[1]):so(t):Wh(t)}function ro(t){if(!gs(t))return ze(t);var e=[];for(var n in re(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function io(t){if(!Sl(t))return xs(t);var e=gs(t),n=[];for(var r in t)("constructor"!=r||!e&&he.call(t,r))&&n.push(r);return n}function oo(t,e){return t<e}function ao(t,e){var r=-1,i=hl(t)?n(t.length):[];return Mi(t,function(t,n,o){i[++r]=e(t,n,o)}),i}function so(t){var e=Za(t);return 1==e.length&&e[0][2]?ys(e[0][0],e[0][1]):function(n){return n===t||Ji(n,t,e)}}function uo(t,e){return fs(t)&&ms(e)?ys(Is(t),e):function(n){var r=_f(n,t);return r===o&&r===e?xf(n,t):Xi(e,r,g|m)}}function co(t,e,n,r,i){t!==e&&Ci(e,function(a,s){if(Sl(a))i||(i=new $r),lo(t,e,s,n,co,r,i);else{var u=r?r(t[s],a,s+"",t,e,i):o;u===o&&(u=a),ci(t,s,u)}},Sf)}function lo(t,e,n,r,i,a,s){var u=t[n],c=e[n],l=s.get(c);if(l)ci(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):o,h=f===o;if(h){var p=ll(c),d=!p&&vl(c),v=!p&&!d&&Gl(c);f=c,p||d||v?ll(u)?f=u:pl(u)?f=sa(u):d?(h=!1,f=Zo(c,!0)):v?(h=!1,f=na(c,!0)):f=[]:Dl(c)||cl(c)?(f=u,cl(u)?f=$l(u):(!Sl(u)||r&&Ml(u))&&(f=os(c))):h=!1}h&&(s.set(c,f),i(f,c,r,a,s),s["delete"](c)),ci(t,n,f)}}function fo(t,e){var n=t.length;if(n)return e+=e<0?n:0,cs(e,n)?t[e]:o}function ho(t,e,n){var r=-1;e=Cn(e.length?e:[Ih],Jn(Ya()));var i=ao(t,function(t,n,i){var o=Cn(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return Yn(i,function(t,e){return ia(t,e,n)})}function po(t,e){return vo(t,e,function(e,n){return xf(t,n)})}function vo(t,e,n){var r=-1,i=e.length,o={};while(++r<i){var a=e[r],s=Fi(t,a);n(s,a)&&Oo(o,qo(a,t),s)}return o}function go(t){return function(e){return Fi(e,t)}}function mo(t,e,n,r){var i=r?Un:zn,o=-1,a=e.length,s=t;t===e&&(e=sa(e)),n&&(s=Cn(t,Jn(n)));while(++o<a){var u=0,c=e[o],l=n?n(c):c;while((u=i(s,l,u,r))>-1)s!==t&&Se.call(s,u,1),Se.call(t,u,1)}return t}function yo(t,e){var n=t?e.length:0,r=n-1;while(n--){var i=e[n];if(n==r||i!==o){var o=i;cs(i)?Se.call(t,i,1):ko(t,i)}}return t}function _o(t,e){return t+Fe(Ye()*(e-t+1))}function bo(t,e,r,i){var o=-1,a=Ue(Re((e-t)/(r||1)),0),s=n(a);while(a--)s[i?a:++o]=t,t+=r;return s}function xo(t,e){var n="";if(!t||e<1||e>D)return n;do{e%2&&(n+=t),e=Fe(e/2),e&&(t+=t)}while(e);return n}function wo(t,e){return js(Ms(t,e,Ih),t+"")}function Mo(t){return ai(Hf(t))}function Eo(t,e){var n=Hf(t);return Ls(n,mi(e,0,n.length))}function Oo(t,e,n,r){if(!Sl(t))return t;e=qo(e,t);var i=-1,a=e.length,s=a-1,u=t;while(null!=u&&++i<a){var c=Is(e[i]),l=n;if(i!=s){var f=u[c];l=r?r(f,c,u):o,l===o&&(l=Sl(f)?f:cs(e[i+1])?[]:{})}li(u,c,l),u=u[c]}return t}var So=cn?function(t,e){return cn.set(t,e),t}:Ih,To=Ce?function(t,e){return Ce(t,"toString",{configurable:!0,enumerable:!1,value:Ah(e),writable:!0})}:Ih;function jo(t){return Ls(Hf(t))}function Ao(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;var a=n(o);while(++i<o)a[i]=t[i+e];return a}function Co(t,e){var n;return Mi(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Lo(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=U){while(r<i){var o=r+i>>>1,a=t[o];null!==a&&!Ul(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Po(t,e,Ih,n)}function Po(t,e,n,r){e=n(e);var i=0,a=null==t?0:t.length,s=e!==e,u=null===e,c=Ul(e),l=e===o;while(i<a){var f=Fe((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,v=h===h,g=Ul(h);if(s)var m=r||v;else m=l?v&&(r||p):u?v&&p&&(r||!d):c?v&&p&&!d&&(r||!g):!d&&!g&&(r?h<=e:h<e);m?i=f+1:a=f}return Ge(a,z)}function Io(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n],s=e?e(a):a;if(!n||!al(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Ro(t){return"number"==typeof t?t:Ul(t)?N:+t}function Fo(t){if("string"==typeof t)return t;if(ll(t))return Cn(t,Fo)+"";if(Ul(t))return xr?xr.call(t):"";var e=t+"";return"0"==e&&1/t==-F?"-0":e}function Do(t,e,n){var r=-1,i=jn,o=t.length,a=!0,u=[],c=u;if(n)a=!1,i=An;else if(o>=s){var l=e?null:Pa(t);if(l)return pr(l);a=!1,i=$n,c=new Kr}else c=e?[]:u;t:while(++r<o){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,a&&h===h){var p=c.length;while(p--)if(c[p]===h)continue t;e&&c.push(h),u.push(f)}else i(c,h,n)||(c!==u&&c.push(h),u.push(f))}return u}function ko(t,e){return e=qo(e,t),t=Es(t,e),null==t||delete t[Is(su(e))]}function No(t,e,n,r){return Oo(t,e,n(Fi(t,e)),r)}function Bo(t,e,n,r){var i=t.length,o=r?i:-1;while((r?o--:++o<i)&&e(t[o],o,t));return n?Ao(t,r?0:o,r?o+1:i):Ao(t,r?o+1:0,r?i:o)}function zo(t,e){var n=t;return n instanceof jr&&(n=n.value()),Pn(e,function(t,e){return e.func.apply(e.thisArg,Ln([t],e.args))},n)}function Uo(t,e,r){var i=t.length;if(i<2)return i?Do(t[0]):[];var o=-1,a=n(i);while(++o<i){var s=t[o],u=-1;while(++u<i)u!=o&&(a[o]=wi(a[o]||s,t[u],e,r))}return Do(Ai(a,1),e,r)}function Go(t,e,n){var r=-1,i=t.length,a=e.length,s={};while(++r<i){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function Vo(t){return pl(t)?t:[]}function Ho(t){return"function"==typeof t?t:Ih}function qo(t,e){return ll(t)?t:fs(t,e)?[t]:Ps(ef(t))}var Wo=wo;function Yo(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Ao(t,e,n)}var Xo=Le||function(t){return un.clearTimeout(t)};function Zo(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);return t.copy(r),r}function Ko(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function Jo(t,e){var n=e?Ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Qo(t,e,n){var r=e?n(lr(t),p):lr(t);return Pn(r,bn,new t.constructor)}function $o(t){var e=new t.constructor(t.source,Yt.exec(t));return e.lastIndex=t.lastIndex,e}function ta(t,e,n){var r=e?n(pr(t),p):pr(t);return Pn(r,xn,new t.constructor)}function ea(t){return br?re(br.call(t)):{}}function na(t,e){var n=e?Ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ra(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,a=Ul(t),s=e!==o,u=null===e,c=e===e,l=Ul(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function ia(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;while(++r<a){var u=ra(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function oa(t,e,r,i){var o=-1,a=t.length,s=r.length,u=-1,c=e.length,l=Ue(a-s,0),f=n(c+l),h=!i;while(++u<c)f[u]=e[u];while(++o<s)(h||o<a)&&(f[r[o]]=t[o]);while(l--)f[u++]=t[o++];return f}function aa(t,e,r,i){var o=-1,a=t.length,s=-1,u=r.length,c=-1,l=e.length,f=Ue(a-u,0),h=n(f+l),p=!i;while(++o<f)h[o]=t[o];var d=o;while(++c<l)h[d+c]=e[c];while(++s<u)(p||o<a)&&(h[d+r[s]]=t[o++]);return h}function sa(t,e){var r=-1,i=t.length;e||(e=n(i));while(++r<i)e[r]=t[r];return e}function ua(t,e,n,r){var i=!n;n||(n={});var a=-1,s=e.length;while(++a<s){var u=e[a],c=r?r(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),i?vi(n,u,c):li(n,u,c)}return n}function ca(t,e){return ua(t,Qa(t),e)}function la(t,e){return ua(t,$a(t),e)}function fa(t,e){return function(n,r){var i=ll(n)?Mn:hi,o=e?e():{};return i(n,t,Ya(r,2),o)}}function ha(t){return wo(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;a=t.length>3&&"function"==typeof a?(i--,a):o,s&&ls(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=re(e);while(++r<i){var u=n[r];u&&t(e,u,r,a)}return e})}function pa(t,e){return function(n,r){if(null==n)return n;if(!hl(n))return t(n,r);var i=n.length,o=e?i:-1,a=re(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function da(t){return function(e,n,r){var i=-1,o=re(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function va(t,e,n){var r=e&y,i=ya(t);function o(){var e=this&&this!==un&&this instanceof o?i:t;return e.apply(r?n:this,arguments)}return o}function ga(t){return function(e){e=ef(e);var n=sr(e)?yr(e):o,r=n?n[0]:e.charAt(0),i=n?Yo(n,1).join(""):e.slice(1);return r[t]()+i}}function ma(t){return function(e){return Pn(Eh(Jf(e).replace(Ve,"")),t,"")}}function ya(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Or(t.prototype),r=t.apply(n,e);return Sl(r)?r:n}}function _a(t,e,r){var i=ya(t);function a(){var s=arguments.length,u=n(s),c=s,l=Wa(a);while(c--)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:hr(u,l);if(s-=f.length,s<r)return Ca(t,e,wa,a.placeholder,o,u,f,o,o,r-s);var h=this&&this!==un&&this instanceof a?i:t;return wn(h,this,u)}return a}function ba(t){return function(e,n,r){var i=re(e);if(!hl(e)){var a=Ya(n,3);e=Of(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function xa(t){return Ua(function(e){var n=e.length,r=n,i=Tr.prototype.thru;t&&e.reverse();while(r--){var a=e[r];if("function"!=typeof a)throw new ae(c);if(i&&!s&&"wrapper"==qa(a))var s=new Tr([],!0)}r=s?r:n;while(++r<n){a=e[r];var u=qa(a),l="wrapper"==u?Ha(a):o;s=l&&ps(l[0])&&l[1]==(O|x|M|S)&&!l[4].length&&1==l[9]?s[qa(l[0])].apply(s,l[3]):1==a.length&&ps(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&ll(r))return s.plant(r).value();var i=0,o=n?e[i].apply(this,t):r;while(++i<n)o=e[i].call(this,o);return o}})}function wa(t,e,r,i,a,s,u,c,l,f){var h=e&O,p=e&y,d=e&_,v=e&(x|w),g=e&T,m=d?o:ya(t);function b(){var o=arguments.length,y=n(o),_=o;while(_--)y[_]=arguments[_];if(v)var x=Wa(b),w=nr(y,x);if(i&&(y=oa(y,i,a,v)),s&&(y=aa(y,s,u,v)),o-=w,v&&o<f){var M=hr(y,x);return Ca(t,e,wa,b.placeholder,r,y,M,c,l,f-o)}var E=p?r:this,O=d?E[t]:t;return o=y.length,c?y=Os(y,c):g&&o>1&&y.reverse(),h&&l<o&&(y.length=l),this&&this!==un&&this instanceof b&&(O=m||ya(O)),O.apply(E,y)}return b}function Ma(t,e){return function(n,r){return Vi(n,t,e(r),{})}}function Ea(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Fo(n),r=Fo(r)):(n=Ro(n),r=Ro(r)),i=t(n,r)}return i}}function Oa(t){return Ua(function(e){return e=Cn(e,Jn(Ya())),wo(function(n){var r=this;return t(e,function(t){return wn(t,r,n)})})})}function Sa(t,e){e=e===o?" ":Fo(e);var n=e.length;if(n<2)return n?xo(e,t):e;var r=xo(e,Re(t/mr(e)));return sr(e)?Yo(yr(r),0,t).join(""):r.slice(0,t)}function Ta(t,e,r,i){var o=e&y,a=ya(t);function s(){var e=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==un&&this instanceof s?a:t;while(++c<l)f[c]=i[c];while(u--)f[c++]=arguments[++e];return wn(h,o?r:this,f)}return s}function ja(t){return function(e,n,r){return r&&"number"!=typeof r&&ls(e,n,r)&&(n=r=o),e=Zl(e),n===o?(n=e,e=0):n=Zl(n),r=r===o?e<n?1:-1:Zl(r),bo(e,n,r,t)}}function Aa(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ql(e),n=Ql(n)),t(e,n)}}function Ca(t,e,n,r,i,a,s,u,c,l){var f=e&x,h=f?s:o,p=f?o:s,d=f?a:o,v=f?o:a;e|=f?M:E,e&=~(f?E:M),e&b||(e&=~(y|_));var g=[t,e,i,d,h,v,p,u,c,l],m=n.apply(o,g);return ps(t)&&Ss(m,g),m.placeholder=r,As(m,t,e)}function La(t){var e=ne[t];return function(t,n){if(t=Ql(t),n=null==n?0:Ge(Kl(n),292),n){var r=(ef(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(ef(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}var Pa=nn&&1/pr(new nn([,-0]))[1]==F?function(t){return new nn(t)}:Uh;function Ia(t){return function(e){var n=ts(e);return n==Q?lr(e):n==ot?dr(e):Kn(e,t(e))}}function Ra(t,e,n,r,i,a,s,u){var l=e&_;if(!l&&"function"!=typeof t)throw new ae(c);var f=r?r.length:0;if(f||(e&=~(M|E),r=i=o),s=s===o?s:Ue(Kl(s),0),u=u===o?u:Kl(u),f-=i?i.length:0,e&E){var h=r,p=i;r=i=o}var d=l?o:Ha(t),v=[t,e,n,r,i,h,p,a,s,u];if(d&&bs(v,d),t=v[0],e=v[1],n=v[2],r=v[3],i=v[4],u=v[9]=v[9]===o?l?0:t.length:Ue(v[9]-f,0),!u&&e&(x|w)&&(e&=~(x|w)),e&&e!=y)g=e==x||e==w?_a(t,e,u):e!=M&&e!=(y|M)||i.length?wa.apply(o,v):Ta(t,e,n,r);else var g=va(t,e,n);var m=d?So:Ss;return As(m(g,v),t,e)}function Fa(t,e,n,r){return t===o||al(t,ce[n])&&!he.call(r,n)?e:t}function Da(t,e,n,r,i,a){return Sl(t)&&Sl(e)&&(a.set(e,t),co(t,e,o,Da,a),a["delete"](e)),t}function ka(t){return Dl(t)?o:t}function Na(t,e,n,r,i,a){var s=n&g,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,h=!0,p=n&m?new Kr:o;a.set(t,e),a.set(e,t);while(++f<u){var d=t[f],v=e[f];if(r)var y=s?r(v,d,f,e,t,a):r(d,v,f,t,e,a);if(y!==o){if(y)continue;h=!1;break}if(p){if(!Rn(e,function(t,e){if(!$n(p,e)&&(d===t||i(d,t,n,r,a)))return p.push(e)})){h=!1;break}}else if(d!==v&&!i(d,v,n,r,a)){h=!1;break}}return a["delete"](t),a["delete"](e),h}function Ba(t,e,n,r,i,o,a){switch(n){case ht:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ft:return!(t.byteLength!=e.byteLength||!o(new xe(t),new xe(e)));case W:case Y:case $:return al(+t,+e);case Z:return t.name==e.name&&t.message==e.message;case it:case at:return t==e+"";case Q:var s=lr;case ot:var u=r&g;if(s||(s=pr),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=m,a.set(t,e);var l=Na(s(t),s(e),r,i,o,a);return a["delete"](t),l;case st:if(br)return br.call(t)==br.call(e)}return!1}function za(t,e,n,r,i,a){var s=n&g,u=Ga(t),c=u.length,l=Ga(e),f=l.length;if(c!=f&&!s)return!1;var h=c;while(h--){var p=u[h];if(!(s?p in e:he.call(e,p)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var v=!0;a.set(t,e),a.set(e,t);var m=s;while(++h<c){p=u[h];var y=t[p],_=e[p];if(r)var b=s?r(_,y,p,e,t,a):r(y,_,p,t,e,a);if(!(b===o?y===_||i(y,_,n,r,a):b)){v=!1;break}m||(m="constructor"==p)}if(v&&!m){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(v=!1)}return a["delete"](t),a["delete"](e),v}function Ua(t){return js(Ms(t,o,Ks),t+"")}function Ga(t){return Di(t,Of,Qa)}function Va(t){return Di(t,Sf,$a)}var Ha=cn?function(t){return cn.get(t)}:Uh;function qa(t){var e=t.name+"",n=ln[e],r=he.call(ln,e)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Wa(t){var e=he.call(Mr,"placeholder")?Mr:t;return e.placeholder}function Ya(){var t=Mr.iteratee||Rh;return t=t===Rh?no:t,arguments.length?t(arguments[0],arguments[1]):t}function Xa(t,e){var n=t.__data__;return hs(e)?n["string"==typeof e?"string":"hash"]:n.map}function Za(t){var e=Of(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,ms(i)]}return e}function Ka(t,e){var n=ar(t,e);return Qi(n)?n:o}function Ja(t){var e=he.call(t,Ae),n=t[Ae];try{t[Ae]=o;var r=!0}catch(t){}var i=ve.call(t);return r&&(e?t[Ae]=n:delete t[Ae]),i}var Qa=De?function(t){return null==t?[]:(t=re(t),Tn(De(t),function(e){return Oe.call(t,e)}))}:Kh,$a=De?function(t){var e=[];while(t)Ln(e,Qa(t)),t=Me(t);return e}:Kh,ts=ki;function es(t,e,n){var r=-1,i=n.length;while(++r<i){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ge(e,t+a);break;case"takeRight":t=Ue(t,e-a);break}}return{start:t,end:e}}function ns(t){var e=t.match(Gt);return e?e[1].split(Vt):[]}function rs(t,e,n){e=qo(e,t);var r=-1,i=e.length,o=!1;while(++r<i){var a=Is(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&Ol(i)&&cs(a,i)&&(ll(t)||cl(t)))}function is(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&he.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function os(t){return"function"!=typeof t.constructor||gs(t)?{}:Or(Me(t))}function as(t,e,n,r){var i=t.constructor;switch(e){case ft:return Ko(t);case W:case Y:return new i(+t);case ht:return Jo(t,r);case pt:case dt:case vt:case gt:case mt:case yt:case _t:case bt:case xt:return na(t,r);case Q:return Qo(t,r,n);case $:case at:return new i(t);case it:return $o(t);case ot:return ta(t,r,n);case st:return ea(t)}}function ss(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ut,"{\n/* [wrapped with "+e+"] */\n")}function us(t){return ll(t)||cl(t)||!!(Te&&t&&t[Te])}function cs(t,e){return e=null==e?D:e,!!e&&("number"==typeof t||Qt.test(t))&&t>-1&&t%1==0&&t<e}function ls(t,e,n){if(!Sl(n))return!1;var r=typeof e;return!!("number"==r?hl(n)&&cs(e,n.length):"string"==r&&e in n)&&al(n[e],t)}function fs(t,e){if(ll(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ul(t))||(It.test(t)||!Pt.test(t)||null!=e&&t in re(e))}function hs(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ps(t){var e=qa(t),n=Mr[e];if("function"!=typeof n||!(e in jr.prototype))return!1;if(t===n)return!0;var r=Ha(n);return!!r&&t===r[0]}function ds(t){return!!de&&de in t}($e&&ts(new $e(new ArrayBuffer(1)))!=ht||tn&&ts(new tn)!=Q||en&&ts(en.resolve())!=nt||nn&&ts(new nn)!=ot||an&&ts(new an)!=ct)&&(ts=function(t){var e=ki(t),n=e==et?t.constructor:o,r=n?Rs(n):"";if(r)switch(r){case hn:return ht;case pn:return Q;case Fn:return nt;case Dn:return ot;case qn:return ct}return e});var vs=le?Ml:Jh;function gs(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ce;return t===n}function ms(t){return t===t&&!Sl(t)}function ys(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in re(n)))}}function _s(t){var e=Gc(t,function(t){return n.size===f&&n.clear(),t}),n=e.cache;return e}function bs(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|_|O),a=r==O&&n==x||r==O&&n==S&&t[7].length<=e[8]||r==(O|S)&&e[7].length<=e[8]&&n==x;if(!o&&!a)return t;r&y&&(t[2]=e[2],i|=n&y?0:b);var s=e[3];if(s){var u=t[3];t[3]=u?oa(u,s,e[4]):s,t[4]=u?hr(t[3],h):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?aa(u,s,e[6]):s,t[6]=u?hr(t[5],h):e[6]),s=e[7],s&&(t[7]=s),r&O&&(t[8]=null==t[8]?e[8]:Ge(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function xs(t){var e=[];if(null!=t)for(var n in re(t))e.push(n);return e}function ws(t){return ve.call(t)}function Ms(t,e,r){return e=Ue(e===o?t.length-1:e,0),function(){var i=arguments,o=-1,a=Ue(i.length-e,0),s=n(a);while(++o<a)s[o]=i[e+o];o=-1;var u=n(e+1);while(++o<e)u[o]=i[o];return u[e]=r(s),wn(t,this,u)}}function Es(t,e){return e.length<2?t:Fi(t,Ao(e,0,-1))}function Os(t,e){var n=t.length,r=Ge(e.length,n),i=sa(t);while(r--){var a=e[r];t[r]=cs(a,n)?i[a]:o}return t}var Ss=Cs(So),Ts=Ie||function(t,e){return un.setTimeout(t,e)},js=Cs(To);function As(t,e,n){var r=e+"";return js(t,ss(r,Fs(ns(r),n)))}function Cs(t){var e=0,n=0;return function(){var r=qe(),i=L-(r-n);if(n=r,i>0){if(++e>=C)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ls(t,e){var n=-1,r=t.length,i=r-1;e=e===o?r:e;while(++n<e){var a=_o(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ps=_s(function(t){var e=[];return Rt.test(t)&&e.push(""),t.replace(Ft,function(t,n,r,i){e.push(r?i.replace(qt,"$1"):n||t)}),e});function Is(t){if("string"==typeof t||Ul(t))return t;var e=t+"";return"0"==e&&1/t==-F?"-0":e}function Rs(t){if(null!=t){try{return fe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fs(t,e){return En(G,function(n){var r="_."+n[0];e&n[1]&&!jn(t,r)&&t.push(r)}),t.sort()}function Ds(t){if(t instanceof jr)return t.clone();var e=new Tr(t.__wrapped__,t.__chain__);return e.__actions__=sa(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ks(t,e,r){e=(r?ls(t,e,r):e===o)?1:Ue(Kl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var a=0,s=0,u=n(Re(i/e));while(a<i)u[s++]=Ao(t,a,a+=e);return u}function Ns(t){var e=-1,n=null==t?0:t.length,r=0,i=[];while(++e<n){var o=t[e];o&&(i[r++]=o)}return i}function Bs(){var t=arguments.length;if(!t)return[];var e=n(t-1),r=arguments[0],i=t;while(i--)e[i-1]=arguments[i];return Ln(ll(r)?sa(r):[r],Ai(e,1))}var zs=wo(function(t,e){return pl(t)?wi(t,Ai(e,1,pl,!0)):[]}),Us=wo(function(t,e){var n=su(e);return pl(n)&&(n=o),pl(t)?wi(t,Ai(e,1,pl,!0),Ya(n,2)):[]}),Gs=wo(function(t,e){var n=su(e);return pl(n)&&(n=o),pl(t)?wi(t,Ai(e,1,pl,!0),o,n):[]});function Vs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),Ao(t,e<0?0:e,r)):[]}function Hs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),e=r-e,Ao(t,0,e<0?0:e)):[]}function qs(t,e){return t&&t.length?Bo(t,Ya(e,3),!0,!0):[]}function Ws(t,e){return t&&t.length?Bo(t,Ya(e,3),!0):[]}function Ys(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ls(t,e,n)&&(n=0,r=i),Ti(t,e,n,r)):[]}function Xs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Kl(n);return i<0&&(i=Ue(r+i,0)),Bn(t,Ya(e,3),i)}function Zs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Kl(n),i=n<0?Ue(r+i,0):Ge(i,r-1)),Bn(t,Ya(e,3),i,!0)}function Ks(t){var e=null==t?0:t.length;return e?Ai(t,1):[]}function Js(t){var e=null==t?0:t.length;return e?Ai(t,F):[]}function Qs(t,e){var n=null==t?0:t.length;return n?(e=e===o?1:Kl(e),Ai(t,e)):[]}function $s(t){var e=-1,n=null==t?0:t.length,r={};while(++e<n){var i=t[e];r[i[0]]=i[1]}return r}function tu(t){return t&&t.length?t[0]:o}function eu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Kl(n);return i<0&&(i=Ue(r+i,0)),zn(t,e,i)}function nu(t){var e=null==t?0:t.length;return e?Ao(t,0,-1):[]}var ru=wo(function(t){var e=Cn(t,Vo);return e.length&&e[0]===t[0]?Gi(e):[]}),iu=wo(function(t){var e=su(t),n=Cn(t,Vo);return e===su(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Gi(n,Ya(e,2)):[]}),ou=wo(function(t){var e=su(t),n=Cn(t,Vo);return e="function"==typeof e?e:o,e&&n.pop(),n.length&&n[0]===t[0]?Gi(n,o,e):[]});function au(t,e){return null==t?"":Be.call(t,e)}function su(t){var e=null==t?0:t.length;return e?t[e-1]:o}function uu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=Kl(n),i=i<0?Ue(r+i,0):Ge(i,r-1)),e===e?gr(t,e,i):Bn(t,Gn,i,!0)}function cu(t,e){return t&&t.length?fo(t,Kl(e)):o}var lu=wo(fu);function fu(t,e){return t&&t.length&&e&&e.length?mo(t,e):t}function hu(t,e,n){return t&&t.length&&e&&e.length?mo(t,e,Ya(n,2)):t}function pu(t,e,n){return t&&t.length&&e&&e.length?mo(t,e,o,n):t}var du=Ua(function(t,e){var n=null==t?0:t.length,r=gi(t,e);return yo(t,Cn(e,function(t){return cs(t,n)?+t:t}).sort(ra)),r});function vu(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;e=Ya(e,3);while(++r<o){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return yo(t,i),n}function gu(t){return null==t?t:Xe.call(t)}function mu(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ls(t,e,n)?(e=0,n=r):(e=null==e?0:Kl(e),n=n===o?r:Kl(n)),Ao(t,e,n)):[]}function yu(t,e){return Lo(t,e)}function _u(t,e,n){return Po(t,e,Ya(n,2))}function bu(t,e){var n=null==t?0:t.length;if(n){var r=Lo(t,e);if(r<n&&al(t[r],e))return r}return-1}function xu(t,e){return Lo(t,e,!0)}function wu(t,e,n){return Po(t,e,Ya(n,2),!0)}function Mu(t,e){var n=null==t?0:t.length;if(n){var r=Lo(t,e,!0)-1;if(al(t[r],e))return r}return-1}function Eu(t){return t&&t.length?Io(t):[]}function Ou(t,e){return t&&t.length?Io(t,Ya(e,2)):[]}function Su(t){var e=null==t?0:t.length;return e?Ao(t,1,e):[]}function Tu(t,e,n){return t&&t.length?(e=n||e===o?1:Kl(e),Ao(t,0,e<0?0:e)):[]}function ju(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),e=r-e,Ao(t,e<0?0:e,r)):[]}function Au(t,e){return t&&t.length?Bo(t,Ya(e,3),!1,!0):[]}function Cu(t,e){return t&&t.length?Bo(t,Ya(e,3)):[]}var Lu=wo(function(t){return Do(Ai(t,1,pl,!0))}),Pu=wo(function(t){var e=su(t);return pl(e)&&(e=o),Do(Ai(t,1,pl,!0),Ya(e,2))}),Iu=wo(function(t){var e=su(t);return e="function"==typeof e?e:o,Do(Ai(t,1,pl,!0),o,e)});function Ru(t){return t&&t.length?Do(t):[]}function Fu(t,e){return t&&t.length?Do(t,Ya(e,2)):[]}function Du(t,e){return e="function"==typeof e?e:o,t&&t.length?Do(t,o,e):[]}function ku(t){if(!t||!t.length)return[];var e=0;return t=Tn(t,function(t){if(pl(t))return e=Ue(t.length,e),!0}),Zn(e,function(e){return Cn(t,Hn(e))})}function Nu(t,e){if(!t||!t.length)return[];var n=ku(t);return null==e?n:Cn(n,function(t){return wn(e,o,t)})}var Bu=wo(function(t,e){return pl(t)?wi(t,e):[]}),zu=wo(function(t){return Uo(Tn(t,pl))}),Uu=wo(function(t){var e=su(t);return pl(e)&&(e=o),Uo(Tn(t,pl),Ya(e,2))}),Gu=wo(function(t){var e=su(t);return e="function"==typeof e?e:o,Uo(Tn(t,pl),o,e)}),Vu=wo(ku);function Hu(t,e){return Go(t||[],e||[],li)}function qu(t,e){return Go(t||[],e||[],Oo)}var Wu=wo(function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,Nu(t,n)});function Yu(t){var e=Mr(t);return e.__chain__=!0,e}function Xu(t,e){return e(t),t}function Zu(t,e){return e(t)}var Ku=Ua(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return gi(e,t)};return!(e>1||this.__actions__.length)&&r instanceof jr&&cs(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Zu,args:[i],thisArg:o}),new Tr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});function Ju(){return Yu(this)}function Qu(){return new Tr(this.value(),this.__chain__)}function $u(){this.__values__===o&&(this.__values__=Xl(this.value()));var t=this.__index__>=this.__values__.length,e=t?o:this.__values__[this.__index__++];return{done:t,value:e}}function tc(){return this}function ec(t){var e,n=this;while(n instanceof Sr){var r=Ds(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function nc(){var t=this.__wrapped__;if(t instanceof jr){var e=t;return this.__actions__.length&&(e=new jr(this)),e=e.reverse(),e.__actions__.push({func:Zu,args:[gu],thisArg:o}),new Tr(e,this.__chain__)}return this.thru(gu)}function rc(){return zo(this.__wrapped__,this.__actions__)}var ic=fa(function(t,e,n){he.call(t,n)?++t[n]:vi(t,n,1)});function oc(t,e,n){var r=ll(t)?Sn:Oi;return n&&ls(t,e,n)&&(e=o),r(t,Ya(e,3))}function ac(t,e){var n=ll(t)?Tn:ji;return n(t,Ya(e,3))}var sc=ba(Xs),uc=ba(Zs);function cc(t,e){return Ai(yc(t,e),1)}function lc(t,e){return Ai(yc(t,e),F)}function fc(t,e,n){return n=n===o?1:Kl(n),Ai(yc(t,e),n)}function hc(t,e){var n=ll(t)?En:Mi;return n(t,Ya(e,3))}function pc(t,e){var n=ll(t)?On:Ei;return n(t,Ya(e,3))}var dc=fa(function(t,e,n){he.call(t,n)?t[n].push(e):vi(t,n,[e])});function vc(t,e,n,r){t=hl(t)?t:Hf(t),n=n&&!r?Kl(n):0;var i=t.length;return n<0&&(n=Ue(i+n,0)),zl(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&zn(t,e,n)>-1}var gc=wo(function(t,e,r){var i=-1,o="function"==typeof e,a=hl(t)?n(t.length):[];return Mi(t,function(t){a[++i]=o?wn(e,t,r):Hi(t,e,r)}),a}),mc=fa(function(t,e,n){vi(t,n,e)});function yc(t,e){var n=ll(t)?Cn:ao;return n(t,Ya(e,3))}function _c(t,e,n,r){return null==t?[]:(ll(e)||(e=null==e?[]:[e]),n=r?o:n,ll(n)||(n=null==n?[]:[n]),ho(t,e,n))}var bc=fa(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function xc(t,e,n){var r=ll(t)?Pn:Wn,i=arguments.length<3;return r(t,Ya(e,4),n,i,Mi)}function wc(t,e,n){var r=ll(t)?In:Wn,i=arguments.length<3;return r(t,Ya(e,4),n,i,Ei)}function Mc(t,e){var n=ll(t)?Tn:ji;return n(t,Vc(Ya(e,3)))}function Ec(t){var e=ll(t)?ai:Mo;return e(t)}function Oc(t,e,n){e=(n?ls(t,e,n):e===o)?1:Kl(e);var r=ll(t)?si:Eo;return r(t,e)}function Sc(t){var e=ll(t)?ui:jo;return e(t)}function Tc(t){if(null==t)return 0;if(hl(t))return zl(t)?mr(t):t.length;var e=ts(t);return e==Q||e==ot?t.size:ro(t).length}function jc(t,e,n){var r=ll(t)?Rn:Co;return n&&ls(t,e,n)&&(e=o),r(t,Ya(e,3))}var Ac=wo(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ls(t,e[0],e[1])?e=[]:n>2&&ls(e[0],e[1],e[2])&&(e=[e[0]]),ho(t,Ai(e,1),[])}),Cc=Pe||function(){return un.Date.now()};function Lc(t,e){if("function"!=typeof e)throw new ae(c);return t=Kl(t),function(){if(--t<1)return e.apply(this,arguments)}}function Pc(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Ra(t,O,o,o,o,o,e)}function Ic(t,e){var n;if("function"!=typeof e)throw new ae(c);return t=Kl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Rc=wo(function(t,e,n){var r=y;if(n.length){var i=hr(n,Wa(Rc));r|=M}return Ra(t,r,e,n,i)}),Fc=wo(function(t,e,n){var r=y|_;if(n.length){var i=hr(n,Wa(Fc));r|=M}return Ra(e,r,t,n,i)});function Dc(t,e,n){e=n?o:e;var r=Ra(t,x,o,o,o,o,o,e);return r.placeholder=Dc.placeholder,r}function kc(t,e,n){e=n?o:e;var r=Ra(t,w,o,o,o,o,o,e);return r.placeholder=kc.placeholder,r}function Nc(t,e,n){var r,i,a,s,u,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new ae(c);function v(e){var n=r,a=i;return r=i=o,f=e,s=t.apply(a,n),s}function g(t){return f=t,u=Ts(_,e),h?v(t):s}function m(t){var n=t-l,r=t-f,i=e-n;return p?Ge(i,a-r):i}function y(t){var n=t-l,r=t-f;return l===o||n>=e||n<0||p&&r>=a}function _(){var t=Cc();if(y(t))return b(t);u=Ts(_,m(t))}function b(t){return u=o,d&&r?v(t):(r=i=o,s)}function x(){u!==o&&Xo(u),f=0,r=l=i=u=o}function w(){return u===o?s:b(Cc())}function M(){var t=Cc(),n=y(t);if(r=arguments,i=this,l=t,n){if(u===o)return g(l);if(p)return u=Ts(_,e),v(l)}return u===o&&(u=Ts(_,e)),s}return e=Ql(e)||0,Sl(n)&&(h=!!n.leading,p="maxWait"in n,a=p?Ue(Ql(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),M.cancel=x,M.flush=w,M}var Bc=wo(function(t,e){return xi(t,1,e)}),zc=wo(function(t,e,n){return xi(t,Ql(e)||0,n)});function Uc(t){return Ra(t,T)}function Gc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ae(c);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Gc.Cache||Hr),n}function Vc(t){if("function"!=typeof t)throw new ae(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Hc(t){return Ic(2,t)}Gc.Cache=Hr;var qc=Wo(function(t,e){e=1==e.length&&ll(e[0])?Cn(e[0],Jn(Ya())):Cn(Ai(e,1),Jn(Ya()));var n=e.length;return wo(function(r){var i=-1,o=Ge(r.length,n);while(++i<o)r[i]=e[i].call(this,r[i]);return wn(t,this,r)})}),Wc=wo(function(t,e){var n=hr(e,Wa(Wc));return Ra(t,M,o,e,n)}),Yc=wo(function(t,e){var n=hr(e,Wa(Yc));return Ra(t,E,o,e,n)}),Xc=Ua(function(t,e){return Ra(t,S,o,o,o,e)});function Zc(t,e){if("function"!=typeof t)throw new ae(c);return e=e===o?e:Kl(e),wo(t,e)}function Kc(t,e){if("function"!=typeof t)throw new ae(c);return e=null==e?0:Ue(Kl(e),0),wo(function(n){var r=n[e],i=Yo(n,0,e);return r&&Ln(i,r),wn(t,this,i)})}function Jc(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ae(c);return Sl(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Nc(t,e,{leading:r,maxWait:e,trailing:i})}function Qc(t){return Pc(t,1)}function $c(t,e){return Wc(Ho(e),t)}function tl(){if(!arguments.length)return[];var t=arguments[0];return ll(t)?t:[t]}function el(t){return yi(t,v)}function nl(t,e){return e="function"==typeof e?e:o,yi(t,v,e)}function rl(t){return yi(t,p|v)}function il(t,e){return e="function"==typeof e?e:o,yi(t,p|v,e)}function ol(t,e){return null==e||bi(t,e,Of(e))}function al(t,e){return t===e||t!==t&&e!==e}var sl=Aa(Ni),ul=Aa(function(t,e){return t>=e}),cl=qi(function(){return arguments}())?qi:function(t){return Tl(t)&&he.call(t,"callee")&&!Oe.call(t,"callee")},ll=n.isArray,fl=dn?Jn(dn):Wi;function hl(t){return null!=t&&Ol(t.length)&&!Ml(t)}function pl(t){return Tl(t)&&hl(t)}function dl(t){return!0===t||!1===t||Tl(t)&&ki(t)==W}var vl=ke||Jh,gl=vn?Jn(vn):Yi;function ml(t){return Tl(t)&&1===t.nodeType&&!Dl(t)}function yl(t){if(null==t)return!0;if(hl(t)&&(ll(t)||"string"==typeof t||"function"==typeof t.splice||vl(t)||Gl(t)||cl(t)))return!t.length;var e=ts(t);if(e==Q||e==ot)return!t.size;if(gs(t))return!ro(t).length;for(var n in t)if(he.call(t,n))return!1;return!0}function _l(t,e){return Xi(t,e)}function bl(t,e,n){n="function"==typeof n?n:o;var r=n?n(t,e):o;return r===o?Xi(t,e,o,n):!!r}function xl(t){if(!Tl(t))return!1;var e=ki(t);return e==Z||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Dl(t)}function wl(t){return"number"==typeof t&&Ne(t)}function Ml(t){if(!Sl(t))return!1;var e=ki(t);return e==K||e==J||e==q||e==rt}function El(t){return"number"==typeof t&&t==Kl(t)}function Ol(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function Sl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Tl(t){return null!=t&&"object"==typeof t}var jl=gn?Jn(gn):Ki;function Al(t,e){return t===e||Ji(t,e,Za(e))}function Cl(t,e,n){return n="function"==typeof n?n:o,Ji(t,e,Za(e),n)}function Ll(t){return Fl(t)&&t!=+t}function Pl(t){if(vs(t))throw new i(u);return Qi(t)}function Il(t){return null===t}function Rl(t){return null==t}function Fl(t){return"number"==typeof t||Tl(t)&&ki(t)==$}function Dl(t){if(!Tl(t)||ki(t)!=et)return!1;var e=Me(t);if(null===e)return!0;var n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&fe.call(n)==ge}var kl=mn?Jn(mn):$i;function Nl(t){return El(t)&&t>=-D&&t<=D}var Bl=yn?Jn(yn):to;function zl(t){return"string"==typeof t||!ll(t)&&Tl(t)&&ki(t)==at}function Ul(t){return"symbol"==typeof t||Tl(t)&&ki(t)==st}var Gl=_n?Jn(_n):eo;function Vl(t){return t===o}function Hl(t){return Tl(t)&&ts(t)==ct}function ql(t){return Tl(t)&&ki(t)==lt}var Wl=Aa(oo),Yl=Aa(function(t,e){return t<=e});function Xl(t){if(!t)return[];if(hl(t))return zl(t)?yr(t):sa(t);if(je&&t[je])return cr(t[je]());var e=ts(t),n=e==Q?lr:e==ot?pr:Hf;return n(t)}function Zl(t){if(!t)return 0===t?t:0;if(t=Ql(t),t===F||t===-F){var e=t<0?-1:1;return e*k}return t===t?t:0}function Kl(t){var e=Zl(t),n=e%1;return e===e?n?e-n:e:0}function Jl(t){return t?mi(Kl(t),0,B):0}function Ql(t){if("number"==typeof t)return t;if(Ul(t))return N;if(Sl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Nt,"");var n=Zt.test(t);return n||Jt.test(t)?on(t.slice(2),n?2:8):Xt.test(t)?N:+t}function $l(t){return ua(t,Sf(t))}function tf(t){return t?mi(Kl(t),-D,D):0===t?t:0}function ef(t){return null==t?"":Fo(t)}var nf=ha(function(t,e){if(gs(e)||hl(e))ua(e,Of(e),t);else for(var n in e)he.call(e,n)&&li(t,n,e[n])}),rf=ha(function(t,e){ua(e,Sf(e),t)}),of=ha(function(t,e,n,r){ua(e,Sf(e),t,r)}),af=ha(function(t,e,n,r){ua(e,Of(e),t,r)}),sf=Ua(gi);function uf(t,e){var n=Or(t);return null==e?n:pi(n,e)}var cf=wo(function(t){return t.push(o,Fa),wn(of,o,t)}),lf=wo(function(t){return t.push(o,Da),wn(Cf,o,t)});function ff(t,e){return Nn(t,Ya(e,3),Pi)}function hf(t,e){return Nn(t,Ya(e,3),Ii)}function pf(t,e){return null==t?t:Ci(t,Ya(e,3),Sf)}function df(t,e){return null==t?t:Li(t,Ya(e,3),Sf)}function vf(t,e){return t&&Pi(t,Ya(e,3))}function gf(t,e){return t&&Ii(t,Ya(e,3))}function mf(t){return null==t?[]:Ri(t,Of(t))}function yf(t){return null==t?[]:Ri(t,Sf(t))}function _f(t,e,n){var r=null==t?o:Fi(t,e);return r===o?n:r}function bf(t,e){return null!=t&&rs(t,e,Bi)}function xf(t,e){return null!=t&&rs(t,e,zi)}var wf=Ma(function(t,e,n){t[e]=n},Ah(Ih)),Mf=Ma(function(t,e,n){he.call(t,e)?t[e].push(n):t[e]=[n]},Ya),Ef=wo(Hi);function Of(t){return hl(t)?oi(t):ro(t)}function Sf(t){return hl(t)?oi(t,!0):io(t)}function Tf(t,e){var n={};return e=Ya(e,3),Pi(t,function(t,r,i){vi(n,e(t,r,i),t)}),n}function jf(t,e){var n={};return e=Ya(e,3),Pi(t,function(t,r,i){vi(n,r,e(t,r,i))}),n}var Af=ha(function(t,e,n){co(t,e,n)}),Cf=ha(function(t,e,n,r){co(t,e,n,r)}),Lf=Ua(function(t,e){var n={};if(null==t)return n;var r=!1;e=Cn(e,function(e){return e=qo(e,t),r||(r=e.length>1),e}),ua(t,Va(t),n),r&&(n=yi(n,p|d|v,ka));var i=e.length;while(i--)ko(n,e[i]);return n});function Pf(t,e){return Rf(t,Vc(Ya(e)))}var If=Ua(function(t,e){return null==t?{}:po(t,e)});function Rf(t,e){if(null==t)return{};var n=Cn(Va(t),function(t){return[t]});return e=Ya(e),vo(t,n,function(t,n){return e(t,n[0])})}function Ff(t,e,n){e=qo(e,t);var r=-1,i=e.length;i||(i=1,t=o);while(++r<i){var a=null==t?o:t[Is(e[r])];a===o&&(r=i,a=n),t=Ml(a)?a.call(t):a}return t}function Df(t,e,n){return null==t?t:Oo(t,e,n)}function kf(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Oo(t,e,n,r)}var Nf=Ia(Of),Bf=Ia(Sf);function zf(t,e,n){var r=ll(t),i=r||vl(t)||Gl(t);if(e=Ya(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Sl(t)&&Ml(o)?Or(Me(t)):{}}return(i?En:Pi)(t,function(t,r,i){return e(n,t,r,i)}),n}function Uf(t,e){return null==t||ko(t,e)}function Gf(t,e,n){return null==t?t:No(t,e,Ho(n))}function Vf(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:No(t,e,Ho(n),r)}function Hf(t){return null==t?[]:Qn(t,Of(t))}function qf(t){return null==t?[]:Qn(t,Sf(t))}function Wf(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=Ql(n),n=n===n?n:0),e!==o&&(e=Ql(e),e=e===e?e:0),mi(Ql(t),e,n)}function Yf(t,e,n){return e=Zl(e),n===o?(n=e,e=0):n=Zl(n),t=Ql(t),Ui(t,e,n)}function Xf(t,e,n){if(n&&"boolean"!=typeof n&&ls(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Zl(t),e===o?(e=t,t=0):e=Zl(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Ye();return Ge(t+i*(e-t+rn("1e-"+((i+"").length-1))),e)}return _o(t,e)}var Zf=ma(function(t,e,n){return e=e.toLowerCase(),t+(n?Kf(e):e)});function Kf(t){return Mh(ef(t).toLowerCase())}function Jf(t){return t=ef(t),t&&t.replace($t,rr).replace(He,"")}function Qf(t,e,n){t=ef(t),e=Fo(e);var r=t.length;n=n===o?r:mi(Kl(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function $f(t){return t=ef(t),t&&jt.test(t)?t.replace(St,ir):t}function th(t){return t=ef(t),t&&kt.test(t)?t.replace(Dt,"\\$&"):t}var eh=ma(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),nh=ma(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),rh=ga("toLowerCase");function ih(t,e,n){t=ef(t),e=Kl(e);var r=e?mr(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Sa(Fe(i),n)+t+Sa(Re(i),n)}function oh(t,e,n){t=ef(t),e=Kl(e);var r=e?mr(t):0;return e&&r<e?t+Sa(e-r,n):t}function ah(t,e,n){t=ef(t),e=Kl(e);var r=e?mr(t):0;return e&&r<e?Sa(e-r,n)+t:t}function sh(t,e,n){return n||null==e?e=0:e&&(e=+e),We(ef(t).replace(Bt,""),e||0)}function uh(t,e,n){return e=(n?ls(t,e,n):e===o)?1:Kl(e),xo(ef(t),e)}function ch(){var t=arguments,e=ef(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var lh=ma(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function fh(t,e,n){return n&&"number"!=typeof n&&ls(t,e,n)&&(e=n=o),n=n===o?B:n>>>0,n?(t=ef(t),t&&("string"==typeof e||null!=e&&!kl(e))&&(e=Fo(e),!e&&sr(t))?Yo(yr(t),0,n):t.split(e,n)):[]}var hh=ma(function(t,e,n){return t+(n?" ":"")+Mh(e)});function ph(t,e,n){return t=ef(t),n=null==n?0:mi(Kl(n),0,t.length),e=Fo(e),t.slice(n,n+e.length)==e}function dh(t,e,n){var r=Mr.templateSettings;n&&ls(t,e,n)&&(e=o),t=ef(t),e=of({},e,r,Fa);var i,a,s=of({},e.imports,r.imports,Fa),u=Of(s),c=Qn(s,u),l=0,f=e.interpolate||te,h="__p += '",p=ie((e.escape||te).source+"|"+f.source+"|"+(f===Lt?Wt:te).source+"|"+(e.evaluate||te).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ke+"]")+"\n";t.replace(p,function(e,n,r,o,s,u){return r||(r=o),h+=t.slice(l,u).replace(ee,or),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(wt,""):h).replace(Mt,"$1").replace(Et,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Oh(function(){return Ht(u,d+"return "+h).apply(o,c)});if(g.source=h,xl(g))throw g;return g}function vh(t){return ef(t).toLowerCase()}function gh(t){return ef(t).toUpperCase()}function mh(t,e,n){if(t=ef(t),t&&(n||e===o))return t.replace(Nt,"");if(!t||!(e=Fo(e)))return t;var r=yr(t),i=yr(e),a=tr(r,i),s=er(r,i)+1;return Yo(r,a,s).join("")}function yh(t,e,n){if(t=ef(t),t&&(n||e===o))return t.replace(zt,"");if(!t||!(e=Fo(e)))return t;var r=yr(t),i=er(r,yr(e))+1;return Yo(r,0,i).join("")}function _h(t,e,n){if(t=ef(t),t&&(n||e===o))return t.replace(Bt,"");if(!t||!(e=Fo(e)))return t;var r=yr(t),i=tr(r,yr(e));return Yo(r,i).join("")}function bh(t,e){var n=j,r=A;if(Sl(e)){var i="separator"in e?e.separator:i;n="length"in e?Kl(e.length):n,r="omission"in e?Fo(e.omission):r}t=ef(t);var a=t.length;if(sr(t)){var s=yr(t);a=s.length}if(n>=a)return t;var u=n-mr(r);if(u<1)return r;var c=s?Yo(s,0,u).join(""):t.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),kl(i)){if(t.slice(u).search(i)){var l,f=c;i.global||(i=ie(i.source,ef(Yt.exec(i))+"g")),i.lastIndex=0;while(l=i.exec(f))var h=l.index;c=c.slice(0,h===o?u:h)}}else if(t.indexOf(Fo(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r}function xh(t){return t=ef(t),t&&Tt.test(t)?t.replace(Ot,_r):t}var wh=ma(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Mh=ga("toUpperCase");function Eh(t,e,n){return t=ef(t),e=n?o:e,e===o?ur(t)?wr(t):kn(t):t.match(e)||[]}var Oh=wo(function(t,e){try{return wn(t,o,e)}catch(t){return xl(t)?t:new i(t)}}),Sh=Ua(function(t,e){return En(e,function(e){e=Is(e),vi(t,e,Rc(t[e],t))}),t});function Th(t){var e=null==t?0:t.length,n=Ya();return t=e?Cn(t,function(t){if("function"!=typeof t[1])throw new ae(c);return[n(t[0]),t[1]]}):[],wo(function(n){var r=-1;while(++r<e){var i=t[r];if(wn(i[0],this,n))return wn(i[1],this,n)}})}function jh(t){return _i(yi(t,p))}function Ah(t){return function(){return t}}function Ch(t,e){return null==t||t!==t?e:t}var Lh=xa(),Ph=xa(!0);function Ih(t){return t}function Rh(t){return no("function"==typeof t?t:yi(t,p))}function Fh(t){return so(yi(t,p))}function Dh(t,e){return uo(t,yi(e,p))}var kh=wo(function(t,e){return function(n){return Hi(n,t,e)}}),Nh=wo(function(t,e){return function(n){return Hi(t,n,e)}});function Bh(t,e,n){var r=Of(e),i=Ri(e,r);null!=n||Sl(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Ri(e,Of(e)));var o=!(Sl(n)&&"chain"in n)||!!n.chain,a=Ml(t);return En(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=sa(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ln([this.value()],arguments))})}),t}function zh(){return un._===this&&(un._=me),this}function Uh(){}function Gh(t){return t=Kl(t),wo(function(e){return fo(e,t)})}var Vh=Oa(Cn),Hh=Oa(Sn),qh=Oa(Rn);function Wh(t){return fs(t)?Hn(Is(t)):go(t)}function Yh(t){return function(e){return null==t?o:Fi(t,e)}}var Xh=ja(),Zh=ja(!0);function Kh(){return[]}function Jh(){return!1}function Qh(){return{}}function $h(){return""}function tp(){return!0}function ep(t,e){if(t=Kl(t),t<1||t>D)return[];var n=B,r=Ge(t,B);e=Ya(e),t-=B;var i=Zn(r,e);while(++n<t)e(n);return i}function np(t){return ll(t)?Cn(t,Is):Ul(t)?[t]:sa(Ps(ef(t)))}function rp(t){var e=++pe;return ef(t)+e}var ip=Ea(function(t,e){return t+e},0),op=La("ceil"),ap=Ea(function(t,e){return t/e},1),sp=La("floor");function up(t){return t&&t.length?Si(t,Ih,Ni):o}function cp(t,e){return t&&t.length?Si(t,Ya(e,2),Ni):o}function lp(t){return Vn(t,Ih)}function fp(t,e){return Vn(t,Ya(e,2))}function hp(t){return t&&t.length?Si(t,Ih,oo):o}function pp(t,e){return t&&t.length?Si(t,Ya(e,2),oo):o}var dp=Ea(function(t,e){return t*e},1),vp=La("round"),gp=Ea(function(t,e){return t-e},0);function mp(t){return t&&t.length?Xn(t,Ih):0}function yp(t,e){return t&&t.length?Xn(t,Ya(e,2)):0}return Mr.after=Lc,Mr.ary=Pc,Mr.assign=nf,Mr.assignIn=rf,Mr.assignInWith=of,Mr.assignWith=af,Mr.at=sf,Mr.before=Ic,Mr.bind=Rc,Mr.bindAll=Sh,Mr.bindKey=Fc,Mr.castArray=tl,Mr.chain=Yu,Mr.chunk=ks,Mr.compact=Ns,Mr.concat=Bs,Mr.cond=Th,Mr.conforms=jh,Mr.constant=Ah,Mr.countBy=ic,Mr.create=uf,Mr.curry=Dc,Mr.curryRight=kc,Mr.debounce=Nc,Mr.defaults=cf,Mr.defaultsDeep=lf,Mr.defer=Bc,Mr.delay=zc,Mr.difference=zs,Mr.differenceBy=Us,Mr.differenceWith=Gs,Mr.drop=Vs,Mr.dropRight=Hs,Mr.dropRightWhile=qs,Mr.dropWhile=Ws,Mr.fill=Ys,Mr.filter=ac,Mr.flatMap=cc,Mr.flatMapDeep=lc,Mr.flatMapDepth=fc,Mr.flatten=Ks,Mr.flattenDeep=Js,Mr.flattenDepth=Qs,Mr.flip=Uc,Mr.flow=Lh,Mr.flowRight=Ph,Mr.fromPairs=$s,Mr.functions=mf,Mr.functionsIn=yf,Mr.groupBy=dc,Mr.initial=nu,Mr.intersection=ru,Mr.intersectionBy=iu,Mr.intersectionWith=ou,Mr.invert=wf,Mr.invertBy=Mf,Mr.invokeMap=gc,Mr.iteratee=Rh,Mr.keyBy=mc,Mr.keys=Of,Mr.keysIn=Sf,Mr.map=yc,Mr.mapKeys=Tf,Mr.mapValues=jf,Mr.matches=Fh,Mr.matchesProperty=Dh,Mr.memoize=Gc,Mr.merge=Af,Mr.mergeWith=Cf,Mr.method=kh,Mr.methodOf=Nh,Mr.mixin=Bh,Mr.negate=Vc,Mr.nthArg=Gh,Mr.omit=Lf,Mr.omitBy=Pf,Mr.once=Hc,Mr.orderBy=_c,Mr.over=Vh,Mr.overArgs=qc,Mr.overEvery=Hh,Mr.overSome=qh,Mr.partial=Wc,Mr.partialRight=Yc,Mr.partition=bc,Mr.pick=If,Mr.pickBy=Rf,Mr.property=Wh,Mr.propertyOf=Yh,Mr.pull=lu,Mr.pullAll=fu,Mr.pullAllBy=hu,Mr.pullAllWith=pu,Mr.pullAt=du,Mr.range=Xh,Mr.rangeRight=Zh,Mr.rearg=Xc,Mr.reject=Mc,Mr.remove=vu,Mr.rest=Zc,Mr.reverse=gu,Mr.sampleSize=Oc,Mr.set=Df,Mr.setWith=kf,Mr.shuffle=Sc,Mr.slice=mu,Mr.sortBy=Ac,Mr.sortedUniq=Eu,Mr.sortedUniqBy=Ou,Mr.split=fh,Mr.spread=Kc,Mr.tail=Su,Mr.take=Tu,Mr.takeRight=ju,Mr.takeRightWhile=Au,Mr.takeWhile=Cu,Mr.tap=Xu,Mr.throttle=Jc,Mr.thru=Zu,Mr.toArray=Xl,Mr.toPairs=Nf,Mr.toPairsIn=Bf,Mr.toPath=np,Mr.toPlainObject=$l,Mr.transform=zf,Mr.unary=Qc,Mr.union=Lu,Mr.unionBy=Pu,Mr.unionWith=Iu,Mr.uniq=Ru,Mr.uniqBy=Fu,Mr.uniqWith=Du,Mr.unset=Uf,Mr.unzip=ku,Mr.unzipWith=Nu,Mr.update=Gf,Mr.updateWith=Vf,Mr.values=Hf,Mr.valuesIn=qf,Mr.without=Bu,Mr.words=Eh,Mr.wrap=$c,Mr.xor=zu,Mr.xorBy=Uu,Mr.xorWith=Gu,Mr.zip=Vu,Mr.zipObject=Hu,Mr.zipObjectDeep=qu,Mr.zipWith=Wu,Mr.entries=Nf,Mr.entriesIn=Bf,Mr.extend=rf,Mr.extendWith=of,Bh(Mr,Mr),Mr.add=ip,Mr.attempt=Oh,Mr.camelCase=Zf,Mr.capitalize=Kf,Mr.ceil=op,Mr.clamp=Wf,Mr.clone=el,Mr.cloneDeep=rl,Mr.cloneDeepWith=il,Mr.cloneWith=nl,Mr.conformsTo=ol,Mr.deburr=Jf,Mr.defaultTo=Ch,Mr.divide=ap,Mr.endsWith=Qf,Mr.eq=al,Mr.escape=$f,Mr.escapeRegExp=th,Mr.every=oc,Mr.find=sc,Mr.findIndex=Xs,Mr.findKey=ff,Mr.findLast=uc,Mr.findLastIndex=Zs,Mr.findLastKey=hf,Mr.floor=sp,Mr.forEach=hc,Mr.forEachRight=pc,Mr.forIn=pf,Mr.forInRight=df,Mr.forOwn=vf,Mr.forOwnRight=gf,Mr.get=_f,Mr.gt=sl,Mr.gte=ul,Mr.has=bf,Mr.hasIn=xf,Mr.head=tu,Mr.identity=Ih,Mr.includes=vc,Mr.indexOf=eu,Mr.inRange=Yf,Mr.invoke=Ef,Mr.isArguments=cl,Mr.isArray=ll,Mr.isArrayBuffer=fl,Mr.isArrayLike=hl,Mr.isArrayLikeObject=pl,Mr.isBoolean=dl,Mr.isBuffer=vl,Mr.isDate=gl,Mr.isElement=ml,Mr.isEmpty=yl,Mr.isEqual=_l,Mr.isEqualWith=bl,Mr.isError=xl,Mr.isFinite=wl,Mr.isFunction=Ml,Mr.isInteger=El,Mr.isLength=Ol,Mr.isMap=jl,Mr.isMatch=Al,Mr.isMatchWith=Cl,Mr.isNaN=Ll,Mr.isNative=Pl,Mr.isNil=Rl,Mr.isNull=Il,Mr.isNumber=Fl,Mr.isObject=Sl,Mr.isObjectLike=Tl,Mr.isPlainObject=Dl,Mr.isRegExp=kl,Mr.isSafeInteger=Nl,Mr.isSet=Bl,Mr.isString=zl,Mr.isSymbol=Ul,Mr.isTypedArray=Gl,Mr.isUndefined=Vl,Mr.isWeakMap=Hl,Mr.isWeakSet=ql,Mr.join=au,Mr.kebabCase=eh,Mr.last=su,Mr.lastIndexOf=uu,Mr.lowerCase=nh,Mr.lowerFirst=rh,Mr.lt=Wl,Mr.lte=Yl,Mr.max=up,Mr.maxBy=cp,Mr.mean=lp,Mr.meanBy=fp,Mr.min=hp,Mr.minBy=pp,Mr.stubArray=Kh,Mr.stubFalse=Jh,Mr.stubObject=Qh,Mr.stubString=$h,Mr.stubTrue=tp,Mr.multiply=dp,Mr.nth=cu,Mr.noConflict=zh,Mr.noop=Uh,Mr.now=Cc,Mr.pad=ih,Mr.padEnd=oh,Mr.padStart=ah,Mr.parseInt=sh,Mr.random=Xf,Mr.reduce=xc,Mr.reduceRight=wc,Mr.repeat=uh,Mr.replace=ch,Mr.result=Ff,Mr.round=vp,Mr.runInContext=t,Mr.sample=Ec,Mr.size=Tc,Mr.snakeCase=lh,Mr.some=jc,Mr.sortedIndex=yu,Mr.sortedIndexBy=_u,Mr.sortedIndexOf=bu,Mr.sortedLastIndex=xu,Mr.sortedLastIndexBy=wu,Mr.sortedLastIndexOf=Mu,Mr.startCase=hh,Mr.startsWith=ph,Mr.subtract=gp,Mr.sum=mp,Mr.sumBy=yp,Mr.template=dh,Mr.times=ep,Mr.toFinite=Zl,Mr.toInteger=Kl,Mr.toLength=Jl,Mr.toLower=vh,Mr.toNumber=Ql,Mr.toSafeInteger=tf,Mr.toString=ef,Mr.toUpper=gh,Mr.trim=mh,Mr.trimEnd=yh,Mr.trimStart=_h,Mr.truncate=bh,Mr.unescape=xh,Mr.uniqueId=rp,Mr.upperCase=wh,Mr.upperFirst=Mh,Mr.each=hc,Mr.eachRight=pc,Mr.first=tu,Bh(Mr,function(){var t={};return Pi(Mr,function(e,n){he.call(Mr.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Mr.VERSION=a,En(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Mr[t].placeholder=Mr}),En(["drop","take"],function(t,e){jr.prototype[t]=function(n){n=n===o?1:Ue(Kl(n),0);var r=this.__filtered__&&!e?new jr(this):this.clone();return r.__filtered__?r.__takeCount__=Ge(n,r.__takeCount__):r.__views__.push({size:Ge(n,B),type:t+(r.__dir__<0?"Right":"")}),r},jr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),En(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==P||n==R;jr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ya(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),En(["head","last"],function(t,e){var n="take"+(e?"Right":"");jr.prototype[t]=function(){return this[n](1).value()[0]}}),En(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");jr.prototype[t]=function(){return this.__filtered__?new jr(this):this[n](1)}}),jr.prototype.compact=function(){return this.filter(Ih)},jr.prototype.find=function(t){return this.filter(t).head()},jr.prototype.findLast=function(t){return this.reverse().find(t)},jr.prototype.invokeMap=wo(function(t,e){return"function"==typeof t?new jr(this):this.map(function(n){return Hi(n,t,e)})}),jr.prototype.reject=function(t){return this.filter(Vc(Ya(t)))},jr.prototype.slice=function(t,e){t=Kl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new jr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(e=Kl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},jr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},jr.prototype.toArray=function(){return this.take(B)},Pi(jr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Mr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(Mr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof jr,c=s[0],l=u||ll(e),f=function(t){var e=i.apply(Mr,Ln([t],s));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,v=u&&!p;if(!a&&l){e=v?e:new jr(this);var g=t.apply(e,s);return g.__actions__.push({func:Zu,args:[f],thisArg:o}),new Tr(g,h)}return d&&v?t.apply(this,s):(g=this.thru(f),d?r?g.value()[0]:g.value():g)})}),En(["pop","push","shift","sort","splice","unshift"],function(t){var e=se[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Mr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ll(i)?i:[],t)}return this[n](function(n){return e.apply(ll(n)?n:[],t)})}}),Pi(jr.prototype,function(t,e){var n=Mr[e];if(n){var r=n.name+"",i=ln[r]||(ln[r]=[]);i.push({name:e,func:n})}}),ln[wa(o,_).name]=[{name:"wrapper",func:o}],jr.prototype.clone=Ar,jr.prototype.reverse=Cr,jr.prototype.value=Lr,Mr.prototype.at=Ku,Mr.prototype.chain=Ju,Mr.prototype.commit=Qu,Mr.prototype.next=$u,Mr.prototype.plant=ec,Mr.prototype.reverse=nc,Mr.prototype.toJSON=Mr.prototype.valueOf=Mr.prototype.value=rc,Mr.prototype.first=Mr.prototype.head,je&&(Mr.prototype[je]=tc),Mr},Er=Mr();un._=Er,i=function(){return Er}.call(e,n,e,r),i===o||(r.exports=i)}).call(this)}).call(e,n(435),n(436)(t))},function(t,e,n){var r=n(13),i=n(171);t.exports=a;var o=r.constant(1);function a(t,e,n,r){return s(t,String(e),n||o,r||function(e){return t.outEdges(e)})}function s(t,e,n,r){var o,a,s={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=s[e],i=n(t),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});while(u.size()>0){if(o=u.removeMin(),a=s[o],a.distance===Number.POSITIVE_INFINITY)break;r(o).forEach(c)}return s}},function(t,e,n){var r=n(13);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){var e,n=this._arr,r=n[t].priority;while(0!==t){if(e=t>>1,n[e].priority<r)break;this._swap(t,e),t=e}},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},function(t,e,n){var r=n(13);function i(t){var e=0,n=[],i={},o=[];function a(s){var u=i[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(a(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(s!==c);o.push(l)}}return t.nodes().forEach(function(t){r.has(i,t)||a(t)}),o}t.exports=i},function(t,e,n){var r=n(13);function i(t){var e={},n={},i=[];function a(s){if(r.has(n,s))throw new o;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),a),delete n[s],i.push(s))}if(r.each(t.sinks(),a),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o},function(t,e,n){var r=n(13);function i(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],s={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);o(t,e,"post"===n,s,i,a)}),a}function o(t,e,n,i,a,s){r.has(i,e)||(i[e]=!0,n||s.push(e),r.each(a(e),function(e){o(t,e,n,i,a,s)}),n&&s.push(e))}t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(16).Graph,o=n(59).slack;function a(t){var e,n,r=new i({directed:!1}),a=t.nodes()[0],l=t.nodeCount();r.setNode(a,{});while(s(r,t)<l)e=u(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),c(r,t,n);return r}function s(t,e){function n(i){r.forEach(e.nodeEdges(i),function(r){var a=r.v,s=i===a?r.w:a;t.hasNode(s)||o(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))})}return r.forEach(t.nodes(),n),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function c(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=a},function(t,e,n){"use strict";e["c"]=o,e["d"]=a,e["b"]=s,e["a"]=u;var r=n(14);function i(t){return t.target.depth}function o(t){return t.depth}function a(t,e){return e-1-t.height}function s(t,e){return t.sourceLinks.length?t.depth:e-1}function u(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Object(r["min"])(t.sourceLinks,i)-1:0}},function(t,e,n){"use strict";var r=n(33),i=n(27),o=n(60),a=n(95),s=n(96);e["a"]=function(){var t=s["a"],e=null,n=Object(i["a"])(0),u=s["b"],c=Object(i["a"])(!0),l=null,f=o["a"],h=null;function p(i){var o,a,s,p,d,v=i.length,g=!1,m=new Array(v),y=new Array(v);for(null==l&&(h=f(d=Object(r["path"])())),o=0;o<=v;++o){if(!(o<v&&c(p=i[o],o,i))===g)if(g=!g)a=o,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),s=o-1;s>=a;--s)h.point(m[s],y[s]);h.lineEnd(),h.areaEnd()}g&&(m[o]=+t(p,o,i),y[o]=+n(p,o,i),h.point(e?+e(p,o,i):m[o],u?+u(p,o,i):y[o]))}if(d)return h=null,d+""||null}function d(){return Object(a["a"])().defined(c).curve(f).context(l)}return p.x=function(n){return arguments.length?(t="function"===typeof n?n:Object(i["a"])(+n),e=null,p):t},p.x0=function(e){return arguments.length?(t="function"===typeof e?e:Object(i["a"])(+e),p):t},p.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:Object(i["a"])(+t),p):e},p.y=function(t){return arguments.length?(n="function"===typeof t?t:Object(i["a"])(+t),u=null,p):n},p.y0=function(t){return arguments.length?(n="function"===typeof t?t:Object(i["a"])(+t),p):n},p.y1=function(t){return arguments.length?(u=null==t?null:"function"===typeof t?t:Object(i["a"])(+t),p):u},p.lineX0=p.lineY0=function(){return d().x(t).y(n)},p.lineY1=function(){return d().x(t).y(u)},p.lineX1=function(){return d().x(e).y(n)},p.defined=function(t){return arguments.length?(c="function"===typeof t?t:Object(i["a"])(!!t),p):c},p.curve=function(t){return arguments.length?(f=t,null!=l&&(h=f(l)),p):f},p.context=function(t){return arguments.length?(null==t?l=h=null:h=f(l=t),p):l},p}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),e["b"]=a;var r=n(60),i=a(r["a"]);function o(t){this._curve=t}function a(t){function e(e){return new o(t(e))}return e._curve=t,e}o.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}}},function(t,e,n){"use strict";e["a"]=i;var r=n(178);n(95);function i(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Object(r["b"])(t)):e()._curve},t}},function(t,e,n){"use strict";e["a"]=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.prototype.slice},function(t,e,n){"use strict";var r=n(46);e["a"]={draw:function(t,e){var n=Math.sqrt(e/r["j"]);t.moveTo(n,0),t.arc(0,0,n,0,r["m"])}}},function(t,e,n){"use strict";e["a"]={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}}},function(t,e,n){"use strict";var r=Math.sqrt(1/3),i=2*r;e["a"]={draw:function(t,e){var n=Math.sqrt(e/i),o=n*r;t.moveTo(0,-n),t.lineTo(o,0),t.lineTo(0,n),t.lineTo(-o,0),t.closePath()}}},function(t,e,n){"use strict";var r=n(46),i=.8908130915292852,o=Math.sin(r["j"]/10)/Math.sin(7*r["j"]/10),a=Math.sin(r["m"]/10)*o,s=-Math.cos(r["m"]/10)*o;e["a"]={draw:function(t,e){var n=Math.sqrt(e*i),o=a*n,u=s*n;t.moveTo(0,-n),t.lineTo(o,u);for(var c=1;c<5;++c){var l=r["m"]*c/5,f=Math.cos(l),h=Math.sin(l);t.lineTo(h*n,-f*n),t.lineTo(f*o-h*u,h*o+f*u)}t.closePath()}}},function(t,e,n){"use strict";e["a"]={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}}},function(t,e,n){"use strict";var r=Math.sqrt(3);e["a"]={draw:function(t,e){var n=-Math.sqrt(e/(3*r));t.moveTo(0,2*n),t.lineTo(-r*n,-n),t.lineTo(r*n,-n),t.closePath()}}},function(t,e,n){"use strict";var r=-.5,i=Math.sqrt(3)/2,o=1/Math.sqrt(12),a=3*(o/2+1);e["a"]={draw:function(t,e){var n=Math.sqrt(e/a),s=n/2,u=n*o,c=s,l=n*o+n,f=-c,h=l;t.moveTo(s,u),t.lineTo(c,l),t.lineTo(f,h),t.lineTo(r*s-i*u,i*s+r*u),t.lineTo(r*c-i*l,i*c+r*l),t.lineTo(r*f-i*h,i*f+r*h),t.lineTo(r*s+i*u,r*u-i*s),t.lineTo(r*c+i*l,r*l-i*c),t.lineTo(r*f+i*h,r*h-i*f),t.closePath()}}},function(t,e,n){"use strict";e["a"]=o;var r=n(61),i=n(63);function o(t,e){this._context=t,this._k=(1-e)/6}o.prototype={areaStart:r["a"],areaEnd:r["a"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(i["b"])(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new o(t,e)}return n.tension=function(e){return t(+e)},n})(0)},function(t,e,n){"use strict";e["a"]=i;var r=n(63);function i(t,e){this._context=t,this._k=(1-e)/6}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(r["b"])(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n})(0)},function(t,e,n){"use strict";e["c"]=o,e["a"]=s,e["d"]=c,e["b"]=l;var r=n(100),i=n(49);function o(t){return i["b"][t.index]={site:t,halfedges:[]}}function a(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function s(t,e){return e[+(e.left!==t.site)]}function u(t,e){return e[+(e.left===t.site)]}function c(){for(var t,e,n,r,o=0,s=i["b"].length;o<s;++o)if((t=i["b"][o])&&(r=(e=t.halfedges).length)){var u=new Array(r),c=new Array(r);for(n=0;n<r;++n)u[n]=n,c[n]=a(t,i["e"][e[n]]);for(u.sort(function(t,e){return c[e]-c[t]}),n=0;n<r;++n)c[n]=e[u[n]];for(n=0;n<r;++n)e[n]=c[n]}}function l(t,e,n,o){var a,c,l,f,h,p,d,v,g,m,y,_,b=i["b"].length,x=!0;for(a=0;a<b;++a)if(c=i["b"][a]){l=c.site,h=c.halfedges,f=h.length;while(f--)i["e"][h[f]]||h.splice(f,1);f=0,p=h.length;while(f<p)m=u(c,i["e"][h[f]]),y=m[0],_=m[1],d=s(c,i["e"][h[++f%p]]),v=d[0],g=d[1],(Math.abs(y-v)>i["f"]||Math.abs(_-g)>i["f"])&&(h.splice(f,0,i["e"].push(Object(r["b"])(l,m,Math.abs(y-t)<i["f"]&&o-_>i["f"]?[t,Math.abs(v-t)<i["f"]?g:o]:Math.abs(_-o)<i["f"]&&n-y>i["f"]?[Math.abs(g-o)<i["f"]?v:n,o]:Math.abs(y-n)<i["f"]&&_-e>i["f"]?[n,Math.abs(v-n)<i["f"]?g:e]:Math.abs(_-e)<i["f"]&&y-t>i["f"]?[Math.abs(g-e)<i["f"]?v:t,e]:null))-1),++p);p&&(x=!1)}if(x){var w,M,E,O=1/0;for(a=0,x=null;a<b;++a)(c=i["b"][a])&&(l=c.site,w=l[0]-t,M=l[1]-e,E=w*w+M*M,E<O&&(O=E,x=c));if(x){var S=[t,e],T=[t,o],j=[n,o],A=[n,e];x.halfedges.push(i["e"].push(Object(r["b"])(l=x.site,S,T))-1,i["e"].push(Object(r["b"])(l,T,j))-1,i["e"].push(Object(r["b"])(l,j,A))-1,i["e"].push(Object(r["b"])(l,A,S))-1)}}for(a=0;a<b;++a)(c=i["b"][a])&&(c.halfedges.length||delete i["b"][a])}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),e["a"]=u,e["b"]=c;var r,i=n(99),o=n(49),a=[];function s(){Object(i["a"])(this),this.x=this.y=this.arc=this.site=this.cy=null}function u(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,u=t.site,c=n.site;if(i!==c){var l=u[0],f=u[1],h=i[0]-l,p=i[1]-f,d=c[0]-l,v=c[1]-f,g=2*(h*v-p*d);if(!(g>=-o["g"])){var m=h*h+p*p,y=d*d+v*v,_=(v*m-p*y)/g,b=(h*y-d*m)/g,x=a.pop()||new s;x.arc=t,x.site=u,x.x=_+l,x.y=(x.cy=b+f)+Math.sqrt(_*_+b*b),t.circle=x;var w=null,M=o["c"]._;while(M)if(x.y<M.y||x.y===M.y&&x.x<=M.x){if(!M.L){w=M.P;break}M=M.L}else{if(!M.R){w=M;break}M=M.R}o["c"].insert(w,x),w||(r=x)}}}}function c(t){var e=t.circle;e&&(e.P||(r=e.N),o["c"].remove(e),a.push(e),Object(i["a"])(e),t.circle=null)}},function(t,e,n){var r=n(28),i=18,o=2*i,a=i,s={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||a},getVGap:function(t){return t.vgap||a},getChildren:function(t){return t.children},getHeight:function(t){return t.height||o},getWidth:function(t){var e=t.name||" ";return t.width||e.split("").length*i}};function u(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof u)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.width=e.getWidth(t),n.height=e.getHeight(t),n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}function c(t,e,n){void 0===e&&(e={}),e=r.assign({},s,e);var i,o=new u(t,e),a=[o];if(!n&&!t.collapsed)while(i=a.pop())if(!i.data.collapsed){var c=e.getChildren(i.data),l=c?c.length:0;if(i.children=new Array(l),c&&l)for(var f=0;f<l;f++){var h=new u(c[f],e);i.children[f]=h,a.push(h),h.parent=i,h.depth=i.depth+1}}return o}r.assign(u.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){var e,n=this,r=[n];while(e=r.pop())t(e),r=r.concat(e.children)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){var e,n=this,r=[n];while(e=r.shift())t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e})},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),t.translate(0,e.height)}}),t.exports=c},function(t,e,n){var r=n(193);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var c=t.children[u],l=s(c,u);"right"===l?i.children.push(c):n.children.push(c)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),i.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:i}}},function(t,e,n){n(196),n(350),n(351),n(354),n(355),n(357),n(361),n(158),n(365),n(366),n(368),n(390),n(398),n(399),n(400),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(413),n(414),n(415),n(418),n(420),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(472),n(508),n(514),n(515),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(532),n(534),n(535),t.exports=n(2)},function(t,e,n){var r=n(3),i=n(0),o=i.geoArea,a=i.geoCentroid,s=i.geoContains,u=i.geoDistance,c=i.geoLength,l=n(128),f=l.geoProject,h=n(39),p=n(141);r(h.prototype,{geoArea:function(t){return o(t)},geoAreaByName:function(t){return o(this.geoFeatureByName(t))},geoCentroid:function(t){return a(t)},geoCentroidByName:function(t){return a(this.geoFeatureByName(t))},geoDistance:function(t,e){return u(t,e)},geoLength:function(t){return c(t)},geoLengthByName:function(t){return c(this.geoFeatureByName(t))},geoContains:function(t,e){return s(t,e)},geoFeatureByName:function(t){var e,n=this.rows;return n.some(function(n){return n.name===t&&(e=n,!0)}),e},geoFeatureByPosition:function(t){var e,n=this.rows;return n.some(function(n){return!!s(n,t)&&(e=n,!0)}),e},geoNameByPosition:function(t){var e=this.geoFeatureByPosition(t);if(e)return e.name},getGeoProjection:p,geoProject:function(t,e,n){return e=p(e,n),f(t,e)},geoProjectByName:function(t,e,n){return e=p(e,n),f(this.geoFeatureByName(t),e)},geoProjectPosition:function(t,e,n){return e=p(e,n),e(t)},geoProjectInvert:function(t,e,n){return e=p(e,n),e.invert(t)}})},function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,f,h,p=n(29),d=n(103),v=n(35),g=n(4),m=n(22),y=Object(p["a"])(),_={point:b,lineStart:w,lineEnd:M,polygonStart:function(){_.point=E,_.lineStart=O,_.lineEnd=S,y.reset(),d["b"].polygonStart()},polygonEnd:function(){d["b"].polygonEnd(),_.point=b,_.lineStart=w,_.lineEnd=M,d["a"]<0?(r=-(o=180),i=-(a=90)):y>g["i"]?a=90:y<-g["i"]&&(i=-90),h[0]=r,h[1]=o}};function b(t,e){f.push(h=[r=t,o=t]),e<i&&(i=e),e>a&&(a=e)}function x(t,e){var n=Object(v["a"])([t*g["r"],e*g["r"]]);if(l){var u=Object(v["c"])(l,n),c=[u[1],-u[0],0],p=Object(v["c"])(c,u);Object(v["e"])(p),p=Object(v["g"])(p);var d,m=t-s,y=m>0?1:-1,_=p[0]*g["h"]*y,b=Object(g["a"])(m)>180;b^(y*s<_&&_<y*t)?(d=p[1]*g["h"],d>a&&(a=d)):(_=(_+360)%360-180,b^(y*s<_&&_<y*t)?(d=-p[1]*g["h"],d<i&&(i=d)):(e<i&&(i=e),e>a&&(a=e))),b?t<s?T(r,t)>T(r,o)&&(o=t):T(t,o)>T(r,o)&&(r=t):o>=r?(t<r&&(r=t),t>o&&(o=t)):t>s?T(r,t)>T(r,o)&&(o=t):T(t,o)>T(r,o)&&(r=t)}else f.push(h=[r=t,o=t]);e<i&&(i=e),e>a&&(a=e),l=n,s=t}function w(){_.point=x}function M(){h[0]=r,h[1]=o,_.point=b,l=null}function E(t,e){if(l){var n=t-s;y.add(Object(g["a"])(n)>180?n+(n>0?360:-360):n)}else u=t,c=e;d["b"].point(t,e),x(t,e)}function O(){d["b"].lineStart()}function S(){E(u,c),d["b"].lineEnd(),Object(g["a"])(y)>g["i"]&&(r=-(o=180)),h[0]=r,h[1]=o,l=null}function T(t,e){return(e-=t)<0?e+360:e}function j(t,e){return t[0]-e[0]}function A(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}e["a"]=function(t){var e,n,s,u,c,l,p;if(a=o=-(r=i=1/0),f=[],Object(m["a"])(t,_),n=f.length){for(f.sort(j),e=1,s=f[0],c=[s];e<n;++e)u=f[e],A(s,u[0])||A(s,u[1])?(T(s[0],u[1])>T(s[0],s[1])&&(s[1]=u[1]),T(u[0],s[1])>T(s[0],s[1])&&(s[0]=u[0])):c.push(s=u);for(l=-1/0,n=c.length-1,e=0,s=c[n];e<=n;s=u,++e)u=c[e],(p=T(s[1],u[0]))>l&&(l=p,r=u[0],o=s[1])}return f=h=null,r===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[r,i],[o,a]]}},function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,f,h,p,d,v,g,m,y,_=n(4),b=n(20),x=n(22),w={sphere:b["a"],point:M,lineStart:O,lineEnd:j,polygonStart:function(){w.lineStart=A,w.lineEnd=C},polygonEnd:function(){w.lineStart=O,w.lineEnd=j}};function M(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e);E(n*Object(_["g"])(t),n*Object(_["t"])(t),Object(_["t"])(e))}function E(t,e,n){++r,o+=(t-o)/r,a+=(e-a)/r,s+=(n-s)/r}function O(){w.point=S}function S(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e);g=n*Object(_["g"])(t),m=n*Object(_["t"])(t),y=Object(_["t"])(e),w.point=T,E(g,m,y)}function T(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e),r=n*Object(_["g"])(t),o=n*Object(_["t"])(t),a=Object(_["t"])(e),s=Object(_["e"])(Object(_["u"])((s=m*a-y*o)*s+(s=y*r-g*a)*s+(s=g*o-m*r)*s),g*r+m*o+y*a);i+=s,u+=s*(g+(g=r)),c+=s*(m+(m=o)),l+=s*(y+(y=a)),E(g,m,y)}function j(){w.point=M}function A(){w.point=L}function C(){P(d,v),w.point=M}function L(t,e){d=t,v=e,t*=_["r"],e*=_["r"],w.point=P;var n=Object(_["g"])(e);g=n*Object(_["g"])(t),m=n*Object(_["t"])(t),y=Object(_["t"])(e),E(g,m,y)}function P(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e),r=n*Object(_["g"])(t),o=n*Object(_["t"])(t),a=Object(_["t"])(e),s=m*a-y*o,d=y*r-g*a,v=g*o-m*r,b=Object(_["u"])(s*s+d*d+v*v),x=Object(_["c"])(b),w=b&&-x/b;f+=w*s,h+=w*d,p+=w*v,i+=x,u+=x*(g+(g=r)),c+=x*(m+(m=o)),l+=x*(y+(y=a)),E(g,m,y)}e["a"]=function(t){r=i=o=a=s=u=c=l=f=h=p=0,Object(x["a"])(t,w);var e=f,n=h,d=p,v=e*e+n*n+d*d;return v<_["j"]&&(e=u,n=c,d=l,i<_["i"]&&(e=o,n=a,d=s),v=e*e+n*n+d*d,v<_["j"])?[NaN,NaN]:[Object(_["e"])(n,e)*_["h"],Object(_["c"])(d/Object(_["u"])(v))*_["h"]]}},function(t,e,n){"use strict";e["a"]=function(t){return function(){return t}}},function(t,e,n){"use strict";e["a"]=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,h=1,p=c-s,d=l-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>f&&(f=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<h&&(h=a)}return f>0&&(t[0]=s+f*p,t[1]=u+f*d),h<1&&(e[0]=s+h*p,e[1]=u+h*d),!0}}}}}},function(t,e,n){"use strict";var r=n(111);e["a"]=function(t,e,n){var i,o,a,s,u=t.length,c=e.length,l=new Array(u*c);for(null==n&&(n=r["b"]),i=a=0;i<u;++i)for(s=t[i],o=0;o<c;++o,++a)l[a]=n(s,e[o]);return l}},function(t,e,n){"use strict";e["a"]=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";var r=n(115),i=n(109),o=n(204),a=n(114),s=n(205),u=n(116),c=n(117),l=n(118);e["a"]=function(){var t=s["a"],e=a["a"],n=l["a"];function f(r){var o,a,s=r.length,l=new Array(s);for(o=0;o<s;++o)l[o]=t(r[o],o,r);var f=e(l),h=f[0],p=f[1],d=n(l,h,p);Array.isArray(d)||(d=Object(c["c"])(h,p,d),d=Object(u["a"])(Math.ceil(h/d)*d,Math.floor(p/d)*d,d));var v=d.length;while(d[0]<=h)d.shift(),--v;while(d[v-1]>p)d.pop(),--v;var g,m=new Array(v+1);for(o=0;o<=v;++o)g=m[o]=[],g.x0=o>0?d[o-1]:h,g.x1=o<v?d[o]:p;for(o=0;o<s;++o)a=l[o],h<=a&&a<=p&&m[Object(i["c"])(d,a,0,v)].push(r[o]);return m}return f.value=function(e){return arguments.length?(t="function"===typeof e?e:Object(o["a"])(e),f):t},f.domain=function(t){return arguments.length?(e="function"===typeof t?t:Object(o["a"])([t[0],t[1]]),f):e},f.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?Object(o["a"])(r["b"].call(t)):Object(o["a"])(t),f):n},f}},function(t,e,n){"use strict";e["a"]=function(t){return function(){return t}}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";var r=n(115),i=n(30),o=n(36),a=n(66);e["a"]=function(t,e,n){return t=r["a"].call(t,o["a"]).sort(i["a"]),Math.ceil((n-e)/(2*(Object(a["a"])(t,.75)-Object(a["a"])(t,.25))*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";var r=n(112);e["a"]=function(t,e,n){return Math.ceil((n-e)/(3.5*Object(r["a"])(t)*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";e["a"]=function(t,e){var n,r,i=t.length,o=-1;if(null==e){while(++o<i)if(null!=(n=t[o])&&n>=n){r=n;while(++o<i)null!=(n=t[o])&&n>r&&(r=n)}}else while(++o<i)if(null!=(n=e(t[o],o,t))&&n>=n){r=n;while(++o<i)null!=(n=e(t[o],o,t))&&n>r&&(r=n)}return r}},function(t,e,n){"use strict";var r=n(36);e["a"]=function(t,e){var n,i=t.length,o=i,a=-1,s=0;if(null==e)while(++a<i)isNaN(n=Object(r["a"])(t[a]))?--o:s+=n;else while(++a<i)isNaN(n=Object(r["a"])(e(t[a],a,t)))?--o:s+=n;if(o)return s/o}},function(t,e,n){"use strict";var r=n(30),i=n(36),o=n(66);e["a"]=function(t,e){var n,a=t.length,s=-1,u=[];if(null==e)while(++s<a)isNaN(n=Object(i["a"])(t[s]))||u.push(n);else while(++s<a)isNaN(n=Object(i["a"])(e(t[s],s,t)))||u.push(n);return Object(o["a"])(u.sort(r["a"]),.5)}},function(t,e,n){"use strict";e["a"]=function(t){var e,n,r,i=t.length,o=-1,a=0;while(++o<i)a+=t[o].length;n=new Array(a);while(--i>=0){r=t[i],e=r.length;while(--e>=0)n[--a]=r[e]}return n}},function(t,e,n){"use strict";e["a"]=function(t,e){var n=e.length,r=new Array(n);while(n--)r[n]=t[e[n]];return r}},function(t,e,n){"use strict";var r=n(30);e["a"]=function(t,e){if(n=t.length){var n,i,o=0,a=0,s=t[a];null==e&&(e=r["a"]);while(++o<n)(e(i=t[o],s)<0||0!==e(s,s))&&(s=i,a=o);return 0===e(s,s)?a:void 0}}},function(t,e,n){"use strict";e["a"]=function(t,e,n){var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);while(o)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t}},function(t,e,n){"use strict";e["a"]=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)while(++i<r)(n=+t[i])&&(o+=n);else while(++i<r)(n=+e(t[i],i,t))&&(o+=n);return o}},function(t,e,n){"use strict";var r=n(120);e["a"]=function(){return Object(r["a"])(arguments)}},function(t,e,n){"use strict";var r=n(121),i=n(122),o=n(4),a={Feature:function(t,e){return u(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)if(u(n[r].geometry,e))return!0;return!1}},s={Sphere:function(){return!0},Point:function(t,e){return c(t.coordinates,e)},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)if(c(n[r],e))return!0;return!1},LineString:function(t,e){return l(t.coordinates,e)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)if(l(n[r],e))return!0;return!1},Polygon:function(t,e){return f(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)if(f(n[r],e))return!0;return!1},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)if(u(n[r],e))return!0;return!1}};function u(t,e){return!(!t||!s.hasOwnProperty(t.type))&&s[t.type](t,e)}function c(t,e){return 0===Object(i["a"])(t,e)}function l(t,e){var n=Object(i["a"])(t[0],t[1]),r=Object(i["a"])(t[0],e),a=Object(i["a"])(e,t[1]);return r+a<=n+o["i"]}function f(t,e){return!!Object(r["a"])(t.map(h),p(e))}function h(t){return t=t.map(p),t.pop(),t}function p(t){return[t[0]*o["r"],t[1]*o["r"]]}e["a"]=function(t,e){return(t&&a.hasOwnProperty(t.type)?a[t.type]:u)(t,e)}},function(t,e,n){"use strict";e["a"]=s,e["b"]=u;var r=n(14),i=n(4);function o(t,e,n){var o=Object(r["range"])(t,e-i["i"],n).concat(e);return function(t){return o.map(function(e){return[t,e]})}}function a(t,e,n){var o=Object(r["range"])(t,e-i["i"],n).concat(e);return function(t){return o.map(function(e){return[e,t]})}}function s(){var t,e,n,s,u,c,l,f,h,p,d,v,g=10,m=g,y=90,_=360,b=2.5;function x(){return{type:"MultiLineString",coordinates:w()}}function w(){return Object(r["range"])(Object(i["f"])(s/y)*y,n,y).map(d).concat(Object(r["range"])(Object(i["f"])(f/_)*_,l,_).map(v)).concat(Object(r["range"])(Object(i["f"])(e/g)*g,t,g).filter(function(t){return Object(i["a"])(t%y)>i["i"]}).map(h)).concat(Object(r["range"])(Object(i["f"])(c/m)*m,u,m).filter(function(t){return Object(i["a"])(t%_)>i["i"]}).map(p))}return x.lines=function(){return w().map(function(t){return{type:"LineString",coordinates:t}})},x.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(v(l).slice(1),d(n).reverse().slice(1),v(f).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.extentMajor(t).extentMinor(t):x.extentMinor()},x.extentMajor=function(t){return arguments.length?(s=+t[0][0],n=+t[1][0],f=+t[0][1],l=+t[1][1],s>n&&(t=s,s=n,n=t),f>l&&(t=f,f=l,l=t),x.precision(b)):[[s,f],[n,l]]},x.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],c=+n[0][1],u=+n[1][1],e>t&&(n=e,e=t,t=n),c>u&&(n=c,c=u,u=n),x.precision(b)):[[e,c],[t,u]]},x.step=function(t){return arguments.length?x.stepMajor(t).stepMinor(t):x.stepMinor()},x.stepMajor=function(t){return arguments.length?(y=+t[0],_=+t[1],x):[y,_]},x.stepMinor=function(t){return arguments.length?(g=+t[0],m=+t[1],x):[g,m]},x.precision=function(r){return arguments.length?(b=+r,h=o(c,u,90),p=a(e,t,b),d=o(f,l,90),v=a(s,n,b),x):b},x.extentMajor([[-180,-90+i["i"]],[180,90-i["i"]]]).extentMinor([[-180,-80-i["i"]],[180,80+i["i"]]])}function u(){return s()()}},function(t,e,n){"use strict";var r=n(4);e["a"]=function(t,e){var n=t[0]*r["r"],i=t[1]*r["r"],o=e[0]*r["r"],a=e[1]*r["r"],s=Object(r["g"])(i),u=Object(r["t"])(i),c=Object(r["g"])(a),l=Object(r["t"])(a),f=s*Object(r["g"])(n),h=s*Object(r["t"])(n),p=c*Object(r["g"])(o),d=c*Object(r["t"])(o),v=2*Object(r["c"])(Object(r["u"])(Object(r["m"])(a-i)+s*c*Object(r["m"])(o-n))),g=Object(r["t"])(v),m=v?function(t){var e=Object(r["t"])(t*=v)/g,n=Object(r["t"])(v-t)/g,i=n*f+e*p,o=n*h+e*d,a=n*u+e*l;return[Object(r["e"])(o,i)*r["h"],Object(r["e"])(a,Object(r["u"])(i*i+o*o))*r["h"]]}:function(){return[n*r["h"],i*r["h"]]};return m.distance=v,m}},function(t,e,n){"use strict";var r=n(67),i=n(22),o=n(221),a=n(124),s=n(222),u=n(223),c=n(224),l=n(225);e["a"]=function(t,e){var n,f,h=4.5;function p(t){return t&&("function"===typeof h&&f.pointRadius(+h.apply(this,arguments)),Object(i["a"])(t,n(f))),f.result()}return p.area=function(t){return Object(i["a"])(t,n(o["a"])),o["a"].result()},p.measure=function(t){return Object(i["a"])(t,n(c["a"])),c["a"].result()},p.bounds=function(t){return Object(i["a"])(t,n(a["a"])),a["a"].result()},p.centroid=function(t){return Object(i["a"])(t,n(s["a"])),s["a"].result()},p.projection=function(e){return arguments.length?(n=null==e?(t=null,r["a"]):(t=e).stream,p):t},p.context=function(t){return arguments.length?(f=null==t?(e=null,new l["a"]):new u["a"](e=t),"function"!==typeof h&&f.pointRadius(h),p):e},p.pointRadius=function(t){return arguments.length?(h="function"===typeof t?t:(f.pointRadius(+t),+t),p):h},p.projection(t).context(e)}},function(t,e,n){"use strict";var r,i,o,a,s=n(29),u=n(4),c=n(20),l=Object(s["a"])(),f=Object(s["a"])(),h={point:c["a"],lineStart:c["a"],lineEnd:c["a"],polygonStart:function(){h.lineStart=p,h.lineEnd=g},polygonEnd:function(){h.lineStart=h.lineEnd=h.point=c["a"],l.add(Object(u["a"])(f)),f.reset()},result:function(){var t=l/2;return l.reset(),t}};function p(){h.point=d}function d(t,e){h.point=v,r=o=t,i=a=e}function v(t,e){f.add(a*t-o*e),o=t,a=e}function g(){v(r,i)}e["a"]=h},function(t,e,n){"use strict";var r,i,o,a,s=n(4),u=0,c=0,l=0,f=0,h=0,p=0,d=0,v=0,g=0,m={point:y,lineStart:_,lineEnd:w,polygonStart:function(){m.lineStart=M,m.lineEnd=E},polygonEnd:function(){m.point=y,m.lineStart=_,m.lineEnd=w},result:function(){var t=g?[d/g,v/g]:p?[f/p,h/p]:l?[u/l,c/l]:[NaN,NaN];return u=c=l=f=h=p=d=v=g=0,t}};function y(t,e){u+=t,c+=e,++l}function _(){m.point=b}function b(t,e){m.point=x,y(o=t,a=e)}function x(t,e){var n=t-o,r=e-a,i=Object(s["u"])(n*n+r*r);f+=i*(o+t)/2,h+=i*(a+e)/2,p+=i,y(o=t,a=e)}function w(){m.point=y}function M(){m.point=O}function E(){S(r,i)}function O(t,e){m.point=S,y(r=o=t,i=a=e)}function S(t,e){var n=t-o,r=e-a,i=Object(s["u"])(n*n+r*r);f+=i*(o+t)/2,h+=i*(a+e)/2,p+=i,i=a*t-o*e,d+=i*(o+t),v+=i*(a+e),g+=3*i,y(o=t,a=e)}e["a"]=m},function(t,e,n){"use strict";e["a"]=o;var r=n(4),i=n(20);function o(t){this._context=t}o.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,r["w"]);break}},result:i["a"]}},function(t,e,n){"use strict";var r,i,o,a,s,u=n(29),c=n(4),l=n(20),f=Object(u["a"])(),h={point:l["a"],lineStart:function(){h.point=p},lineEnd:function(){r&&d(i,o),h.point=l["a"]},polygonStart:function(){r=!0},polygonEnd:function(){r=null},result:function(){var t=+f;return f.reset(),t}};function p(t,e){h.point=d,i=a=t,o=s=e}function d(t,e){a-=t,s-=e,f.add(Object(c["u"])(a*a+s*s)),a=t,s=e}e["a"]=h},function(t,e,n){"use strict";function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e["a"]=r,r.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},function(t,e,n){"use strict";var r=n(126),i=n(4);function o(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,u){var c=s>0?i["o"]:-i["o"],l=Object(i["a"])(s-n);Object(i["a"])(l-i["o"])<i["i"]?(t.point(n,r=(r+u)/2>0?i["l"]:-i["l"]),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(s,r),e=0):o!==c&&l>=i["o"]&&(Object(i["a"])(n-o)<i["i"]&&(n-=o*i["i"]),Object(i["a"])(s-c)<i["i"]&&(s-=c*i["i"]),r=a(n,r,s,u),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=s,r=u),o=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function a(t,e,n,r){var o,a,s=Object(i["t"])(t-n);return Object(i["a"])(s)>i["i"]?Object(i["d"])((Object(i["t"])(e)*(a=Object(i["g"])(r))*Object(i["t"])(n)-Object(i["t"])(r)*(o=Object(i["g"])(e))*Object(i["t"])(t))/(o*a*s)):(e+r)/2}function s(t,e,n,r){var o;if(null==t)o=n*i["l"],r.point(-i["o"],o),r.point(0,o),r.point(i["o"],o),r.point(i["o"],0),r.point(i["o"],-o),r.point(0,-o),r.point(-i["o"],-o),r.point(-i["o"],0),r.point(-i["o"],o);else if(Object(i["a"])(t[0]-e[0])>i["i"]){var a=t[0]<e[0]?i["o"]:-i["o"];o=n*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(e[0],e[1])}e["a"]=Object(r["a"])(function(){return!0},o,s,[-i["o"],-i["l"]])},function(t,e,n){"use strict";var r=n(35),i=n(104),o=n(4),a=n(108),s=n(126);e["a"]=function(t,e){var n=Object(o["g"])(t),u=n>0,c=Object(o["a"])(n)>o["i"];function l(n,r,o,a){Object(i["a"])(a,t,e,o,n,r)}function f(t,e){return Object(o["g"])(t)*Object(o["g"])(e)>n}function h(t){var e,n,r,i,s;return{lineStart:function(){i=r=!1,s=1},point:function(l,h){var v,g=[l,h],m=f(l,h),y=u?m?0:d(l,h):m?d(l+(l<0?o["o"]:-o["o"]),h):0;if(!e&&(i=r=m)&&t.lineStart(),m!==r&&(v=p(e,g),(!v||Object(a["a"])(e,v)||Object(a["a"])(g,v))&&(g[0]+=o["i"],g[1]+=o["i"],m=f(g[0],g[1]))),m!==r)s=0,m?(t.lineStart(),v=p(g,e),t.point(v[0],v[1])):(v=p(e,g),t.point(v[0],v[1]),t.lineEnd()),e=v;else if(c&&e&&u^m){var _;y&n||!(_=p(g,e,!0))||(s=0,u?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&Object(a["a"])(e,g)||t.point(g[0],g[1]),e=g,r=m,n=y},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return s|(i&&r)<<1}}}function p(t,e,i){var a=Object(r["a"])(t),s=Object(r["a"])(e),u=[1,0,0],c=Object(r["c"])(a,s),l=Object(r["d"])(c,c),f=c[0],h=l-f*f;if(!h)return!i&&t;var p=n*l/h,d=-n*f/h,v=Object(r["c"])(u,c),g=Object(r["f"])(u,p),m=Object(r["f"])(c,d);Object(r["b"])(g,m);var y=v,_=Object(r["d"])(g,y),b=Object(r["d"])(y,y),x=_*_-b*(Object(r["d"])(g,g)-1);if(!(x<0)){var w=Object(o["u"])(x),M=Object(r["f"])(y,(-_-w)/b);if(Object(r["b"])(M,g),M=Object(r["g"])(M),!i)return M;var E,O=t[0],S=e[0],T=t[1],j=e[1];S<O&&(E=O,O=S,S=E);var A=S-O,C=Object(o["a"])(A-o["o"])<o["i"],L=C||A<o["i"];if(!C&&j<T&&(E=T,T=j,j=E),L?C?T+j>0^M[1]<(Object(o["a"])(M[0]-O)<o["i"]?T:j):T<=M[1]&&M[1]<=j:A>o["o"]^(O<=M[0]&&M[0]<=S)){var P=Object(r["f"])(y,(-_+w)/b);return Object(r["b"])(P,g),[M,Object(r["g"])(P)]}}}function d(e,n){var r=u?t:o["o"]-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}return Object(s["a"])(f,h,l,u?[0,-t]:[-o["o"],t-o["o"]])}},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(51),a=16,s=Object(i["g"])(30*i["r"]);function u(t){return Object(o["b"])({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function c(t,e){function n(r,o,a,u,c,l,f,h,p,d,v,g,m,y){var _=f-r,b=h-o,x=_*_+b*b;if(x>4*e&&m--){var w=u+d,M=c+v,E=l+g,O=Object(i["u"])(w*w+M*M+E*E),S=Object(i["c"])(E/=O),T=Object(i["a"])(Object(i["a"])(E)-1)<i["i"]||Object(i["a"])(a-p)<i["i"]?(a+p)/2:Object(i["e"])(M,w),j=t(T,S),A=j[0],C=j[1],L=A-r,P=C-o,I=b*L-_*P;(I*I/x>e||Object(i["a"])((_*L+b*P)/x-.5)>.3||u*d+c*v+l*g<s)&&(n(r,o,a,u,c,l,A,C,T,w/=O,M/=O,E,m,y),y.point(A,C),n(A,C,T,w,M,E,f,h,p,d,v,g,m,y))}}return function(e){var i,o,s,u,c,l,f,h,p,d,v,g,m={point:y,lineStart:_,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=w},polygonEnd:function(){e.polygonEnd(),m.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){h=NaN,m.point=b,e.lineStart()}function b(i,o){var s=Object(r["a"])([i,o]),u=t(i,o);n(h,p,f,d,v,g,h=u[0],p=u[1],f=i,d=s[0],v=s[1],g=s[2],a,e),e.point(h,p)}function x(){m.point=y,e.lineEnd()}function w(){_(),m.point=M,m.lineEnd=E}function M(t,e){b(i=t,e),o=h,s=p,u=d,c=v,l=g,m.point=b}function E(){n(h,p,f,d,v,g,o,s,i,u,c,l,a,e),m.lineEnd=x,x()}return m}}e["a"]=function(t,e){return+e?c(t,e):u(t)}},function(t,e,n){"use strict";e["a"]=i;var r=n(4);function i(t){var e=Object(r["g"])(t);function n(t,n){return[t*e,Object(r["t"])(n)/e]}return n.invert=function(t,n){return[t/e,Object(r["c"])(n*e)]},n}},function(t,e,n){"use strict";var r=n(4),i=n(125),o=n(68),a=n(70);function s(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}e["a"]=function(){var t,e,n,u,c,l,f=Object(i["a"])(),h=Object(o["b"])().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=Object(o["b"])().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(t,e){l=[t,e]}};function v(t){var e=t[0],r=t[1];return l=null,n.point(e,r),l||(u.point(e,r),l)||(c.point(e,r),l)}function g(){return t=e=null,v}return v.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?h:i>=.166&&i<.234&&r>=-.214&&r<-.115?p:f).invert(t)},v.stream=function(n){return t&&e===n?t:t=s([f.stream(e=n),h.stream(n),p.stream(n)])},v.precision=function(t){return arguments.length?(f.precision(t),h.precision(t),p.precision(t),g()):f.precision()},v.scale=function(t){return arguments.length?(f.scale(t),h.scale(.35*t),p.scale(t),v.translate(f.translate())):f.scale()},v.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),i=+t[0],o=+t[1];return n=f.translate(t).clipExtent([[i-.455*e,o-.238*e],[i+.455*e,o+.238*e]]).stream(d),u=h.translate([i-.307*e,o+.201*e]).clipExtent([[i-.425*e+r["i"],o+.12*e+r["i"]],[i-.214*e-r["i"],o+.234*e-r["i"]]]).stream(d),c=p.translate([i-.205*e,o+.212*e]).clipExtent([[i-.214*e+r["i"],o+.166*e+r["i"]],[i-.115*e-r["i"],o+.234*e-r["i"]]]).stream(d),g()},v.fitExtent=function(t,e){return Object(a["a"])(v,t,e)},v.fitSize=function(t,e){return Object(a["b"])(v,t,e)},v.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(4),i=n(37),o=n(17),a=Object(i["b"])(function(t){return Object(r["u"])(2/(1+t))});a.invert=Object(i["a"])(function(t){return 2*Object(r["c"])(t/2)}),e["b"]=function(){return Object(o["a"])(a).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(4),i=n(37),o=n(17),a=Object(i["b"])(function(t){return(t=Object(r["b"])(t))&&t/Object(r["t"])(t)});a.invert=Object(i["a"])(function(t){return t}),e["b"]=function(){return Object(o["a"])(a).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";e["a"]=s;var r=n(4),i=n(69),o=n(71);function a(t){return Object(r["v"])((r["l"]+t)/2)}function s(t,e){var n=Object(r["g"])(t),i=t===e?Object(r["t"])(t):Object(r["n"])(n/Object(r["g"])(e))/Object(r["n"])(a(e)/a(t)),s=n*Object(r["p"])(a(t),i)/i;if(!i)return o["c"];function u(t,e){s>0?e<-r["l"]+r["i"]&&(e=-r["l"]+r["i"]):e>r["l"]-r["i"]&&(e=r["l"]-r["i"]);var n=s/Object(r["p"])(a(e),i);return[n*Object(r["t"])(i*t),s-n*Object(r["g"])(i*t)]}return u.invert=function(t,e){var n=s-e,o=Object(r["s"])(i)*Object(r["u"])(t*t+n*n);return[Object(r["e"])(t,Object(r["a"])(n))/i*Object(r["s"])(n),2*Object(r["d"])(Object(r["p"])(s/o,1/i))-r["l"]]},u}e["b"]=function(){return Object(i["a"])(s).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";e["a"]=a;var r=n(4),i=n(69),o=n(127);function a(t,e){var n=Object(r["g"])(t),i=t===e?Object(r["t"])(t):(n-Object(r["g"])(e))/(e-t),a=n/i+t;if(Object(r["a"])(i)<r["i"])return o["b"];function s(t,e){var n=a-e,o=i*t;return[n*Object(r["t"])(o),a-n*Object(r["g"])(o)]}return s.invert=function(t,e){var n=a-e;return[Object(r["e"])(t,Object(r["a"])(n))/i*Object(r["s"])(n),a-Object(r["s"])(i)*Object(r["u"])(t*t+n*n)]},s}e["b"]=function(){return Object(i["a"])(a).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";e["b"]=a;var r=n(4),i=n(37),o=n(17);function a(t,e){var n=Object(r["g"])(e),i=Object(r["g"])(t)*n;return[n*Object(r["t"])(t)/i,Object(r["t"])(e)/i]}a.invert=Object(i["a"])(r["d"]),e["a"]=function(){return Object(o["a"])(a).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";var r=n(65),i=n(67),o=n(51),a=n(70);function s(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?i["a"]:Object(o["b"])({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}e["a"]=function(){var t,e,n,o,u,c,l=1,f=0,h=0,p=1,d=1,v=i["a"],g=null,m=i["a"];function y(){return o=u=null,c}return c={stream:function(t){return o&&u===t?o:o=v(m(u=t))},clipExtent:function(o){return arguments.length?(m=null==o?(g=t=e=n=null,i["a"]):Object(r["a"])(g=+o[0][0],t=+o[0][1],e=+o[1][0],n=+o[1][1]),y()):null==g?null:[[g,t],[e,n]]},scale:function(t){return arguments.length?(v=s((l=+t)*p,l*d,f,h),y()):l},translate:function(t){return arguments.length?(v=s(l*p,l*d,f=+t[0],h=+t[1]),y()):[f,h]},reflectX:function(t){return arguments.length?(v=s(l*(p=t?-1:1),l*d,f,h),y()):p<0},reflectY:function(t){return arguments.length?(v=s(l*p,l*(d=t?-1:1),f,h),y()):d<0},fitExtent:function(t,e){return Object(a["a"])(c,t,e)},fitSize:function(t,e){return Object(a["b"])(c,t,e)}}}},function(t,e,n){"use strict";e["b"]=a;var r=n(4),i=n(37),o=n(17);function a(t,e){return[Object(r["g"])(e)*Object(r["t"])(t),Object(r["t"])(e)]}a.invert=Object(i["a"])(r["c"]),e["a"]=function(){return Object(o["a"])(a).scale(249.5).clipAngle(90+r["i"])}},function(t,e,n){"use strict";e["b"]=a;var r=n(4),i=n(37),o=n(17);function a(t,e){var n=Object(r["g"])(e),i=1+Object(r["g"])(t)*n;return[n*Object(r["t"])(t)/i,Object(r["t"])(e)/i]}a.invert=Object(i["a"])(function(t){return 2*Object(r["d"])(t)}),e["a"]=function(){return Object(o["a"])(a).scale(250).clipAngle(142)}},function(t,e,n){"use strict";e["b"]=o;var r=n(4),i=n(71);function o(t,e){return[Object(r["n"])(Object(r["v"])((r["l"]+e)/2)),-t]}o.invert=function(t,e){return[-e,2*Object(r["d"])(Object(r["k"])(t))-r["l"]]},e["a"]=function(){var t=Object(i["b"])(o),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t){var e=Object(i["F"])(t/2),n=2*Object(i["p"])(Object(i["h"])(t/2))/(e*e);function r(t,e){var r=Object(i["h"])(t),o=Object(i["h"])(e),a=Object(i["y"])(e),s=o*r,u=-((1-s?Object(i["p"])((1+s)/2)/(1-s):-.5)+n/(1+s));return[u*o*Object(i["y"])(t),u*a]}return r.invert=function(e,r){var o,a=Object(i["B"])(e*e+r*r),s=-t/2,u=50;if(!a)return[0,0];do{var c=s/2,l=Object(i["h"])(c),f=Object(i["y"])(c),h=Object(i["F"])(c),p=Object(i["p"])(1/l);s-=o=(2/h*p-n*h-a)/(-p/(f*f)+1-n/(2*l*l))}while(Object(i["a"])(o)>i["k"]&&--u>0);var d=Object(i["y"])(s);return[Object(i["g"])(e*d,a*Object(i["h"])(s)),Object(i["e"])(r*d/a)]},r}e["b"]=function(){var t=i["o"],e=Object(r["geoProjectionMutator"])(o),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*i["v"]):t*i["j"]},n.scale(179.976).clipAngle(147)}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t){var e=Object(i["y"])(t),n=Object(i["h"])(t),r=t>=0?1:-1,o=Object(i["F"])(r*t),a=(1+e-n)/2;function s(t,s){var u=Object(i["h"])(s),c=Object(i["h"])(t/=2);return[(1+u)*Object(i["y"])(t),(r*s>-Object(i["g"])(c,o)-.001?0:10*-r)+a+Object(i["y"])(s)*n-(1+u)*e*c]}return s.invert=function(t,s){var u=0,c=0,l=50;do{var f=Object(i["h"])(u),h=Object(i["y"])(u),p=Object(i["h"])(c),d=Object(i["y"])(c),v=1+p,g=v*h-t,m=a+d*n-v*e*f-s,y=v*f/2,_=-h*d,b=e*v*h/2,x=n*p+e*f*d,w=_*b-x*y,M=(m*_-g*x)/w/2,E=(g*b-m*y)/w;u-=M,c-=E}while((Object(i["a"])(M)>i["k"]||Object(i["a"])(E)>i["k"])&&--l>0);return r*c>-Object(i["g"])(Object(i["h"])(u),o)-.001?[2*u,c]:null},s}e["b"]=function(){var t=20*i["v"],e=t>=0?1:-1,n=Object(i["F"])(e*t),a=Object(r["geoProjectionMutator"])(o),s=a(t),u=s.stream;return s.parallel=function(r){return arguments.length?(n=Object(i["F"])((e=(t=r*i["v"])>=0?1:-1)*t),a(t)):t*i["j"]},s.stream=function(r){var o=s.rotate(),a=u(r),c=(s.rotate([0,0]),u(r));return s.rotate(o),a.sphere=function(){c.polygonStart(),c.lineStart();for(var r=-180*e;e*r<180;r+=90*e)c.point(r,90*e);while(e*(r-=t)>=-180)c.point(r,e*-Object(i["g"])(Object(i["h"])(r*i["v"]/2),n)*i["j"]);c.lineEnd(),c.polygonEnd()},a},s.scale(218.695).center([0,28.0974])}},function(t,e,n){"use strict";e["a"]=s;var r=n(0),i=n(1),o=Object(i["B"])(8),a=Object(i["p"])(1+i["D"]);function s(t,e){var n=Object(i["a"])(e);return n<i["u"]?[t,Object(i["p"])(Object(i["F"])(i["u"]+e/2))]:[t*Object(i["h"])(n)*(2*i["D"]-1/Object(i["y"])(n)),Object(i["x"])(e)*(2*i["D"]*(n-i["u"])-Object(i["p"])(Object(i["F"])(n/2)))]}s.invert=function(t,e){if((r=Object(i["a"])(e))<a)return[t,2*Object(i["f"])(Object(i["m"])(e))-i["o"]];var n,r,s=i["u"],u=25;do{var c=Object(i["h"])(s/2),l=Object(i["F"])(s/2);s-=n=(o*(s-i["u"])-Object(i["p"])(l)-r)/(o-c*c/(2*l))}while(Object(i["a"])(n)>i["l"]&&--u>0);return[t/(Object(i["h"])(s)*(o-1/Object(i["y"])(s))),Object(i["x"])(e)*s]},e["b"]=function(){return Object(r["geoProjection"])(s).scale(112.314)}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t){var e=2*i["s"]/t;function n(t,n){var o=Object(r["geoAzimuthalEquidistantRaw"])(t,n);if(Object(i["a"])(t)>i["o"]){var a=Object(i["g"])(o[1],o[0]),s=Object(i["B"])(o[0]*o[0]+o[1]*o[1]),u=e*Object(i["w"])((a-i["o"])/e)+i["o"],c=Object(i["g"])(Object(i["y"])(a-=u),2-Object(i["h"])(a));a=u+Object(i["e"])(i["s"]/s*Object(i["y"])(c))-c,o[0]=s*Object(i["h"])(a),o[1]=s*Object(i["y"])(a)}return o}return n.invert=function(t,n){var o=Object(i["B"])(t*t+n*n);if(o>i["o"]){var a=Object(i["g"])(n,t),s=e*Object(i["w"])((a-i["o"])/e)+i["o"],u=a>s?-1:1,c=o*Object(i["h"])(s-a),l=1/Object(i["F"])(u*Object(i["b"])((c-i["s"])/Object(i["B"])(i["s"]*(i["s"]-2*c)+o*o)));a=s+2*Object(i["f"])((l+u*Object(i["B"])(l*l-3))/3),t=o*Object(i["h"])(a),n=o*Object(i["y"])(a)}return r["geoAzimuthalEquidistantRaw"].invert(t,n)},n}e["b"]=function(){var t=5,e=Object(r["geoProjectionMutator"])(o),n=e(t),a=n.stream,s=.01,u=-Object(i["h"])(s*i["v"]),c=Object(i["y"])(s*i["v"]);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var r=n.rotate(),o=a(e),l=(n.rotate([0,0]),a(e));return n.rotate(r),o.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*i["s"]/t,o=90-180/t,a=i["o"];e<t;++e,o-=n,a-=r)l.point(Object(i["g"])(c*Object(i["h"])(a),u)*i["j"],Object(i["e"])(c*Object(i["y"])(a))*i["j"]),o<-90?(l.point(-90,-180-o-s),l.point(-90,-180-o+s)):(l.point(90,o+s),l.point(90,o-s));l.lineEnd(),l.polygonEnd()},o},n.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}},function(t,e,n){"use strict";e["a"]=a;var r=n(31),i=n(1),o=n(38);function a(t){if(!t)return o["b"];var e=1/Object(i["F"])(t);function n(n,r){var o=e+t-r,a=o?n*Object(i["h"])(r)/o:o;return[o*Object(i["y"])(a),e-o*Object(i["h"])(a)]}return n.invert=function(n,r){var o=Object(i["B"])(n*n+(r=e-r)*r),a=e+t-o;return[o/Object(i["h"])(a)*Object(i["g"])(n,r),a]},n}e["b"]=function(){return Object(r["a"])(a).scale(123.082).center([0,26.1441]).parallel(45)}},function(t,e,n){"use strict";e["a"]=o;var r=n(0),i=n(1);function o(t){function e(e,n){var r=i["o"]-n,o=r?e*t*Object(i["y"])(r)/r:r;return[r*Object(i["y"])(o)/t,i["o"]-r*Object(i["h"])(o)]}return e.invert=function(e,n){var r=e*t,o=i["o"]-n,a=Object(i["B"])(r*r+o*o),s=Object(i["g"])(r,o);return[(a?a/Object(i["y"])(a):1)*s/t,i["o"]-a]},e}e["b"]=function(){var t=.5,e=Object(r["geoProjectionMutator"])(o),n=e(t);return n.fraction=function(n){return arguments.length?e(t=+n):t},n.scale(158.837)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(21),a=Object(o["b"])(1,4/i["s"],i["s"]);e["b"]=function(){return Object(r["geoProjection"])(a).scale(152.63)}},function(t,e,n){"use strict";e["b"]=u,e["a"]=l,e["c"]=f;var r=n(0),i=n(1);function o(t,e,n,r,o,a){var s,u=Object(i["h"])(a);if(Object(i["a"])(t)>1||Object(i["a"])(a)>1)s=Object(i["b"])(n*o+e*r*u);else{var c=Object(i["y"])(t/2),l=Object(i["y"])(a/2);s=2*Object(i["e"])(Object(i["B"])(c*c+e*r*l*l))}return Object(i["a"])(s)>i["k"]?[s,Object(i["g"])(r*Object(i["y"])(a),e*o-n*r*u)]:[0,0]}function a(t,e,n){return Object(i["b"])((t*t+e*e-n*n)/(2*t*e))}function s(t){return t-2*i["s"]*Object(i["n"])((t+i["s"])/(2*i["s"]))}function u(t,e,n){for(var r,u=[[t[0],t[1],Object(i["y"])(t[1]),Object(i["h"])(t[1])],[e[0],e[1],Object(i["y"])(e[1]),Object(i["h"])(e[1])],[n[0],n[1],Object(i["y"])(n[1]),Object(i["h"])(n[1])]],c=u[2],l=0;l<3;++l,c=r)r=u[l],c.v=o(r[1]-c[1],c[3],c[2],r[3],r[2],r[0]-c[0]),c.point=[0,0];var f=a(u[0].v[0],u[2].v[0],u[1].v[0]),h=a(u[0].v[0],u[1].v[0],u[2].v[0]),p=i["s"]-f;u[2].point[1]=0,u[0].point[0]=-(u[1].point[0]=u[0].v[0]/2);var d=[u[2].point[0]=u[0].point[0]+u[2].v[0]*Object(i["h"])(f),2*(u[0].point[1]=u[1].point[1]=u[2].v[0]*Object(i["y"])(f))];function v(t,e){var n,r=Object(i["y"])(e),c=Object(i["h"])(e),l=new Array(3);for(n=0;n<3;++n){var f=u[n];if(l[n]=o(e-f[1],f[3],f[2],c,r,t-f[0]),!l[n][0])return f.point;l[n][1]=s(l[n][1]-f.v[1])}var v=d.slice();for(n=0;n<3;++n){var g=2==n?0:n+1,m=a(u[n].v[0],l[n][0],l[g][0]);l[n][1]<0&&(m=-m),n?1==n?(m=h-m,v[0]-=l[n][0]*Object(i["h"])(m),v[1]-=l[n][0]*Object(i["y"])(m)):(m=p-m,v[0]+=l[n][0]*Object(i["h"])(m),v[1]+=l[n][0]*Object(i["y"])(m)):(v[0]+=l[n][0]*Object(i["h"])(m),v[1]-=l[n][0]*Object(i["y"])(m))}return v[0]/=3,v[1]/=3,v}return v}function c(t){return t[0]*=i["v"],t[1]*=i["v"],t}function l(){return f([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function f(t,e,n){var i=Object(r["geoCentroid"])({type:"MultiPoint",coordinates:[t,e,n]}),o=[-i[0],-i[1]],a=Object(r["geoRotation"])(o),s=Object(r["geoProjection"])(u(c(a(t)),c(a(e)),c(a(n)))).rotate(o),l=s.center;return delete s.rotate,s.center=function(t){return arguments.length?l(a(t)):a.invert(l())},s.clipAngle(90)}},function(t,e,n){"use strict";e["a"]=o;var r=n(1),i=n(31);function o(t){var e=Object(r["F"])(t);function n(t,n){return[t,(t?t/Object(r["y"])(t):1)*(Object(r["y"])(n)*Object(r["h"])(t)-e*Object(r["h"])(n))]}return n.invert=e?function(t,n){t&&(n*=Object(r["y"])(t)/t);var i=Object(r["h"])(t);return[t,2*Object(r["g"])(Object(r["B"])(i*i+e*e-n*n)-i,e-n)]}:function(t,e){return[t,Object(r["e"])(t?e*Object(r["F"])(t)/t:e)]},n}e["b"]=function(){return Object(i["a"])(o).scale(249.828).clipAngle(90)}},function(t,e,n){"use strict";e["a"]=a;var r=n(0),i=n(1),o=Object(i["B"])(3);function a(t,e){return[o*t*(2*Object(i["h"])(2*e/3)-1)/i["E"],o*i["E"]*Object(i["y"])(e/3)]}a.invert=function(t,e){var n=3*Object(i["e"])(e/(o*i["E"]));return[i["E"]*t/(o*(2*Object(i["h"])(2*n/3)-1)),n]},e["b"]=function(){return Object(r["geoProjection"])(a).scale(156.19)}},function(t,e,n){"use strict";e["a"]=o;var r=n(1),i=n(31);function o(t){var e=Object(r["h"])(t);function n(t,n){return[t*e,(1+e)*Object(r["F"])(n/2)]}return n.invert=function(t,n){return[t/e,2*Object(r["f"])(n/(1+e))]},n}e["b"]=function(){return Object(i["a"])(o).scale(124.75)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["B"])(8/(3*i["s"]));return[n*t*(1-Object(i["a"])(e)/i["s"]),n*e]}o.invert=function(t,e){var n=Object(i["B"])(8/(3*i["s"])),r=e/n;return[t/(n*(1-Object(i["a"])(r)/i["s"])),r]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(165.664)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["B"])(4-3*Object(i["y"])(Object(i["a"])(e)));return[2/Object(i["B"])(6*i["s"])*t*n,Object(i["x"])(e)*Object(i["B"])(2*i["s"]/3)*(2-n)]}o.invert=function(t,e){var n=2-Object(i["a"])(e)/Object(i["B"])(2*i["s"]/3);return[t*Object(i["B"])(6*i["s"])/(2*n),Object(i["x"])(e)*Object(i["e"])((4-n*n)/3)]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(165.664)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["B"])(i["s"]*(4+i["s"]));return[2/n*t*(1+Object(i["B"])(1-4*e*e/(i["s"]*i["s"]))),4/n*e]}o.invert=function(t,e){var n=Object(i["B"])(i["s"]*(4+i["s"]))/2;return[t*n/(1+Object(i["B"])(1-e*e*(4+i["s"])/(4*i["s"]))),e*n/2]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(180.739)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=(2+i["o"])*Object(i["y"])(e);e/=2;for(var r=0,o=1/0;r<10&&Object(i["a"])(o)>i["k"];r++){var a=Object(i["h"])(e);e-=o=(e+Object(i["y"])(e)*(a+2)-n)/(2*a*(1+a))}return[2/Object(i["B"])(i["s"]*(4+i["s"]))*t*(1+Object(i["h"])(e)),2*Object(i["B"])(i["s"]/(4+i["s"]))*Object(i["y"])(e)]}o.invert=function(t,e){var n=e*Object(i["B"])((4+i["s"])/i["s"])/2,r=Object(i["e"])(n),o=Object(i["h"])(r);return[t/(2/Object(i["B"])(i["s"]*(4+i["s"]))*(1+o)),Object(i["e"])((r+n*(o+2))/(2+i["o"]))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(180.739)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[t*(1+Object(i["h"])(e))/Object(i["B"])(2+i["s"]),2*e/Object(i["B"])(2+i["s"])]}o.invert=function(t,e){var n=Object(i["B"])(2+i["s"]),r=e*n/2;return[n*t/(1+Object(i["h"])(r)),r]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(173.044)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){for(var n=(1+i["o"])*Object(i["y"])(e),r=0,o=1/0;r<10&&Object(i["a"])(o)>i["k"];r++)e-=o=(e+Object(i["y"])(e)-n)/(1+Object(i["h"])(e));return n=Object(i["B"])(2+i["s"]),[t*(1+Object(i["h"])(e))/n,2*e/n]}o.invert=function(t,e){var n=1+i["o"],r=Object(i["B"])(n/2);return[2*t*r/(1+Object(i["h"])(e*=r)),Object(i["e"])((e+Object(i["y"])(e))/n)]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(173.044)}},function(t,e,n){"use strict";e["b"]=s;var r=n(0),i=n(130),o=n(1),a=3+2*o["D"];function s(t,e){var n=Object(o["y"])(t/=2),r=Object(o["h"])(t),i=Object(o["B"])(Object(o["h"])(e)),s=Object(o["h"])(e/=2),u=Object(o["y"])(e)/(s+o["D"]*r*i),c=Object(o["B"])(2/(1+u*u)),l=Object(o["B"])((o["D"]*s+(r+n)*i)/(o["D"]*s+(r-n)*i));return[a*(c*(l-1/l)-2*Object(o["p"])(l)),a*(c*u*(l+1/l)-2*Object(o["f"])(u))]}s.invert=function(t,e){if(!(n=i["a"].invert(t/1.2,1.065*e)))return null;var n,r=n[0],s=n[1],u=20;t/=a,e/=a;do{var c=r/2,l=s/2,f=Object(o["y"])(c),h=Object(o["h"])(c),p=Object(o["y"])(l),d=Object(o["h"])(l),v=Object(o["h"])(s),g=Object(o["B"])(v),m=p/(d+o["D"]*h*g),y=m*m,_=Object(o["B"])(2/(1+y)),b=o["D"]*d+(h+f)*g,x=o["D"]*d+(h-f)*g,w=b/x,M=Object(o["B"])(w),E=M-1/M,O=M+1/M,S=_*E-2*Object(o["p"])(M)-t,T=_*m*O-2*Object(o["f"])(m)-e,j=p&&o["C"]*g*f*y/p,A=(o["D"]*h*d+g)/(2*(d+o["D"]*h*g)*(d+o["D"]*h*g)*g),C=-.5*m*_*_*_,L=C*j,P=C*A,I=(I=2*d+o["D"]*g*(h-f))*I*M,R=(o["D"]*h*d*g+v)/I,F=-o["D"]*f*p/(g*I),D=E*L-2*R/M+_*(R+R/w),k=E*P-2*F/M+_*(F+F/w),N=m*O*L-2*j/(1+y)+_*O*j+_*m*(R-R/w),B=m*O*P-2*A/(1+y)+_*O*A+_*m*(F-F/w),z=k*N-B*D;if(!z)break;var U=(T*k-S*B)/z,G=(S*N-T*D)/z;r-=U,s=Object(o["q"])(-o["o"],Object(o["r"])(o["o"],s-G))}while((Object(o["a"])(U)>o["k"]||Object(o["a"])(G)>o["k"])&&--u>0);return Object(o["a"])(Object(o["a"])(s)-o["o"])<o["k"]?[0,s]:u&&[r,s]},e["a"]=function(){return Object(r["geoProjection"])(s).scale(62.5271)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(1),o=Object(i["h"])(35*i["v"]);function a(t,e){var n=Object(i["F"])(e/2);return[t*o*Object(i["B"])(1-n*n),(1+o)*n]}a.invert=function(t,e){var n=e/(1+o);return[t&&t/(o*Object(i["B"])(1-n*n)),2*Object(i["f"])(n)]},e["a"]=function(){return Object(r["geoProjection"])(a).scale(137.152)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=e/2,r=Object(i["h"])(n);return[2*t/i["E"]*Object(i["h"])(e)*r*r,i["E"]*Object(i["F"])(n)]}o.invert=function(t,e){var n=Object(i["f"])(e/i["E"]),r=Object(i["h"])(n),o=2*n;return[t*i["E"]/2/(Object(i["h"])(o)*r*r),o]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(135.264)}},function(t,e,n){"use strict";var r=n(0),i=n(1);function o(t){return[t[0]/2,Object(i["e"])(Object(i["F"])(t[1]/2*i["v"]))*i["j"]]}function a(t){return[2*t[0],2*Object(i["f"])(Object(i["y"])(t[1]*i["v"]))*i["j"]]}e["a"]=function(t){null==t&&(t=r["geoOrthographic"]);var e=t(),n=Object(r["geoEquirectangular"])().scale(i["j"]).precision(0).clipAngle(null).translate([0,0]);function s(t){return e(o(t))}function u(t){s[t]=function(n){return arguments.length?(e[t](n),s):e[t]()}}return e.invert&&(s.invert=function(t){return a(e.invert(t))}),s.stream=function(t){var r=e.stream(t),o=n.stream({point:function(t,e){r.point(t/2,Object(i["e"])(Object(i["F"])(-e/2*i["v"]))*i["j"])},lineStart:function(){r.lineStart()},lineEnd:function(){r.lineEnd()},polygonStart:function(){r.polygonStart()},polygonEnd:function(){r.polygonEnd()}});return o.sphere=r.sphere,o},s.rotate=function(t){return arguments.length?(n.rotate(t),s):n.rotate()},s.center=function(t){return arguments.length?(e.center(o(t)),s):a(e.center())},u("clipAngle"),u("clipExtent"),u("scale"),u("translate"),u("precision"),s.scale(249.5)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=2*i["s"]/e,o=t*t;function u(e,u){var c=Object(r["geoAzimuthalEquidistantRaw"])(e,u),l=c[0],f=c[1],h=l*l+f*f;if(h>o){var p=Object(i["B"])(h),d=Object(i["g"])(f,l),v=n*Object(i["w"])(d/n),g=d-v,m=t*Object(i["h"])(g),y=(t*Object(i["y"])(g)-g*Object(i["y"])(m))/(i["o"]-m),_=a(g,y),b=(i["s"]-t)/s(_,m,i["s"]);l=p;var x,w=50;do{l-=x=(t+s(_,m,l)*b-p)/(_(l)*b)}while(Object(i["a"])(x)>i["k"]&&--w>0);f=g*Object(i["y"])(l),l<i["o"]&&(f-=y*(l-i["o"]));var M=Object(i["y"])(v),E=Object(i["h"])(v);c[0]=l*E-f*M,c[1]=l*M+f*E}return c}return u.invert=function(e,u){var c=e*e+u*u;if(c>o){var l=Object(i["B"])(c),f=Object(i["g"])(u,e),h=n*Object(i["w"])(f/n),p=f-h;e=l*Object(i["h"])(p),u=l*Object(i["y"])(p);var d=e-i["o"],v=Object(i["y"])(e),g=u/v,m=e<i["o"]?1/0:0,y=10;while(1){var _=t*Object(i["y"])(g),b=t*Object(i["h"])(g),x=Object(i["y"])(b),w=i["o"]-b,M=(_-g*x)/w,E=a(g,M);if(Object(i["a"])(m)<i["l"]||!--y)break;g-=m=(g*v-M*d-u)/(v-2*d*(w*(b+g*_*Object(i["h"])(b)-x)-_*(_-g*x))/(w*w))}l=t+s(E,b,e)*(i["s"]-t)/s(E,b,i["s"]),f=h+g,e=l*Object(i["h"])(f),u=l*Object(i["y"])(f)}return r["geoAzimuthalEquidistantRaw"].invert(e,u)},u}function a(t,e){return function(n){var r=t*Object(i["h"])(n);return n<i["o"]&&(r-=e),Object(i["B"])(1+r*r)}}function s(t,e,n){for(var r=50,i=(n-e)/r,o=t(e)+t(n),a=1,s=e;a<r;++a)o+=2*t(s+=i);return.5*o*i}e["a"]=function(){var t=6,e=30*i["v"],n=Object(i["h"])(e),a=Object(i["y"])(e),s=Object(r["geoProjectionMutator"])(o),u=s(e,t),c=u.stream,l=.01,f=-Object(i["h"])(l*i["v"]),h=Object(i["y"])(l*i["v"]);return u.radius=function(r){return arguments.length?(n=Object(i["h"])(e=r*i["v"]),a=Object(i["y"])(e),s(e,t)):e*i["j"]},u.lobes=function(n){return arguments.length?s(e,t=+n):t},u.stream=function(e){var r=u.rotate(),o=c(e),s=(u.rotate([0,0]),c(e));return u.rotate(r),o.sphere=function(){s.polygonStart(),s.lineStart();for(var e=0,r=2*i["s"]/t,o=0;e<t;++e,o-=r)s.point(Object(i["g"])(h*Object(i["h"])(o),f)*i["j"],Object(i["e"])(h*Object(i["y"])(o))*i["j"]),s.point(Object(i["g"])(a*Object(i["h"])(o-r/2),n)*i["j"],Object(i["e"])(a*Object(i["y"])(o-r/2))*i["j"]);s.lineEnd(),s.polygonEnd()},o},u.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=n(0),i=n(52),o=Object(i["a"])(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);e["a"]=function(){return Object(r["geoProjection"])(o).scale(149.995)}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=n(0),i=n(52),o=Object(i["a"])(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);e["a"]=function(){return Object(r["geoProjection"])(o).scale(153.93)}},function(t,e,n){"use strict";n.d(e,"b",function(){return a});var r=n(0),i=n(52),o=n(1),a=Object(i["a"])(5/6*o["s"],-.62636,-.0344,0,1.3493,-.05524,0,.045);e["a"]=function(){return Object(r["geoProjection"])(a).scale(130.945)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}o.invert=function(t,e){var n,r=t,o=e,a=50;do{var s=o*o;o-=n=(o*(1+s/12)-e)/(1+s/4)}while(Object(i["a"])(n)>i["k"]&&--a>0);a=50,t/=1-.162388*s;do{var u=(u=r*r)*u;r-=n=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Object(i["a"])(n)>i["k"]&&--a>0);return[r,o]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(131.747)}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=n(0),i=n(52),o=Object(i["a"])(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);e["a"]=function(){return Object(r["geoProjection"])(o).scale(131.087)}},function(t,e,n){"use strict";e["c"]=i,e["b"]=a,e["a"]=s;var r=n(1);function i(t,e,n){var r,i,a;return t?(r=o(t,n),e?(i=o(e,1-n),a=i[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/a,r[1]*r[2]*i[0]*i[1]/a],[r[1]*i[1]/a,-r[0]*r[2]*i[0]*i[2]/a],[r[2]*i[1]*i[2]/a,-n*r[0]*r[1]*i[0]/a]]):[[r[0],0],[r[1],0],[r[2],0]]):(i=o(e,1-n),[[0,i[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]])}function o(t,e){var n,i,o,a,s;if(e<r["k"])return a=Object(r["y"])(t),i=Object(r["h"])(t),n=e*(t-a*i)/4,[a-n*i,i+n*a,1-e*a*a/2,t-n];if(e>=1-r["k"])return n=(1-e)/4,i=Object(r["i"])(t),a=Object(r["G"])(t),o=1/i,s=i*Object(r["A"])(t),[a+n*(s-t)/(i*i),o-n*a*o*(s-t),o+n*a*o*(s+t),2*Object(r["f"])(Object(r["m"])(t))-r["o"]+n*(s-t)/i];var u=[1,0,0,0,0,0,0,0,0],c=[Object(r["B"])(e),0,0,0,0,0,0,0,0],l=0;i=Object(r["B"])(1-e),s=1;while(Object(r["a"])(c[l]/u[l])>r["k"]&&l<8)n=u[l++],c[l]=(n-i)/2,u[l]=(n+i)/2,i=Object(r["B"])(n*i),s*=2;o=s*u[l]*t;do{a=c[l]*Object(r["y"])(i=o)/u[l],o=(Object(r["e"])(a)+o)/2}while(--l);return[Object(r["y"])(o),a=Object(r["h"])(o),a/Object(r["h"])(o-i),o]}function a(t,e,n){var i=Object(r["a"])(t),o=Object(r["a"])(e),a=Object(r["A"])(o);if(i){var u=1/Object(r["y"])(i),c=1/(Object(r["F"])(i)*Object(r["F"])(i)),l=-(c+n*(a*a*u*u)-1+n),f=(n-1)*c,h=(-l+Object(r["B"])(l*l-4*f))/2;return[s(Object(r["f"])(1/Object(r["B"])(h)),n)*Object(r["x"])(t),s(Object(r["f"])(Object(r["B"])((h/c-1)/n)),1-n)*Object(r["x"])(e)]}return[0,s(Object(r["f"])(a),1-n)*Object(r["x"])(e)]}function s(t,e){if(!e)return t;if(1===e)return Object(r["p"])(Object(r["F"])(t/2+r["u"]));for(var n=1,i=Object(r["B"])(1-e),o=Object(r["B"])(e),a=0;Object(r["a"])(o)>r["k"];a++){if(t%r["s"]){var s=Object(r["f"])(i*Object(r["F"])(t)/n);s<0&&(s+=r["s"]),t+=s+~~(t/r["s"])*r["s"]}else t+=t;o=(n+i)/2,i=Object(r["B"])(n*i),o=((n=o)-i)/2}return t/(Object(r["t"])(2,a)*n)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(arguments.length<2&&(e=t),1===e)return r["geoAzimuthalEqualAreaRaw"];if(e===1/0)return a;function n(n,i){var o=Object(r["geoAzimuthalEqualAreaRaw"])(n/e,i);return o[0]*=t,o}return n.invert=function(n,i){var o=r["geoAzimuthalEqualAreaRaw"].invert(n/t,i);return o[0]*=e,o},n}function a(t,e){return[t*Object(i["h"])(e)/Object(i["h"])(e/=2),2*Object(i["y"])(e)]}a.invert=function(t,e){var n=2*Object(i["e"])(e/2);return[t*Object(i["h"])(n/2)/Object(i["h"])(n),n]},e["a"]=function(){var t=2,e=Object(r["geoProjectionMutator"])(o),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t){var e=Object(i["y"])(t),n=Object(i["h"])(t),r=a(t);function o(t,o){var a=r(t,o);t=a[0],o=a[1];var s=Object(i["y"])(o),u=Object(i["h"])(o),c=Object(i["h"])(t),l=Object(i["b"])(e*s+n*u*c),f=Object(i["y"])(l),h=Object(i["a"])(f)>i["k"]?l/f:1;return[h*n*Object(i["y"])(t),(Object(i["a"])(t)>i["o"]?h:-h)*(e*u-n*s*c)]}return r.invert=a(-t),o.invert=function(t,n){var o=Object(i["B"])(t*t+n*n),a=-Object(i["y"])(o),s=Object(i["h"])(o),u=o*s,c=-n*a,l=o*e,f=Object(i["B"])(u*u+c*c-l*l),h=Object(i["g"])(u*l+c*f,c*l-u*f),p=(o>i["o"]?-1:1)*Object(i["g"])(t*a,o*Object(i["h"])(h)*s+n*Object(i["y"])(h)*a);return r.invert(p,h)},o}function a(t){var e=Object(i["y"])(t),n=Object(i["h"])(t);return function(t,r){var o=Object(i["h"])(r),a=Object(i["h"])(t)*o,s=Object(i["y"])(t)*o,u=Object(i["y"])(r);return[Object(i["g"])(s,a*n-u*e),Object(i["e"])(u*n+a*e)]}}e["a"]=function(){var t=0,e=Object(r["geoProjectionMutator"])(o),n=e(t),a=n.rotate,s=n.stream,u=Object(r["geoCircle"])();return n.parallel=function(r){if(!arguments.length)return t*i["j"];var o=n.rotate();return e(t=r*i["v"]).rotate(o)},n.rotate=function(e){return arguments.length?(a.call(n,[e[0],e[1]-t*i["j"]]),u.center([-e[0],-e[1]]),n):(e=a.call(n),e[1]+=t*i["j"],e)},n.stream=function(t){return t=s(t),t.sphere=function(){t.polygonStart();var e,n=.01,r=u.radius(90-n)().coordinates[0],i=r.length-1,o=-1;t.lineStart();while(++o<i)t.point((e=r[o])[0],e[1]);t.lineEnd(),r=u.radius(90+n)().coordinates[0],i=r.length-1,t.lineStart();while(--o>=0)t.point((e=r[o])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n.scale(79.4187).parallel(45).clipAngle(179.999)}},function(t,e,n){"use strict";e["b"]=l;var r=n(14),i=n(0),o=n(72),a=n(132),s=n(1),u=41+48/36+37/3600,c=Object(a["a"])(0);function l(t){var e=u*s["v"],n=Object(o["a"])(s["s"],e)[0]-Object(o["a"])(-s["s"],e)[0],r=c(0,e)[1],i=Object(o["a"])(0,e)[1],a=s["E"]-i,l=s["H"]/t,f=4/s["H"],h=r+a*a*4/s["H"];function p(u,p){var d,v=Object(s["a"])(p);if(v>e){var g=Object(s["r"])(t-1,Object(s["q"])(0,Object(s["n"])((u+s["s"])/l)));u+=s["s"]*(t-1)/t-g*l,d=Object(o["a"])(u,v),d[0]=d[0]*s["H"]/n-s["H"]*(t-1)/(2*t)+g*s["H"]/t,d[1]=r+4*(d[1]-i)*a/s["H"],p<0&&(d[1]=-d[1])}else d=c(u,p);return d[0]*=f,d[1]/=h,d}return p.invert=function(e,u){e/=f,u*=h;var p=Object(s["a"])(u);if(p>r){var d=Object(s["r"])(t-1,Object(s["q"])(0,Object(s["n"])((e+s["s"])/l)));e=(e+s["s"]*(t-1)/t-d*l)*n/s["H"];var v=o["a"].invert(e,.25*(p-r)*s["H"]/a+i);return v[0]-=s["s"]*(t-1)/t-d*l,u<0&&(v[1]=-v[1]),v}return c.invert(e,u)},p}function f(t){return{type:"Polygon",coordinates:[Object(r["range"])(-180,180+t/2,t).map(function(t,e){return[t,1&e?90-1e-6:u]}).concat(Object(r["range"])(180,-180-t/2,-t).map(function(t,e){return[t,1&e?1e-6-90:-u]}))]}}e["a"]=function(){var t=4,e=Object(i["geoProjectionMutator"])(l),n=e(t),r=n.stream;return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var o=n.rotate(),a=r(e),s=(n.rotate([0,0]),r(e));return n.rotate(o),a.sphere=function(){Object(i["geoStream"])(f(180/t),s)},a},n.scale(239.75)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t){var e,n=1+t,r=Object(i["y"])(1/n),o=Object(i["e"])(r),a=2*Object(i["B"])(i["s"]/(e=i["s"]+4*o*n)),s=.5*a*(n+Object(i["B"])(t*(2+t))),u=t*t,c=n*n;function l(r,l){var f,h,p=1-Object(i["y"])(l);if(p&&p<2){var d,v=i["o"]-l,g=25;do{var m=Object(i["y"])(v),y=Object(i["h"])(v),_=o+Object(i["g"])(m,n-y),b=1+c-2*n*y;v-=d=(v-u*o-n*m+b*_-.5*p*e)/(2*n*m*_)}while(Object(i["a"])(d)>i["l"]&&--g>0);f=a*Object(i["B"])(b),h=r*_/i["s"]}else f=a*(t+p),h=r*o/i["s"];return[f*Object(i["y"])(h),s-f*Object(i["h"])(h)]}return l.invert=function(t,r){var l=t*t+(r-=s)*r,f=(1+c-l/(a*a))/(2*n),h=Object(i["b"])(f),p=Object(i["y"])(h),d=o+Object(i["g"])(p,n-f);return[Object(i["e"])(t/Object(i["B"])(l))*i["s"]/d,Object(i["e"])(1-2*(h-u*o-n*p+(1+c-2*n*f)*d)/e)]},l}e["a"]=function(){var t=1,e=Object(r["geoProjectionMutator"])(o),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n.scale(167.774).center([0,18.67])}},function(t,e,n){"use strict";var r=n(131),i=n(23),o=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e["a"]=function(){return Object(i["a"])(r["a"],o).scale(160.857)}},function(t,e,n){"use strict";var r=n(136),i=n(23),o=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e["a"]=function(){return Object(i["a"])(r["b"],o).scale(152.63)}},function(t,e,n){"use strict";var r=n(21),i=n(23),o=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e["a"]=function(){return Object(i["a"])(r["d"],o).scale(169.529)}},function(t,e,n){"use strict";var r=n(21),i=n(23),o=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];e["a"]=function(){return Object(i["a"])(r["d"],o).scale(169.529).rotate([20,0])}},function(t,e,n){"use strict";var r=n(73),i=n(23),o=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];e["a"]=function(){return Object(i["a"])(r["c"],o).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}},function(t,e,n){"use strict";var r=n(38),i=n(23),o=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];e["a"]=function(){return Object(i["a"])(r["b"],o).scale(152.63).rotate([-20,0])}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[3/i["H"]*t*Object(i["B"])(i["s"]*i["s"]/3-e*e),e]}o.invert=function(t,e){return[i["H"]/3*t/Object(i["B"])(i["s"]*i["s"]/3-e*e),e]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(158.837)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t){function e(e,n){if(Object(i["a"])(Object(i["a"])(n)-i["o"])<i["k"])return[0,n<0?-2:2];var r=Object(i["y"])(n),o=Object(i["t"])((1+r)/(1-r),t/2),a=.5*(o+1/o)+Object(i["h"])(e*=t);return[2*Object(i["y"])(e)/a,(o-1/o)/a]}return e.invert=function(e,n){var r=Object(i["a"])(n);if(Object(i["a"])(r-2)<i["k"])return e?null:[0,Object(i["x"])(n)*i["o"]];if(r>2)return null;e/=2,n/=2;var o=e*e,a=n*n,s=2*n/(1+o+a);return s=Object(i["t"])((1+s)/(1-s),1/t),[Object(i["g"])(2*e,1-o-a)/t,Object(i["e"])((s-1)/(s+1))]},e}e["a"]=function(){var t=.5,e=Object(r["geoProjectionMutator"])(o),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n.scale(124.75)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(1),o=i["s"]/i["D"];function a(t,e){return[t*(1+Object(i["B"])(Object(i["h"])(e)))/2,e/(Object(i["h"])(e/2)*Object(i["h"])(t/6))]}a.invert=function(t,e){var n=Object(i["a"])(t),r=Object(i["a"])(e),a=i["k"],s=i["o"];r<o?s*=r/o:a+=6*Object(i["b"])(o/r);for(var u=0;u<25;u++){var c=Object(i["y"])(s),l=Object(i["B"])(Object(i["h"])(s)),f=Object(i["y"])(s/2),h=Object(i["h"])(s/2),p=Object(i["y"])(a/6),d=Object(i["h"])(a/6),v=.5*a*(1+l)-n,g=s/(h*d)-r,m=l?-.25*a*c/l:0,y=.5*(1+l),_=(1+.5*s*f/h)/(h*d),b=s/h*(p/6)/(d*d),x=m*b-_*y,w=(v*b-g*y)/x,M=(g*m-v*_)/x;if(s-=w,a-=M,Object(i["a"])(w)<i["k"]&&Object(i["a"])(M)<i["k"])break}return[t<0?-a:a,e<0?-s:s]},e["a"]=function(){return Object(r["geoProjection"])(a).scale(97.2672)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}o.invert=function(t,e){var n=Object(i["x"])(t)*i["s"],r=e/2,o=50;do{var a=n*n,s=r*r,u=n*r,c=n*(.975534+s*(-.0143059*a-.119161+-.0547009*s))-t,l=r*(1.00384+a*(.0802894+-.02855*s+199025e-9*a)+s*(.0998909+-.0491032*s))-e,f=.975534-s*(.119161+3*a*.0143059+.0547009*s),h=-u*(.238322+.2188036*s+.0286118*a),p=u*(.1605788+7961e-7*a+-.0571*s),d=1.00384+a*(.0802894+199025e-9*a)+s*(3*(.0998909-.02855*a)-.245516*s),v=h*p-d*f,g=(l*h-c*d)/v,m=(c*p-l*f)/v;n-=g,r-=m}while((Object(i["a"])(g)>i["k"]||Object(i["a"])(m)>i["k"])&&--o>0);return o&&[n,r]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(139.98)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[Object(i["y"])(t)/Object(i["h"])(e),Object(i["F"])(e)*Object(i["h"])(t)]}o.invert=function(t,e){var n=t*t,r=e*e,o=r+1,a=t?i["C"]*Object(i["B"])((o-Object(i["B"])(n*n+2*n*(r-1)+o*o))/n+1):1/Object(i["B"])(o);return[Object(i["e"])(t*a),Object(i["x"])(e)*Object(i["b"])(a)]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(144.049).clipAngle(89.999)}},function(t,e,n){"use strict";e["b"]=o;var r=n(31),i=n(1);function o(t){var e=Object(i["h"])(t),n=Object(i["F"])(i["u"]+t/2);function r(r,o){var a=o-t,s=Object(i["a"])(a)<i["k"]?r*e:Object(i["a"])(s=i["u"]+o/2)<i["k"]||Object(i["a"])(Object(i["a"])(s)-i["o"])<i["k"]?0:r*a/Object(i["p"])(Object(i["F"])(s)/n);return[s,a]}return r.invert=function(r,o){var a,s=o+t;return[Object(i["a"])(o)<i["k"]?r/e:Object(i["a"])(a=i["u"]+s/2)<i["k"]||Object(i["a"])(Object(i["a"])(a)-i["o"])<i["k"]?0:r*Object(i["p"])(Object(i["F"])(a)/n)/o,s]},r}e["a"]=function(){return Object(r["a"])(o).parallel(40).scale(158.837)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[t,1.25*Object(i["p"])(Object(i["F"])(i["u"]+.4*e))]}o.invert=function(t,e){return[t,2.5*Object(i["f"])(Object(i["m"])(.8*e))-.625*i["s"]]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(108.318)}},function(t,e,n){"use strict";e["g"]=o,e["b"]=f,e["c"]=h,e["d"]=p,e["f"]=d,e["e"]=v,e["a"]=g;var r=n(0),i=n(1);function o(t){var e=t.length-1;function n(n,r){var o,a=Object(i["h"])(r),s=2/(1+a*Object(i["h"])(n)),u=s*a*Object(i["y"])(n),c=s*Object(i["y"])(r),l=e,f=t[l],h=f[0],p=f[1];while(--l>=0)f=t[l],h=f[0]+u*(o=h)-c*p,p=f[1]+u*p+c*o;return h=u*(o=h)-c*p,p=u*p+c*o,[h,p]}return n.invert=function(n,r){var o=20,a=n,s=r;do{var u,c=e,l=t[c],f=l[0],h=l[1],p=0,d=0;while(--c>=0)l=t[c],p=f+a*(u=p)-s*d,d=h+a*d+s*u,f=l[0]+a*(u=f)-s*h,h=l[1]+a*h+s*u;p=f+a*(u=p)-s*d,d=h+a*d+s*u,f=a*(u=f)-s*h-n,h=a*h+s*u-r;var v,g,m=p*p+d*d;a-=v=(f*p+h*d)/m,s-=g=(h*p-f*d)/m}while(Object(i["a"])(v)+Object(i["a"])(g)>i["k"]*i["k"]&&--o>0);if(o){var y=Object(i["B"])(a*a+s*s),_=2*Object(i["f"])(.5*y),b=Object(i["y"])(_);return[Object(i["g"])(a*b,y*Object(i["h"])(_)),y?Object(i["e"])(s*b/y):0]}},n}var a=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],s=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],u=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],c=[[.9245,0],[0,0],[.01943,0]],l=[[.721316,0],[0,0],[-.00881625,-.00617325]];function f(){return g(a,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function h(){return g(s,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function p(){return g(u,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function d(){return g(c,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function v(){return g(l,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function g(t,e){var n=Object(r["geoProjection"])(o(t)).rotate(e).clipAngle(90),i=Object(r["geoRotation"])(e),a=n.center;return delete n.rotate,n.center=function(t){return arguments.length?a(i(t)):i.invert(a())},n}},function(t,e,n){"use strict";e["b"]=s;var r=n(0),i=n(1),o=Object(i["B"])(6),a=Object(i["B"])(7);function s(t,e){var n=Object(i["e"])(7*Object(i["y"])(e)/(3*o));return[o*t*(2*Object(i["h"])(2*n/3)-1)/a,9*Object(i["y"])(n/3)/a]}s.invert=function(t,e){var n=3*Object(i["e"])(e*a/9);return[t*a/(o*(2*Object(i["h"])(2*n/3)-1)),Object(i["e"])(3*Object(i["y"])(n)*o/7)]},e["a"]=function(){return Object(r["geoProjection"])(s).scale(164.859)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){for(var n,r=(1+i["C"])*Object(i["y"])(e),o=e,a=0;a<25;a++)if(o-=n=(Object(i["y"])(o/2)+Object(i["y"])(o)-r)/(.5*Object(i["h"])(o/2)+Object(i["h"])(o)),Object(i["a"])(n)<i["k"])break;return[t*(1+2*Object(i["h"])(o)/Object(i["h"])(o/2))/(3*i["D"]),2*Object(i["B"])(3)*Object(i["y"])(o/2)/Object(i["B"])(2+i["D"])]}o.invert=function(t,e){var n=e*Object(i["B"])(2+i["D"])/(2*Object(i["B"])(3)),r=2*Object(i["e"])(n);return[3*i["D"]*t/(1+2*Object(i["h"])(r)/Object(i["h"])(r/2)),Object(i["e"])((n+Object(i["y"])(r))/(1+i["C"]))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(188.209)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){for(var n,r=Object(i["B"])(6/(4+i["s"])),o=(1+i["s"]/4)*Object(i["y"])(e),a=e/2,s=0;s<25;s++)if(a-=n=(a/2+Object(i["y"])(a)-o)/(.5+Object(i["h"])(a)),Object(i["a"])(n)<i["k"])break;return[r*(.5+Object(i["h"])(a))*t/1.5,r*a]}o.invert=function(t,e){var n=Object(i["B"])(6/(4+i["s"])),r=e/n;return Object(i["a"])(Object(i["a"])(r)-i["o"])<i["k"]&&(r=r<0?-i["o"]:i["o"]),[1.5*t/(n*(.5+Object(i["h"])(r))),Object(i["e"])((r/2+Object(i["y"])(r))/(1+i["s"]/4))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(166.518)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}o.invert=function(t,e){var n,r=e,o=25;do{var a=r*r,s=a*a;r-=n=(r*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-e)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(Object(i["a"])(n)>i["k"]&&--o>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(175.295)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=e*e,r=n*n,i=n*r;return[t*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}o.invert=function(t,e){var n,r,o,a,s=e,u=25;do{r=s*s,o=r*r,s-=n=(s*(1.01183+o*o*(.01926*r-.02625-.00396*o))-e)/(1.01183+o*o*(.21186*r-.23625+-.05148*o))}while(Object(i["a"])(n)>i["l"]&&--u>0);return r=s*s,o=r*r,a=r*o,[t/(.84719-.13063*r+a*a*(.05494*r-.04515-.02326*o+.00331*a)),s]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(175.295)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[t*(1+Object(i["h"])(e))/2,2*(e-Object(i["F"])(e/2))]}o.invert=function(t,e){for(var n=e/2,r=0,o=1/0;r<10&&Object(i["a"])(o)>i["k"];++r){var a=Object(i["h"])(e/2);e-=o=(e-Object(i["F"])(e/2)-n)/(1-.5/(a*a))}return[2*t/(1+Object(i["h"])(e)),e]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(152.63)}},function(t,e,n){"use strict";e["b"]=d;var r=n(0),i=n(1),o=1.0148,a=.23185,s=-.14499,u=.02406,c=o,l=5*a,f=7*s,h=9*u,p=1.790857183;function d(t,e){var n=e*e;return[t,e*(o+n*n*(a+n*(s+u*n)))]}d.invert=function(t,e){e>p?e=p:e<-p&&(e=-p);var n,r=e;do{var d=r*r;r-=n=(r*(o+d*d*(a+d*(s+u*d)))-e)/(c+d*d*(l+d*(f+h*d)))}while(Object(i["a"])(n)>i["k"]);return[t,r]},e["a"]=function(){return Object(r["geoProjection"])(d).scale(139.319)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];var n=Object(i["F"])(e),r=t*Object(i["y"])(e);return[Object(i["y"])(r)/n,e+(1-Object(i["h"])(r))/n]}o.invert=function(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];var n,r=t*t+e*e,o=.5*e,a=10;do{var s=Object(i["F"])(o),u=1/Object(i["h"])(o),c=r-2*e*o+o*o;o-=n=(s*c+2*(o-e))/(2+c*u*u+2*(o-e)*s)}while(Object(i["a"])(n)>i["k"]&&--a>0);return s=Object(i["F"])(o),[(Object(i["a"])(e)<Object(i["a"])(o+1/s)?Object(i["e"])(t*s):Object(i["x"])(t)*(Object(i["b"])(Object(i["a"])(t*s))+i["o"]))/Object(i["y"])(o),o]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(103.74)}},function(t,e,n){"use strict";e["b"]=i,e["c"]=o;var r=n(1);function i(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}function o(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function a(t,e){return[t[0]-e[0],t[1]-e[1]]}function s(t){return Object(r["B"])(t[0]*t[0]+t[1]*t[1])}function u(t,e){return Object(r["g"])(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}e["a"]=function(t,e){var n=a(t[1],t[0]),i=a(e[1],e[0]),c=u(n,i),l=s(n)/s(i);return o([1,0,t[0][0],0,1,t[0][1]],o([l,0,0,0,l,0],o([Object(r["h"])(c),Object(r["y"])(c),0,-Object(r["y"])(c),Object(r["h"])(c),0],[1,0,-e[0][0],0,1,-e[0][1]])))}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(53),a=n(74);e["a"]=function(t){t=t||function(t){var e=Object(r["geoCentroid"])({type:"MultiPoint",coordinates:t});return Object(r["geoGnomonic"])().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=a["a"].map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])}),Object(o["a"])(e[0],function(t,n){return e[t<-i["s"]/2?n<0?6:4:t<0?n<0?2:0:t<i["s"]/2?n<0?3:1:n<0?7:5]}).scale(101.858).center([0,45])}},function(t,e,n){"use strict";var r=n(0),i=n(72),o=n(1),a=n(53),s=n(74),u=2/Object(o["B"])(3);function c(t,e){var n=Object(i["a"])(t,e);return[n[0]*u,n[1]]}c.invert=function(t,e){return i["a"].invert(t/u,e)},e["a"]=function(t){t=t||function(t){var e=Object(r["geoCentroid"])({type:"MultiPoint",coordinates:t});return Object(r["geoProjection"])(c).translate([0,0]).scale(1).rotate(e[1]>0?[-e[0],0]:[180-e[0],180])};var e=s["a"].map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])}),Object(a["a"])(e[0],function(t,n){return e[t<-o["s"]/2?n<0?6:4:t<0?n<0?2:0:t<o["s"]/2?n<0?3:1:n<0?7:5]}).scale(121.906).center([0,48.5904])}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(53),a=n(74);function s(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function u(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function c(t){return[Object(i["g"])(t[1],t[0])*i["j"],Object(i["e"])(Object(i["q"])(-1,Object(i["r"])(1,t[2])))*i["j"]]}function l(t){var e=t[0]*i["v"],n=t[1]*i["v"],r=Object(i["h"])(n);return[r*Object(i["h"])(e),r*Object(i["y"])(e),Object(i["y"])(n)]}e["a"]=function(t){t=t||function(t){var e=6===t.length?Object(r["geoCentroid"])({type:"MultiPoint",coordinates:t}):t[0];return Object(r["geoGnomonic"])().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=a["a"].map(function(t){for(var e,n=t.map(l),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)e=n[a],o.push(c([.9486832980505138*i[0]+.31622776601683794*e[0],.9486832980505138*i[1]+.31622776601683794*e[1],.9486832980505138*i[2]+.31622776601683794*e[2]]),c([.9486832980505138*e[0]+.31622776601683794*i[0],.9486832980505138*e[1]+.31622776601683794*i[1],.9486832980505138*e[2]+.31622776601683794*i[2]])),i=e;return o}),n=[],f=[-1,0,0,1,0,1,4,5];e.forEach(function(t,r){for(var i=a["a"][r],o=i.length,s=n[r]=[],c=0;c<o;++c)e.push([i[c],t[(2*c+2)%(2*o)],t[(2*c+1)%(2*o)]]),f.push(r),s.push(u(l(t[(2*c+2)%(2*o)]),l(t[(2*c+1)%(2*o)])))});var h=e.map(function(e){return{project:t(e),face:e}});function p(t,e){var r=Object(i["h"])(e),o=[r*Object(i["h"])(t),r*Object(i["y"])(t),Object(i["y"])(e)],a=t<-i["s"]/2?e<0?6:4:t<0?e<0?2:0:t<i["s"]/2?e<0?3:1:e<0?7:5,u=n[a];return h[s(u[0],o)<0?8+3*a:s(u[1],o)<0?8+3*a+1:s(u[2],o)<0?8+3*a+2:a]}return f.forEach(function(t,e){var n=h[t];n&&(n.children||(n.children=[])).push(h[e])}),Object(o["a"])(h[0],p).scale(110.625).center([0,45])}},function(t,e,n){"use strict";var r=n(0),i=n(299),o=n(300),a=n(301);function s(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return u(t,e)})}}function u(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:l(t.geometry,e)}}function c(t,e){return{type:"GeometryCollection",geometries:t.geometries.map(function(t){return l(t,e)})}}function l(t,e){if(!t)return null;if("GeometryCollection"===t.type)return c(t,e);var n;switch(t.type){case"Point":n=p;break;case"MultiPoint":n=p;break;case"LineString":n=d;break;case"MultiLineString":n=d;break;case"Polygon":n=v;break;case"MultiPolygon":n=v;break;case"Sphere":n=v;break;default:return null}return Object(r["geoStream"])(t,e(n)),n.result()}e["a"]=function(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=u;break;case"FeatureCollection":n=s;break;default:n=l;break}return n(t,r)};var f=[],h=[],p={point:function(t,e){f.push([t,e])},result:function(){var t=f.length?f.length<2?{type:"Point",coordinates:f[0]}:{type:"MultiPoint",coordinates:f}:null;return f=[],t}},d={lineStart:i["a"],point:function(t,e){f.push([t,e])},lineEnd:function(){f.length&&(h.push(f),f=[])},result:function(){var t=h.length?h.length<2?{type:"LineString",coordinates:h[0]}:{type:"MultiLineString",coordinates:h}:null;return h=[],t}},v={polygonStart:i["a"],lineStart:i["a"],point:function(t,e){f.push([t,e])},lineEnd:function(){var t=f.length;if(t){do{f.push(f[0].slice())}while(++t<4);h.push(f),f=[]}},polygonEnd:i["a"],result:function(){if(!h.length)return null;var t=[],e=[];return h.forEach(function(n){Object(o["a"])(n)?t.push([n]):e.push(n)}),e.forEach(function(e){var n=e[0];t.some(function(t){if(Object(a["a"])(t[0],n))return t.push(e),!0})||t.push([e])}),h=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}}},function(t,e,n){"use strict";e["a"]=function(){}},function(t,e,n){"use strict";e["a"]=function(t){if((e=t.length)<4)return!1;var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];while(++n<e)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}},function(t,e,n){"use strict";e["a"]=function(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],f=t[s],h=f[0],p=f[1];l>r^p>r&&n<(h-c)*(r-l)/(p-l)+c&&(i=!i)}return i}},function(t,e,n){"use strict";var r=n(133),i=n(75);e["a"]=function(){return Object(i["a"])(r["b"]).scale(176.423)}},function(t,e,n){"use strict";e["a"]=function(t,e){if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");function n(t){var n=t.length,r=2,i=new Array(n);i[0]=+t[0].toFixed(e),i[1]=+t[1].toFixed(e);while(r<n)i[r]=t[r],++r;return i}function r(t){return t.map(n)}function i(t){return t.map(r)}function o(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(o)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:r(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:i(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(i)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function a(t){var e={type:"Feature",properties:t.properties,geometry:o(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(null!=t)switch(t.type){case"Feature":return a(t);case"FeatureCollection":var s={type:"FeatureCollection",features:t.features.map(a)};return null!=t.bbox&&(s.bbox=t.bbox),s;default:return o(t)}return t}},function(t,e,n){"use strict";e["b"]=o;var r=n(1),i=n(31);function o(t){var e=Object(r["y"])(t);function n(n,i){var o=e?Object(r["F"])(n*e/2)/e:n/2;if(!i)return[2*o,-t];var a=2*Object(r["f"])(o*Object(r["y"])(i)),s=1/Object(r["F"])(i);return[Object(r["y"])(a)*s,i+(1-Object(r["h"])(a))*s-t]}return n.invert=function(n,i){if(Object(r["a"])(i+=t)<r["k"])return[e?2*Object(r["f"])(e*n/2)/e:n,0];var o,a=n*n+i*i,s=0,u=10;do{var c=Object(r["F"])(s),l=1/Object(r["h"])(s),f=a-2*i*s+s*s;s-=o=(c*f+2*(s-i))/(2+f*l*l+2*(s-i)*c)}while(Object(r["a"])(o)>r["k"]&&--u>0);var h=n*(c=Object(r["F"])(s)),p=Object(r["F"])(Object(r["a"])(i)<Object(r["a"])(s+1/c)?.5*Object(r["e"])(h):.5*Object(r["b"])(h)+r["s"]/4)/Object(r["y"])(s);return[e?2*Object(r["f"])(e*p)/e:2*p,s]},n}e["a"]=function(){return Object(i["a"])(o).scale(131.215)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(1),o=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function a(t,e){var n,r=Object(i["r"])(18,36*Object(i["a"])(e)/i["s"]),a=Object(i["n"])(r),s=r-a,u=(n=o[a])[0],c=n[1],l=(n=o[++a])[0],f=n[1],h=(n=o[Object(i["r"])(19,++a)])[0],p=n[1];return[t*(l+s*(h-u)/2+s*s*(h-2*l+u)/2),(e>0?i["o"]:-i["o"])*(f+s*(p-c)/2+s*s*(p-2*f+c)/2)]}o.forEach(function(t){t[1]*=1.0144}),a.invert=function(t,e){var n=e/i["o"],r=90*n,a=Object(i["r"])(18,Object(i["a"])(r/5)),s=Object(i["q"])(0,Object(i["n"])(a));do{var u=o[s][1],c=o[s+1][1],l=o[Object(i["r"])(19,s+2)][1],f=l-u,h=l-2*c+u,p=2*(Object(i["a"])(n)-c)/f,d=h/f,v=p*(1-d*p*(1-2*d*p));if(v>=0||1===s){r=(e>=0?5:-5)*(v+a);var g,m=50;do{a=Object(i["r"])(18,Object(i["a"])(r)/5),s=Object(i["n"])(a),v=a-s,u=o[s][1],c=o[s+1][1],l=o[Object(i["r"])(19,s+2)][1],r-=(g=(e>=0?i["o"]:-i["o"])*(c+v*(l-u)/2+v*v*(l-2*c+u)/2)-e)*i["j"]}while(Object(i["a"])(g)>i["l"]&&--m>0);break}}while(--s>=0);var y=o[s][0],_=o[s+1][0],b=o[Object(i["r"])(19,s+2)][0];return[t/(_+v*(b-y)/2+v*v*(b-2*_+y)/2),r*i["v"]]},e["a"]=function(){return Object(r["geoProjection"])(a).scale(152.63)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(1);function o(t){function e(e,n){var r=Object(i["h"])(n),o=(t-1)/(t-r*Object(i["h"])(e));return[o*r*Object(i["y"])(e),o*Object(i["y"])(n)]}return e.invert=function(e,n){var r=e*e+n*n,o=Object(i["B"])(r),a=(t-Object(i["B"])(1-r*(t+1)/(t-1)))/((t-1)/o+o/(t-1));return[Object(i["g"])(e*a,o*Object(i["B"])(1-a*a)),o?Object(i["e"])(n*a/o):0]},e}function a(t,e){var n=o(t);if(!e)return n;var r=Object(i["h"])(e),a=Object(i["y"])(e);function s(e,i){var o=n(e,i),s=o[1],u=s*a/(t-1)+r;return[o[0]*r/u,s/u]}return s.invert=function(e,i){var o=(t-1)/(t-1-i*a);return n.invert(o*e,o*i*r)},s}e["a"]=function(){var t=2,e=0,n=Object(r["geoProjectionMutator"])(a),o=n(t,e);return o.distance=function(r){return arguments.length?n(t=+r,e):t},o.tilt=function(r){return arguments.length?n(t,e=r*i["v"]):e*i["j"]},o.scale(432.147).clipAngle(Object(i["b"])(1/t)*i["j"]-1e-6)}},function(t,e,n){"use strict";var r=1e-4,i=1e4,o=-180,a=o+r,s=180,u=s-r,c=-90,l=c+r,f=90,h=f-r;function p(t){return t.length>0}function d(t){return Math.floor(t*i)/i}function v(t){return t===c||t===f?[0,t]:[o,d(t)]}function g(t){var e=t[0],n=t[1],r=!1;return e<=a?(e=o,r=!0):e>=u&&(e=s,r=!0),n<=l?(n=c,r=!0):n>=h&&(n=f,r=!0),r?[e,n]:t}function m(t){return t.map(g)}function y(t,e,n){for(var r=0,i=t.length;r<i;++r){var o=t[r].slice();n.push({index:-1,polygon:e,ring:o});for(var s=0,c=o.length;s<c;++s){var f=o[s],p=f[0],d=f[1];if(p<=a||p>=u||d<=l||d>=h){o[s]=g(f);for(var m=s+1;m<c;++m){var y=o[m],_=y[0],b=y[1];if(_>a&&_<u&&b>l&&b<h)break}if(m===s+1)continue;if(s){var x={index:-1,polygon:e,ring:o.slice(0,s+1)};x.ring[x.ring.length-1]=v(d),n[n.length-1]=x}else n.pop();if(m>=c)break;n.push({index:-1,polygon:e,ring:o=o.slice(m-1)}),o[0]=v(o[0][1]),s=-1,c=o.length}}}}function _(t){var e,n,r,i,o,a,s=t.length,u={},c={};for(e=0;e<s;++e)n=t[e],r=n.ring[0],o=n.ring[n.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=e,u[r]=c[o]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<s;++e)if(n=t[e],n){if(r=n.ring[0],o=n.ring[n.ring.length-1],i=c[r],a=u[o],delete u[r],delete c[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n.ring);continue}i?(delete c[r],delete u[i.ring[0]],i.ring.pop(),t[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===a?n.polygon.push(n.ring):(n.index=s++,t.push(u[n.ring[0]]=c[n.ring[n.ring.length-1]]=n))):a?(delete u[o],delete c[a.ring[a.ring.length-1]],n.ring.pop(),n={index:s++,polygon:a.polygon,ring:n.ring.concat(a.ring)},t[a.index]=null,t.push(u[n.ring[0]]=c[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function b(t){var e={type:"Feature",geometry:x(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function x(t){if(null==t)return t;var e,n,r,i;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(x)};break;case"Point":e={type:"Point",coordinates:g(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:m(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(m)};break;case"Polygon":var o=[];y(t.coordinates,o,n=[]),_(n),e={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],r=-1,i=t.coordinates.length;var a=new Array(i);while(++r<i)y(t.coordinates[r],a[r]=[],n);_(n),e={type:"MultiPolygon",coordinates:a.filter(p)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}e["a"]=function(t){if(null==t)return t;switch(t.type){case"Feature":return b(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(b)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return x(t)}}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["F"])(e/2),r=Object(i["y"])(i["u"]*n);return[t*(.74482-.34588*r*r),1.70711*n]}o.invert=function(t,e){var n=e/1.70711,r=Object(i["y"])(i["u"]*n);return[t/(.74482-.34588*r*r),2*Object(i["f"])(n)]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(146.153)}},function(t,e,n){"use strict";e["b"]=a,e["c"]=s,e["a"]=u;var r=n(0),i=n(1),o=n(138);function a(t){var e=Object(i["h"])(t);function n(t,n){var i=Object(r["geoGnomonicRaw"])(t,n);return i[0]*=e,i}return n.invert=function(t,n){return r["geoGnomonicRaw"].invert(t/e,n)},n}function s(){return u([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function u(t,e){return Object(o["a"])(a,t,e)}},function(t,e,n){"use strict";e["b"]=a,e["c"]=s,e["a"]=u;var r=n(0),i=n(1),o=n(138);function a(t){if(!(t*=2))return r["geoAzimuthalEquidistantRaw"];var e=-t/2,n=-e,o=t*t,a=Object(i["F"])(n),s=.5/Object(i["y"])(n);function u(r,a){var s=Object(i["b"])(Object(i["h"])(a)*Object(i["h"])(r-e)),u=Object(i["b"])(Object(i["h"])(a)*Object(i["h"])(r-n)),c=a<0?-1:1;return s*=s,u*=u,[(s-u)/(2*t),c*Object(i["B"])(4*o*u-(o-s+u)*(o-s+u))/(2*t)]}return u.invert=function(t,r){var o,u,c=r*r,l=Object(i["h"])(Object(i["B"])(c+(o=t+e)*o)),f=Object(i["h"])(Object(i["B"])(c+(o=t+n)*o));return[Object(i["g"])(u=l-f,o=(l+f)*a),(r<0?-1:1)*Object(i["b"])(Object(i["B"])(o*o+u*u)*s)]},u}function s(){return u([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function u(t,e){return Object(o["a"])(a,t,e)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];var n=Object(i["a"])(e/i["o"]),r=Object(i["e"])(n);if(Object(i["a"])(t)<i["k"]||Object(i["a"])(Object(i["a"])(e)-i["o"])<i["k"])return[0,Object(i["x"])(e)*i["s"]*Object(i["F"])(r/2)];var o=Object(i["h"])(r),a=Object(i["a"])(i["s"]/t-t/i["s"])/2,s=a*a,u=o/(n+o-1),c=u*(2/n-1),l=c*c,f=l+s,h=u-l,p=s+u;return[Object(i["x"])(t)*i["s"]*(a*h+Object(i["B"])(s*h*h-f*(u*u-l)))/f,Object(i["x"])(e)*i["s"]*(c*p-a*Object(i["B"])((s+1)*f-p*p))/f]}o.invert=function(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];if(Object(i["a"])(t)<i["k"])return[0,i["o"]*Object(i["y"])(2*Object(i["f"])(e/i["s"]))];var n=(t/=i["s"])*t,r=(e/=i["s"])*e,o=n+r,a=o*o,s=-Object(i["a"])(e)*(1+o),u=s-2*r+n,c=-2*s+1+2*r+a,l=r/c+(2*u*u*u/(c*c*c)-9*s*u/(c*c))/27,f=(s-u*u/(3*c))/c,h=2*Object(i["B"])(-f/3),p=Object(i["b"])(3*l/(f*h))/3;return[i["s"]*(o-1+Object(i["B"])(1+2*(n-r)+a))/(2*t),Object(i["x"])(e)*i["s"]*(-h*Object(i["h"])(p+i["s"]/3)-u/(3*c))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(79.4183)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];var n=Object(i["a"])(e/i["o"]),r=Object(i["e"])(n);if(Object(i["a"])(t)<i["k"]||Object(i["a"])(Object(i["a"])(e)-i["o"])<i["k"])return[0,Object(i["x"])(e)*i["s"]*Object(i["F"])(r/2)];var o=Object(i["h"])(r),a=Object(i["a"])(i["s"]/t-t/i["s"])/2,s=a*a,u=o*(Object(i["B"])(1+s)-a*o)/(1+s*n*n);return[Object(i["x"])(t)*i["s"]*u,Object(i["x"])(e)*i["s"]*Object(i["B"])(1-u*(2*a+u))]}o.invert=function(t,e){if(!t)return[0,i["o"]*Object(i["y"])(2*Object(i["f"])(e/i["s"]))];var n=Object(i["a"])(t/i["s"]),r=(1-n*n-(e/=i["s"])*e)/(2*n),o=r*r,a=Object(i["B"])(o+1);return[Object(i["x"])(t)*i["s"]*(a-r),Object(i["x"])(e)*i["o"]*Object(i["y"])(2*Object(i["g"])(Object(i["B"])((1-2*r*n)*(r+a)-n),Object(i["B"])(a+r+n)))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(79.4183)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(Object(i["a"])(e)<i["k"])return[t,0];var n=e/i["o"],r=Object(i["e"])(n);if(Object(i["a"])(t)<i["k"]||Object(i["a"])(Object(i["a"])(e)-i["o"])<i["k"])return[0,i["s"]*Object(i["F"])(r/2)];var o=(i["s"]/t-t/i["s"])/2,a=n/(1+Object(i["h"])(r));return[i["s"]*(Object(i["x"])(t)*Object(i["B"])(o*o+1-a*a)-o),i["s"]*a]}o.invert=function(t,e){if(!e)return[t,0];var n=e/i["s"],r=(i["s"]*i["s"]*(1-n*n)-t*t)/(2*i["s"]*t);return[t?i["s"]*(Object(i["x"])(t)*Object(i["B"])(r*r+1)-r):0,i["o"]*Object(i["y"])(2*Object(i["f"])(n))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(79.4183)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){if(!e)return[t,0];var n=Object(i["a"])(e);if(!t||n===i["o"])return[0,e];var r=n/i["o"],o=r*r,a=(8*r-o*(o+2)-5)/(2*o*(r-1)),s=a*a,u=r*a,c=o+s+2*u,l=r+3*a,f=t/i["o"],h=f+1/f,p=Object(i["x"])(Object(i["a"])(t)-i["o"])*Object(i["B"])(h*h-4),d=p*p,v=c*(o+s*d-1)+(1-o)*(o*(l*l+4*s)+12*u*s+4*s*s),g=(p*(c+s-1)+2*Object(i["B"])(v))/(4*c+d);return[Object(i["x"])(t)*i["o"]*g,Object(i["x"])(e)*i["o"]*Object(i["B"])(1+p*Object(i["a"])(g)-g*g)]}o.invert=function(t,e){var n;if(!t||!e)return[t,e];e/=i["s"];var r=Object(i["x"])(t)*t/i["o"],o=(r*r-1+4*e*e)/Object(i["a"])(r),a=o*o,s=2*e,u=50;do{var c=s*s,l=(8*s-c*(c+2)-5)/(2*c*(s-1)),f=(3*s-c*s-10)/(2*c*s),h=l*l,p=s*l,d=s+l,v=d*d,g=s+3*l,m=v*(c+h*a-1)+(1-c)*(c*(g*g+4*h)+h*(12*p+4*h)),y=-2*d*(4*p*h+(1-4*c+3*c*c)*(1+f)+h*(14*c-6-a+(8*c-8-2*a)*f)+p*(12*c-8+(10*c-10-a)*f)),_=Object(i["B"])(m),b=o*(v+h-1)+2*_-r*(4*v+a),x=o*(2*l*f+2*d*(1+f))+y/_-8*d*(o*(-1+h+v)+2*_)*(1+f)/(a+4*v);s-=n=b/x}while(n>i["k"]&&--u>0);return[Object(i["x"])(t)*(Object(i["B"])(o*o+4)+o)*i["s"]/4,i["o"]*s]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(127.16)}},function(t,e,n){"use strict";n.d(e,"b",function(){return u});var r=n(0),i=n(1),o=n(21),a=4*i["s"]+3*Object(i["B"])(3),s=2*Object(i["B"])(2*i["s"]*Object(i["B"])(3)/a),u=Object(o["b"])(s*Object(i["B"])(3)/i["s"],s,a/6);e["a"]=function(){return Object(r["geoProjection"])(u).scale(176.84)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){return[t*Object(i["B"])(1-3*e*e/(i["s"]*i["s"])),e]}o.invert=function(t,e){return[t/Object(i["B"])(1-3*e*e/(i["s"]*i["s"])),e]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(152.63)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=.90631*Object(i["y"])(e),r=Object(i["B"])(1-n*n),o=Object(i["B"])(2/(1+r*Object(i["h"])(t/=3)));return[2.66723*r*o*Object(i["y"])(t),1.24104*n*o]}o.invert=function(t,e){var n=t/2.66723,r=e/1.24104,o=Object(i["B"])(n*n+r*r),a=2*Object(i["e"])(o/2);return[3*Object(i["g"])(t*Object(i["F"])(a),2.66723*o),o&&Object(i["e"])(e*Object(i["y"])(a)/(1.24104*.90631*o))]},e["a"]=function(){return Object(r["geoProjection"])(o).scale(172.632)}},function(t,e,n){"use strict";e["b"]=o;var r=n(0),i=n(1);function o(t,e){var n=Object(i["h"])(e),r=Object(i["h"])(t)*n,o=1-r,a=Object(i["h"])(t=Object(i["g"])(Object(i["y"])(t)*n,-Object(i["y"])(e))),s=Object(i["y"])(t);return n=Object(i["B"])(1-r*r),[s*n-a*o,-a*n-s*o]}o.invert=function(t,e){var n=(t*t+e*e)/-2,r=Object(i["B"])(-n*(2+n)),o=e*n+t*r,a=t*n-e*r,s=Object(i["B"])(a*a+o*o);return[Object(i["g"])(r*o,s*(1+n)),s?-Object(i["e"])(r*a/s):0]},e["a"]=function(){return Object(r["geoProjection"])(o).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";e["b"]=a;var r=n(0),i=n(129),o=n(1);function a(t,e){var n=Object(i["a"])(t,e);return[(n[0]+t/o["o"])/2,(n[1]+e)/2]}a.invert=function(t,e){var n=t,r=e,i=25;do{var a,s=Object(o["h"])(r),u=Object(o["y"])(r),c=Object(o["y"])(2*r),l=u*u,f=s*s,h=Object(o["y"])(n),p=Object(o["h"])(n/2),d=Object(o["y"])(n/2),v=d*d,g=1-f*p*p,m=g?Object(o["b"])(s*p)*Object(o["B"])(a=1/g):a=0,y=.5*(2*m*s*d+n/o["o"])-t,_=.5*(m*u+r)-e,b=.5*a*(f*v+m*s*p*l)+.5/o["o"],x=a*(h*c/4-m*u*d),w=.125*a*(c*d-m*u*f*h),M=.5*a*(l*p+m*v*s)+.5,E=x*w-M*b,O=(_*x-y*M)/E,S=(y*w-_*b)/E;n-=O,r-=S}while((Object(o["a"])(O)>o["k"]||Object(o["a"])(S)>o["k"])&&--i>0);return[n,r]},e["a"]=function(){return Object(r["geoProjection"])(a).scale(158.837)}},function(t,e,n){var r=n(11),i=n(54),o=n(140);function a(t,e){var n=void 0;if(r(e)&&(n=e),i(e)&&(n=function(t){return o(t,e)}),n)for(var a=0;a<t.length;a+=1)if(n(t[a]))return t[a];return null}t.exports=a},function(t,e){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t){return"object"===("undefined"===typeof t?"undefined":n(t))&&null!==t};t.exports=r},function(t,e,n){(function(t,r){r(e,n(323),n(33))})(0,function(t,e,n){"use strict";var r=1e-6;function i(){}var o=1/0,a=o,s=-o,u=s,c={point:l,lineStart:i,lineEnd:i,polygonStart:i,polygonEnd:i,result:function(){var t=[[o,a],[s,u]];return s=u=-(a=o=1/0),t}};function l(t,e){t<o&&(o=t),t>s&&(s=t),e<a&&(a=e),e>u&&(u=e)}function f(t,n,r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),e.geoStream(r,t.stream(c));var s=c.result(),u=Math.min(i/(s[1][0]-s[0][0]),o/(s[1][1]-s[0][1])),l=+n[0][0]+(i-u*(s[1][0]+s[0][0]))/2,f=+n[0][1]+(o-u*(s[1][1]+s[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*u).translate([l,f])}function h(t,e,n){return f(t,[[0,0],e],n)}function p(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function d(){var t,i,o,a,s,u,c=e.geoAlbers(),l=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),v={point:function(t,e){u=[t,e]}};function g(t){var e=t[0],n=t[1];return u=null,o.point(e,n),u||(a.point(e,n),u)||(s.point(e,n),u)}function m(){return t=i=null,g}return g.invert=function(t){var e=c.scale(),n=c.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?d:c).invert(t)},g.stream=function(e){return t&&i===e?t:t=p([c.stream(i=e),l.stream(e),d.stream(e)])},g.precision=function(t){return arguments.length?(c.precision(t),l.precision(t),d.precision(t),m()):c.precision()},g.scale=function(t){return arguments.length?(c.scale(t),l.scale(.35*t),d.scale(t),g.translate(c.translate())):c.scale()},g.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),n=+t[0],i=+t[1];return o=c.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(v),a=l.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+r,i+.12*e+r],[n-.214*e-r,i+.234*e-r]]).stream(v),s=d.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+r,i+.166*e+r],[n-.115*e-r,i+.234*e-r]]).stream(v),m()},g.fitExtent=function(t,e){return f(g,t,e)},g.fitSize=function(t,e){return h(g,t,e)},g.drawCompositionBorders=function(t){var e=c([-102.91,26.3]),n=c([-104,27.5]),r=c([-108,29.1]),i=c([-110,29.1]),o=c([-110,26.7]),a=c([-112.8,27.6]),s=c([-114.3,30.6]),u=c([-119.3,30.1]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},g.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},g.scale(1070)}function v(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function g(){var t,i,o,a,s,u,c,l,p,d=e.geoAlbers(),g=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),m=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),y=e.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),_=e.geoEquirectangular().rotate([173,14]),b=e.geoEquirectangular().rotate([-145,-16.8]),x={point:function(t,e){p=[t,e]}};function w(t){var e=t[0],n=t[1];return p=null,o.point(e,n),p||(a.point(e,n),p)||(s.point(e,n),p)||(u.point(e,n),p)||(c.point(e,n),p)||(l.point(e,n),p)}function M(){return t=i=null,w}return w.invert=function(t){var e=d.scale(),n=d.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?g:i>=.166&&i<.234&&r>=-.214&&r<-.115?m:i>=.2064&&i<.2413&&r>=.312&&r<.385?y:i>=.09&&i<.1197&&r>=-.4243&&r<-.3232?_:i>=-.0518&&i<.0895&&r>=-.4243&&r<-.3824?b:d).invert(t)},w.stream=function(e){return t&&i===e?t:t=v([d.stream(i=e),g.stream(e),m.stream(e),y.stream(e),_.stream(e),b.stream(e)])},w.precision=function(t){return arguments.length?(d.precision(t),g.precision(t),m.precision(t),y.precision(t),_.precision(t),b.precision(t),M()):d.precision()},w.scale=function(t){return arguments.length?(d.scale(t),g.scale(.35*t),m.scale(t),y.scale(t),_.scale(2*t),b.scale(t),w.translate(d.translate())):d.scale()},w.translate=function(t){if(!arguments.length)return d.translate();var e=d.scale(),n=+t[0],i=+t[1];return o=d.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(x),a=g.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+r,i+.12*e+r],[n-.214*e-r,i+.233*e-r]]).stream(x),s=m.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+r,i+.166*e+r],[n-.115*e-r,i+.233*e-r]]).stream(x),u=y.translate([n+.35*e,i+.224*e]).clipExtent([[n+.312*e+r,i+.2064*e+r],[n+.385*e-r,i+.233*e-r]]).stream(x),c=_.translate([n-.492*e,i+.09*e]).clipExtent([[n-.4243*e+r,i+.0903*e+r],[n-.3233*e-r,i+.1197*e-r]]).stream(x),l=b.translate([n-.408*e,i+.018*e]).clipExtent([[n-.4244*e+r,i-.0519*e+r],[n-.3824*e-r,i+.0895*e-r]]).stream(x),M()},w.fitExtent=function(t,e){return f(w,t,e)},w.fitSize=function(t,e){return h(w,t,e)},w.drawCompositionBorders=function(t){var e=d([-110.4641,28.2805]),n=d([-104.0597,28.9528]),r=d([-103.7049,25.1031]),i=d([-109.8337,24.4531]),o=d([-124.4745,28.1407]),a=d([-110.931,30.8844]),s=d([-109.8337,24.4531]),u=d([-122.4628,21.8562]),c=d([-76.8579,25.1544]),l=d([-72.429,24.2097]),f=d([-72.8265,22.7056]),h=d([-77.1852,23.6392]),p=d([-125.0093,29.7791]),v=d([-118.5193,31.3262]),g=d([-118.064,29.6912]),m=d([-124.4369,28.169]),y=d([-128.1314,37.4582]),_=d([-125.2132,38.214]),b=d([-122.3616,30.5115]),x=d([-125.0315,29.8211]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(c[0],c[1]),t.lineTo(l[0],l[1]),t.lineTo(f[0],f[1]),t.lineTo(f[0],f[1]),t.lineTo(h[0],h[1]),t.closePath(),t.moveTo(p[0],p[1]),t.lineTo(v[0],v[1]),t.lineTo(g[0],g[1]),t.lineTo(g[0],g[1]),t.lineTo(m[0],m[1]),t.closePath(),t.moveTo(y[0],y[1]),t.lineTo(_[0],_[1]),t.lineTo(b[0],b[1]),t.lineTo(b[0],b[1]),t.lineTo(x[0],x[1]),t.closePath()},w.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},w.scale(1070)}function m(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function y(){var t,i,o,a,s,u=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),c=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),l={point:function(t,e){s=[t,e]}};function p(t){var e=t[0],n=t[1];return s=null,o.point(e,n),s||(a.point(e,n),s)}function d(){return t=i=null,p}return p.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.05346&&i<.0897&&r>=-.13388&&r<-.0322?c:u).invert(t)},p.stream=function(e){return t&&i===e?t:t=m([u.stream(i=e),c.stream(e)])},p.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),d()):u.precision()},p.scale=function(t){return arguments.length?(u.scale(t),c.scale(t),p.translate(u.translate())):u.scale()},p.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],i=+t[1];return o=u.translate(t).clipExtent([[n-.06857*e,i-.1288*e],[n+.13249*e,i+.06*e]]).stream(l),a=c.translate([n+.1*e,i-.094*e]).clipExtent([[n-.1331*e+r,i+.053457*e+r],[n-.0354*e-r,i+.08969*e-r]]).stream(l),d()},p.fitExtent=function(t,e){return f(p,t,e)},p.fitSize=function(t,e){return h(p,t,e)},p.drawCompositionBorders=function(t){var e=u([-14.034675,34.965007]),n=u([-7.4208899,35.536988]),r=u([-7.3148275,33.54359]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1])},p.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},p.scale(2700)}function _(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function b(){var t,i,o,a,s,u,c=e.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),l=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),p=e.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),d={point:function(t,e){u=[t,e]}};function v(t){var e=t[0],n=t[1];return u=null,o.point(e,n),u||(a.point(e,n),u)||(s.point(e,n),u)}function g(){return t=i=null,v}return v.invert=function(t){var e=c.scale(),n=c.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.0093&&i<.03678&&r>=-.03875&&r<-.0116?l:i>=-.0412&&i<.0091&&r>=-.07782&&r<-.01166?p:c).invert(t)},v.stream=function(e){return t&&i===e?t:t=_([c.stream(i=e),l.stream(e),p.stream(e)])},v.precision=function(t){return arguments.length?(c.precision(t),l.precision(t),p.precision(t),g()):c.precision()},v.scale=function(t){return arguments.length?(c.scale(t),l.scale(t),p.scale(.6*t),v.translate(c.translate())):c.scale()},v.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),n=+t[0],i=+t[1];return o=c.translate(t).clipExtent([[n-.0115*e,i-.1138*e],[n+.2105*e,i+.0673*e]]).stream(d),a=l.translate([n-.0265*e,i+.025*e]).clipExtent([[n-.0388*e+r,i+.0093*e+r],[n-.0116*e-r,i+.0368*e-r]]).stream(d),s=p.translate([n-.045*e,i+-.02*e]).clipExtent([[n-.0778*e+r,i-.0413*e+r],[n-.0117*e-r,i+.0091*e-r]]).stream(d),g()},v.fitExtent=function(t,e){return f(v,t,e)},v.fitSize=function(t,e){return h(v,t,e)},v.drawCompositionBorders=function(t){var e=c([-12.8351,38.7113]),n=c([-10.8482,38.7633]),r=c([-10.8181,37.2072]),i=c([-12.7345,37.1573]),o=c([-16.0753,41.4436]),a=c([-10.9168,41.6861]),s=c([-10.8557,38.7747]),u=c([-15.6728,38.5505]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath()},v.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},v.scale(4200)}function x(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function w(){var t,i,o,a,s,u=e.geoMercator().rotate([80,1.5]),c=e.geoMercator().rotate([90.73,1]),l={point:function(t,e){s=[t,e]}};function p(t){var e=t[0],n=t[1];return s=null,o.point(e,n),s||(a.point(e,n),s)}function d(){return t=i=null,p}return p.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0676&&i<-.026&&r>=-.0857&&r<-.0263?c:u).invert(t)},p.stream=function(e){return t&&i===e?t:t=x([u.stream(i=e),c.stream(e)])},p.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),d()):u.precision()},p.scale=function(t){return arguments.length?(u.scale(t),c.scale(t),p.translate(u.translate())):u.scale()},p.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],i=+t[1];return o=u.translate(t).clipExtent([[n-.0262*e,i-.0734*e],[n+.1741*e,i+.079*e]]).stream(l),a=c.translate([n-.06*e,i-.04*e]).clipExtent([[n-.0857*e+r,i-.0676*e+r],[n-.0263*e-r,i-.026*e-r]]).stream(l),d()},p.fitExtent=function(t,e){return f(p,t,e)},p.fitSize=function(t,e){return h(p,t,e)},p.drawCompositionBorders=function(t){var e=u([-84.9032,2.3757]),n=u([-81.5047,2.3708]),r=u([-81.5063,-.01]),i=u([-84.9086,-.005]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},p.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},p.scale(3500)}function M(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function E(){var t,i,o,a,s,u,c,l=e.geoTransverseMercator().rotate([72,37]),p=e.geoStereographic().rotate([72,0]),d=e.geoMercator().rotate([80,33.5]),v=e.geoMercator().rotate([110,25]),g={point:function(t,e){c=[t,e]}};function m(t){var e=t[0],n=t[1];return c=null,o.point(e,n),c||(a.point(e,n),c)||(s.point(e,n),c)||(u.point(e,n),c)}function y(){return t=i=null,m}return m.invert=function(t){var e=l.scale(),n=l.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.2582&&i<.32&&r>=-.1036&&r<-.087?p:i>=-.01298&&i<.0133&&r>=-.11396&&r<-.05944?d:i>=.01539&&i<.03911&&r>=-.089&&r<-.0588?v:l).invert(t)},m.stream=function(e){return t&&i===e?t:t=M([l.stream(i=e),p.stream(e),d.stream(e),v.stream(e)])},m.precision=function(t){return arguments.length?(l.precision(t),p.precision(t),d.precision(t),v.precision(t),y()):l.precision()},m.scale=function(t){return arguments.length?(l.scale(t),p.scale(.15*t),d.scale(1.5*t),v.scale(1.5*t),m.translate(l.translate())):l.scale()},m.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),n=+t[0],i=+t[1];return o=l.translate(t).clipExtent([[n-.059*e,i-.3835*e],[n+.4498*e,i+.3375*e]]).stream(g),a=p.translate([n-.087*e,i+.17*e]).clipExtent([[n-.1166*e+r,i+.2582*e+r],[n-.06*e-r,i+.32*e-r]]).stream(g),s=d.translate([n-.092*e,i-0*e]).clipExtent([[n-.114*e+r,i-.013*e+r],[n-.0594*e-r,i+.0133*e-r]]).stream(g),u=v.translate([n-.089*e,i-.0265*e]).clipExtent([[n-.089*e+r,i+.0154*e+r],[n-.0588*e-r,i+.0391*e-r]]).stream(g),y()},m.fitExtent=function(t,e){return f(m,t,e)},m.fitSize=function(t,e){return h(m,t,e)},m.drawCompositionBorders=function(t){var e=l([-82.6999,-51.3043]),n=l([-77.5442,-51.6631]),r=l([-78.0254,-55.186]),i=l([-83.6106,-54.7785]),o=l([-80.0638,-35.984]),a=l([-76.2153,-36.1811]),s=l([-76.2994,-37.6839]),u=l([-80.2231,-37.4757]),c=l([-78.442,-37.706]),f=l([-76.263,-37.8054]),h=l([-76.344,-39.1595]),p=l([-78.5638,-39.0559]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(c[0],c[1]),t.lineTo(f[0],f[1]),t.lineTo(h[0],h[1]),t.lineTo(h[0],h[1]),t.lineTo(p[0],p[1]),t.closePath()},m.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},m.scale(700)}function O(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function S(){var t,i,o,a,s,u,c=e.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),l=e.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),p=e.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),d={point:function(t,e){u=[t,e]}};function v(t){var e=t[0],n=t[1];return u=null,o.point(e,n),u||(a.point(e,n),u)||(s.point(e,n),u)}function g(){return t=i=null,v}return v.invert=function(t){var e=c.scale(),n=c.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.10925&&i<-.02701&&r>=-.135&&r<-.0397?l:i>=.04713&&i<.11138&&r>=-.03986&&r<.051?p:c).invert(t)},v.stream=function(e){return t&&i===e?t:t=O([c.stream(i=e),l.stream(e),p.stream(e)])},v.precision=function(t){return arguments.length?(c.precision(t),l.precision(t),p.precision(t),g()):c.precision()},v.scale=function(t){return arguments.length?(c.scale(t),l.scale(t),p.scale(.7*t),v.translate(c.translate())):c.scale()},v.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),n=+t[0],i=+t[1];return o=c.translate(t).clipExtent([[n-.1352*e,i-.1091*e],[n+.117*e,i+.098*e]]).stream(d),a=l.translate([n-.0425*e,i-.005*e]).clipExtent([[n-.135*e+r,i-.1093*e+r],[n-.0397*e-r,i-.027*e-r]]).stream(d),s=p.translate(t).clipExtent([[n-.0399*e+r,i+.0471*e+r],[n+.051*e-r,i+.1114*e-r]]).stream(d),g()},v.fitExtent=function(t,e){return f(v,t,e)},v.fitSize=function(t,e){return h(v,t,e)},v.drawCompositionBorders=function(t){var e=c([126.01320483689143,41.621090310215585]),n=c([133.04304387025903,42.15087523707186]),r=c([133.3021766080688,37.43975444725098]),i=c([126.87889168628224,36.95488945159779]),o=c([132.9,29.8]),a=c([134,33]),s=c([139.3,33.2]),u=c([139.16,30.5]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},v.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},v.scale(2200)}function T(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function j(){var t,i,o,a,s,u,c,l,p,d,v,g,m,y,_,b=e.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),x=e.geoMercator().center([-53.2,3.9]),w=e.geoMercator().center([-61.03,14.67]),M=e.geoMercator().center([-61.46,16.14]),E=e.geoMercator().center([-62.85,17.92]),O=e.geoMercator().center([-56.23,46.93]),S=e.geoMercator().center([45.16,-12.8]),j=e.geoMercator().center([55.52,-21.13]),A=e.geoMercator().center([165.8,-21.07]),C=e.geoMercator().center([-178.1,-14.3]),L=e.geoMercator().center([-150.55,-17.11]),P=e.geoMercator().center([-150.55,-17.11]),I={point:function(t,e){_=[t,e]}};function R(t){var e=t[0],n=t[1];return _=null,o.point(e,n),_||(a.point(e,n),_)||(s.point(e,n),_)||(u.point(e,n),_)||(c.point(e,n),_)||(l.point(e,n),_)||(p.point(e,n),_)||(d.point(e,n),_)||(v.point(e,n),_)||(g.point(e,n),_)||(m.point(e,n),_)||(y.point(e,n),_)}function F(){return t=i=null,R}return R.invert=function(t){var e=b.scale(),n=b.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.029&&i<.0864&&r>=-.14&&r<-.0996?x:i>=0&&i<.029&&r>=-.14&&r<-.0996?w:i>=-.032&&i<0&&r>=-.14&&r<-.0996?M:i>=-.052&&i<-.032&&r>=-.14&&r<-.0996?E:i>=-.076&&i<.052&&r>=-.14&&r<-.0996?O:i>=-.076&&i<-.052&&r>=.0967&&r<.1371?S:i>=-.052&&i<-.02&&r>=.0967&&r<.1371?j:i>=-.02&&i<.012&&r>=.0967&&r<.1371?A:i>=.012&&i<.033&&r>=.0967&&r<.1371?C:i>=.033&&i<.0864&&r>=.0967&&r<.1371?L:b).invert(t)},R.stream=function(e){return t&&i===e?t:t=T([b.stream(i=e),x.stream(e),w.stream(e),M.stream(e),E.stream(e),O.stream(e),S.stream(e),j.stream(e),A.stream(e),C.stream(e),L.stream(e),P.stream(e)])},R.precision=function(t){return arguments.length?(b.precision(t),x.precision(t),w.precision(t),M.precision(t),E.precision(t),O.precision(t),S.precision(t),j.precision(t),A.precision(t),C.precision(t),L.precision(t),P.precision(t),F()):b.precision()},R.scale=function(t){return arguments.length?(b.scale(t),x.scale(.6*t),w.scale(1.6*t),M.scale(1.4*t),E.scale(5*t),O.scale(1.3*t),S.scale(1.6*t),j.scale(1.2*t),A.scale(.3*t),C.scale(2.7*t),L.scale(.5*t),P.scale(.06*t),R.translate(b.translate())):b.scale()},R.translate=function(t){if(!arguments.length)return b.translate();var e=b.scale(),n=+t[0],i=+t[1];return o=b.translate(t).clipExtent([[n-.0996*e,i-.0908*e],[n+.0967*e,i+.0864*e]]).stream(I),a=x.translate([n-.12*e,i+.0575*e]).clipExtent([[n-.14*e+r,i+.029*e+r],[n-.0996*e-r,i+.0864*e-r]]).stream(I),s=w.translate([n-.12*e,i+.013*e]).clipExtent([[n-.14*e+r,i+0*e+r],[n-.0996*e-r,i+.029*e-r]]).stream(I),u=M.translate([n-.12*e,i-.014*e]).clipExtent([[n-.14*e+r,i-.032*e+r],[n-.0996*e-r,i+0*e-r]]).stream(I),c=E.translate([n-.12*e,i-.044*e]).clipExtent([[n-.14*e+r,i-.052*e+r],[n-.0996*e-r,i-.032*e-r]]).stream(I),l=O.translate([n-.12*e,i-.065*e]).clipExtent([[n-.14*e+r,i-.076*e+r],[n-.0996*e-r,i-.052*e-r]]).stream(I),p=S.translate([n+.117*e,i-.064*e]).clipExtent([[n+.0967*e+r,i-.076*e+r],[n+.1371*e-r,i-.052*e-r]]).stream(I),d=j.translate([n+.116*e,i-.0355*e]).clipExtent([[n+.0967*e+r,i-.052*e+r],[n+.1371*e-r,i-.02*e-r]]).stream(I),v=A.translate([n+.116*e,i-.0048*e]).clipExtent([[n+.0967*e+r,i-.02*e+r],[n+.1371*e-r,i+.012*e-r]]).stream(I),g=C.translate([n+.116*e,i+.022*e]).clipExtent([[n+.0967*e+r,i+.012*e+r],[n+.1371*e-r,i+.033*e-r]]).stream(I),y=P.translate([n+.11*e,i+.045*e]).clipExtent([[n+.0967*e+r,i+.033*e+r],[n+.1371*e-r,i+.06*e-r]]).stream(I),m=L.translate([n+.115*e,i+.075*e]).clipExtent([[n+.0967*e+r,i+.06*e+r],[n+.1371*e-r,i+.0864*e-r]]).stream(I),F()},R.fitExtent=function(t,e){return f(R,t,e)},R.fitSize=function(t,e){return h(R,t,e)},R.drawCompositionBorders=function(t){var e,n,r,i;e=b([-7.938886725111036,43.7219460918835]),n=b([-4.832080896458295,44.12930268549372]),r=b([-4.205299743793263,40.98096346967365]),i=b([-7.071796453126152,40.610037319181444]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([-8.42751373617692,45.32889452553031]),n=b([-5.18599305777107,45.7566442062976]),r=b([-4.832080905154431,44.129302726751426]),i=b([-7.938886737126192,43.72194613263854]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([-9.012656899657046,47.127733821030176]),n=b([-5.6105244772793155,47.579777861410626]),r=b([-5.185993067168585,45.756644248170346]),i=b([-8.427513749141811,45.32889456686326]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([-9.405747558985553,48.26506375557457]),n=b([-5.896175018439575,48.733352850851624]),r=b([-5.610524487556043,47.57977790393761]),i=b([-9.012656913808351,47.127733862971255]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([-9.908436061346974,49.642448789505856]),n=b([-6.262026716233124,50.131426841787174]),r=b([-5.896175029331232,48.73335289377258]),i=b([-9.40574757396393,48.26506379787767]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([11.996907706504462,50.16039028163579]),n=b([15.649907879773343,49.68279246765253]),r=b([15.156712840526632,48.30371557625831]),i=b([11.64122661754411,48.761078240546816]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([11.641226606955788,48.7610781975889]),n=b([15.156712825832164,48.30371553390465]),r=b([14.549932166241172,46.4866532486199]),i=b([11.204443787952183,46.91899233914248]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([11.204443778297161,46.918992296823646]),n=b([14.549932152815039,46.486653206856396]),r=b([13.994409796764009,44.695833444323256]),i=b([10.805306599253848,45.105133870684924]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([10.805306590412085,45.10513382903308]),n=b([13.99440978444733,44.695833403183606]),r=b([13.654633799024392,43.53552468558152]),i=b([10.561516803980956,43.930671459798624]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([10.561516795617383,43.93067141859757]),n=b([13.654633787361952,43.5355246448671]),r=b([12.867691604239901,40.640701985019405]),i=b([9.997809515987688,41.00288343254471]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([10.8,42.4]),n=b([12.8,42.13]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1])},R.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},R.scale(2700)}function A(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function C(){var t,i,o,a,s,u,c,l,p,d,v,g,m,y,_,b=e.geoConicConformal().rotate([-10,-53]).parallels([0,60]),x=e.geoMercator().center([-61.46,16.14]),w=e.geoMercator().center([-53.2,3.9]),M=e.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),E=e.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),O=e.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),S=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),T=e.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),j=e.geoMercator().center([-61.03,14.67]),C=e.geoMercator().center([45.16,-12.8]),L=e.geoMercator().center([55.52,-21.13]),P=e.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),I={point:function(t,e){_=[t,e]}};function R(t){var e=t[0],n=t[1];return _=null,o.point(e,n),_||(s.point(e,n),_)||(v.point(e,n),_)||(a.point(e,n),_)||(d.point(e,n),_)||(p.point(e,n),_)||(g.point(e,n),_)||(m.point(e,n),_)||(y.point(e,n),_)||(u.point(e,n),_)||(c.point(e,n),_)||(l.point(e,n),_)}function F(){return t=i=null,R}return R.invert=function(t){var e=b.scale(),n=b.translate(),r=(t[0]-(n[0]+.08*e))/e,i=(t[1]-n[1])/e;return(i>=-.31&&i<-.24&&r>=.14&&r<.24?x:i>=-.24&&i<-.17&&r>=.14&&r<.24?w:i>=-.17&&i<-.12&&r>=.21&&r<.24?E:i>=-.17&&i<-.14&&r>=.14&&r<.165?O:i>=-.17&&i<-.1&&r>=.14&&r<.24?M:i>=-.1&&i<-.03&&r>=.14&&r<.24?S:i>=-.03&&i<.04&&r>=.14&&r<.24?T:i>=-.31&&i<-.24&&r>=.24&&r<.34?j:i>=-.24&&i<-.17&&r>=.24&&r<.34?C:i>=-.17&&i<-.1&&r>=.24&&r<.34?L:i>=-.1&&i<-.03&&r>=.24&&r<.34?P:b).invert(t)},R.stream=function(e){return t&&i===e?t:t=A([b.stream(i=e),w.stream(e),j.stream(e),x.stream(e),T.stream(e),S.stream(e),C.stream(e),L.stream(e),P.stream(e),M.stream(e),E.stream(e),O.stream(e)])},R.precision=function(t){return arguments.length?(b.precision(t),w.precision(t),j.precision(t),x.precision(t),T.precision(t),S.precision(t),C.precision(t),L.precision(t),P.precision(t),M.precision(t),E.precision(t),O.precision(t),F()):b.precision()},R.scale=function(t){return arguments.length?(b.scale(t),x.scale(3*t),w.scale(.8*t),j.scale(3.5*t),L.scale(2.7*t),M.scale(2*t),E.scale(2*t),O.scale(2*t),S.scale(3*t),T.scale(t),C.scale(5.5*t),P.scale(6*t),R.translate(b.translate())):b.scale()},R.translate=function(t){if(!arguments.length)return b.translate();var e=b.scale(),n=+t[0],i=+t[1];return o=b.translate([n-.08*e,i]).clipExtent([[n-.51*e,i-.33*e],[n+.5*e,i+.33*e]]).stream(I),a=x.translate([n+.19*e,i-.275*e]).clipExtent([[n+.14*e+r,i-.31*e+r],[n+.24*e-r,i-.24*e-r]]).stream(I),s=w.translate([n+.19*e,i-.205*e]).clipExtent([[n+.14*e+r,i-.24*e+r],[n+.24*e-r,i-.17*e-r]]).stream(I),u=M.translate([n+.19*e,i-.135*e]).clipExtent([[n+.14*e+r,i-.17*e+r],[n+.24*e-r,i-.1*e-r]]).stream(I),c=E.translate([n+.225*e,i-.147*e]).clipExtent([[n+.21*e+r,i-.17*e+r],[n+.24*e-r,i-.12*e-r]]).stream(I),l=O.translate([n+.153*e,i-.15*e]).clipExtent([[n+.14*e+r,i-.17*e+r],[n+.165*e-r,i-.14*e-r]]).stream(I),p=S.translate([n+.19*e,i-.065*e]).clipExtent([[n+.14*e+r,i-.1*e+r],[n+.24*e-r,i-.03*e-r]]).stream(I),d=T.translate([n+.19*e,i+.005*e]).clipExtent([[n+.14*e+r,i-.03*e+r],[n+.24*e-r,i+.04*e-r]]).stream(I),v=j.translate([n+.29*e,i-.275*e]).clipExtent([[n+.24*e+r,i-.31*e+r],[n+.34*e-r,i-.24*e-r]]).stream(I),g=C.translate([n+.29*e,i-.205*e]).clipExtent([[n+.24*e+r,i-.24*e+r],[n+.34*e-r,i-.17*e-r]]).stream(I),m=L.translate([n+.29*e,i-.135*e]).clipExtent([[n+.24*e+r,i-.17*e+r],[n+.34*e-r,i-.1*e-r]]).stream(I),y=P.translate([n+.29*e,i-.065*e]).clipExtent([[n+.24*e+r,i-.1*e+r],[n+.34*e-r,i-.03*e-r]]).stream(I),F()},R.fitExtent=function(t,e){return f(R,t,e)},R.fitSize=function(t,e){return h(R,t,e)},R.drawCompositionBorders=function(t){var e,n,r,i;e=b([42.45755610828648,63.343658547914934]),n=b([52.65837266667029,59.35045080290929]),r=b([47.19754502247785,56.12653496548117]),i=b([37.673034273363044,59.61638268506111]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([59.41110754003403,62.35069727399336]),n=b([66.75050228640794,57.11797303636038]),r=b([60.236065725110436,54.63331433818992]),i=b([52.65837313153311,59.350450804599355]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([48.81091130080243,66.93353402634641]),n=b([59.41110730654679,62.35069740653086]),r=b([52.6583728974441,59.3504509222445]),i=b([42.45755631675751,63.34365868805821]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([31.054198418446475,52.1080673766184]),n=b([39.09869284884117,49.400700047190554]),r=b([36.0580811499175,46.02944174908498]),i=b([28.690508588835726,48.433126979386415]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([33.977877745912025,55.849945501331]),n=b([42.75328432167726,52.78455122462353]),r=b([39.09869297540224,49.400700176148625]),i=b([31.05419851807008,52.10806751810923]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([52.658372900759296,59.35045068526415]),n=b([60.23606549583304,54.63331423800264]),r=b([54.6756370953122,51.892298789399455]),i=b([47.19754524788189,56.126534861222794]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([47.19754506082455,56.126534735591456]),n=b([54.675636900123514,51.892298681337095]),r=b([49.94448648951486,48.98775484983285]),i=b([42.75328468716108,52.78455126060818]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([42.75328453416769,52.78455113209101]),n=b([49.94448632339758,48.98775473706457]),r=b([45.912339990394315,45.99361784987003]),i=b([39.09869317356607,49.40070009378711]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([37.673034114296634,59.61638254183119]),n=b([47.197544835420544,56.126534839849846]),r=b([42.75328447467064,52.78455135314068]),i=b([33.977877870363905,55.849945644671145]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([44.56748486446032,57.26489367845818]),r=b([43.9335791193588,53.746540942601726]),i=b([43,56]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=b([37.673034114296634,59.61638254183119]),n=b([40.25902691953466,58.83002044222639]),r=b([38.458270492742024,57.26232178028002]),i=b([35.97754948030156,58.00266637992386]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},R.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},R.scale(750)}function L(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function P(){var t,i,o,a,s,u=e.geoMercator().center([105.25,4]),c=e.geoMercator().center([118.65,2.86]),l={point:function(t,e){s=[t,e]}};function p(t){var e=t[0],n=t[1];return s=null,o.point(e,n),s||(a.point(e,n),s)}function d(){return t=i=null,p}return p.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0521&&i<.0229&&r>=-.0111&&r<.1?c:u).invert(t)},p.stream=function(e){return t&&i===e?t:t=L([u.stream(i=e),c.stream(e)])},p.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),d()):u.precision()},p.scale=function(t){return arguments.length?(u.scale(t),c.scale(.615*t),p.translate(u.translate())):u.scale()},p.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],i=+t[1];return o=u.translate(t).clipExtent([[n-.11*e,i-.0521*e],[n-.0111*e,i+.0521*e]]).stream(l),a=c.translate([n+.09*e,i-0*e]).clipExtent([[n-.0111*e+r,i-.0521*e+r],[n+.1*e-r,i+.024*e-r]]).stream(l),d()},p.fitExtent=function(t,e){return f(p,t,e)},p.fitSize=function(t,e){return h(p,t,e)},p.drawCompositionBorders=function(t){var e=u([106.3214,2.0228]),n=u([105.1843,2.3761]),r=u([104.2151,3.3618]),i=u([104.215,4.5651]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1])},p.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},p.scale(4800)}function I(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}function R(){var t,i,o,a,s,u,c=e.geoMercator().rotate([-9.5,-1.5]),l=e.geoMercator().rotate([-8.6,-3.5]),p=e.geoMercator().rotate([-5.6,1.45]),d={point:function(t,e){u=[t,e]}};function v(t){var e=t[0],n=t[1];return u=null,o.point(e,n),u||(a.point(e,n),u)||(s.point(e,n),u)}function g(){return t=i=null,v}return v.invert=function(t){var e=c.scale(),n=c.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.02&&i<0&&r>=-.038&&r<-.005?l:i>=0&&i<.02&&r>=-.038&&r<-.005?p:c).invert(t)},v.stream=function(e){return t&&i===e?t:t=I([c.stream(i=e),l.stream(e),p.stream(e)])},v.precision=function(t){return arguments.length?(c.precision(t),l.precision(t),p.precision(t),g()):c.precision()},v.scale=function(t){return arguments.length?(c.scale(t),l.scale(1.5*t),p.scale(4*t),v.translate(c.translate())):c.scale()},v.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),n=+t[0],i=+t[1];return o=c.translate(t).clipExtent([[n-.005*e,i-.02*e],[n+.038*e,i+.02*e]]).stream(d),a=l.translate([n-.025*e,i-.01*e]).clipExtent([[n-.038*e+r,i-.02*e+r],[n-.005*e-r,i+0*e-r]]).stream(d),s=p.translate([n-.025*e,i+.01*e]).clipExtent([[n-.038*e+r,i-0*e+r],[n-.005*e-r,i+.02*e-r]]).stream(d),g()},v.fitExtent=function(t,e){return f(v,t,e)},v.fitSize=function(t,e){return h(v,t,e)},v.drawCompositionBorders=function(t){var e,n,r,i;e=c([9.21327272751682,2.645820439454123]),n=c([11.679126293239872,2.644755519268689]),r=c([11.676845389029227,.35307824637606433]),i=c([9.213572917774014,.35414205204417754]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=c([7.320873711543669,2.64475551449975]),n=c([9.213272722738658,2.645820434679803]),r=c([9.213422896480349,1.4999812505283054]),i=c([7.322014760520787,1.4989168878985566]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=c([7.3220147605302905,1.4989168783492766]),n=c([9.213422896481598,1.499981240979021]),r=c([9.213572912999604,.354142056817247]),i=c([7.323154615739809,.353078251154504]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},v.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},v.scale(12e3)}t.geoAlbersUsa=d,t.geoAlbersUsaTerritories=g,t.geoConicConformalSpain=y,t.geoConicConformalPortugal=b,t.geoMercatorEcuador=w,t.geoTransverseMercatorChile=E,t.geoConicEquidistantJapan=S,t.geoConicConformalFrance=j,t.geoConicConformalEurope=C,t.geoMercatorMalaysia=P,t.geoMercatorEquatorialGuinea=R,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(142);n.d(e,"geoArea",function(){return r["c"]});var i=n(324);n.d(e,"geoBounds",function(){return i["a"]});var o=n(325);n.d(e,"geoCentroid",function(){return o["a"]});var a=n(143);n.d(e,"geoCircle",function(){return a["b"]});var s=n(145);n.d(e,"geoClipExtent",function(){return s["b"]});var u=n(328);n.d(e,"geoDistance",function(){return u["a"]});var c=n(329);n.d(e,"geoGraticule",function(){return c["a"]});var l=n(330);n.d(e,"geoInterpolate",function(){return l["a"]});var f=n(149);n.d(e,"geoLength",function(){return f["a"]});var h=n(331);n.d(e,"geoPath",function(){return h["a"]});var p=n(152);n.d(e,"geoAlbers",function(){return p["a"]});var d=n(340);n.d(e,"geoAlbersUsa",function(){return d["a"]});var v=n(341);n.d(e,"geoAzimuthalEqualArea",function(){return v["b"]}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return v["a"]});var g=n(342);n.d(e,"geoAzimuthalEquidistant",function(){return g["b"]}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return g["a"]});var m=n(343);n.d(e,"geoConicConformal",function(){return m["b"]}),n.d(e,"geoConicConformalRaw",function(){return m["a"]});var y=n(79);n.d(e,"geoConicEqualArea",function(){return y["b"]}),n.d(e,"geoConicEqualAreaRaw",function(){return y["a"]});var _=n(344);n.d(e,"geoConicEquidistant",function(){return _["b"]}),n.d(e,"geoConicEquidistantRaw",function(){return _["a"]});var b=n(155);n.d(e,"geoEquirectangular",function(){return b["a"]}),n.d(e,"geoEquirectangularRaw",function(){return b["b"]});var x=n(345);n.d(e,"geoGnomonic",function(){return x["a"]}),n.d(e,"geoGnomonicRaw",function(){return x["b"]});var w=n(18);n.d(e,"geoProjection",function(){return w["a"]}),n.d(e,"geoProjectionMutator",function(){return w["b"]});var M=n(82);n.d(e,"geoMercator",function(){return M["a"]}),n.d(e,"geoMercatorRaw",function(){return M["c"]});var E=n(346);n.d(e,"geoOrthographic",function(){return E["a"]}),n.d(e,"geoOrthographicRaw",function(){return E["b"]});var O=n(347);n.d(e,"geoStereographic",function(){return O["a"]}),n.d(e,"geoStereographicRaw",function(){return O["b"]});var S=n(348);n.d(e,"geoTransverseMercator",function(){return S["a"]}),n.d(e,"geoTransverseMercatorRaw",function(){return S["b"]});var T=n(78);n.d(e,"geoRotation",function(){return T["a"]});var j=n(26);n.d(e,"geoStream",function(){return j["a"]});var A=n(81);n.d(e,"geoTransform",function(){return A["a"]})},function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,f,h,p=n(42),d=n(142),v=n(43),g=n(5),m=n(26),y=Object(p["a"])(),_={point:b,lineStart:w,lineEnd:M,polygonStart:function(){_.point=E,_.lineStart=O,_.lineEnd=S,y.reset(),d["b"].polygonStart()},polygonEnd:function(){d["b"].polygonEnd(),_.point=b,_.lineStart=w,_.lineEnd=M,d["a"]<0?(r=-(o=180),i=-(a=90)):y>g["i"]?a=90:y<-g["i"]&&(i=-90),h[0]=r,h[1]=o}};function b(t,e){f.push(h=[r=t,o=t]),e<i&&(i=e),e>a&&(a=e)}function x(t,e){var n=Object(v["a"])([t*g["r"],e*g["r"]]);if(l){var u=Object(v["c"])(l,n),c=[u[1],-u[0],0],f=Object(v["c"])(c,u);Object(v["e"])(f),f=Object(v["g"])(f);var h,p=t-s,d=p>0?1:-1,m=f[0]*g["h"]*d,y=Object(g["a"])(p)>180;y^(d*s<m&&m<d*t)?(h=f[1]*g["h"],h>a&&(a=h)):(m=(m+360)%360-180,y^(d*s<m&&m<d*t)?(h=-f[1]*g["h"],h<i&&(i=h)):(e<i&&(i=e),e>a&&(a=e))),y?t<s?T(r,t)>T(r,o)&&(o=t):T(t,o)>T(r,o)&&(r=t):o>=r?(t<r&&(r=t),t>o&&(o=t)):t>s?T(r,t)>T(r,o)&&(o=t):T(t,o)>T(r,o)&&(r=t)}else b(t,e);l=n,s=t}function w(){_.point=x}function M(){h[0]=r,h[1]=o,_.point=b,l=null}function E(t,e){if(l){var n=t-s;y.add(Object(g["a"])(n)>180?n+(n>0?360:-360):n)}else u=t,c=e;d["b"].point(t,e),x(t,e)}function O(){d["b"].lineStart()}function S(){E(u,c),d["b"].lineEnd(),Object(g["a"])(y)>g["i"]&&(r=-(o=180)),h[0]=r,h[1]=o,l=null}function T(t,e){return(e-=t)<0?e+360:e}function j(t,e){return t[0]-e[0]}function A(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}e["a"]=function(t){var e,n,s,u,c,l,p;if(a=o=-(r=i=1/0),f=[],Object(m["a"])(t,_),n=f.length){for(f.sort(j),e=1,s=f[0],c=[s];e<n;++e)u=f[e],A(s,u[0])||A(s,u[1])?(T(s[0],u[1])>T(s[0],s[1])&&(s[1]=u[1]),T(u[0],s[1])>T(s[0],s[1])&&(s[0]=u[0])):c.push(s=u);for(l=-1/0,n=c.length-1,e=0,s=c[n];e<=n;s=u,++e)u=c[e],(p=T(s[1],u[0]))>l&&(l=p,r=u[0],o=s[1])}return f=h=null,r===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[r,i],[o,a]]}},function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,f,h,p,d,v,g,m,y,_=n(5),b=n(25),x=n(26),w={sphere:b["a"],point:M,lineStart:O,lineEnd:j,polygonStart:function(){w.lineStart=A,w.lineEnd=C},polygonEnd:function(){w.lineStart=O,w.lineEnd=j}};function M(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e);E(n*Object(_["g"])(t),n*Object(_["t"])(t),Object(_["t"])(e))}function E(t,e,n){++r,o+=(t-o)/r,a+=(e-a)/r,s+=(n-s)/r}function O(){w.point=S}function S(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e);g=n*Object(_["g"])(t),m=n*Object(_["t"])(t),y=Object(_["t"])(e),w.point=T,E(g,m,y)}function T(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e),r=n*Object(_["g"])(t),o=n*Object(_["t"])(t),a=Object(_["t"])(e),s=Object(_["e"])(Object(_["u"])((s=m*a-y*o)*s+(s=y*r-g*a)*s+(s=g*o-m*r)*s),g*r+m*o+y*a);i+=s,u+=s*(g+(g=r)),c+=s*(m+(m=o)),l+=s*(y+(y=a)),E(g,m,y)}function j(){w.point=M}function A(){w.point=L}function C(){P(d,v),w.point=M}function L(t,e){d=t,v=e,t*=_["r"],e*=_["r"],w.point=P;var n=Object(_["g"])(e);g=n*Object(_["g"])(t),m=n*Object(_["t"])(t),y=Object(_["t"])(e),E(g,m,y)}function P(t,e){t*=_["r"],e*=_["r"];var n=Object(_["g"])(e),r=n*Object(_["g"])(t),o=n*Object(_["t"])(t),a=Object(_["t"])(e),s=m*a-y*o,d=y*r-g*a,v=g*o-m*r,b=Object(_["u"])(s*s+d*d+v*v),x=g*r+m*o+y*a,w=b&&-Object(_["b"])(x)/b,M=Object(_["e"])(b,x);f+=w*s,h+=w*d,p+=w*v,i+=M,u+=M*(g+(g=r)),c+=M*(m+(m=o)),l+=M*(y+(y=a)),E(g,m,y)}e["a"]=function(t){r=i=o=a=s=u=c=l=f=h=p=0,Object(x["a"])(t,w);var e=f,n=h,d=p,v=e*e+n*n+d*d;return v<_["j"]&&(e=u,n=c,d=l,i<_["i"]&&(e=o,n=a,d=s),v=e*e+n*n+d*d,v<_["j"])?[NaN,NaN]:[Object(_["e"])(n,e)*_["h"],Object(_["c"])(d/Object(_["u"])(v))*_["h"]]}},function(t,e,n){"use strict";e["a"]=function(t){return function(){return t}}},function(t,e,n){"use strict";e["a"]=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,h=1,p=c-s,d=l-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>f&&(f=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<h&&(h=a)}return f>0&&(t[0]=s+f*p,t[1]=u+f*d),h<1&&(e[0]=s+h*p,e[1]=u+h*d),!0}}}}}},function(t,e,n){"use strict";var r=n(149),i=[null,null],o={type:"LineString",coordinates:i};e["a"]=function(t,e){return i[0]=t,i[1]=e,Object(r["a"])(o)}},function(t,e,n){"use strict";var r=n(14),i=n(5);function o(t,e,n){var o=Object(r["range"])(t,e-i["i"],n).concat(e);return function(t){return o.map(function(e){return[t,e]})}}function a(t,e,n){var o=Object(r["range"])(t,e-i["i"],n).concat(e);return function(t){return o.map(function(e){return[e,t]})}}e["a"]=function(){var t,e,n,s,u,c,l,f,h,p,d,v,g=10,m=g,y=90,_=360,b=2.5;function x(){return{type:"MultiLineString",coordinates:w()}}function w(){return Object(r["range"])(Object(i["f"])(s/y)*y,n,y).map(d).concat(Object(r["range"])(Object(i["f"])(f/_)*_,l,_).map(v)).concat(Object(r["range"])(Object(i["f"])(e/g)*g,t,g).filter(function(t){return Object(i["a"])(t%y)>i["i"]}).map(h)).concat(Object(r["range"])(Object(i["f"])(c/m)*m,u,m).filter(function(t){return Object(i["a"])(t%_)>i["i"]}).map(p))}return x.lines=function(){return w().map(function(t){return{type:"LineString",coordinates:t}})},x.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(v(l).slice(1),d(n).reverse().slice(1),v(f).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.extentMajor(t).extentMinor(t):x.extentMinor()},x.extentMajor=function(t){return arguments.length?(s=+t[0][0],n=+t[1][0],f=+t[0][1],l=+t[1][1],s>n&&(t=s,s=n,n=t),f>l&&(t=f,f=l,l=t),x.precision(b)):[[s,f],[n,l]]},x.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],c=+n[0][1],u=+n[1][1],e>t&&(n=e,e=t,t=n),c>u&&(n=c,c=u,u=n),x.precision(b)):[[e,c],[t,u]]},x.step=function(t){return arguments.length?x.stepMajor(t).stepMinor(t):x.stepMinor()},x.stepMajor=function(t){return arguments.length?(y=+t[0],_=+t[1],x):[y,_]},x.stepMinor=function(t){return arguments.length?(g=+t[0],m=+t[1],x):[g,m]},x.precision=function(r){return arguments.length?(b=+r,h=o(c,u,90),p=a(e,t,b),d=o(f,l,90),v=a(s,n,b),x):b},x.extentMajor([[-180,-90+i["i"]],[180,90-i["i"]]]).extentMinor([[-180,-80-i["i"]],[180,80+i["i"]]])}},function(t,e,n){"use strict";var r=n(5);e["a"]=function(t,e){var n=t[0]*r["r"],i=t[1]*r["r"],o=e[0]*r["r"],a=e[1]*r["r"],s=Object(r["g"])(i),u=Object(r["t"])(i),c=Object(r["g"])(a),l=Object(r["t"])(a),f=s*Object(r["g"])(n),h=s*Object(r["t"])(n),p=c*Object(r["g"])(o),d=c*Object(r["t"])(o),v=2*Object(r["c"])(Object(r["u"])(Object(r["m"])(a-i)+s*c*Object(r["m"])(o-n))),g=Object(r["t"])(v),m=v?function(t){var e=Object(r["t"])(t*=v)/g,n=Object(r["t"])(v-t)/g,i=n*f+e*p,o=n*h+e*d,a=n*u+e*l;return[Object(r["e"])(o,i)*r["h"],Object(r["e"])(a,Object(r["u"])(i*i+o*o))*r["h"]]}:function(){return[n*r["h"],i*r["h"]]};return m.distance=v,m}},function(t,e,n){"use strict";var r=n(150),i=n(26),o=n(332),a=n(151),s=n(333),u=n(334),c=n(335);e["a"]=function(){var t,e,n,l,f=4.5;function h(t){return t&&("function"===typeof f&&l.pointRadius(+f.apply(this,arguments)),Object(i["a"])(t,e(l))),l.result()}return h.area=function(t){return Object(i["a"])(t,e(o["a"])),o["a"].result()},h.bounds=function(t){return Object(i["a"])(t,e(a["a"])),a["a"].result()},h.centroid=function(t){return Object(i["a"])(t,e(s["a"])),s["a"].result()},h.projection=function(n){return arguments.length?(e=null==(t=n)?r["a"]:n.stream,h):t},h.context=function(t){return arguments.length?(l=null==(n=t)?new c["a"]:new u["a"](t),"function"!==typeof f&&l.pointRadius(f),h):n},h.pointRadius=function(t){return arguments.length?(f="function"===typeof t?t:(l.pointRadius(+t),+t),h):f},h.projection(null).context(null)}},function(t,e,n){"use strict";var r,i,o,a,s=n(42),u=n(5),c=n(25),l=Object(s["a"])(),f=Object(s["a"])(),h={point:c["a"],lineStart:c["a"],lineEnd:c["a"],polygonStart:function(){h.lineStart=p,h.lineEnd=g},polygonEnd:function(){h.lineStart=h.lineEnd=h.point=c["a"],l.add(Object(u["a"])(f)),f.reset()},result:function(){var t=l/2;return l.reset(),t}};function p(){h.point=d}function d(t,e){h.point=v,r=o=t,i=a=e}function v(t,e){f.add(a*t-o*e),o=t,a=e}function g(){v(r,i)}e["a"]=h},function(t,e,n){"use strict";var r,i,o,a,s=n(5),u=0,c=0,l=0,f=0,h=0,p=0,d=0,v=0,g=0,m={point:y,lineStart:_,lineEnd:w,polygonStart:function(){m.lineStart=M,m.lineEnd=E},polygonEnd:function(){m.point=y,m.lineStart=_,m.lineEnd=w},result:function(){var t=g?[d/g,v/g]:p?[f/p,h/p]:l?[u/l,c/l]:[NaN,NaN];return u=c=l=f=h=p=d=v=g=0,t}};function y(t,e){u+=t,c+=e,++l}function _(){m.point=b}function b(t,e){m.point=x,y(o=t,a=e)}function x(t,e){var n=t-o,r=e-a,i=Object(s["u"])(n*n+r*r);f+=i*(o+t)/2,h+=i*(a+e)/2,p+=i,y(o=t,a=e)}function w(){m.point=y}function M(){m.point=O}function E(){S(r,i)}function O(t,e){m.point=S,y(r=o=t,i=a=e)}function S(t,e){var n=t-o,r=e-a,i=Object(s["u"])(n*n+r*r);f+=i*(o+t)/2,h+=i*(a+e)/2,p+=i,i=a*t-o*e,d+=i*(o+t),v+=i*(a+e),g+=3*i,y(o=t,a=e)}e["a"]=m},function(t,e,n){"use strict";e["a"]=o;var r=n(5),i=n(25);function o(t){this._context=t}o.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,r["w"]);break}},result:i["a"]}},function(t,e,n){"use strict";function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e["a"]=r,r.prototype={_circle:i(4.5),pointRadius:function(t){return this._circle=i(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}}},function(t,e,n){"use strict";var r=n(153),i=n(5);function o(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,u){var c=s>0?i["o"]:-i["o"],l=Object(i["a"])(s-n);Object(i["a"])(l-i["o"])<i["i"]?(t.point(n,r=(r+u)/2>0?i["l"]:-i["l"]),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(s,r),e=0):o!==c&&l>=i["o"]&&(Object(i["a"])(n-o)<i["i"]&&(n-=o*i["i"]),Object(i["a"])(s-c)<i["i"]&&(s-=c*i["i"]),r=a(n,r,s,u),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=s,r=u),o=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function a(t,e,n,r){var o,a,s=Object(i["t"])(t-n);return Object(i["a"])(s)>i["i"]?Object(i["d"])((Object(i["t"])(e)*(a=Object(i["g"])(r))*Object(i["t"])(n)-Object(i["t"])(r)*(o=Object(i["g"])(e))*Object(i["t"])(t))/(o*a*s)):(e+r)/2}function s(t,e,n,r){var o;if(null==t)o=n*i["l"],r.point(-i["o"],o),r.point(0,o),r.point(i["o"],o),r.point(i["o"],0),r.point(i["o"],-o),r.point(0,-o),r.point(-i["o"],-o),r.point(-i["o"],0),r.point(-i["o"],o);else if(Object(i["a"])(t[0]-e[0])>i["i"]){var a=t[0]<e[0]?i["o"]:-i["o"];o=n*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(e[0],e[1])}e["a"]=Object(r["a"])(function(){return!0},o,s,[-i["o"],-i["l"]])},function(t,e,n){"use strict";var r=n(42),i=n(43),o=n(5),a=Object(r["a"])();e["a"]=function(t,e){var n=e[0],r=e[1],s=[Object(o["t"])(n),-Object(o["g"])(n),0],u=0,c=0;a.reset();for(var l=0,f=t.length;l<f;++l)if(p=(h=t[l]).length)for(var h,p,d=h[p-1],v=d[0],g=d[1]/2+o["q"],m=Object(o["t"])(g),y=Object(o["g"])(g),_=0;_<p;++_,v=x,m=M,y=E,d=b){var b=h[_],x=b[0],w=b[1]/2+o["q"],M=Object(o["t"])(w),E=Object(o["g"])(w),O=x-v,S=O>=0?1:-1,T=S*O,j=T>o["o"],A=m*M;if(a.add(Object(o["e"])(A*S*Object(o["t"])(T),y*E+A*Object(o["g"])(T))),u+=j?O+S*o["w"]:O,j^v>=n^x>=n){var C=Object(i["c"])(Object(i["a"])(d),Object(i["a"])(b));Object(i["e"])(C);var L=Object(i["c"])(s,C);Object(i["e"])(L);var P=(j^O>=0?-1:1)*Object(o["c"])(L[2]);(r>P||r===P&&(C[0]||C[1]))&&(c+=j^O>=0?1:-1)}}return(u<-o["i"]||u<o["i"]&&a<-o["i"])^1&c}},function(t,e,n){"use strict";var r=n(43),i=n(143),o=n(5),a=n(148),s=n(153);e["a"]=function(t,e){var n=Object(o["g"])(t),u=n>0,c=Object(o["a"])(n)>o["i"];function l(n,r,o,a){Object(i["a"])(a,t,e,o,n,r)}function f(t,e){return Object(o["g"])(t)*Object(o["g"])(e)>n}function h(t){var e,n,r,i,s;return{lineStart:function(){i=r=!1,s=1},point:function(l,h){var v,g=[l,h],m=f(l,h),y=u?m?0:d(l,h):m?d(l+(l<0?o["o"]:-o["o"]),h):0;if(!e&&(i=r=m)&&t.lineStart(),m!==r&&(v=p(e,g),(Object(a["a"])(e,v)||Object(a["a"])(g,v))&&(g[0]+=o["i"],g[1]+=o["i"],m=f(g[0],g[1]))),m!==r)s=0,m?(t.lineStart(),v=p(g,e),t.point(v[0],v[1])):(v=p(e,g),t.point(v[0],v[1]),t.lineEnd()),e=v;else if(c&&e&&u^m){var _;y&n||!(_=p(g,e,!0))||(s=0,u?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&Object(a["a"])(e,g)||t.point(g[0],g[1]),e=g,r=m,n=y},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return s|(i&&r)<<1}}}function p(t,e,i){var a=Object(r["a"])(t),s=Object(r["a"])(e),u=[1,0,0],c=Object(r["c"])(a,s),l=Object(r["d"])(c,c),f=c[0],h=l-f*f;if(!h)return!i&&t;var p=n*l/h,d=-n*f/h,v=Object(r["c"])(u,c),g=Object(r["f"])(u,p),m=Object(r["f"])(c,d);Object(r["b"])(g,m);var y=v,_=Object(r["d"])(g,y),b=Object(r["d"])(y,y),x=_*_-b*(Object(r["d"])(g,g)-1);if(!(x<0)){var w=Object(o["u"])(x),M=Object(r["f"])(y,(-_-w)/b);if(Object(r["b"])(M,g),M=Object(r["g"])(M),!i)return M;var E,O=t[0],S=e[0],T=t[1],j=e[1];S<O&&(E=O,O=S,S=E);var A=S-O,C=Object(o["a"])(A-o["o"])<o["i"],L=C||A<o["i"];if(!C&&j<T&&(E=T,T=j,j=E),L?C?T+j>0^M[1]<(Object(o["a"])(M[0]-O)<o["i"]?T:j):T<=M[1]&&M[1]<=j:A>o["o"]^(O<=M[0]&&M[0]<=S)){var P=Object(r["f"])(y,(-_+w)/b);return Object(r["b"])(P,g),[M,Object(r["g"])(P)]}}}function d(e,n){var r=u?t:o["o"]-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}return Object(s["a"])(f,h,l,u?[0,-t]:[-o["o"],t-o["o"]])}},function(t,e,n){"use strict";var r=n(43),i=n(5),o=n(81),a=16,s=Object(i["g"])(30*i["r"]);function u(t){return Object(o["b"])({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function c(t,e){function n(r,o,a,u,c,l,f,h,p,d,v,g,m,y){var _=f-r,b=h-o,x=_*_+b*b;if(x>4*e&&m--){var w=u+d,M=c+v,E=l+g,O=Object(i["u"])(w*w+M*M+E*E),S=Object(i["c"])(E/=O),T=Object(i["a"])(Object(i["a"])(E)-1)<i["i"]||Object(i["a"])(a-p)<i["i"]?(a+p)/2:Object(i["e"])(M,w),j=t(T,S),A=j[0],C=j[1],L=A-r,P=C-o,I=b*L-_*P;(I*I/x>e||Object(i["a"])((_*L+b*P)/x-.5)>.3||u*d+c*v+l*g<s)&&(n(r,o,a,u,c,l,A,C,T,w/=O,M/=O,E,m,y),y.point(A,C),n(A,C,T,w,M,E,f,h,p,d,v,g,m,y))}}return function(e){var i,o,s,u,c,l,f,h,p,d,v,g,m={point:y,lineStart:_,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=w},polygonEnd:function(){e.polygonEnd(),m.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){h=NaN,m.point=b,e.lineStart()}function b(i,o){var s=Object(r["a"])([i,o]),u=t(i,o);n(h,p,f,d,v,g,h=u[0],p=u[1],f=i,d=s[0],v=s[1],g=s[2],a,e),e.point(h,p)}function x(){m.point=y,e.lineEnd()}function w(){_(),m.point=M,m.lineEnd=E}function M(t,e){b(i=t,e),o=h,s=p,u=d,c=v,l=g,m.point=b}function E(){n(h,p,f,d,v,g,o,s,i,u,c,l,a,e),m.lineEnd=x,x()}return m}}e["a"]=function(t,e){return+e?c(t,e):u(t)}},function(t,e,n){"use strict";var r=n(5),i=n(152),o=n(79),a=n(154);function s(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}e["a"]=function(){var t,e,n,u,c,l,f=Object(i["a"])(),h=Object(o["b"])().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=Object(o["b"])().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(t,e){l=[t,e]}};function v(t){var e=t[0],r=t[1];return l=null,n.point(e,r),l||(u.point(e,r),l)||(c.point(e,r),l)}return v.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?h:i>=.166&&i<.234&&r>=-.214&&r<-.115?p:f).invert(t)},v.stream=function(n){return t&&e===n?t:t=s([f.stream(e=n),h.stream(n),p.stream(n)])},v.precision=function(t){return arguments.length?(f.precision(t),h.precision(t),p.precision(t),v):f.precision()},v.scale=function(t){return arguments.length?(f.scale(t),h.scale(.35*t),p.scale(t),v.translate(f.translate())):f.scale()},v.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),i=+t[0],o=+t[1];return n=f.translate(t).clipExtent([[i-.455*e,o-.238*e],[i+.455*e,o+.238*e]]).stream(d),u=h.translate([i-.307*e,o+.201*e]).clipExtent([[i-.425*e+r["i"],o+.12*e+r["i"]],[i-.214*e-r["i"],o+.234*e-r["i"]]]).stream(d),c=p.translate([i-.205*e,o+.212*e]).clipExtent([[i-.214*e+r["i"],o+.166*e+r["i"]],[i-.115*e-r["i"],o+.234*e-r["i"]]]).stream(d),v},v.fitExtent=Object(a["a"])(v),v.fitSize=Object(a["b"])(v),v.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(5),i=n(44),o=n(18),a=Object(i["b"])(function(t){return Object(r["u"])(2/(1+t))});a.invert=Object(i["a"])(function(t){return 2*Object(r["c"])(t/2)}),e["b"]=function(){return Object(o["a"])(a).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(5),i=n(44),o=n(18),a=Object(i["b"])(function(t){return(t=Object(r["b"])(t))&&t/Object(r["t"])(t)});a.invert=Object(i["a"])(function(t){return t}),e["b"]=function(){return Object(o["a"])(a).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";e["a"]=s;var r=n(5),i=n(80),o=n(82);function a(t){return Object(r["v"])((r["l"]+t)/2)}function s(t,e){var n=Object(r["g"])(t),i=t===e?Object(r["t"])(t):Object(r["n"])(n/Object(r["g"])(e))/Object(r["n"])(a(e)/a(t)),s=n*Object(r["p"])(a(t),i)/i;if(!i)return o["c"];function u(t,e){s>0?e<-r["l"]+r["i"]&&(e=-r["l"]+r["i"]):e>r["l"]-r["i"]&&(e=r["l"]-r["i"]);var n=s/Object(r["p"])(a(e),i);return[n*Object(r["t"])(i*t),s-n*Object(r["g"])(i*t)]}return u.invert=function(t,e){var n=s-e,o=Object(r["s"])(i)*Object(r["u"])(t*t+n*n);return[Object(r["e"])(t,n)/i,2*Object(r["d"])(Object(r["p"])(s/o,1/i))-r["l"]]},u}e["b"]=function(){return Object(i["a"])(s).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";e["a"]=a;var r=n(5),i=n(80),o=n(155);function a(t,e){var n=Object(r["g"])(t),i=t===e?Object(r["t"])(t):(n-Object(r["g"])(e))/(e-t),a=n/i+t;if(Object(r["a"])(i)<r["i"])return o["b"];function s(t,e){var n=a-e,o=i*t;return[n*Object(r["t"])(o),a-n*Object(r["g"])(o)]}return s.invert=function(t,e){var n=a-e;return[Object(r["e"])(t,n)/i,a-Object(r["s"])(i)*Object(r["u"])(t*t+n*n)]},s}e["b"]=function(){return Object(i["a"])(a).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";e["b"]=a;var r=n(5),i=n(44),o=n(18);function a(t,e){var n=Object(r["g"])(e),i=Object(r["g"])(t)*n;return[n*Object(r["t"])(t)/i,Object(r["t"])(e)/i]}a.invert=Object(i["a"])(r["d"]),e["a"]=function(){return Object(o["a"])(a).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";e["b"]=a;var r=n(5),i=n(44),o=n(18);function a(t,e){return[Object(r["g"])(e)*Object(r["t"])(t),Object(r["t"])(e)]}a.invert=Object(i["a"])(r["c"]),e["a"]=function(){return Object(o["a"])(a).scale(249.5).clipAngle(90+r["i"])}},function(t,e,n){"use strict";e["b"]=a;var r=n(5),i=n(44),o=n(18);function a(t,e){var n=Object(r["g"])(e),i=1+Object(r["g"])(t)*n;return[n*Object(r["t"])(t)/i,Object(r["t"])(e)/i]}a.invert=Object(i["a"])(function(t){return 2*Object(r["d"])(t)}),e["a"]=function(){return Object(o["a"])(a).scale(250).clipAngle(142)}},function(t,e,n){"use strict";e["b"]=o;var r=n(5),i=n(82);function o(t,e){return[Object(r["n"])(Object(r["v"])((r["l"]+e)/2)),-t]}o.invert=function(t,e){return[-e,2*Object(r["d"])(Object(r["k"])(t))-r["l"]]},e["a"]=function(){var t=Object(i["b"])(o),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";var r=Math.PI,i=2*r,o=1e-6,a=i-o;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new s}s.prototype=u.prototype={constructor:s,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var s=this._x1,u=this._y1,c=n-t,l=i-e,f=s-t,h=u-e,p=f*f+h*h;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>o)if(Math.abs(h*c-l*f)>o&&a){var d=n-s,v=i-u,g=c*c+l*l,m=d*d+v*v,y=Math.sqrt(g),_=Math.sqrt(p),b=a*Math.tan((r-Math.acos((g+p-m)/(2*y*_)))/2),x=b/_,w=b/y;Math.abs(x-1)>o&&(this._+="L"+(t+x*f)+","+(e+x*h)),this._+="A"+a+","+a+",0,0,"+ +(h*d>f*v)+","+(this._x1=t+w*c)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,s,u,c){t=+t,e=+e,n=+n;var l=n*Math.cos(s),f=n*Math.sin(s),h=t+l,p=e+f,d=1^c,v=c?s-u:u-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+p:(Math.abs(this._x1-h)>o||Math.abs(this._y1-p)>o)&&(this._+="L"+h+","+p),n&&(v<0&&(v=v%i+i),v>a?this._+="A"+n+","+n+",0,1,"+d+","+(t-l)+","+(e-f)+"A"+n+","+n+",0,1,"+d+","+(this._x1=h)+","+(this._y1=p):v>o&&(this._+="A"+n+","+n+",0,"+ +(v>=r)+","+d+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e["a"]=u},function(t,e,n){var r=n(3),i=n(39);r(i.prototype,{getAllNodes:function(){var t=this,e=[],n=t.root;return n.each?n.each(function(t){e.push(t)}):n.eachNode&&n.eachNode(function(t){e.push(t)}),e},getAllLinks:function(){var t,e=[],n=[this.root];while(t=n.pop()){var r=t.children;r&&r.forEach(function(r){e.push({source:t,target:r}),n.push(r)})}return e}}),r(i.prototype,{getAllEdges:i.prototype.getAllLinks})},function(t,e,n){var r=n(3),i=n(83),o=n(15),a=n(39);r(a.prototype,{partition:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),o(this.rows,t,e)},group:function(t,e){var n=this.partition(t,e);return i(n)},groups:function(t,e){return this.group(t,e)}})},function(t,e,n){var r=n(9),i=n(6),o=Object.prototype.hasOwnProperty,a=function(t,e){if(!e||!i(t))return t;var n={},a=null;return r(t,function(t){a=e(t),o.call(n,a)?n[a].push(t):n[a]=[t]}),n};t.exports=a},function(t,e,n){var r=n(6),i=n(11),o=n(10);t.exports=function(t,e){var n;return void 0===e&&(e=[]),i(e)?n=e:r(e)?n=function(t,n){for(var r=0;r<e.length;r++){var i=e[r];if(t[i]<n[i])return-1;if(t[i]>n[i])return 1}return 0}:o(e)&&(n=function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}),t.sort(n)}},function(t,e,n){var r=n(3),i=n(156),o=n(6),a=n(19),s=n(39),u=n(157),c=n(84),l=c.STATISTICS_METHODS;function f(t,e){var n=t.getColumn(e);return o(n)&&o(n[0])&&(n=i(n)),n}l.forEach(function(t){s.prototype[t]=function(e){return a[t](f(this,e))}});var h=a.quantile;r(s.prototype,{average:s.prototype.mean,quantile:function(t,e){return h(f(this,t),e)},quantiles:function(t,e){var n=f(this,t);return e.map(function(t){return h(n,t)})},quantilesByFraction:function(t,e){return this.quantiles(t,u(e))},range:function(t){var e=this;return[e.min(t),e.max(t)]},extent:function(t){return this.range(t)}})},function(t,e,n){var r=n(10),i=n(40),o=n(2),a=o.registerConnector;a("default",function(t,e){if(r(t)&&(t=e.getView(t)),!t)throw new TypeError("Invalid dataView");return i(t.rows)})},function(t,e){var n=function(){var t={};return function(e){return e=e||"g",t[e]?t[e]+=1:t[e]=1,e+t[e]}}();t.exports=n},function(t,e,n){var r=n(10),i=n(358),o=i.dsvFormat,a=i.csvParse,s=i.tsvParse,u=n(2),c=u.registerConnector;c("dsv",function(t,e){void 0===e&&(e={});var n=e.delimiter||",";if(!r(n))throw new TypeError("Invalid delimiter: must be a string!");return o(n).parse(t)}),c("csv",function(t){return a(t)}),c("tsv",function(t){return s(t)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(85);n.d(e,"dsvFormat",function(){return r["a"]});var i=n(359);n.d(e,"csvParse",function(){return i["c"]}),n.d(e,"csvParseRows",function(){return i["d"]}),n.d(e,"csvFormat",function(){return i["a"]}),n.d(e,"csvFormatRows",function(){return i["b"]});var o=n(360);n.d(e,"tsvParse",function(){return o["c"]}),n.d(e,"tsvParseRows",function(){return o["d"]}),n.d(e,"tsvFormat",function(){return o["a"]}),n.d(e,"tsvFormatRows",function(){return o["b"]})},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(85),i=Object(r["a"])(","),o=i.parse,a=i.parseRows,s=i.format,u=i.formatRows},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(85),i=Object(r["a"])("\t"),o=i.parse,a=i.parseRows,s=i.format,u=i.formatRows},function(t,e,n){var r=n(0),i=r.geoGraticule,o=n(2),a=o.registerConnector;function s(t,e){e.dataType="geo-graticule";var n=i().lines();return n.map(function(t,e){return t.index=""+e,t}),e.rows=n,n}a("geo-graticule",s),t.exports=s},function(t,e){t.exports=i;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function i(t){var e=[];return t.replace(r,function(t,r,i){var o=r.toLowerCase();i=a(i),"m"==o&&i.length>2&&(e.push([r].concat(i.splice(0,2))),o="l",r="m"==r?"l":"L");while(1){if(i.length==n[o])return i.unshift(r),e.push(i);if(i.length<n[o])throw new Error("malformed path data");e.push([r].concat(i.splice(0,n[o])))}}),e}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function a(t){var e=t.match(o);return e?e.map(Number):[]}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function n(t){var e=0,n=0,r=0,i=0;return t.map(function(t){t=t.slice();var o=t[0],a=o.toUpperCase();if(o!=a)switch(t[0]=a,o){case"a":t[6]+=r,t[7]+=i;break;case"v":t[1]+=i;break;case"h":t[1]+=r;break;default:for(var s=1;s<t.length;)t[s++]+=r,t[s++]+=i}switch(a){case"Z":r=e,i=n;break;case"H":r=t[1];break;case"V":i=t[1];break;case"M":r=e=t[1],i=n=t[2];break;default:r=t[t.length-2],i=t[t.length-1]}return t})}t.exports=n},function(t,e,n){var r=n(3),i=n(11),o=n(2),a=o.GRAPH,s=o.registerConnector,u={nodes:function(t){return t.nodes},edges:function(t){return t.edges}};function c(t,e,n){e=r({},u,e),n.dataType=a;var o=e,s=o.nodes,c=o.edges;if(s&&!i(s))throw new TypeError("Invalid nodes: must be a function!");if(c&&!i(c))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:s(t),edges:c(t)},r(n,n.graph),n.rows}s("graph",c),s("diagram",c)},function(t,e,n){var r=n(3),i=n(40),o=n(367),a=o.getGridForHexJSON,s=o.renderHexJSON,u=n(2),c=u.HEX,l=u.registerConnector,f={width:1,height:1};function h(t){return t.cx=t.x,t.cy=t.y,t.x=[],t.y=[],t.vertices.forEach(function(e){t.x.push(e.x+t.cx),t.y.push(e.y+t.cy)}),t}function p(t,e,n){n.dataType=c,e=r({},f,e);var o=e,u=o.width,l=o.height,p=i(t);n._HexJSON=p;var d=n._GridHexJSON=a(p),v=n.rows=s(p,u,l).map(h);return n._gridRows=s(d,u,l).map(h),v}l("hex",p),l("hexjson",p),l("hex-json",p),l("HexJSON",p),t.exports=p},function(t,e,n){(function(t,r){r(e,n(14))})(0,function(t,e){"use strict";function n(t,n,s){var u=t.layout,c=[],l=0;Object.keys(t.hexes).forEach(function(e){t.hexes[e].key=e,c.push(t.hexes[e])});var f=e.max(c,function(t){return+t.q}),h=e.min(c,function(t){return+t.q}),p=e.max(c,function(t){return+t.r}),d=e.min(c,function(t){return+t.r}),v=f-h+1,g=p-d+1;l="odd-r"===u||"even-r"===u?e.min([n/((v+.5)*Math.sqrt(3)),s/(1.5*(g+1/3))]):e.min([s/((g+.5)*Math.sqrt(3)),n/(1.5*(v+1/3))]);var m=l*Math.sqrt(3),y=o(u,m,l),_=a(y);return c.forEach(function(t){t.qc=t.q-h,t.rc=p-t.r,t.x=r(t,u,m,l),t.y=i(t,u,m,l),t.vertices=y,t.points=_}),c}function r(t,e,n,r){var i=0,o=0;switch(e){case"odd-r":o=t.rc%2===1?n:n/2,i=t.qc*n+o;break;case"even-r":o=t.rc%2===0?n:n/2,i=t.qc*n+o;break;case"odd-q":case"even-q":i=t.qc*r*1.5+r;break}return i}function i(t,e,n,r){var i=0,o=0;switch(e){case"odd-r":case"even-r":i=t.rc*r*1.5+r;break;case"odd-q":o=t.qc%2===1?n:n/2,i=t.rc*n+o;break;case"even-q":o=t.qc%2===0?n:n/2,i=t.rc*n+o;break}return i}function o(t,e,n){var r=[];switch(t){case"odd-r":case"even-r":r.push({x:0,y:0-n}),r.push({x:0+.5*e,y:0-.5*n}),r.push({x:0+.5*e,y:0+.5*n}),r.push({x:0,y:0+n}),r.push({x:0-.5*e,y:0+.5*n}),r.push({x:0-.5*e,y:0-.5*n});break;case"odd-q":case"even-q":r.push({x:0-n,y:0}),r.push({x:0-.5*n,y:0-.5*e}),r.push({x:0+.5*n,y:0-.5*e}),r.push({x:0+n,y:0}),r.push({x:0+.5*n,y:0+.5*e}),r.push({x:0-.5*n,y:0+.5*e});break}return r}function a(t){var e="";return t.forEach(function(t){e+=t.x+","+t.y+" "}),e.substring(0,e.length-1)}function s(t){var n={};n.layout=t.layout,n.hexes={};var r=[];Object.keys(t.hexes).forEach(function(e){r.push(t.hexes[e])});var i,o,a,s=e.max(r,function(t){return+t.q}),u=e.min(r,function(t){return+t.q}),c=e.max(r,function(t){return+t.r}),l=e.min(r,function(t){return+t.r});for(i=u;i<=s;i++)for(o=l;o<=c;o++)a="Q"+i+"R"+o,n.hexes[a]={q:i,r:o};return n}t.renderHexJSON=n,t.getGridForHexJSON=s,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){var r=n(11),i=n(34),o=i.hierarchy,a=n(2),s=a.HIERARCHY,u=a.registerConnector;function c(t,e,n){n.dataType=s;var i=e&&e.children?e.children:null;if(i&&!r(i))throw new TypeError("Invalid children: must be a function!");return e.pureData?n.rows=n.root=t:n.rows=n.root=o(t,i),t}u("hierarchy",c),u("tree",c)},function(t,e,n){"use strict";function r(t,e){return t.parent===e.parent?1:2}function i(t){return t.reduce(o,0)/t.length}function o(t,e){return t+e.x}function a(t){return 1+t.reduce(s,0)}function s(t,e){return Math.max(t,e.y)}function u(t){var e;while(e=t.children)t=e[0];return t}function c(t){var e;while(e=t.children)t=e[e.length-1];return t}e["a"]=function(){var t=r,e=1,n=1,o=!1;function s(r){var s,l=0;r.eachAfter(function(e){var n=e.children;n?(e.x=i(n),e.y=a(n)):(e.x=s?l+=t(e,s):0,e.y=0,s=e)});var f=u(r),h=c(r),p=f.x-t(f,h)/2,d=h.x+t(h,f)/2;return r.eachAfter(o?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-p)/(d-p)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return s.separation=function(e){return arguments.length?(t=e,s):t},s.size=function(t){return arguments.length?(o=!1,e=+t[0],n=+t[1],s):o?null:[e,n]},s.nodeSize=function(t){return arguments.length?(o=!0,e=+t[0],n=+t[1],s):o?[e,n]:null},s}},function(t,e,n){"use strict";function r(t){var e=0,n=t.children,r=n&&n.length;if(r)while(--r>=0)e+=n[r].value;else e=1;t.value=e}e["a"]=function(){return this.eachAfter(r)}},function(t,e,n){"use strict";e["a"]=function(t){var e,n,r,i,o=this,a=[o];do{e=a.reverse(),a=[];while(o=e.pop())if(t(o),n=o.children,n)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this}},function(t,e,n){"use strict";e["a"]=function(t){var e,n,r=this,i=[r];while(r=i.pop())if(t(r),e=r.children,e)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this}},function(t,e,n){"use strict";e["a"]=function(t){var e,n,r,i=this,o=[i],a=[];while(i=o.pop())if(a.push(i),e=i.children,e)for(n=0,r=e.length;n<r;++n)o.push(e[n]);while(i=a.pop())t(i);return this}},function(t,e,n){"use strict";e["a"]=function(t){return this.eachAfter(function(e){var n=+t(e.data)||0,r=e.children,i=r&&r.length;while(--i>=0)n+=r[i].value;e.value=n})}},function(t,e,n){"use strict";e["a"]=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}},function(t,e,n){"use strict";function r(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();while(t===e)i=t,t=n.pop(),e=r.pop();return i}e["a"]=function(t){var e=this,n=r(e,t),i=[e];while(e!==n)e=e.parent,i.push(e);var o=i.length;while(t!==n)i.splice(o,0,t),t=t.parent;return i}},function(t,e,n){"use strict";e["a"]=function(){var t=this,e=[t];while(t=t.parent)e.push(t);return e}},function(t,e,n){"use strict";e["a"]=function(){var t=[];return this.each(function(e){t.push(e)}),t}},function(t,e,n){"use strict";e["a"]=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}},function(t,e,n){"use strict";e["a"]=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}},function(t,e,n){"use strict";var r=n(160),i=n(87),o=n(162);function a(t){return Math.sqrt(t.value)}function s(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function u(t,e){return function(n){if(i=n.children){var i,o,a,s=i.length,u=t(n)*e||0;if(u)for(o=0;o<s;++o)i[o].r+=u;if(a=Object(r["b"])(i),u)for(o=0;o<s;++o)i[o].r-=u;n.r=a+u}}}function c(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}e["a"]=function(){var t=null,e=1,n=1,r=o["a"];function l(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(s(t)).eachAfter(u(r,.5)).eachBefore(c(1)):i.eachBefore(s(a)).eachAfter(u(o["a"],1)).eachAfter(u(r,i.r/Math.min(e,n))).eachBefore(c(Math.min(e,n)/(2*i.r))),i}return l.radius=function(e){return arguments.length?(t=Object(i["a"])(e),l):t},l.size=function(t){return arguments.length?(e=+t[0],n=+t[1],l):[e,n]},l.padding=function(t){return arguments.length?(r="function"===typeof t?t:Object(o["b"])(+t),l):r},l}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),e["a"]=i;var r=Array.prototype.slice;function i(t){var e,n,r=t.length;while(r)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}},function(t,e,n){"use strict";var r=n(163),i=n(45);e["a"]=function(){var t=1,e=1,n=0,o=!1;function a(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(s(e,a)),o&&i.eachBefore(r["a"]),i}function s(t,e){return function(r){r.children&&Object(i["a"])(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var o=r.x0,a=r.y0,s=r.x1-n,u=r.y1-n;s<o&&(o=s=(o+s)/2),u<a&&(a=u=(a+u)/2),r.x0=o,r.y0=a,r.x1=s,r.y1=u}}return a.round=function(t){return arguments.length?(o=!!t,a):o},a.size=function(n){return arguments.length?(t=+n[0],e=+n[1],a):[t,e]},a.padding=function(t){return arguments.length?(n=+t,a):n},a}},function(t,e,n){"use strict";var r=n(87),i=n(86),o="$",a={depth:-1},s={};function u(t){return t.id}function c(t){return t.parentId}e["a"]=function(){var t=u,e=c;function n(n){var r,u,c,l,f,h,p,d=n.length,v=new Array(d),g={};for(u=0;u<d;++u)r=n[u],f=v[u]=new i["a"](r),null!=(h=t(r,u,n))&&(h+="")&&(p=o+(f.id=h),g[p]=p in g?s:f);for(u=0;u<d;++u)if(f=v[u],h=e(n[u],u,n),null!=h&&(h+="")){if(l=g[o+h],!l)throw new Error("missing: "+h);if(l===s)throw new Error("ambiguous: "+h);l.children?l.children.push(f):l.children=[f],f.parent=l}else{if(c)throw new Error("multiple roots");c=f}if(!c)throw new Error("no root");if(c.parent=a,c.eachBefore(function(t){t.depth=t.parent.depth+1,--d}).eachBefore(i["b"]),c.parent=null,d>0)throw new Error("cycle");return c}return n.id=function(e){return arguments.length?(t=Object(r["b"])(e),n):t},n.parentId=function(t){return arguments.length?(e=Object(r["b"])(t),n):e},n}},function(t,e,n){"use strict";var r=n(86);function i(t,e){return t.parent===e.parent?1:2}function o(t){var e=t.children;return e?e[0]:t.t}function a(t){var e=t.children;return e?e[e.length-1]:t.t}function s(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function u(t){var e,n=0,r=0,i=t.children,o=i.length;while(--o>=0)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function c(t,e,n){return t.a.parent===e.parent?t.a:n}function l(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function f(t){var e,n,r,i,o,a=new l(t,0),s=[a];while(e=s.pop())if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new l(r[i],i)),n.parent=e;return(a.parent=new l(null,0)).children=[a],a}l.prototype=Object.create(r["a"].prototype),e["a"]=function(){var t=i,e=1,n=1,r=null;function l(i){var o=f(i);if(o.eachAfter(h),o.parent.m=-o.z,o.eachBefore(p),r)i.eachBefore(v);else{var a=i,s=i,u=i;i.eachBefore(function(t){t.x<a.x&&(a=t),t.x>s.x&&(s=t),t.depth>u.depth&&(u=t)});var c=a===s?1:t(a,s)/2,l=c-a.x,d=e/(s.x+c+l),g=n/(u.depth||1);i.eachBefore(function(t){t.x=(t.x+l)*d,t.y=t.depth*g})}return i}function h(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){u(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=d(e,i,e.parent.A||r[0])}function p(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function d(e,n,r){if(n){var i,u=e,l=e,f=n,h=u.parent.children[0],p=u.m,d=l.m,v=f.m,g=h.m;while(f=a(f),u=o(u),f&&u)h=o(h),l=a(l),l.a=e,i=f.z+v-u.z-p+t(f._,u._),i>0&&(s(c(f,e,r),e,i),p+=i,d+=i),v+=f.m,p+=u.m,g+=h.m,d+=l.m;f&&!a(l)&&(l.t=f,l.m+=v-d),u&&!o(h)&&(h.t=u,h.m+=p-g,r=e)}return r}function v(t){t.x*=e,t.y=t.depth*n}return l.separation=function(e){return arguments.length?(t=e,l):t},l.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],l):r?null:[e,n]},l.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],l):r?[e,n]:null},l}},function(t,e,n){"use strict";var r=n(163),i=n(88),o=n(87),a=n(162);e["a"]=function(){var t=i["a"],e=!1,n=1,s=1,u=[0],c=a["a"],l=a["a"],f=a["a"],h=a["a"],p=a["a"];function d(t){return t.x0=t.y0=0,t.x1=n,t.y1=s,t.eachBefore(v),u=[0],e&&t.eachBefore(r["a"]),t}function v(e){var n=u[e.depth],r=e.x0+n,i=e.y0+n,o=e.x1-n,a=e.y1-n;o<r&&(r=o=(r+o)/2),a<i&&(i=a=(i+a)/2),e.x0=r,e.y0=i,e.x1=o,e.y1=a,e.children&&(n=u[e.depth+1]=c(e)/2,r+=p(e)-n,i+=l(e)-n,o-=f(e)-n,a-=h(e)-n,o<r&&(r=o=(r+o)/2),a<i&&(i=a=(i+a)/2),t(e,r,i,o,a))}return d.round=function(t){return arguments.length?(e=!!t,d):e},d.size=function(t){return arguments.length?(n=+t[0],s=+t[1],d):[n,s]},d.tile=function(e){return arguments.length?(t=Object(o["b"])(e),d):t},d.padding=function(t){return arguments.length?d.paddingInner(t).paddingOuter(t):d.paddingInner()},d.paddingInner=function(t){return arguments.length?(c="function"===typeof t?t:Object(a["b"])(+t),d):c},d.paddingOuter=function(t){return arguments.length?d.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):d.paddingTop()},d.paddingTop=function(t){return arguments.length?(l="function"===typeof t?t:Object(a["b"])(+t),d):l},d.paddingRight=function(t){return arguments.length?(f="function"===typeof t?t:Object(a["b"])(+t),d):f},d.paddingBottom=function(t){return arguments.length?(h="function"===typeof t?t:Object(a["b"])(+t),d):h},d.paddingLeft=function(t){return arguments.length?(p="function"===typeof t?t:Object(a["b"])(+t),d):p},d}},function(t,e,n){"use strict";e["a"]=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;function l(t,e,n,r,i,o,a){if(t>=e-1){var u=s[t];return u.x0=r,u.y0=i,u.x1=o,void(u.y1=a)}var f=c[t],h=n/2+f,p=t+1,d=e-1;while(p<d){var v=p+d>>>1;c[v]<h?p=v+1:d=v}h-c[p-1]<c[p]-h&&t+1<p&&--p;var g=c[p]-f,m=n-g;if(o-r>a-i){var y=(r*m+o*g)/n;l(t,p,g,r,i,y,a),l(p,e,m,y,i,o,a)}else{var _=(i*m+a*g)/n;l(t,p,g,r,i,o,_),l(p,e,m,r,_,o,a)}}l(0,u,t.value,e,n,r,i)}},function(t,e,n){"use strict";var r=n(45),i=n(55);e["a"]=function(t,e,n,o,a){(1&t.depth?i["a"]:r["a"])(t,e,n,o,a)}},function(t,e,n){"use strict";var r=n(45),i=n(55),o=n(88);e["a"]=function t(e){function n(t,n,a,s,u){if((c=t._squarify)&&c.ratio===e){var c,l,f,h,p,d=-1,v=c.length,g=t.value;while(++d<v){for(l=c[d],f=l.children,h=l.value=0,p=f.length;h<p;++h)l.value+=f[h].value;l.dice?Object(r["a"])(l,n,a,s,a+=(u-a)*l.value/g):Object(i["a"])(l,n,a,n+=(s-n)*l.value/g,u),g-=l.value}}else t._squarify=c=Object(o["c"])(e,t,n,a,s,u),c.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(o["b"])},function(t,e,n){var r=n(10),i=n(391),o=i.feature,a=n(158),s=n(2),u=s.registerConnector;function c(t,e,n){var i=e.object;if(!r(i))throw new TypeError("Invalid object: must be a string!");var s=o(t,t.objects[i]);return a(s,e,n)}u("topojson",c),u("TopoJSON",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(164);n.d(e,"bbox",function(){return r["a"]});var i=n(90);n.d(e,"feature",function(){return i["a"]});var o=n(393);n.d(e,"mesh",function(){return o["a"]}),n.d(e,"meshArcs",function(){return o["b"]});var a=n(394);n.d(e,"merge",function(){return a["a"]}),n.d(e,"mergeArcs",function(){return a["b"]});var s=n(395);n.d(e,"neighbors",function(){return s["a"]});var u=n(397);n.d(e,"quantize",function(){return u["a"]});var c=n(89);n.d(e,"transform",function(){return c["a"]});var l=n(167);n.d(e,"untransform",function(){return l["a"]})},function(t,e,n){"use strict";e["a"]=function(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n}},function(t,e,n){"use strict";e["b"]=o;var r=n(90),i=n(166);function o(t,e,n){var r,o,s;if(arguments.length>1)r=a(t,e,n);else for(o=0,r=new Array(s=t.arcs.length);o<s;++o)r[o]=o;return{type:"MultiLineString",arcs:Object(i["a"])(t,r)}}function a(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}function l(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":c(t.arcs);break}}return l(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}e["a"]=function(t){return Object(r["b"])(t,o.apply(this,arguments))}},function(t,e,n){"use strict";e["b"]=a;var r=n(90),i=n(166);function o(t){var e,n=-1,r=t.length,i=t[r-1],o=0;while(++n<r)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}function a(t,e){var n={},a=[],s=[];function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"Polygon":c(t.arcs);break;case"MultiPolygon":t.arcs.forEach(c);break}}function c(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),a.push(t)}function l(e){return o(Object(r["b"])(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(u),a.forEach(function(t){if(!t._){var e=[],r=[t];t._=1,s.push(e);while(t=r.pop())e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var r,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&o.push(t)})})}),o=Object(i["a"])(t,o),(r=o.length)>1)for(var a,s,u=1,c=l(o[0]);u<r;++u)(a=l(o[u]))>c&&(s=o[0],o[0]=o[u],o[u]=s,c=a);return o})}}e["a"]=function(t){return Object(r["b"])(t,a.apply(this,arguments))}},function(t,e,n){"use strict";var r=n(396);e["a"]=function(t){var e={},n=t.map(function(){return[]});function i(t,n){t.forEach(function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]})}function o(t,e){t.forEach(function(t){i(t,e)})}function a(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){a(t,e)}):t.type in s&&s[t.type](t.arcs,e)}var s={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(t,e){t.forEach(function(t){o(t,e)})}};for(var u in t.forEach(a),e)for(var c=e[u],l=c.length,f=0;f<l;++f)for(var h=f+1;h<l;++h){var p,d=c[f],v=c[h];(p=n[d])[u=Object(r["a"])(p,v)]!==v&&p.splice(u,0,v),(p=n[v])[u=Object(r["a"])(p,d)]!==d&&p.splice(u,0,d)}return n}},function(t,e,n){"use strict";e["a"]=function(t,e){var n=0,r=t.length;while(n<r){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}},function(t,e,n){"use strict";var r=n(164),i=n(167);e["a"]=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)c=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be \u22652");c=t.bbox||Object(r["a"])(t);var n,o=c[0],a=c[1],s=c[2],u=c[3];e={scale:[s-o?(s-o)/(n-1):1,u-a?(u-a)/(n-1):1],translate:[o,a]}}var c,l,f=Object(i["a"])(e),h=t.objects,p={};function d(t){return f(t)}function v(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(v)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function g(t){var e,n=0,r=1,i=t.length,o=new Array(i);o[0]=f(t[0],0);while(++n<i)((e=f(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o}for(l in h)p[l]=v(h[l]);return{type:"Topology",bbox:c,transform:e,objects:p,arcs:t.arcs.map(g)}}},function(t,e,n){var r=n(2),i=r.registerTransform;i("default",function(t){return t})},function(t,e,n){var r=n(2),i=r.registerTransform;function o(t){return!!t}i("filter",function(t,e){void 0===e&&(e={}),t.rows=t.rows.filter(e.callback||o)})},function(t,e,n){var r=n(3),i=n(401),o=n(32),a=n(2),s=a.registerTransform,u=n(7),c=u.getFields,l={fields:[],key:"key",retains:[],value:"value"};s("fold",function(t,e){var n=t.getColumnNames();e=r({},l,e);var a=c(e);0===a.length&&(console.warn("warning: option fields is not specified, will fold all columns."),a=n);var s=e.key,u=e.value,f=e.retains;0===f.length&&(f=i(n,a));var h=[];t.rows.forEach(function(t){a.forEach(function(e){var n=o(t,f);n[s]=e,n[u]=t[e],h.push(n)})}),t.rows=h})},function(t,e,n){var r=n(402),i=n(168),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r(t,function(t){return!i(e,t)})};t.exports=o},function(t,e,n){var r=n(9),i=n(91),o=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){e(t,r)&&n.push(t)}),n};t.exports=o},function(t,e,n){var r=n(2),i=r.registerTransform;function o(t){return t}i("map",function(t,e){void 0===e&&(e={}),t.rows=t.rows.map(e.callback||o)})},function(t,e,n){var r=n(3),i=n(83),o=n(15),a=n(2),s=a.registerTransform,u={groupBy:[],orderBy:[]};function c(t,e){void 0===e&&(e={}),e=r({},u,e),t.rows=i(o(t.rows,e.groupBy,e.orderBy))}s("partition",function(t,e){void 0===e&&(e={}),e=r({},u,e),t.rows=o(t.rows,e.groupBy,e.orderBy)}),s("group",c),s("groups",c)},function(t,e,n){var r=n(3),i=n(9),o=n(6),a=n(10),s=n(19),u=s.sum,c=n(15),l=n(2),f=l.registerTransform,h=n(7),p=h.getField,d={groupBy:[],as:"_percent"};function v(t,e){void 0===e&&(e={}),e=r({},d,e);var n=p(e),s=e.dimension,l=e.groupBy,f=e.as;if(!a(s))throw new TypeError("Invalid dimension: must be a string!");if(o(f)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),f=f[0]),!a(f))throw new TypeError("Invalid as: must be a string!");var h=t.rows,v=[],g=c(h,l);i(g,function(t){var e=u(t.map(function(t){return t[n]}));0===e&&console.warn("Invalid data: total sum of field "+n+" is 0!");var r=c(t,[s]);i(r,function(t){var r=u(t.map(function(t){return t[n]})),i=t[0],o=i[s];i[n]=r,i[s]=o,i[f]=0===e?0:r/e,v.push(i)})}),t.rows=v}f("percent",v)},function(t,e,n){var r=n(32),i=n(2),o=i.registerTransform,a=n(7),s=a.getFields;o("pick",function(t,e){void 0===e&&(e={});var n=s(e,t.getColumnNames());t.rows=t.rows.map(function(t){return r(t,n)})})},function(t,e,n){var r=n(3),i=n(9),o=n(6),a=n(10),s=n(15),u=n(2),c=u.registerTransform,l=n(7),f=l.getField,h={groupBy:[],as:"_proportion"};function p(t,e){void 0===e&&(e={}),e=r({},h,e);var n=f(e),u=e.dimension,c=e.groupBy,l=e.as;if(!a(u))throw new TypeError("Invalid dimension: must be a string!");if(o(l)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),l=l[0]),!a(l))throw new TypeError("Invalid as: must be a string!");var p=t.rows,d=[],v=s(p,c);i(v,function(t){var e=t.length,r=s(t,[u]);i(r,function(t){var r=t.length,i=t[0],o=i[u];i[n]=r,i[u]=o,i[l]=r/e,d.push(i)})}),t.rows=d}c("proportion",p)},function(t,e,n){var r=n(9),i=n(54),o=n(10),a=n(2),s=a.registerTransform;function u(t,e){void 0===e&&(e={});var n=e.map||{},a={};i(n)&&r(n,function(t,e){o(t)&&o(e)&&(a[e]=t)}),t.rows.forEach(function(t){r(n,function(e,n){var r=t[n];delete t[n],t[e]=r})})}s("rename",u),s("rename-fields",u)},function(t,e,n){var r=n(2),i=r.registerTransform;i("reverse",function(t){t.rows.reverse()})},function(t,e,n){var r=n(2),i=r.registerTransform;i("sort",function(t,e){void 0===e&&(e={});var n=t.getColumnName(0);t.rows.sort(e.callback||function(t,e){return t[n]-e[n]})})},function(t,e,n){var r=n(6),i=n(412),o=n(2),a=o.registerTransform,s=n(7),u=s.getFields,c=["ASC","DESC"];function l(t,e){void 0===e&&(e={});var n=u(e,[t.getColumnName(0)]);if(!r(n))throw new TypeError("Invalid fields: must be an array with strings!");t.rows=i(t.rows,n);var o=e.order;if(o&&-1===c.indexOf(o))throw new TypeError("Invalid order: "+o+" must be one of "+c.join(", "));"DESC"===o&&t.rows.reverse()}a("sort-by",l),a("sortBy",l)},function(t,e,n){var r=n(10),i=n(11),o=n(6);function a(t,e){var n=void 0;if(i(e))n=function(t,n){return e(t)-e(n)};else{var a=[];r(e)?a.push(e):o(e)&&(a=e),n=function(t,e){for(var n=0;n<a.length;n+=1){var r=a[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}t.exports=a},function(t,e,n){var r=n(2),i=r.registerTransform,o=n(7),a=o.getFields;i("subset",function(t,e){void 0===e&&(e={});var n=e.startRowIndex||0,r=e.endRowIndex||t.rows.length-1,i=a(e,t.getColumnNames());t.rows=t.getSubset(n,r,i)})},function(t,e,n){var r=n(3),i=n(9),o=n(15),a=n(2),s=a.registerTransform,u={fillBy:"group",groupBy:[],orderBy:[]};function c(t,e){var n=t.map(function(t){return t});return e.forEach(function(t){var e=n.indexOf(t);e>-1&&n.splice(e,1)}),n}function l(t,e){void 0===e&&(e={}),e=r({},u,e);var n=t.rows,a=e.groupBy,s=e.orderBy,l=o(n,a,s),f=0,h=[];i(l,function(t){t.length>f&&(f=t.length,h=t)});var p=[],d={};if(h.forEach(function(t){var e=s.map(function(e){return t[e]}).join("-");p.push(e),d[e]=t}),"order"===e.fillBy){var v=h[0],g=[],m={};n.forEach(function(t){var e=s.map(function(e){return t[e]}).join("-");-1===g.indexOf(e)&&(g.push(e),m[e]=t)});var y=c(g,p);y.forEach(function(t){var e={};a.forEach(function(t){e[t]=v[t]}),s.forEach(function(n){e[n]=m[t][n]}),n.push(e),h.push(e),p.push(t),d[t]=e}),f=h.length}i(l,function(t){if(t!==h&&t.length<f){var e=t[0],r=[];t.forEach(function(t){r.push(s.map(function(e){return t[e]}).join("-"))});var i=c(p,r);i.some(function(r,i){if(i>=f-t.length)return!0;var o=d[r],u={};return a.forEach(function(t){u[t]=e[t]}),s.forEach(function(t){u[t]=o[t]}),n.push(u),!1})}})}s("fill-rows",l),s("fillRows",l)},function(t,e,n){var r=n(3),i=n(9),o=n(416),a=n(11),s=n(417),u=n(10),c=n(19),l=n(15),f=n(2),h=f.registerTransform,p=n(7),d=p.getField,v={groupBy:[]};function g(t){return t.filter(function(t){return!s(t)})}var m=["mean","median","max","min"],y={};function _(t,e){void 0===e&&(e={}),e=r({},v,e);var n=d(e),c=e.method;if(!c)throw new TypeError("Invalid method!");if("value"===c&&!o(e,"value"))throw new TypeError("Invalid value: it is nil.");var f=g(t.getColumn(n)),h=l(t.rows,e.groupBy);i(h,function(t){var r=g(t.map(function(t){return t[n]}));0===r.length&&(r=f),t.forEach(function(i){if(s(i[n]))if(a(c))i[n]=c(i,r,e.value,t);else{if(!u(c))throw new TypeError("Invalid method: must be a function or one of "+m.join(", "));i[n]=y[c](i,r,e.value)}})})}m.forEach(function(t){y[t]=function(e,n){return c[t](n)}}),y.value=function(t,e,n){return n},h("impute",_)},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e){var n=function(t){return void 0===t};t.exports=n},function(t,e,n){var r=n(3),i=n(156),o=n(9),a=n(6),s=n(10),u=n(24),c=n(419),l=n(19),f=n(15),h=n(2),p=h.registerTransform,d=n(84),v=d.STATISTICS_METHODS,g=n(7),m=g.getFields,y={as:[],fields:[],groupBy:[],operations:[]},_="count",b={count:function(t){return t.length},distinct:function(t,e){var n=c(t.map(function(t){return t[e]}));return n.length}};function x(t,e){e=r({},y,e);var n=m(e);if(!a(n))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var i=e.as||[];s(i)&&(i=[i]);var u=e.operations;s(u)&&(u=[u]);var c=[_];if(a(u)&&u.length||(console.warn('operations is not defined, will use [ "count" ] directly.'),u=c,i=u),1!==u.length||u[0]!==_){if(u.length!==n.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(i.length!==n.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var l=f(t.rows,e.groupBy),h=[];o(l,function(t){var e=t[0];u.forEach(function(r,o){var a=i[o],s=n[o];e[a]=b[r](t,s)}),h.push(e)}),t.rows=h}v.forEach(function(t){b[t]=function(e,n){var r=e.map(function(t){return t[n]});return a(r)&&a(r[0])&&(r=i(r)),l[t](r)}}),b.average=b.mean,p("aggregate",x),p("summary",x),t.exports={VALID_AGGREGATES:u(b)}},function(t,e,n){var r=n(9),i=n(168),o=function(t){var e=[];return r(t,function(t){i(e,t)||e.push(t)}),e};t.exports=o},function(t,e,n){var r=n(3),i=n(6),o=n(56),a=n(421),s=n(57),u=n(2),c=u.registerTransform,l=n(7),f=l.getFields,h=n(58),p=h.silverman,d={as:["x","y"],method:"linear",order:2,precision:2},v=["linear","exponential","logarithmic","power","polynomial"];function g(t,e){e=r({},d,e);var n=f(e);if(!i(n)||2!==n.length)throw new TypeError("invalid fields: must be an array of 2 strings.");var u=n[0],c=n[1],l=e.method;if(-1===v.indexOf(l))throw new TypeError("invalid method: "+l+". Must be one of "+v.join(", "));var h=t.rows.map(function(t){return[t[u],t[c]]}),g=a[l](h,e),m=e.extent;i(m)&&2===m.length||(m=t.range(u));var y=e.bandwidth;(!o(y)||y<=0)&&(y=p(t.getColumn(u)));var _=s(m,y),b=[],x=e.as,w=x[0],M=x[1];_.forEach(function(t){var e={},n=g.predict(t),r=n[0],i=n[1];e[w]=r,e[M]=i,isFinite(i)&&b.push(e)}),t.rows=b}c("regression",g),t.exports={REGRESSION_METHODS:v}},function(t,e,n){var r,i,o;(function(n,a){i=[t],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)})(0,function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i={order:2,precision:2,period:null};function o(t,e){var n=[],r=[];t.forEach(function(t,i){null!==t[1]&&(r.push(t),n.push(e[i]))});var i=r.reduce(function(t,e){return t+e[1]},0),o=i/r.length,a=r.reduce(function(t,e){var n=e[1]-o;return t+n*n},0),s=r.reduce(function(t,e,r){var i=n[r],o=e[1]-i[1];return t+o*o},0);return 1-s/a}function a(t,e){for(var n=t,r=t.length-1,i=[e],o=0;o<r;o++){for(var a=o,s=o+1;s<r;s++)Math.abs(n[o][s])>Math.abs(n[o][a])&&(a=s);for(var u=o;u<r+1;u++){var c=n[u][o];n[u][o]=n[u][a],n[u][a]=c}for(var l=o+1;l<r;l++)for(var f=r;f>=o;f--)n[f][l]-=n[f][o]*n[o][l]/n[o][o]}for(var h=r-1;h>=0;h--){for(var p=0,d=h+1;d<r;d++)p+=n[d][h]*i[d];i[h]=(n[r][h]-p)/n[h][h]}return i}function s(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var u={linear:function(t,e){for(var n=[0,0,0,0,0],r=0,i=0;i<t.length;i++)null!==t[i][1]&&(r++,n[0]+=t[i][0],n[1]+=t[i][1],n[2]+=t[i][0]*t[i][0],n[3]+=t[i][0]*t[i][1],n[4]+=t[i][1]*t[i][1]);var a=r*n[2]-n[0]*n[0],u=r*n[3]-n[0]*n[1],c=0===a?0:s(u/a,e.precision),l=s(n[1]/r-c*n[0]/r,e.precision),f=function(t){return[s(t,e.precision),s(c*t+l,e.precision)]},h=t.map(function(t){return f(t[0])});return{points:h,predict:f,equation:[c,l],r2:s(o(t,h),e.precision),string:0===l?"y = "+c+"x":"y = "+c+"x + "+l}},exponential:function(t,e){for(var n=[0,0,0,0,0,0],r=0;r<t.length;r++)null!==t[r][1]&&(n[0]+=t[r][0],n[1]+=t[r][1],n[2]+=t[r][0]*t[r][0]*t[r][1],n[3]+=t[r][1]*Math.log(t[r][1]),n[4]+=t[r][0]*t[r][1]*Math.log(t[r][1]),n[5]+=t[r][0]*t[r][1]);var i=n[1]*n[2]-n[5]*n[5],a=Math.exp((n[2]*n[3]-n[5]*n[4])/i),u=(n[1]*n[4]-n[5]*n[3])/i,c=s(a,e.precision),l=s(u,e.precision),f=function(t){return[s(t,e.precision),s(c*Math.exp(l*t),e.precision)]},h=t.map(function(t){return f(t[0])});return{points:h,predict:f,equation:[c,l],string:"y = "+c+"e^("+l+"x)",r2:s(o(t,h),e.precision)}},logarithmic:function(t,e){for(var n=[0,0,0,0],r=t.length,i=0;i<r;i++)null!==t[i][1]&&(n[0]+=Math.log(t[i][0]),n[1]+=t[i][1]*Math.log(t[i][0]),n[2]+=t[i][1],n[3]+=Math.pow(Math.log(t[i][0]),2));var a=(r*n[1]-n[2]*n[0])/(r*n[3]-n[0]*n[0]),u=s(a,e.precision),c=s((n[2]-u*n[0])/r,e.precision),l=function(t){return[s(t,e.precision),s(s(c+u*Math.log(t),e.precision),e.precision)]},f=t.map(function(t){return l(t[0])});return{points:f,predict:l,equation:[c,u],string:"y = "+c+" + "+u+" ln(x)",r2:s(o(t,f),e.precision)}},power:function(t,e){for(var n=[0,0,0,0,0],r=t.length,i=0;i<r;i++)null!==t[i][1]&&(n[0]+=Math.log(t[i][0]),n[1]+=Math.log(t[i][1])*Math.log(t[i][0]),n[2]+=Math.log(t[i][1]),n[3]+=Math.pow(Math.log(t[i][0]),2));var a=(r*n[1]-n[0]*n[2])/(r*n[3]-Math.pow(n[0],2)),u=(n[2]-a*n[0])/r,c=s(Math.exp(u),e.precision),l=s(a,e.precision),f=function(t){return[s(t,e.precision),s(s(c*Math.pow(t,l),e.precision),e.precision)]},h=t.map(function(t){return f(t[0])});return{points:h,predict:f,equation:[c,l],string:"y = "+c+"x^"+l,r2:s(o(t,h),e.precision)}},polynomial:function(t,e){for(var n=[],i=[],u=0,c=0,l=t.length,f=e.order+1,h=0;h<f;h++){for(var p=0;p<l;p++)null!==t[p][1]&&(u+=Math.pow(t[p][0],h)*t[p][1]);n.push(u),u=0;for(var d=[],v=0;v<f;v++){for(var g=0;g<l;g++)null!==t[g][1]&&(c+=Math.pow(t[g][0],h+v));d.push(c),c=0}i.push(d)}i.push(n);for(var m=a(i,f).map(function(t){return s(t,e.precision)}),y=function(t){return[s(t,e.precision),s(m.reduce(function(e,n,r){return e+n*Math.pow(t,r)},0),e.precision)]},_=t.map(function(t){return y(t[0])}),b="y = ",x=m.length-1;x>=0;x--)b+=x>1?m[x]+"x^"+x+" + ":1===x?m[x]+"x + ":m[x];return{string:b,points:_,predict:y,equation:[].concat(r(m)).reverse(),r2:s(o(t,_),e.precision)}}};function c(){var t=function(t,r){return n({_round:s},t,e({},r,function(t,e){return u[r](t,n({},i,e))}))};return Object.keys(u).reduce(t,{})}t.exports=c()})},function(t,e,n){var r=n(3),i=n(9),o=n(9),a=n(6),s=n(11),u=n(56),c=n(10),l=n(24),f=n(32),h=n(57),p=n(92),d=n(58),v=n(15),g=n(2),m=g.registerTransform,y=n(7),_=y.getFields,b=n(19),x=b.kernelDensityEstimation,w={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},M=l(p),E=l(d);function O(t,e){e=r({},w,e);var n=_(e);if(!a(n)||n.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var l=e.as;if(!a(l)||3!==l.length)throw new TypeError("invalid as: must be an array of 3 strings!");var g=e.method;if(c(g)){if(-1===M.indexOf(g))throw new TypeError("invalid method: "+g+". Must be one of "+M.join(", "));g=p[g]}if(!s(g))throw new TypeError("invalid method: kernel method must be a function!");var m=e.extent;if(!a(m)||0===m.length){var y=[];i(n,function(e){var n=t.range(e);y=y.concat(n)}),m=[Math.min.apply(Math,y),Math.max.apply(Math,y)]}var b=e.bandwidth;c(b)&&d[b]?b=d[b](t.getColumn(n[0])):s(b)?b=b(t.getColumn(n[0])):(!u(b)||b<=0)&&(b=d.nrd(t.getColumn(n[0])));var E=h(m,e.step?e.step:b),O=[],S=e.groupBy,T=v(t.rows,S);o(T,function(t){var r={};i(n,function(n){var o=f(t[0],S);r[n]=x(t.map(function(t){return t[n]}),g,b);var a=l[0],s=l[1],u=l[2];o[a]=n,o[s]=[],o[u]=[],i(E,function(t){var i=r[n](t);i>=e.minSize&&(o[s].push(t),o[u].push(i))}),O.push(o)})}),t.rows=O}m("kernel-density-estimation",O),m("kde",O),m("KDE",O),t.exports={KERNEL_METHODS:M,BANDWIDTH_METHODS:E}},function(t,e,n){var r=n(3),i=n(9),o=n(6),a=n(2),s=a.registerTransform,u=n(7),c=u.getFields,l={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},f=Math.sqrt(3),h=Math.PI/3,p=[0,h,2*h,3*h,4*h,5*h];function d(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}function v(t,e,n){var r=t-n;e/=2;var i=Math.floor(r/e),o=e*(i+(1===Math.abs(i%2)?1:0)),a=e*(i+(1===Math.abs(i%2)?0:1));return[o+n,a+n]}function g(t,e,n){void 0===e&&(e=[1,1]),void 0===n&&(n=[0,0]);var r={},i=e,o=i[0],a=i[1],s=n,u=s[0],c=s[1];return t.forEach(function(t){var e,n,i,s=t[0],l=t[1],f=v(s,o,u),h=f[0],p=f[1],g=v(l,a,c),m=g[0],y=g[1],_=d(s,l,h,m),b=d(s,l,p,y);_<b?(e="x"+h+"y"+m,n=h,i=m):(e="x"+p+"y"+y,n=p,i=y),r[e]=r[e]||{x:n,y:i,count:0},r[e].count++}),r}function m(t,e){e=r({},l,e);var n=c(e);if(!o(n)||2!==n.length)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var a=n[0],s=n[1],u=t.range(a),h=t.range(s),d=u[1]-u[0],v=h[1]-h[0],m=e.binWidth||[];if(2!==m.length){var y=e.bins,_=y[0],b=y[1];if(_<=0||b<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");m=[d/_,v/b]}var x=e.offset,w=x[0],M=x[1],E=3*m[0]/(f*m[1]),O=t.rows.map(function(t){return[t[a],E*t[s]]}),S=g(O,[m[0],E*m[1]],[w,E*M]),T=e.as,j=T[0],A=T[1],C=T[2];if(!j||!A||!C)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var L=m[0]/f,P=p.map(function(t){return[Math.sin(t)*L,-Math.cos(t)*L]}),I=[],R=0;e.sizeByCount&&i(S,function(t){t.count>R&&(R=t.count)}),i(S,function(t){var n=t.x,r=t.y,i=t.count,o={};o[C]=i,e.sizeByCount?(o[j]=P.map(function(e){return n+t.count/R*e[0]}),o[A]=P.map(function(e){return(r+t.count/R*e[1])/E})):(o[j]=P.map(function(t){return n+t[0]}),o[A]=P.map(function(t){return(r+t[1])/E})),I.push(o)}),t.rows=I}s("bin.hexagon",m),s("bin.hex",m),s("hexbin",m)},function(t,e,n){var r=n(3),i=n(9),o=n(32),a=n(15),s=n(2),u=s.registerTransform,c=n(7),l=c.getField,f={as:["x","count"],bins:30,offset:0,groupBy:[]};function h(t,e,n){var r=t-n,i=Math.floor(r/e);return[i*e+n,(i+1)*e+n]}function p(t,e){e=r({},f,e);var n=l(e);if(0!==t.rows.length){var s=t.range(n),u=s[1]-s[0],c=e.binWidth;if(!c){var p=e.bins;if(p<=0)throw new TypeError("Invalid bins: it must be a positive number!");c=u/p}var d=e.offset%c,v=[],g=e.groupBy,m=a(t.rows,g);i(m,function(t){var a={},s=t.map(function(t){return t[n]});s.forEach(function(t){var e=h(t,c,d),n=e[0],r=e[1],i=n+"-"+r;a[i]=a[i]||{x0:n,x1:r,count:0},a[i].count++});var u=e.as,l=u[0],f=u[1];if(!l||!f)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var p=o(t[0],g);i(a,function(t){var e=r({},p);e[l]=[t.x0,t.x1],e[f]=t.count,v.push(e)})}),t.rows=v}}u("bin.histogram",p),u("bin.dot",p)},function(t,e,n){var r=n(3),i=n(9),o=n(6),a=n(10),s=n(19),u=s.quantile,c=n(15),l=n(157),f=n(2),h=f.registerTransform,p=n(7),d=p.getField,v={as:"_bin",groupBy:[],fraction:4};function g(t,e){e=r({},v,e);var n=d(e),s=e.as;if(!a(s))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var f=e.p,h=e.fraction;o(f)&&0!==f.length||(f=l(h));var p=t.rows,g=e.groupBy,m=c(p,g),y=[];i(m,function(t){var e=t[0],r=t.map(function(t){return t[n]}),i=f.map(function(t){return u(r,t)});e[s]=i,y.push(e)}),t.rows=y}h("bin.quantile",g)},function(t,e,n){var r=n(3),i=n(9),o=n(2),a=o.registerTransform,s=n(7),u=s.getFields,c={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function l(t,e,n){var r=t-n,i=Math.floor(r/e);return[i*e+n,(i+1)*e+n]}function f(t,e){e=r({},c,e);var n=u(e),o=n[0],a=n[1];if(!o||!a)throw new TypeError("Invalid fields: must be an array with 2 strings!");var s=t.range(o),f=t.range(a),h=s[1]-s[0],p=f[1]-f[0],d=e.binWidth||[];if(2!==d.length){var v=e.bins,g=v[0],m=v[1];if(g<=0||m<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");d=[h/g,p/m]}var y=t.rows.map(function(t){return[t[o],t[a]]}),_={},b=e.offset,x=b[0],w=b[1];y.forEach(function(t){var e=l(t[0],d[0],x),n=e[0],r=e[1],i=l(t[1],d[1],w),o=i[0],a=i[1],s=n+"-"+r+"-"+o+"-"+a;_[s]=_[s]||{x0:n,x1:r,y0:o,y1:a,count:0},_[s].count++});var M=[],E=e.as,O=E[0],S=E[1],T=E[2];if(!O||!S||!T)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(e.sizeByCount){var j=0;i(_,function(t){t.count>j&&(j=t.count)}),i(_,function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,o=t.count,a=o/j,s=(e+n)/2,u=(r+i)/2,c=(n-e)*a/2,l=(i-r)*a/2,f=s-c,h=s+c,p=u-l,d=u+l,v={};v[O]=[f,h,h,f],v[S]=[p,p,d,d],v[T]=o,M.push(v)})}else i(_,function(t){var e={};e[O]=[t.x0,t.x1,t.x1,t.x0],e[S]=[t.y0,t.y0,t.y1,t.y1],e[T]=t.count,M.push(e)});t.rows=M}a("bin.rectangle",f),a("bin.rect",f)},function(t,e,n){var r=n(3),i=n(6),o=n(10),a=n(2),s=a.registerTransform,u=n(7),c=u.getField,l={as:["_centroid_x","_centroid_y"]};function f(t,e){e=r({},l,e);var n=c(e),a=e.geoView||e.geoDataView;if(o(a)&&(a=t.dataSet.getView(a)),!a||"geo"!==a.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var s=e.as;if(!i(s)||2!==s.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var u=s[0],f=s[1];t.rows.forEach(function(t){var e=a.geoFeatureByName(t[n]);e&&(a._projectedAs?(t[u]=e[a._projectedAs[2]],t[f]=e[a._projectedAs[3]]):(t[u]=e.centroidX,t[f]=e.centroidY))})}s("geo.centroid",f)},function(t,e,n){var r=n(3),i=n(0),o=n(159),a=n(6),s=n(2),u=s.registerTransform,c=n(141),l=i.geoPath,f={as:["_x","_y","_centroid_x","_centroid_y"]};function h(t,e){if("geo"!==t.dataType&&"geo-graticule"!==t.dataType)throw new TypeError("Invalid dataView: this transform is for Geo data only!");e=r({},f,e);var n=e.projection;if(!n)throw new TypeError("Invalid projection!");n=c(n);var i=l(n),s=e.as;if(!a(s)||4!==s.length)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');t._projectedAs=s;var u=s[0],h=s[1],p=s[2],d=s[3];t.rows.forEach(function(t){t[u]=[],t[h]=[];var e=i(t);if(e){var n=o(e);n._path.forEach(function(e){t[u].push(e[1]),t[h].push(e[2])});var r=i.centroid(t);t[p]=r[0],t[d]=r[1]}}),t.rows=t.rows.filter(function(t){return 0!==t[u].length})}u("geo.projection",h)},function(t,e,n){var r=n(3),i=n(6),o=n(10),a=n(2),s=a.registerTransform,u=n(7),c=u.getField,l={as:["_x","_y"]};function f(t,e){e=r({},l,e);var n=c(e),a=e.geoView||e.geoDataView;if(o(a)&&(a=t.dataSet.getView(a)),!a||"geo"!==a.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var s=e.as;if(!i(s)||2!==s.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var u=s[0],f=s[1];t.rows.forEach(function(t){var e=a.geoFeatureByName(t[n]);e&&(a._projectedAs?(t[u]=e[a._projectedAs[0]],t[f]=e[a._projectedAs[1]]):(t[u]=e.longitude,t[f]=e.latitude))})}s("geo.region",f)},function(t,e,n){var r=n(3),i=n(9),o=n(6),a=n(83),s=n(11),u=n(2),c=u.registerTransform,l={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function f(t,e,n){return void 0===n&&(n={}),t.forEach(function(t){var r=e.edgeSource(t),i=e.edgeTarget(t);n[r]||(n[r]={id:r}),n[i]||(n[i]={id:i})}),a(n)}function h(t,e,n){i(t,function(t,r){t.inEdges=e.filter(function(t){return""+n.target(t)===""+r}),t.outEdges=e.filter(function(t){return""+n.source(t)===""+r}),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach(function(e){t.value+=n.targetWeight(e)}),t.outEdges.forEach(function(e){t.value+=n.sourceWeight(e)})})}function p(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}},r=n[e.sortBy];!r&&s(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}function d(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.marginRatio;if(r<0||r>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var i=r/(2*n),o=e.thickness;if(o<=0||o>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var a=0;t.forEach(function(t){a+=t.value}),t.forEach(function(t){t.weight=t.value/a,t.width=t.weight*(1-r),t.height=o}),t.forEach(function(n,r){for(var a=0,s=r-1;s>=0;s--)a+=t[s].width+2*i;var u=n.minX=i+a,c=n.maxX=n.minX+n.width,l=n.minY=e.y-o/2,f=n.maxY=l+o;n.x=[u,c,c,u],n.y=[l,l,f,f]})}else{var s=1/n;t.forEach(function(t,n){t.x=(n+.5)*s,t.y=e.y})}}function v(t,e,n){if(n.weight){var r={};i(t,function(t,e){r[e]=t.value}),e.forEach(function(e){var i=n.source(e),o=n.target(e),a=t[i],s=t[o];if(a&&s){var u=r[i],c=n.sourceWeight(e),l=a.minX+(a.value-u)/a.value*a.width,f=l+c/a.value*a.width;r[i]-=c;var h=r[o],p=n.targetWeight(e),d=s.minX+(s.value-h)/s.value*s.width,v=d+p/s.value*s.width;r[o]-=p;var g=n.y;e.x=[l,f,d,v],e.y=[g,g,g,g]}})}else e.forEach(function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y])})}function g(t,e){e=r({},l,e);var n={},i=t.nodes,a=t.edges;o(i)&&0!==i.length||(i=f(a,e,n)),i.forEach(function(t){var r=e.id(t);n[r]=t}),h(n,a,e),p(i,e),d(i,e),v(n,a,e),t.nodes=i,t.edges=a}c("diagram.arc",g),c("arc",g)},function(t,e,n){var r=n(3),i=n(432),o=n(2),a=o.registerTransform,s={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(t){return t.source},target:function(t){return t.target}};function u(t,e){e=r({},s,e);var n=new i.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel(function(){return{}}),t.nodes.forEach(function(t){var r=e.nodeId?e.nodeId(t):t.id;t.height||t.width||(t.height=t.width=e.edgesep),n.setNode(r,t)}),t.edges.forEach(function(t){n.setEdge(e.source(t),e.target(t))}),i.layout(n);var o=[],a=[];n.nodes().forEach(function(t){var e=n.node(t),r=e.x,i=e.y,a=e.height,s=e.width;e.x=[r-s/2,r+s/2,r+s/2,r-s/2],e.y=[i+a/2,i+a/2,i-a/2,i-a/2],o.push(e)}),n.edges().forEach(function(t){var e=n.edge(t),r=e.points,i={};i.x=r.map(function(t){return t.x}),i.y=r.map(function(t){return t.y}),a.push(i)}),t.nodes=o,t.edges=a}a("diagram.dagre",u),a("dagre",u)},function(t,e,n){t.exports={graphlib:n(16),layout:n(448),debug:n(470),util:{time:n(12).time,notime:n(12).notime},version:n(471)}},function(t,e,n){var r=n(434);t.exports={Graph:r.Graph,json:n(438),alg:n(439),version:r.version}},function(t,e,n){t.exports={Graph:n(93),version:n(437)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports="2.1.5"},function(t,e,n){var r=n(13),i=n(93);function o(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:a(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e}function a(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}function s(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}function u(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}t.exports={write:o,read:u}},function(t,e,n){t.exports={components:n(440),dijkstra:n(170),dijkstraAll:n(441),findCycles:n(442),floydWarshall:n(443),isAcyclic:n(444),postorder:n(445),preorder:n(446),prim:n(447),tarjan:n(172),topsort:n(173)}},function(t,e,n){var r=n(13);function i(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}t.exports=i},function(t,e,n){var r=n(170),i=n(13);function o(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}t.exports=o},function(t,e,n){var r=n(13),i=n(172);function o(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}t.exports=o},function(t,e,n){var r=n(13);t.exports=o;var i=r.constant(1);function o(t,e,n){return a(t,e||i,n||function(e){return t.outEdges(e)})}function a(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}},function(t,e,n){var r=n(173);function i(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}t.exports=i},function(t,e,n){var r=n(174);function i(t,e){return r(t,e,"post")}t.exports=i},function(t,e,n){var r=n(174);function i(t,e){return r(t,e,"pre")}t.exports=i},function(t,e,n){var r=n(13),i=n(93),o=n(171);function a(t,e){var n,a=new i,s={},u=new o;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(s[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),u.decrease(t.nodes()[0],0);var l=!1;while(u.size()>0){if(n=u.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return a}t.exports=a},function(t,e,n){"use strict";var r=n(8),i=n(449),o=n(452),a=n(453),s=n(12).normalizeRanks,u=n(455),c=n(12).removeEmptyRanks,l=n(456),f=n(457),h=n(458),p=n(459),d=n(468),v=n(12),g=n(16).Graph;function m(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return j(t)});n("  runLayout",function(){y(e,n)}),n("  updateInputGraph",function(){_(t,e)})})}function y(t,e){e("    makeSpaceForEdgeLabels",function(){A(t)}),e("    removeSelfEdges",function(){N(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){l.run(t)}),e("    rank",function(){a(v.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){C(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){l.cleanup(t)}),e("    normalizeRanks",function(){s(t)}),e("    assignRankMinMax",function(){L(t)}),e("    removeEdgeLabelProxies",function(){P(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){f(t)}),e("    order",function(){p(t)}),e("    insertSelfEdges",function(){B(t)}),e("    adjustCoordinateSystem",function(){h.adjust(t)}),e("    position",function(){d(t)}),e("    positionSelfEdges",function(){z(t)}),e("    removeBorderNodes",function(){k(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){F(t)}),e("    undoCoordinateSystem",function(){h.undo(t)}),e("    translateGraph",function(){I(t)}),e("    assignNodeIntersects",function(){R(t)}),e("    reversePoints",function(){D(t)}),e("    acyclic.undo",function(){i.undo(t)})}function _(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}t.exports=m;var b=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],M=["width","height"],E={width:0,height:0},O=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T=["labelpos"];function j(t){var e=new g({multigraph:!0,compound:!0}),n=G(t.graph());return e.setGraph(r.merge({},x,U(n,b),r.pick(n,w))),r.forEach(t.nodes(),function(n){var i=G(t.node(n));e.setNode(n,r.defaults(U(i,M),E)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=G(t.edge(n));e.setEdge(n,r.merge({},S,U(i,O),r.pick(i,T)))}),e}function A(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function C(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}})}function L(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}function P(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function I(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;function c(t){var r=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=s,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),a.width=n-e+s,a.height=o-i+u}function R(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(v.intersectRect(o,n)),i.points.push(v.intersectRect(a,r))})}function F(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function D(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function k(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function N(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function B(t){var e=v.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}function z(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function U(t,e){return r.mapValues(r.pick(t,e),Number)}function G(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},function(t,e,n){"use strict";var r=n(8),i=n(450);function o(t){var e="greedy"===t.graph().acyclicer?i(t,n(t)):a(t);function n(t){return function(e){return t.edge(e).weight}}r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})}function a(t){var e=[],n={},i={};function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[a])}return r.forEach(t.nodes(),o),e}function s(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}t.exports={run:o,undo:s}},function(t,e,n){var r=n(8),i=n(16).Graph,o=n(451);t.exports=s;var a=r.constant(1);function s(t,e){if(t.nodeCount()<=1)return[];var n=l(t,e||a),i=u(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(i,function(e){return t.outEdges(e.v,e.w)}),!0)}function u(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];while(t.nodeCount()){while(r=a.dequeue())c(t,e,n,r);while(r=o.dequeue())c(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue(),r){i=i.concat(c(t,e,n,r,!0));break}}return i}function c(t,e,n,i,o){var a=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),s=t.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,f(e,n,s)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a["in"]-=i,f(e,n,a)}),t.removeNode(i.v),a}function l(t,e){var n=new i,a=0,s=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),s=Math.max(s,n.node(t.v).out+=i),a=Math.max(a,n.node(t.w)["in"]+=i)});var u=r.range(s+a+3).map(function(){return new o}),c=a+1;return r.forEach(n.nodes(),function(t){f(u,c,n.node(t))}),{graph:n,buckets:u,zeroIdx:c}}function f(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){var t=[],e=this._sentinel,n=e._prev;while(n!==e)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(8),i=n(12);function o(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){a(t,e)})}function a(t,e){var n=e.v,r=t.node(n).rank,o=e.w,a=t.node(o).rank,s=e.name,u=t.edge(e),c=u.labelRank;if(a!==r+1){var l,f,h;for(t.removeEdge(e),h=0,++r;r<a;++h,++r)u.points=[],f={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},l=i.addDummyNode(t,"edge",f,"_d"),r===c&&(f.width=u.width,f.height=u.height,f.dummy="edge-label",f.labelpos=u.labelpos),t.setEdge(n,l,{weight:u.weight},s),0===h&&t.graph().dummyChains.push(l),n=l;t.setEdge(n,o,{weight:u.weight},s)}}function s(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;t.setEdge(r.edgeObj,i);while(r.dummy)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}t.exports={run:o,undo:s}},function(t,e,n){"use strict";var r=n(59),i=r.longestPath,o=n(175),a=n(454);function s(t){switch(t.graph().ranker){case"network-simplex":l(t);break;case"tight-tree":c(t);break;case"longest-path":u(t);break;default:l(t)}}t.exports=s;var u=i;function c(t){i(t),o(t)}function l(t){a(t)}},function(t,e,n){"use strict";var r=n(8),i=n(175),o=n(59).slack,a=n(59).longestPath,s=n(16).alg.preorder,u=n(16).alg.postorder,c=n(12).simplify;function l(t){t=c(t),a(t);var e,n,r=i(t);d(r),f(r,t);while(e=g(r))n=m(r,t,e),y(r,t,e,n)}function f(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){h(t,e,n)})}function h(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=p(t,e,n)}function p(t,e,n){var i=t.node(n),o=i.parent,a=!0,s=e.edge(n,o),u=0;return s||(a=!1,s=e.edge(o,n)),u=s.weight,r.forEach(e.nodeEdges(n),function(r){var i=r.v===n,s=i?r.w:r.v;if(s!==o){var c=i===a,l=e.edge(r).weight;if(u+=c?l:-l,b(t,n,s)){var f=t.edge(n,s).cutvalue;u+=c?-f:f}}}),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),v(t,{},1,e)}function v(t,e,n,i,o){var a=n,s=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),function(o){r.has(e,o)||(n=v(t,e,n,o,i))}),s.low=a,s.lim=n++,o?s.parent=o:delete s.parent,n}function g(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function m(t,e,n){var i=n.v,a=n.w;e.hasEdge(i,a)||(i=n.w,a=n.v);var s=t.node(i),u=t.node(a),c=s,l=!1;s.lim>u.lim&&(c=u,l=!0);var f=r.filter(e.edges(),function(e){return l===x(t,t.node(e.v),c)&&l!==x(t,t.node(e.w),c)});return r.minBy(f,function(t){return o(e,t)})}function y(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),d(t),f(t,e),_(t,e)}function _(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=s(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}function b(t,e,n){return t.hasEdge(e,n)}function x(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=f,l.calcCutValue=p,l.leaveEdge=g,l.enterEdge=m,l.exchangeEdges=y},function(t,e,n){var r=n(8);function i(t){var e=a(t);r.forEach(t.graph().dummyChains,function(n){var r=t.node(n),i=r.edgeObj,a=o(t,e,i.v,i.w),s=a.path,u=a.lca,c=0,l=s[c],f=!0;while(n!==i.w){if(r=t.node(n),f){while((l=s[c])!==u&&t.node(l).maxRank<r.rank)c++;l===u&&(f=!1)}if(!f){while(c<s.length-1&&t.node(l=s[c+1]).minRank<=r.rank)c++;l=s[c]}t.setParent(n,l),n=t.successors(n)[0]}})}function o(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));o=i,i=r;while((i=t.parent(i))!==o)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function a(t){var e={},n=0;function i(o){var a=n;r.forEach(t.children(o),i),e[o]={low:a,lim:n++}}return r.forEach(t.children(),i),e}t.exports=i},function(t,e,n){var r=n(8),i=n(12);function o(t){var e=i.addDummyNode(t,"root",{},"_root"),n=s(t),o=r.max(r.values(n))-1,c=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=c});var l=u(t)+1;r.forEach(t.children(),function(r){a(t,e,c,l,o,n,r)}),t.graph().nodeRankFactor=c}function a(t,e,n,o,s,u,c){var l=t.children(c);if(l.length){var f=i.addBorderNode(t,"_bt"),h=i.addBorderNode(t,"_bb"),p=t.node(c);t.setParent(f,c),p.borderTop=f,t.setParent(h,c),p.borderBottom=h,r.forEach(l,function(r){a(t,e,n,o,s,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,p=i.borderBottom?i.borderBottom:r,d=i.borderTop?o:2*o,v=l!==p?1:s-u[c]+1;t.setEdge(f,l,{weight:d,minlen:v,nestingEdge:!0}),t.setEdge(p,h,{weight:d,minlen:v,nestingEdge:!0})}),t.parent(c)||t.setEdge(e,f,{weight:0,minlen:s+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}function s(t){var e={};function n(i,o){var a=t.children(i);a&&a.length&&r.forEach(a,function(t){n(t,o+1)}),e[i]=o}return r.forEach(t.children(),function(t){n(t,1)}),e}function u(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function c(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}t.exports={run:o,cleanup:c}},function(t,e,n){var r=n(8),i=n(12);function o(t){function e(n){var i=t.children(n),o=t.node(n);if(i.length&&r.forEach(i,e),r.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,u=o.maxRank+1;s<u;++s)a(t,"borderLeft","_bl",n,o,s),a(t,"borderRight","_br",n,o,s)}}r.forEach(t.children(),e)}function a(t,e,n,r,o,a){var s={width:0,height:0,rank:a,borderType:e},u=o[e][a-1],c=i.addDummyNode(t,"border",s,n);o[e][a]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=o},function(t,e,n){"use strict";var r=n(8);function i(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||a(t)}function o(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||u(t),"lr"!==e&&"rl"!==e||(l(t),a(t))}function a(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){s(t.edge(e))})}function s(t){var e=t.width;t.width=t.height,t.height=e}function u(t){r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,c),r.has(n,"y")&&c(n)})}function c(t){t.y=-t.y}function l(t){r.forEach(t.nodes(),function(e){f(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,f),r.has(n,"x")&&f(n)})}function f(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:i,undo:o}},function(t,e,n){"use strict";var r=n(8),i=n(460),o=n(461),a=n(462),s=n(466),u=n(467),c=n(16).Graph,l=n(12);function f(t){var e=l.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),a=h(t,r.range(e-1,-1,-1),"outEdges"),s=i(t);d(t,s);for(var u,c=Number.POSITIVE_INFINITY,f=0,v=0;v<4;++f,++v){p(f%2?n:a,f%4>=2),s=l.buildLayerMatrix(t);var g=o(t,s);g<c&&(v=0,u=r.cloneDeep(s),c=g)}d(t,u)}function h(t,e,n){return r.map(e,function(e){return s(t,e,n)})}function p(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,o=a(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),u(t,n,o.vs)})}function d(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=f},function(t,e,n){"use strict";var r=n(8);function i(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]});function a(n){if(!r.has(e,n)){e[n]=!0;var i=t.node(n);o[i.rank].push(n),r.forEach(t.successors(n),a)}}var s=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(s,a),o}t.exports=i},function(t,e,n){"use strict";var r=n(8);function i(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}function o(t,e,n){var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;while(a<n.length)a<<=1;var s=2*a-1;a-=1;var u=r.map(new Array(s),function(){return 0}),c=0;return r.forEach(o.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;var n=0;while(e>0)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;c+=t.weight*n})),c}t.exports=i},function(t,e,n){var r=n(8),i=n(463),o=n(464),a=n(465);function s(t,e,n,l){var f=t.children(e),h=t.node(e),p=h?h.borderLeft:void 0,d=h?h.borderRight:void 0,v={};p&&(f=r.filter(f,function(t){return t!==p&&t!==d}));var g=i(t,f);r.forEach(g,function(e){if(t.children(e.v).length){var i=s(t,e.v,n,l);v[e.v]=i,r.has(i,"barycenter")&&c(e,i)}});var m=o(g,n);u(m,v);var y=a(m,l);if(p&&(y.vs=r.flatten([p,y.vs,d],!0),t.predecessors(p).length)){var _=t.node(t.predecessors(p)[0]),b=t.node(t.predecessors(d)[0]);r.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+_.order+b.order)/(y.weight+2),y.weight+=2}return y}function u(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function c(t,e){r.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}t.exports=s},function(t,e,n){var r=n(8);function i(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}t.exports=i},function(t,e,n){"use strict";var r=n(8);function i(t,e){var n={};r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))});var i=r.filter(n,function(t){return!t.indegree});return o(i)}function o(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&a(t,e)}}function i(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}}while(t.length){var o=t.pop();e.push(o),r.forEach(o["in"].reverse(),n(o)),r.forEach(o.out,i(o))}return r.chain(e).filter(function(t){return!t.merged}).map(function(t){return r.pick(t,["vs","i","barycenter","weight"])}).value()}function a(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}t.exports=i},function(t,e,n){var r=n(8),i=n(12);function o(t,e){var n=i.partition(t,function(t){return r.has(t,"barycenter")}),o=n.lhs,u=r.sortBy(n.rhs,function(t){return-t.i}),c=[],l=0,f=0,h=0;o.sort(s(!!e)),h=a(c,u,h),r.forEach(o,function(t){h+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,f+=t.weight,h=a(c,u,h)});var p={vs:r.flatten(c,!0)};return f&&(p.barycenter=l/f,p.weight=f),p}function a(t,e,n){var i;while(e.length&&(i=r.last(e)).i<=n)e.pop(),t.push(i.vs),n++;return n}function s(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}t.exports=o},function(t,e,n){var r=n(8),i=n(16).Graph;function o(t,e,n){var o=a(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}function a(t){var e;while(t.hasNode(e=r.uniqueId("_root")));return e}t.exports=o},function(t,e,n){var r=n(8);function i(t,e,n){var i,o={};r.forEach(n,function(n){var r,a,s=t.parent(n);while(s){if(r=t.parent(s),r?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void e.setEdge(a,s);s=r}})}t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(12),o=n(469).positionX;function a(t){t=i.asNonCompoundGraph(t),s(t),r.forEach(o(t),function(e,n){t.node(n).x=e})}function s(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})}t.exports=a},function(t,e,n){"use strict";var r=n(8),i=n(16).Graph,o=n(12);function a(t,e){var n={};function i(e,i){var o=0,a=0,s=e.length,l=r.last(i);return r.forEach(i,function(e,f){var h=u(t,e),p=h?t.node(h).order:s;(h||e===l)&&(r.forEach(i.slice(a,f+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),a=i.order;!(a<o||p<a)||i.dummy&&t.node(e).dummy||c(n,r,e)})}),a=f+1,o=p)}),i}return r.reduce(e,i),n}function s(t,e){var n={};function i(e,i,o,a,s){var u;r.forEach(r.range(i,o),function(i){u=e[i],t.node(u).dummy&&r.forEach(t.predecessors(u),function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&c(n,e,u)})})}function o(e,n){var o,a=-1,s=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,s,u,a,o),s=u,a=o)}i(n,s,n.length,o,e.length)}),n}return r.reduce(e,o),n}function u(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}function c(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function l(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function f(t,e,n,i){var o={},a={},s={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,a[t]=t,s[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length){u=r.sortBy(u,function(t){return s[t]});for(var c=(u.length-1)/2,f=Math.floor(c),h=Math.ceil(c);f<=h;++f){var p=u[f];a[t]===t&&e<s[p]&&!l(n,t,p)&&(a[p]=t,a[t]=o[t]=o[p],e=s[p])}}})}),{root:o,align:a}}function h(t,e,n,i,o){var a={},s=p(t,e,n,o),u=o?"borderLeft":"borderRight";function c(t,e){var n=s.nodes(),r=n.pop(),i={};while(r)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function l(t){a[t]=s.inEdges(t).reduce(function(t,e){return Math.max(t,a[e.v]+s.edge(e))},0)}function f(e){var n=s.outEdges(e).reduce(function(t,e){return Math.min(t,a[e.w]-s.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(a[e]=Math.max(a[e],n))}return c(l,r.bind(s.predecessors,s)),c(f,r.bind(s.successors,s)),r.forEach(i,function(t){a[t]=a[n[t]]}),a}function p(t,e,n,o){var a=new i,s=t.graph(),u=y(s.nodesep,s.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(u(t,e,i),s||0))}i=e})}),a}function d(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=_(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function v(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,u=n+a,c=t[u];if(c!==e){var l=r.values(c);s="l"===a?i-r.min(l):o-r.max(l),s&&(t[u]=r.mapValues(c,function(t){return t+s}))}})})}function g(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}function m(t){var e,n=o.buildLayerMatrix(t),i=r.merge(a(t,n),s(t,n)),u={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var a=r.bind("u"===o?t.predecessors:t.successors,t),s=f(t,e,i,a),c=h(t,e,s.root,s.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),u[o+n]=c})});var c=d(t,u);return v(u,c),g(u,t.graph().align)}function y(t,e,n){return function(i,o,a){var s,u=i.node(o),c=i.node(a),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2;break}if(s&&(l+=n?s:-s),s=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2;break}return s&&(l+=n?s:-s),s=0,l}}function _(t,e){return t.node(e).width}t.exports={positionX:m,findType1Conflicts:a,findType2Conflicts:s,addConflict:c,hasConflict:l,verticalAlignment:f,horizontalCompaction:h,alignCoordinates:v,findSmallestWidthAlignment:d,balance:g}},function(t,e,n){var r=n(8),i=n(12),o=n(16).Graph;function a(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}t.exports={debugOrdering:a}},function(t,e){t.exports="0.8.2"},function(t,e,n){var r=n(3),i=n(10),o=n(11),a=n(473),s=a.sankey,u=a.sankeyLeft,c=a.sankeyRight,l=a.sankeyCenter,f=a.sankeyJustify,h=n(2),p=h.registerTransform,d={sankeyLeft:u,sankeyRight:c,sankeyCenter:l,sankeyJustify:f},v={value:function(t){return t.value},source:function(t){return t.source},target:function(t){return t.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02};function g(t,e){e=r({},v,e);var n=null;i(e.nodeAlign)?n=d[e.nodeAlign]:o(e.nodeAlign)&&(n=e.nodeAlign);var a=s().links(function(t){return t.edges}).nodeWidth(e.nodeWidth).nodePadding(e.nodePadding).extent([[0,0],[1,1]]);o(e.nodeId)&&a.nodeId(e.nodeId),n&&a.nodeAlign(n),a(t),t.nodes.forEach(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;t.x=[e,n,n,e],t.y=[r,r,i,i]}),t.edges.forEach(function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var o=t.width/2;t.y=[t.y0+o,t.y0-o,t.y1+o,t.y1-o]})}p("diagram.sankey",g),p("sankey",g)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(474);n.d(e,"sankey",function(){return r["a"]});var i=n(176);n.d(e,"sankeyCenter",function(){return i["a"]}),n.d(e,"sankeyLeft",function(){return i["c"]}),n.d(e,"sankeyRight",function(){return i["d"]}),n.d(e,"sankeyJustify",function(){return i["b"]});var o=n(482);n.d(e,"sankeyLinkHorizontal",function(){return o["a"]})},function(t,e,n){"use strict";var r=n(14),i=n(475),o=n(176),a=n(481);function s(t,e){return c(t.source,e.source)||t.index-e.index}function u(t,e){return c(t.target,e.target)||t.index-e.index}function c(t,e){return t.y0-e.y0}function l(t){return t.value}function f(t){return(t.y0+t.y1)/2}function h(t){return f(t.source)*t.value}function p(t){return f(t.target)*t.value}function d(t){return t.index}function v(t){return t.nodes}function g(t){return t.links}function m(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}e["a"]=function(){var t=0,e=0,n=1,y=1,_=24,b=8,x=d,w=o["b"],M=v,E=g,O=32;function S(){var t={nodes:M.apply(null,arguments),links:E.apply(null,arguments)};return T(t),j(t),A(t),C(t,O),L(t),t}function T(t){t.nodes.forEach(function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]});var e=Object(i["a"])(t.nodes,x);t.links.forEach(function(t,n){t.index=n;var r=t.source,i=t.target;"object"!==typeof r&&(r=t.source=m(e,r)),"object"!==typeof i&&(i=t.target=m(e,i)),r.sourceLinks.push(t),i.targetLinks.push(t)})}function j(t){t.nodes.forEach(function(t){t.value=Math.max(Object(r["sum"])(t.sourceLinks,l),Object(r["sum"])(t.targetLinks,l))})}function A(e){var r,i,o;for(r=e.nodes,i=[],o=0;r.length;++o,r=i,i=[])r.forEach(function(t){t.depth=o,t.sourceLinks.forEach(function(t){i.indexOf(t.target)<0&&i.push(t.target)})});for(r=e.nodes,i=[],o=0;r.length;++o,r=i,i=[])r.forEach(function(t){t.height=o,t.targetLinks.forEach(function(t){i.indexOf(t.source)<0&&i.push(t.source)})});var a=(n-t-_)/(o-1);e.nodes.forEach(function(e){e.x1=(e.x0=t+Math.max(0,Math.min(o-1,Math.floor(w.call(null,e,o))))*a)+_})}function C(t){var n=Object(i["b"])().key(function(t){return t.x0}).sortKeys(r["ascending"]).entries(t.nodes).map(function(t){return t.values});s(),v();for(var o=1,a=O;a>0;--a)d(o*=.99),v(),u(o),v();function s(){var i=Object(r["min"])(n,function(t){return(y-e-(t.length-1)*b)/Object(r["sum"])(t,l)});n.forEach(function(t){t.forEach(function(t,e){t.y1=(t.y0=e)+t.value*i})}),t.links.forEach(function(t){t.width=t.value*i})}function u(t){n.forEach(function(e){e.forEach(function(e){if(e.targetLinks.length){var n=(Object(r["sum"])(e.targetLinks,h)/Object(r["sum"])(e.targetLinks,l)-f(e))*t;e.y0+=n,e.y1+=n}})})}function d(t){n.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var n=(Object(r["sum"])(e.sourceLinks,p)/Object(r["sum"])(e.sourceLinks,l)-f(e))*t;e.y0+=n,e.y1+=n}})})}function v(){n.forEach(function(t){var n,r,i,o=e,a=t.length;for(t.sort(c),i=0;i<a;++i)n=t[i],r=o-n.y0,r>0&&(n.y0+=r,n.y1+=r),o=n.y1+b;if(r=o-b-y,r>0)for(o=n.y0-=r,n.y1-=r,i=a-2;i>=0;--i)n=t[i],r=n.y1+b-o,r>0&&(n.y0-=r,n.y1-=r),o=n.y0})}}function L(t){t.nodes.forEach(function(t){t.sourceLinks.sort(u),t.targetLinks.sort(s)}),t.nodes.forEach(function(t){var e=t.y0,n=e;t.sourceLinks.forEach(function(t){t.y0=e+t.width/2,e+=t.width}),t.targetLinks.forEach(function(t){t.y1=n+t.width/2,n+=t.width})})}return S.update=function(t){return L(t),t},S.nodeId=function(t){return arguments.length?(x="function"===typeof t?t:Object(a["a"])(t),S):x},S.nodeAlign=function(t){return arguments.length?(w="function"===typeof t?t:Object(a["a"])(t),S):w},S.nodeWidth=function(t){return arguments.length?(_=+t,S):_},S.nodePadding=function(t){return arguments.length?(b=+t,S):b},S.nodes=function(t){return arguments.length?(M="function"===typeof t?t:Object(a["a"])(t),S):M},S.links=function(t){return arguments.length?(E="function"===typeof t?t:Object(a["a"])(t),S):E},S.size=function(r){return arguments.length?(t=e=0,n=+r[0],y=+r[1],S):[n-t,y-e]},S.extent=function(r){return arguments.length?(t=+r[0][0],n=+r[1][0],e=+r[0][1],y=+r[1][1],S):[[t,e],[n,y]]},S.iterations=function(t){return arguments.length?(O=+t,S):O},S}},function(t,e,n){"use strict";var r=n(476);n.d(e,"b",function(){return r["a"]});n(477);var i=n(94);n.d(e,"a",function(){return i["a"]});n(478),n(479),n(480)},function(t,e,n){"use strict";var r=n(94);function i(){return{}}function o(t,e,n){t[e]=n}function a(){return Object(r["a"])()}function s(t,e,n){t.set(e,n)}e["a"]=function(){var t,e,n,u=[],c=[];function l(n,i,o,a){if(i>=u.length)return null!=t&&n.sort(t),null!=e?e(n):n;var s,c,f,h=-1,p=n.length,d=u[i++],v=Object(r["a"])(),g=o();while(++h<p)(f=v.get(s=d(c=n[h])+""))?f.push(c):v.set(s,[c]);return v.each(function(t,e){a(g,e,l(t,i,o,a))}),g}function f(t,n){if(++n>u.length)return t;var r,i=c[n-1];return null!=e&&n>=u.length?r=t.entries():(r=[],t.each(function(t,e){r.push({key:e,values:f(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}return n={object:function(t){return l(t,0,i,o)},map:function(t){return l(t,0,a,s)},entries:function(t){return f(l(t,0,a,s),0)},key:function(t){return u.push(t),n},sortKeys:function(t){return c[u.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}},function(t,e,n){"use strict";var r=n(94);function i(){}var o=r["a"].prototype;function a(t,e){var n=new i;if(t instanceof i)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)while(++r<o)n.add(t[r]);else while(++r<o)n.add(e(t[r],r,t))}return n}i.prototype=a.prototype={constructor:i,has:o.has,add:function(t){return t+="",this[r["b"]+t]=t,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t){return function(){return t}}e["a"]=r},function(t,e,n){"use strict";var r=n(483);function i(t){return[t.source.x1,t.y0]}function o(t){return[t.target.x0,t.y1]}e["a"]=function(){return Object(r["a"])().source(i).target(o)}},function(t,e,n){"use strict";n(484),n(177),n(95),n(485),n(488),n(179),n(180);var r=n(489);n.d(e,"a",function(){return r["a"]});n(490),n(182),n(183),n(184),n(186),n(185),n(187),n(188),n(491),n(492),n(62),n(493),n(189),n(190),n(63),n(494),n(495),n(97),n(496),n(60),n(497),n(498),n(499),n(500),n(501),n(502),n(47),n(503),n(504),n(98),n(505),n(506),n(48),n(507)},function(t,e,n){"use strict";n(33),n(27),n(46)},function(t,e,n){"use strict";n(27),n(486),n(487),n(46)},function(t,e,n){"use strict";e["a"]=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";e["a"]=function(t){return t}},function(t,e,n){"use strict";n(178),n(177),n(179)},function(t,e,n){"use strict";e["a"]=f;var r=n(33),i=n(181),o=n(27),a=n(96);n(180);function s(t){return t.source}function u(t){return t.target}function c(t){var e=s,n=u,c=a["a"],l=a["b"],f=null;function h(){var o,a=i["a"].call(arguments),s=e.apply(this,a),u=n.apply(this,a);if(f||(f=o=Object(r["path"])()),t(f,+c.apply(this,(a[0]=s,a)),+l.apply(this,a),+c.apply(this,(a[0]=u,a)),+l.apply(this,a)),o)return f=null,o+""||null}return h.source=function(t){return arguments.length?(e=t,h):e},h.target=function(t){return arguments.length?(n=t,h):n},h.x=function(t){return arguments.length?(c="function"===typeof t?t:Object(o["a"])(+t),h):c},h.y=function(t){return arguments.length?(l="function"===typeof t?t:Object(o["a"])(+t),h):l},h.context=function(t){return arguments.length?(f=null==t?null:t,h):f},h}function l(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function f(){return c(l)}},function(t,e,n){"use strict";n(33);var r=n(182),i=n(183),o=n(184),a=n(185),s=n(186),u=n(187),c=n(188);n(27),r["a"],i["a"],o["a"],s["a"],a["a"],u["a"],c["a"]},function(t,e,n){"use strict";var r=n(61),i=n(62);function o(t){this._context=t}o.prototype={areaStart:r["a"],areaEnd:r["a"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Object(i["b"])(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}}},function(t,e,n){"use strict";var r=n(62);function i(t){this._context=t}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Object(r["b"])(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}}},function(t,e,n){"use strict";var r=n(62);function i(t,e){this._basis=new r["a"](t),this._beta=e}i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new r["a"](t):new i(t,e)}return n.beta=function(e){return t(+e)},n})(.85)},function(t,e,n){"use strict";var r=n(189),i=n(61),o=n(97);function a(t,e){this._context=t,this._alpha=e}a.prototype={areaStart:i["a"],areaEnd:i["a"],lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(o["a"])(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new a(t,e):new r["a"](t,0)}return n.alpha=function(e){return t(+e)},n})(.5)},function(t,e,n){"use strict";var r=n(190),i=n(97);function o(t,e){this._context=t,this._alpha=e}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(i["a"])(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new o(t,e):new r["a"](t,0)}return n.alpha=function(e){return t(+e)},n})(.5)},function(t,e,n){"use strict";var r=n(61);function i(t){this._context=t}i.prototype={areaStart:r["a"],areaEnd:r["a"],lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}}},function(t,e,n){"use strict";function r(t){return t<0?-1:1}function i(t,e,n){var i=t._x1-t._x0,o=e-t._x1,a=(t._y1-t._y0)/(i||o<0&&-0),s=(n-t._y1)/(o||i<0&&-0),u=(a*o+s*i)/(i+o);return(r(a)+r(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(u))||0}function o(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function a(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function s(t){this._context=t}function u(t){this._context=new c(t)}function c(t){this._context=t}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a(this,this._t0,o(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,a(this,o(this,n=i(this,t,e)),n);break;default:a(this,this._t0,n=i(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(u.prototype=Object.create(s.prototype)).point=function(t,e){s.prototype.point.call(this,e,t)},c.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}}},function(t,e,n){"use strict";function r(t){this._context=t}function i(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=i(t),o=i(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}}},function(t,e,n){"use strict";function r(t,e){this._context=t,this._t=e}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}}},function(t,e,n){"use strict";n(181),n(27),n(47),n(48)},function(t,e,n){"use strict";n(47)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(47)},function(t,e,n){"use strict";n(47)},function(t,e,n){"use strict";n(98)},function(t,e,n){"use strict";n(48),n(98)},function(t,e,n){"use strict";n(48)},function(t,e,n){var r=n(3),i=n(509),o=n(6),a=n(2),s=a.registerTransform,u=n(7),c=u.getFields,l={as:["_x","_y"]};function f(t,e){e=r({},l,e);var n=e.as;if(!o(n)||2!==n.length)throw new TypeError("Invalid as: must be an array with two strings!");var a=n[0],s=n[1],u=c(e);if(!o(u)&&2!==u.length)throw new TypeError("Invalid fields: must be an array with two strings!");var f=u[0],h=u[1],p=t.rows,d=p.map(function(t){return[t[f],t[h]]}),v=i.voronoi();e.extend&&v.extent(e.extend),e.size&&v.size(e.size);var g=v(d).polygons();p.forEach(function(t,e){var n=g[e].filter(function(t){return!!t});t[a]=n.map(function(t){return t[0]}),t[s]=n.map(function(t){return t[1]})})}s("diagram.voronoi",f),s("voronoi",f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(510);n.d(e,"voronoi",function(){return r["a"]})},function(t,e,n){"use strict";var r=n(511),i=n(512),o=n(49);e["a"]=function(){var t=i["a"],e=i["b"],n=null;function a(r){return new o["d"](r.map(function(n,i){var a=[Math.round(t(n,i,r)/o["f"])*o["f"],Math.round(e(n,i,r)/o["f"])*o["f"]];return a.index=i,a.data=n,a}),n)}return a.polygons=function(t){return a(t).polygons()},a.links=function(t){return a(t).links()},a.triangles=function(t){return a(t).triangles()},a.x=function(e){return arguments.length?(t="function"===typeof e?e:Object(r["a"])(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:Object(r["a"])(+t),a):e},a.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],a):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},a.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],a):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},a}},function(t,e,n){"use strict";e["a"]=function(t){return function(){return t}}},function(t,e,n){"use strict";function r(t){return t[0]}function i(t){return t[1]}e["a"]=r,e["b"]=i},function(t,e,n){"use strict";e["b"]=h,e["a"]=p;var r=n(99),i=n(191),o=n(192),a=n(100),s=n(49),u=[];function c(){Object(r["a"])(this),this.edge=this.site=this.circle=null}function l(t){var e=u.pop()||new c;return e.site=t,e}function f(t){Object(o["b"])(t),s["a"].remove(t),u.push(t),Object(r["a"])(t)}function h(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],u=t.P,c=t.N,l=[t];f(t);var h=u;while(h.circle&&Math.abs(n-h.circle.x)<s["f"]&&Math.abs(r-h.circle.cy)<s["f"])u=h.P,l.unshift(h),f(h),h=u;l.unshift(h),Object(o["b"])(h);var p=c;while(p.circle&&Math.abs(n-p.circle.x)<s["f"]&&Math.abs(r-p.circle.cy)<s["f"])c=p.N,l.push(p),f(p),p=c;l.push(p),Object(o["b"])(p);var d,v=l.length;for(d=1;d<v;++d)p=l[d],h=l[d-1],Object(a["d"])(p.edge,h.site,p.site,i);h=l[0],p=l[v-1],p.edge=Object(a["c"])(h.site,p.site,null,i),Object(o["a"])(h),Object(o["a"])(p)}function p(t){var e,n,r,u,c=t[0],f=t[1],h=s["a"]._;while(h)if(r=d(h,f)-c,r>s["f"])h=h.L;else{if(u=c-v(h,f),!(u>s["f"])){r>-s["f"]?(e=h.P,n=h):u>-s["f"]?(e=h,n=h.N):e=n=h;break}if(!h.R){e=h;break}h=h.R}Object(i["c"])(t);var p=l(t);if(s["a"].insert(e,p),e||n){if(e===n)return Object(o["b"])(e),n=l(e.site),s["a"].insert(p,n),p.edge=n.edge=Object(a["c"])(e.site,p.site),Object(o["a"])(e),void Object(o["a"])(n);if(n){Object(o["b"])(e),Object(o["b"])(n);var g=e.site,m=g[0],y=g[1],_=t[0]-m,b=t[1]-y,x=n.site,w=x[0]-m,M=x[1]-y,E=2*(_*M-b*w),O=_*_+b*b,S=w*w+M*M,T=[(M*O-b*S)/E+m,(_*S-w*O)/E+y];Object(a["d"])(n.edge,g,x,T),p.edge=Object(a["c"])(g,t,null,T),n.edge=Object(a["c"])(t,x,null,T),Object(o["a"])(e),Object(o["a"])(n)}else p.edge=Object(a["c"])(e.site,p.site)}}function d(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function v(t,e){var n=t.N;if(n)return d(n,e);var r=t.site;return r[1]===e?r[0]:1/0}},function(t,e,n){var r=n(3),i=n(34),o=n(6),a=n(2),s=a.HIERARCHY,u=a.registerTransform,c=n(7),l=c.getField,f={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function h(t,e){if(t.dataType!==s)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=r({},f,e);var a,u=e.as;if(!o(u)||2!==u.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{a=l(e)}catch(t){console.warn(t)}a&&n.sum(function(t){return t[a]});var c=i.cluster();c.size(e.size),e.nodeSize&&c.nodeSize(e.nodeSize),e.separation&&c.separation(e.separation),c(n);var h=u[0],p=u[1];n.each(function(t){t[h]=t.x,t[p]=t.y})}u("hierarchy.cluster",h),u("dendrogram",h)},function(t,e,n){var r=n(101),i=n(2),o=i.HIERARCHY,a=i.registerTransform,s={};function u(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=r.compactBox(n,e)}a("hierarchy.compact-box",u),a("compact-box-tree",u),a("non-layered-tidy-tree",u),a("mindmap-logical",u)},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(64),o=n(517),a=n(102),s=n(28),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return a(t.rootNode,t.options,o)},e}(i),c={};function l(t,e){return e=s.assign({},c,e),new u(t,e).execute()}t.exports=l},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach(function(t){r(t,e,n)})}function i(t,e){var n=e?t.y:t.x;return t.children.forEach(function(t){n=Math.min(i(t,e),n)}),n}function o(t,e){var n=i(t,e);r(t,-n,e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach(function(t,r){a(t,e.children[r],n)})}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach(function(t){s(t,e,n)})}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach(function(t){r.push(n.fromNode(t,e))}),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var r=e.isHorizontal;function i(t){if(0!==t.cs){i(t.c[0]);for(var e=b(p(t.c[0].el),0,null),n=1;n<t.cs;++n){i(t.c[n]);var r=p(t.c[n].er);c(t,n,e),e=b(r,n,e)}g(t),u(t)}else u(t)}function u(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function c(t,e,n){var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;while(null!==r&&null!==o){p(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,l(t,e,n.index,s));var u=p(r),c=p(o);u<=c&&(r=h(r),null!==r&&(i+=r.mod)),u>=c&&(o=f(o),null!==o&&(a+=o.mod))}!r&&o?d(t,e,o,a):r&&!o&&v(t,e,r,i)}function l(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,y(t,e,n,r)}function f(t){return 0===t.cs?t.tl:t.c[0]}function h(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function p(t){return t.y+t.h}function d(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}function v(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}function g(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function m(t,e){e+=t.mod,t.x=t.prelim+e,_(t);for(var n=0;n<t.cs;n++)m(t.c[n],e)}function y(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}function _(t){for(var e=0,n=0,r=0;r<t.cs;r++)e+=t.c[r].shift,n+=e+t.c[r].change,t.c[r].mod+=n}function b(t,e,n){while(null!==n&&t>=n.low)n=n.nxt;return{low:t,index:e,nxt:n}}s(t,r);var x=n.fromNode(t,r);return i(x),m(x,0),a(x,t,r),o(t,r),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(64),o=n(519),a=n(102),s=n(28),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return t.rootNode.width=0,a(t.rootNode,t.options,o)},e}(i),c={};function l(t,e){return e=s.assign({},c,e),new u(t,e).execute()}t.exports=l},function(t,e,n){var r=n(28);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach(function(t,r){a(t,e.children[r],n)})}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,s=0;function u(t){if(!t)return null;t.width=0,t.depth&&t.depth>s&&(s=t.depth);var e=t.children,n=e.length,r=new i(t.height,[]);return e.forEach(function(t,e){var i=u(t);r.children.push(i),0===e&&(r.leftChild=i),e===n-1&&(r.rightChild=i)}),r.originNode=t,r.isLeaf=t.isLeaf(),r}function c(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=s;else{var e=t.children.map(function(t){return c(t)}),n=Math.min.apply(null,e);t.drawingDepth=n-1}return t.drawingDepth}function l(t){t.x=t.drawingDepth*e.rankSep,t.isLeaf?(t.y=0,n&&(t.y=n.y+n.height+e.nodeSep,t.originNode.parent!==n.originNode.parent&&(t.y+=e.subTreeSep)),n=t):(t.children.forEach(function(t){l(t)}),t.y=(t.leftChild.y+t.rightChild.y)/2)}var f=u(t);return c(f),l(f),a(f,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(64),o=n(521),a=n(194),s=n(28),u=["LR","RL","H"],c=u[0],l=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this,e=t.options,n=t.rootNode;e.isHorizontal=!0;var r=e.indent,i=e.direction||c;if(i&&-1===u.indexOf(i))throw new TypeError("Invalid direction: "+i);if(i===u[0])o(n,r);else if(i===u[1])o(n,r),n.right2left();else if(i===u[2]){var s=a(n,e),l=s.left,f=s.right;o(l,r),l.right2left(),o(f,r);var h=l.getBoundingBox();f.translate(h.width,0),n.x=f.x-n.width/2}return n},e}(i),f={};function h(t,e){return e=s.assign({},f,e),new l(t,e).execute()}t.exports=h},function(t,e){var n=20;function r(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}t.exports=function(t,e){void 0===e&&(e=n);var i=null;t.eachNode(function(t){r(t,i,e),i=t})}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(64),o=n(523),a=n(102),s=n(28),u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return a(t.rootNode,t.options,o)},e}(i),c={};function l(t,e){return e=s.assign({},c,e),new u(t,e).execute()}t.exports=l},function(t,e,n){var r=n(28);function i(t,e){var n=0;return t.children.length?t.children.forEach(function(t){n+=i(t,e)}):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach(function(t){o(t)});var r=e[0],i=e[n-1],a=i.y-r.y+i.height,s=0;if(e.forEach(function(t){s+=t.totalHeight}),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-a)/2-r.y;e.forEach(function(t){t.translate(0,u)})}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),o(t)}},function(t,e,n){var r=n(101),i=n(2),o=i.HIERARCHY,a=i.registerTransform,s={};function u(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=r.dendrogram(n,e)}a("hierarchy.dendrogram",u),a("dendrogram",u)},function(t,e,n){var r=n(101),i=n(2),o=i.HIERARCHY,a=i.registerTransform,s={};function u(t,e){var n=t.root;if(e=Object.assign({},s,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=r.indented(n,e)}a("hierarchy.indented",u),a("indented-tree",u)},function(t,e,n){var r=n(3),i=n(34),o=n(6),a=n(2),s=a.HIERARCHY,u=a.registerTransform,c=n(7),l=c.getField,f={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function h(t,e){if(t.dataType!==s)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=r({},f,e);var a,u=e.as;if(!o(u)||3!==u.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{a=l(e)}catch(t){console.warn(t)}a&&n.sum(function(t){return t[a]}).sort(function(t,e){return e[a]-t[a]});var c=i.pack();c.size(e.size),e.padding&&c.padding(e.padding),c(n);var h=u[0],p=u[1],d=u[2];n.each(function(t){t[h]=t.x,t[p]=t.y,t[d]=t.r})}u("hierarchy.pack",h),u("hierarchy.circle-packing",h),u("circle-packing",h)},function(t,e,n){var r=n(3),i=n(34),o=n(6),a=n(2),s=a.HIERARCHY,u=a.registerTransform,c=n(7),l=c.getField,f={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function h(t,e){if(t.dataType!==s)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=r({},f,e);var a,u=e.as;if(!o(u)||2!==u.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{a=l(e)}catch(t){console.warn(t)}a&&n.sum(function(t){return t[a]});var c=i.partition();c.size(e.size).round(e.round).padding(e.padding),c(n);var h=u[0],p=u[1];n.each(function(t){t[h]=[t.x0,t.x1,t.x1,t.x0],t[p]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===u.indexOf(e)&&delete t[e]})})}u("hierarchy.partition",h),u("adjacency",h)},function(t,e,n){var r=n(3),i=n(34),o=n(6),a=n(2),s=a.HIERARCHY,u=a.registerTransform,c=n(7),l=c.getField,f={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function h(t,e){if(t.dataType!==s)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=r({},f,e);var a,u=e.as;if(!o(u)||2!==u.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{a=l(e)}catch(t){console.warn(t)}a&&n.sum(function(t){return t[a]});var c=i.tree();c.size(e.size),e.nodeSize&&c.nodeSize(e.nodeSize),e.separation&&c.separation(e.separation),c(n);var h=u[0],p=u[1];n.each(function(t){t[h]=t.x,t[p]=t.y})}u("hierarchy.tree",h),u("tree",h)},function(t,e,n){var r=n(3),i=n(34),o=n(6),a=n(2),s=a.HIERARCHY,u=a.registerTransform,c=n(7),l=c.getField,f={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function h(t,e){if(t.dataType!==s)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root;e=r({},f,e);var a,u=e.as;if(!o(u)||2!==u.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{a=l(e)}catch(t){console.warn(t)}a&&n.sum(function(t){return t[a]});var c=i.treemap();c.tile(i[e.tile]).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft),c(n);var h=u[0],p=u[1];n.each(function(t){t[h]=[t.x0,t.x1,t.x1,t.x0],t[p]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===u.indexOf(e)&&delete t[e]})})}u("hierarchy.treemap",h),u("treemap",h)},function(t,e,n){var r=n(3),i=n(10),o=n(2),a=o.registerTransform,s=n(531),u=n(7),c=u.getFields,l={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function f(t,e){e=r({},l,e);var n=s();["font","fontSize","padding","rotate","size","spiral","timeInterval"].forEach(function(t){e[t]&&n[t](e[t])});var o=c(e),a=o[0],u=o[1];if(!i(a)||!i(u))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var f=t.rows.map(function(t){return t.text=t[a],t.value=t[u],t});n.words(f),e.imageMask&&n.createMask(e.imageMask);var h=n.start(),p=h._tags,d=h._bounds;p.forEach(function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2});var v=e.size,g=v[0],m=v[1],y=h.hasImage;p.push({text:"",value:0,x:y?0:d[0].x,y:y?0:d[0].y,opacity:0}),p.push({text:"",value:0,x:y?g:d[1].x,y:y?m:d[1].y,opacity:0}),t.rows=p,t._tagCloud=h}a("tag-cloud",f),a("word-cloud",f)},function(t,e){var n=Math.PI/180,r=64,i=2048;function o(t){return t.text}function a(){return"serif"}function s(){return"normal"}function u(t){return t.value}function c(){return 90*~~(2*Math.random())}function l(){return 1}function f(t,e,o,a){if(!e.sprite){var s=t.context,u=t.ratio;s.clearRect(0,0,(r<<5)/u,i/u);var c=0,l=0,f=0,h=o.length;--a;while(++a<h){e=o[a],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/u)+"px "+e.font;var p=s.measureText(e.text+"m").width*u,d=e.size<<1;if(e.rotate){var v=Math.sin(e.rotate*n),g=Math.cos(e.rotate*n),m=p*g,y=p*v,_=d*g,b=d*v;p=Math.max(Math.abs(m+b),Math.abs(m-b))+31>>5<<5,d=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else p=p+31>>5<<5;if(d>f&&(f=d),c+p>=r<<5&&(c=0,l+=f,f=0),l+d>=i)break;s.translate((c+(p>>1))/u,(l+(d>>1))/u),e.rotate&&s.rotate(e.rotate*n),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=p,e.height=d,e.xoff=c,e.yoff=l,e.x1=p>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,c+=p}var x=s.getImageData(0,0,(r<<5)/u,i/u).data,w=[];while(--a>=0)if(e=o[a],e.hasText){for(var M=e.width,E=M>>5,O=e.y1-e.y0,S=0;S<O*E;S++)w[S]=0;if(c=e.xoff,null==c)return;l=e.yoff;for(var T=0,j=-1,A=0;A<O;A++){for(var C=0;C<M;C++){var L=E*A+(C>>5),P=x[(l+A)*(r<<5)+(c+C)<<2]?1<<31-C%32:0;w[L]|=P,T|=P}T?j=A:(e.y0++,O--,A--,l++)}e.y1=e.y0+j,e.sprite=w.slice(0,(e.y1-e.y0)*E)}}}function h(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),f=0;f<c;f++){r=0;for(var h=0;h<=o;h++)if((r<<u|(h<o?(r=i[f*o+h])>>>s:0))&e[l+h])return!0;l+=n}return!1}function p(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function d(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function v(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function g(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(t){var o=t<0?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function m(t){var e=[],n=-1;while(++n<t)e[n]=0;return e}function y(){return document.createElement("canvas")}function _(t){return"function"===typeof t?t:function(){return t}}var b={archimedean:v,rectangular:g};t.exports=function(){var t=[256,256],e=o,n=a,g=u,x=s,w=s,M=c,E=l,O=v,S=[],T=1/0,j=Math.random,A=y,C={};function L(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(r<<5)/e,t.height=i/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function P(e,n,r){var i,o,a,s=n.x,u=n.y,c=Math.sqrt(t[0]*t[0]+t[1]*t[1]),l=O(t),f=j()<.5?1:-1,p=-f;while(i=l(p+=f)){if(o=~~i[0],a=~~i[1],Math.min(Math.abs(o),Math.abs(a))>=c)break;if(n.x=s+o,n.y=u+a,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!h(n,e,t[0]))&&(!r||d(n,r))){for(var v=n.sprite,g=n.width>>5,m=t[0]>>5,y=n.x-(g<<4),_=127&y,b=32-_,x=n.y1-n.y0,w=void 0,M=(n.y+n.y0)*m+(y>>5),E=0;E<x;E++){w=0;for(var S=0;S<=g;S++)e[M+S]|=w<<b|(S<g?(w=v[E*g+S])>>>_:0);M+=m}return delete n.sprite,!0}}return!1}return C.canvas=function(t){return arguments.length?(A=_(t),C):A},C.start=function(){var r=t,i=r[0],o=r[1],a=L(A()),s=C.board?C.board:m((t[0]>>5)*t[1]),u=S.length,c=[],l=S.map(function(t,r){return t.text=e.call(this,t,r),t.font=n.call(this,t,r),t.style=x.call(this,t,r),t.weight=w.call(this,t,r),t.rotate=M.call(this,t,r),t.size=~~g.call(this,t,r),t.padding=E.call(this,t,r),t}).sort(function(t,e){return e.size-t.size}),h=-1,d=C.board?[{x:0,y:0},{x:i,y:o}]:null;function v(){var e=Date.now();while(Date.now()-e<T&&++h<u){var n=l[h];n.x=i*(j()+.5)>>1,n.y=o*(j()+.5)>>1,f(a,n,l,h),n.hasText&&P(s,n,d)&&(c.push(n),d?C.hasImage||p(d,n):d=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}C._tags=c,C._bounds=d}return v(),C},C.createMask=function(e){var n=document.createElement("canvas"),r=t,i=r[0],o=r[1],a=i>>5,s=m((i>>5)*o);n.width=i,n.height=o;var u=n.getContext("2d");u.drawImage(e,0,0,e.width,e.height,0,0,i,o);for(var c=u.getImageData(0,0,i,o).data,l=0;l<o;l++)for(var f=0;f<i;f++){var h=a*l+(f>>5),p=l*i+f<<2,d=c[p]>=250&&c[p+1]>=250&&c[p+2]>=250,v=d?1<<31-f%32:0;s[h]|=v}C.board=s,C.hasImage=!0},C.timeInterval=function(t){return arguments.length?(T=null==t?1/0:t,C):T},C.words=function(t){return arguments.length?(S=t,C):S},C.size=function(e){return arguments.length?(t=[+e[0],+e[1]],C):t},C.font=function(t){return arguments.length?(n=_(t),C):n},C.fontStyle=function(t){return arguments.length?(x=_(t),C):x},C.fontWeight=function(t){return arguments.length?(w=_(t),C):w},C.rotate=function(t){return arguments.length?(M=_(t),C):M},C.text=function(t){return arguments.length?(e=_(t),C):e},C.spiral=function(t){return arguments.length?(O=b[t]||t,C):O},C.fontSize=function(t){return arguments.length?(g=_(t),C):g},C.padding=function(t){return arguments.length?(E=_(t),C):E},C.random=function(t){return arguments.length?(j=t,C):j},C}},function(t,e,n){var r=n(3),i=n(9),o=n(9),a=n(24),s=n(533),u=n(32),c=n(19),l=c.sum,f=n(15),h=n(2),p=h.registerTransform,d=n(7),v=d.getFields,g={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function m(t,e){e=r({},g,e);var n=v(e),c=n[0],h=n[1],p=e.as,d=p[0],m=p[1],y=e.groupBy,_=f(t.rows,y),b=a(_),x=e.size,w=x[0],M=x[1],E=e.maxCount,O=b.length,S=M/O,T=e.rows,j=e.gapRatio,A=[],C=e.scale,L=0,P=0;o(_,function(t){var e=l(s(t,function(t){return t[h]})),n=Math.ceil(e*C/T);e*C>E&&(C=E/e,n=Math.ceil(e*C/T)),P=w/n}),o(_,function(t){var e=[L*S,(L+1)*S],n=e[1]-e[0],r=n*(1-j)/T,o=0,a=0;i(t,function(t){for(var n=t[h],i=Math.round(n*C),s=0;s<i;s++){a===T&&(a=0,o++);var l=u(t,[c,h].concat(y));l[d]=o*P+P/2,l[m]=a*r+r/2+e[0],l._wStep=P,l._hStep=r,a++,A.push(l)}}),L+=1}),t.rows=A}p("waffle",m)},function(t,e,n){var r=n(9),i=n(91),o=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){n.push(e(t,r))}),n};t.exports=o},function(t,e,n){var r=n(3),i=n(6),o=n(11),a=n(56),s=n(10),u=n(24),c=n(57),l=n(92),f=n(2),h=f.registerTransform,p=n(7),d=p.getFields,v=n(58),g=v.silverman,m={as:["x","y","z"],method:"gaussian",extent:[],bandwidth:[]},y=u(l);function _(t,e){e=r({},m,e);var n=d(e);if(!i(n)||2!==n.length)throw new TypeError("invalid fields: must be an array of 2 strings!");var u=e.as,f=u[0],h=u[1],p=u[2];if(!s(f)||!s(h)||!s(p))throw new TypeError("invalid as: must be an array of 3 strings!");var v=e.method;if(s(v)){if(-1===y.indexOf(v))throw new TypeError("invalid method: "+v+". Must be one of "+y.join(", "));v=l[v]}if(!o(v))throw new TypeError("invalid method: kernel method must be a function!");var _=n[0],b=n[1],x=e.extent,w=x[0],M=x[1];i(w)&&i(M)||(w=t.range(_),M=t.range(b));var E=e.bandwidth,O=E[0],S=E[1];(!a(O)||O<=0||!a(S)||S<=0)&&(O=g(t.getColumn(_)),S=g(t.getColumn(b)));for(var T=c(w,O),j=c(M,S),A=t.rows.length,C=[],L=0;L<T.length;L++)for(var P=0;P<j.length;P++){for(var I=0,R=T[L],F=j[P],D=0;D<A;D++)I+=v((R-t.rows[D][_])/O)*v((F-t.rows[D][b])/S);var k=1/(A*O*S)*I,N={};N[f]=R,N[h]=F,N[p]=k,C.push(N)}t.rows=C}h("kernel-smooth.density",_),h("kernel.density",_),t.exports={KERNEL_METHODS:y}},function(t,e,n){var r=n(3),i=n(6),o=n(11),a=n(77),s=n(56),u=n(10),c=n(24),l=n(19),f=l.sum,h=n(57),p=n(92),d=n(2),v=d.registerTransform,g=n(7),m=g.getFields,y=n(58),_=y.silverman,b={as:["x","y"],method:"gaussian"},x=c(p);function w(t,e,n,r){var i=(r-n)/e;return t(i)}function M(t){return function(e){return i(e)?e.map(function(e){return t(e)}):t(e)}}function E(t,e){e=r({},b,e);var n=m(e);if(!i(n)||1!==n.length&&2!==n.length)throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var c=e.as,l=c[0],d=c[1];if(!u(l)||!u(d))throw new TypeError("invalid as: must be an array of 2 strings!");var v=e.method;if(u(v)){if(-1===x.indexOf(v))throw new TypeError("invalid method: "+v+". Must be one of "+x.join(", "));v=p[v]}if(!o(v))throw new TypeError("invalid method: kernel method must be a function!");var g=n[0],y=n[1],E=t.getColumn(g),O=e.extent;i(O)||(O=t.range(g));var S=e.bandwidth;(!s(S)||S<=0)&&(S=_(E));var T,j=h(O,S),A=E.length,C=w.bind(null,v,S);if(a(y))T=M(function(t){var e=E.map(function(e){return C(t,e)}),n=f(e),r=A*S;return n&&r?n/r:0});else{var L=t.getColumn(y);T=M(function(t){var e=E.map(function(e){return C(t,e)}),n=f(e.map(function(t,e){return t*L[e]})),r=f(e);return n&&r?n/r:0})}var P=j.map(function(t){var e={};return e[l]=t,e[d]=T(t),e});t.rows=P}v("kernel-smooth.regression",E),v("kernel.regression",E),t.exports={KERNEL_METHODS:x}}])})},gRab:function(t,e,n){"use strict";var r=n("tAuX"),i=n("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("qIgq")),a=i(n("2Taf")),s=i(n("vZ4D")),u=i(n("l4Ni")),c=i(n("ujKo")),l=i(n("MhPg")),f=r(n("q1tI")),h=i(n("TGYy")),p=i(n("TSYQ")),d=i(n("CIvD")),v=i(n("8CRg")),g=i(n("iZWj")),m=i(n("HyL7")),y=function(t){function e(){var t,n;(0,a.default)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=(0,u.default)(this,(t=(0,c.default)(e)).call.apply(t,[this].concat(i))),n.state={},n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"componentDidMount",value:function(){var t=new h.default.Scene({id:"map",mapStyle:"dark",center:[104.838088,34.075889],pitch:0,zoom:3.5});t.on("loaded",function(){var e=["#3E3A7F","#6C3567","#1A2357","#AE2262","#AB296C","#730D1C","#00131C"],n=fetch("./100000_full.json",{method:"GET"}).then(function(t){return t.json()}),r=fetch("./line.txt",{method:"GET"}).then(function(t){return t.text()});Promise.all([n,r]).then(function(n){var r=(0,o.default)(n,2),i=r[0],a=r[1];t.PolygonLayer().source(i).color("childrenNum",function(t){return t>20?e[5]:t>18?e[4]:t>16?e[3]:t>14?e[2]:t>12?e[1]:e[0]}).shape("fill").style({opacity:.4}).render(),t.LineLayer({zIndex:2}).source(a,{parser:{type:"csv",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}).shape("greatCircle").size(.8).color("rgb(13,64,140)").animate({enable:!0,interval:1,duration:2,trailLength:.8}).style({opacity:.6}).render()})})}},{key:"render",value:function(){return f.default.createElement("div",{className:(0,p.default)(m.default.container)},f.default.createElement("div",{className:(0,p.default)(m.default.mainPic)}),f.default.createElement("div",{className:(0,p.default)(m.default.map),id:"map"}),f.default.createElement("div",{className:(0,p.default)(m.default.rd1)},f.default.createElement("img",{alt:"",src:d.default}),f.default.createElement(v.default,null)),f.default.createElement("div",{className:(0,p.default)(m.default.rd2)},f.default.createElement("img",{alt:"",src:d.default}),f.default.createElement(v.default,null)),f.default.createElement("div",{className:(0,p.default)(m.default.rd3)},f.default.createElement("img",{alt:"",src:d.default}),f.default.createElement(v.default,null)),f.default.createElement("div",{className:(0,p.default)(m.default.slideText)},f.default.createElement(g.default,null)))}}]),e}(f.PureComponent);e.default=y},iZWj:function(t,e,n){"use strict";var r=n("tAuX"),i=n("g09b");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("2Taf")),a=i(n("vZ4D")),s=i(n("l4Ni")),u=i(n("ujKo")),c=i(n("MhPg")),l=r(n("q1tI")),f=i(n("Q7uR")),h=function(t){function e(){var t,n;(0,o.default)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=(0,s.default)(this,(t=(0,u.default)(e)).call.apply(t,[this].concat(i))),n.state={},n}return(0,c.default)(e,t),(0,a.default)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return l.default.createElement("div",{className:f.default.absolute},l.default.createElement("div",{className:f.default.wraper},l.default.createElement("div",{className:f.default.bigCon},l.default.createElement("div",{className:f.default.content},"12\uff1a35",l.default.createElement("br",null),"\u5317\u4eac\u671d\u9633\u533a\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"13:16",l.default.createElement("br",null),"\u5185\u8499\u53e4\u547c\u548c\u6d69\u7279\u5e02\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"14\uff1a06",l.default.createElement("br",null),"\u5409\u6797\u957f\u6625\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"15\uff1a17",l.default.createElement("br",null),"\u5e7f\u897f\u5317\u6d77\u6210\u4ea4\u4e00\u5355\u65e0\u5f02\u5e38"),l.default.createElement("div",{className:f.default.content},"12\uff1a35",l.default.createElement("br",null),"\u5317\u4eac\u671d\u9633\u533a\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"13:16",l.default.createElement("br",null),"\u5185\u8499\u53e4\u547c\u548c\u6d69\u7279\u5e02\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"14\uff1a06",l.default.createElement("br",null),"\u5409\u6797\u957f\u6625\u6210\u4ea4\u4e00\u5355 \u65e0\u5f02\u5e38",l.default.createElement("br",null),"15\uff1a17",l.default.createElement("br",null),"\u5e7f\u897f\u5317\u6d77\u6210\u4ea4\u4e00\u5355\u65e0\u5f02\u5e38"))))}}]),e}(l.PureComponent);e.default=h}}]);