(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"6BZM":function(e,t,a){e.exports={inputValue:"antd-pro-pages-audit-log-audit-log-inputValue"}},TbQj:function(e,t,a){"use strict";var n=a("g09b"),o=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var i=n(a("NUBc"));a("g9YV");var d=n(a("wCAj"));a("+L6B");var r=n(a("2/Rp"));a("14J3");var u=n(a("BMrR"));a("iQDF");var l=n(a("+eQT"));a("jCWc");var s=n(a("kPKH"));a("y8nQ");var g=n(a("Vl3Y"));a("5NDa");var c,p,f,m=n(a("5rEg")),h=n(a("2Taf")),v=n(a("vZ4D")),D=n(a("l4Ni")),L=n(a("ujKo")),N=n(a("MhPg")),y=o(a("q1tI")),C=a("Hx5s"),E=a("MuoO"),b=a("LLXN"),M=n(a("wd/R")),A=n(a("6BZM")),S=function(e){function t(){return(0,h.default)(this,t),(0,D.default)(this,(0,L.default)(t).apply(this,arguments))}return(0,N.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.search;return y.default.createElement(g.default,{className:"ant-advanced-search-form"},y.default.createElement(u.default,{gutter:{xs:24,sm:48,md:144,lg:48,xl:96}},y.default.createElement(s.default,{xs:12,sm:12,lg:8},y.default.createElement(g.default.Item,{label:(0,b.formatMessage)({id:"app.common.username"})},e("operatorName",{})(y.default.createElement(m.default,{className:A.default.inputvalue})))),y.default.createElement(s.default,{xs:12,sm:12,lg:8},y.default.createElement(g.default.Item,{label:(0,b.formatMessage)({id:"app.common.dateFrom"})},e("beginDate",{})(y.default.createElement(l.default,{onChange:this.changeBeginDate,className:A.default.inputvalue,format:"YYYY-MM-DD",placeholder:""})))),y.default.createElement(s.default,{xs:12,sm:12,lg:8},y.default.createElement(g.default.Item,{label:(0,b.formatMessage)({id:"app.common.dateTo"})},e("endDate",{})(y.default.createElement(l.default,{onChange:this.changeEndDate,className:A.default.inputvalue,format:"YYYY-MM-DD",placeholder:""}))))),y.default.createElement("div",{className:"btnArea"},y.default.createElement(r.default,{type:"primary",onClick:t},(0,b.formatMessage)({id:"app.common.search"}))))}}]),t}(y.Component),x=g.default.create({})(S),Y=(c=(0,E.connect)(function(e){var t=e.auditLog,a=e.loading;return{loading:a.effects,getAuditLogListData:t.data}}),c((f=function(e){function t(){var e,a;(0,h.default)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a=(0,D.default)(this,(e=(0,L.default)(t)).call.apply(e,[this].concat(o))),a.state={pageNum:"1",pageSize:"10",page:{pageNumber:1,pageSize:10},columns:[{title:(0,b.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index"},{title:"Function Name",dataIndex:"userName",key:"userName"},{title:"Table Name",dataIndex:"formName",key:"formName"},{title:"Code",dataIndex:"biToCode",key:"biToCode"},{title:"Product Code",dataIndex:"productCode",key:"productCode"},{title:"Effective Date",dataIndex:"operateDate",key:"operateDate"},{title:"Field Updated",dataIndex:"ipAddress",key:"ipAddress"},{title:"Update Type",dataIndex:"ipAddress",key:"ipAddress"},{title:"Log Time",dataIndex:"operateTime",key:"operateTime"}],getAuditLogList:[]},a.auditLogForm=y.default.createRef(),a.getAuditLog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o={pageNumber:"".concat(a.state.pageNum),pageSize:"".concat(a.state.pageSize),operatorName:e,beginDate:t,endDate:n},i=a.props.dispatch;i({type:"auditLog/getAuditLogList",payload:o})},a.pageChange=function(e){a.setState({pageNum:"".concat(e.current),pageSize:e.pageSize},function(){a.getAuditLog()})},a.changeBeginDate=function(){},a.changeEndDate=function(){},a.queryLog=function(){a.auditLogForm.current.validateFields(function(e,t){var n=t.beginDate?(0,M.default)(t.beginDate).format("YYYY-MM-DD"):"";n=n.split("-").join("");var o=t.endDate?(0,M.default)(t.endDate||"").format("YYYY-MM-DD"):"";o=o.split("-").join(""),a.getAuditLog(t.operatorName,n,o)})},a.operatorReset=function(){a.auditLogForm.current.resetFields()},a}return(0,N.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.getAuditLog()}},{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state.getAuditLogList,n=this.state,o=n.pageSize,r=n.page;a=this.props.getAuditLogListData.items;var u=this.props.getAuditLogListData&&this.props.getAuditLogListData.totalCount;return a&&a.forEach(function(t,a){t.index=(e.state.pageNum-1)*o+a+1}),y.default.createElement(C.PageHeaderWrapper,null,y.default.createElement(x,{search:this.queryLog,reset:this.operatorReset,ref:this.auditLogForm}),y.default.createElement(d.default,{loading:t["auditLog/getAuditLogList"],dataSource:a,pagination:{total:u,pageSize:o},onChange:this.pageChange,columns:this.state.columns}),y.default.createElement(i.default,{showSizeChanger:!0,current:r.pageNumber,showTotal:function(){return"Page ".concat(r.pageNumber.toString()," of ").concat(Math.ceil(u/r.pageSize).toString())},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:u,pageSize:r.pageSize}))}}]),t}(y.Component),p=f))||p),k=Y;t.default=k}}]);