(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{QoX1:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var s=n(a("BMrR"));a("+L6B");var o=n(a("2/Rp"));a("jCWc");var r=n(a("kPKH"));a("y8nQ");var u=n(a("Vl3Y"));a("5NDa");var i=n(a("5rEg")),p=n(a("2Taf")),m=n(a("vZ4D")),d=n(a("l4Ni")),c=n(a("ujKo")),f=n(a("MhPg"));a("OaEy");var g=n(a("2fM7")),y=l(a("q1tI")),h=a("LLXN"),v=n(a("d8wp")),M=n(a("BN5G")),b=g.default.Option,E=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return a=(0,d.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(n))),a.state={},a}return(0,f.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.typeOptions,l=t.search;return y.default.createElement(u.default,{className:"ant-advanced-search-form search-wraper",layout:"vertical"},y.default.createElement(s.default,{gutter:{xs:0,sm:8,md:10,lg:20,xl:24},align:"bottom",type:"flex"},y.default.createElement(r.default,{xs:12,sm:12,lg:7,xxl:5},y.default.createElement(u.default.Item,{label:(0,h.formatMessage)({id:"systemManagement.template.templateName"})},e("templateName",{})(y.default.createElement(i.default,{className:v.default.inputvalue,placeholder:"Please Input ".concat((0,h.formatMessage)({id:"systemManagement.template.templateName"}))})))),y.default.createElement(r.default,{xs:12,sm:12,lg:7,xxl:5},y.default.createElement(u.default.Item,{label:(0,h.formatMessage)({id:"systemManagement.template.templateId"})},e("templateId",{})(y.default.createElement(i.default,{className:v.default.inputvalue,placeholder:"Please Input ".concat((0,h.formatMessage)({id:"systemManagement.template.templateId"}))})))),y.default.createElement(r.default,{xs:12,sm:12,lg:7,xxl:5},y.default.createElement(u.default.Item,{label:(0,h.formatMessage)({id:"systemManagement.template.templateType"})},e("type",{initialValue:""})(y.default.createElement(g.default,{className:v.default.inputvalue,placeholder:"Please Select",allowClear:!0},a.map(function(e){return y.default.createElement(b,{key:e.key,value:e.value},e.title)}))))),y.default.createElement(r.default,{xs:12,sm:12,lg:8,xxl:6},y.default.createElement(u.default.Item,null,y.default.createElement(o.default,{type:"primary",onClick:l},y.default.createElement(M.default,{type:"iconsousuo",style:{color:"#fff"}}),(0,h.formatMessage)({id:"app.common.search"}))))))}}]),t}(y.Component);t.default=E},ZTlW:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DjyN");var s=l(a("NUBc"));a("g9YV");var o=l(a("wCAj"));a("2qtc");var r=l(a("kLXV"));a("bbsP");var u=l(a("/wGt")),i=l(a("2Taf")),p=l(a("vZ4D")),m=l(a("l4Ni")),d=l(a("ujKo")),c=l(a("MhPg"));a("y8nQ");var f,g,y,h=l(a("Vl3Y")),v=n(a("q1tI")),M=a("Hx5s"),b=a("LLXN"),E=a("MuoO"),I=l(a("BN5G")),C=a("fwgp"),N=l(a("d8wp")),T=l(a("QoX1")),k=l(a("sf48")),w=h.default.create({})(T.default),S=(f=(0,E.connect)(function(e){var t=e.messageContentTemplate,a=e.loading;return{loading:a.effects,messageTemplate:t.data,updateTemplate:t.updateData}}),f((y=function(e){function t(){var e;return(0,i.default)(this,t),e=(0,m.default)(this,(0,d.default)(t).call(this)),e.searchForm=v.default.createRef(),e.editMouseEnter=function(t){console.log("enter"),e.setState({editIconActive:!0,activeIndex:t})},e.editMouseLeave=function(){console.log("outer"),e.setState({editIconActive:!1})},e.onClose=function(){e.setState({modifyVisible:!1})},e.onSave=function(){e.setState({modifyVisible:!1});var t=e.state.page.pageSize,a={pageNumber:1,pageSize:t};e.setState({page:a},function(){e.queryUserList()})},e.updateUser=function(t,a){var l=Object.assign({},a);e.setState({modifyVisible:!0,updateFlag:!0,groupTitle:"Message Content Template Modify",groupMenuInfo:l})},e.deleteConfirm=function(){var t=e.props.dispatch,a=e.state.groupMenuInfo,l={operType:"deleteById",roleId:a.roleId};t({type:"messageContentTemplate/updateTemplate",payload:l,callback:function(){e.queryUserList(),e.setState({deleteVisible:!1})}})},e.deleteCancel=function(){e.setState({deleteVisible:!1})},e.queryLog=function(){e.searchForm.current.validateFields(function(t,a){e.setState({searchTemplateName:a.templateName,searchTemplateId:a.templateId,searchType:a.type},function(){e.queryUserList()})})},e.pageChange=function(t,a){var l={pageNumber:t,pageSize:a};e.setState({page:l},function(){e.queryUserList()})},e.queryUserList=function(){var t=e.props.dispatch,a=e.state,l=a.searchTemplateName,n=a.searchTemplateId,s=a.searchType,o={templateName:l,templateId:n,type:s,pageNumber:e.state.page.pageNumber.toString(),pageSize:e.state.page.pageSize.toString()};t({type:"messageContentTemplate/getTemplateList",payload:o})},e.onShowSizeChange=function(t,a){var l={pageNumber:t,pageSize:a};e.setState({page:l},function(){e.queryUserList()})},e.state={modifyVisible:!1,deleteVisible:!1,updateFlag:!1,searchTemplateName:void 0,searchTemplateId:void 0,searchType:void 0,editIconActive:!1,activeIndex:void 0,groupMenuInfo:{},typeOptions:[{key:"",value:"",title:"All"},{key:"1",value:"1",title:"Management Email"},{key:"2",value:"2",title:"Alert Email"},{key:"3",value:"3",title:"Information Email"},{key:"4",value:"4",title:"Information Message"},{key:"5",value:"5",title:"Alert Message"}],columns:[{title:(0,b.formatMessage)({id:"app.common.number"}),dataIndex:"index",key:"index",align:"center",width:60,render:function(t,a,l){return v.default.createElement("span",null,(e.state.page.pageNumber-1)*e.state.page.pageSize+l+1)}},{title:(0,b.formatMessage)({id:"systemManagement.template.templateName"}),dataIndex:"templateName",key:"templateName",ellipsis:!0,width:150},{title:(0,b.formatMessage)({id:"systemManagement.template.templateId"}),dataIndex:"templateId",key:"templateId",width:120},{title:(0,b.formatMessage)({id:"systemManagement.template.templateType"}),dataIndex:"type",key:"type",render:function(e,t){return v.default.createElement("span",null,(0,C.templateTypeFormat)(t.type))},ellipsis:!0,width:120},{title:(0,b.formatMessage)({id:"systemManagement.template.templateTitle"}),dataIndex:"title",key:"title",ellipsis:!0,width:120},{title:(0,b.formatMessage)({id:"systemManagement.template.templateContent"}),dataIndex:"content",key:"content",ellipsis:!0,width:180},{title:(0,b.formatMessage)({id:"systemManagement.template.keyword"}),dataIndex:"keyWord",key:"keyWord",ellipsis:!0,width:180},{title:(0,b.formatMessage)({id:"app.common.operation"}),dataIndex:"operation",key:"operation",width:100,align:"center",render:function(t,a,l){return v.default.createElement("span",{className:N.default.operation},v.default.createElement("a",{href:"#",onClick:function(){return e.updateUser(t,a)},onMouseEnter:function(){return e.editMouseEnter(l)},onMouseLeave:e.editMouseLeave},v.default.createElement(I.default,{type:e.state.editIconActive&&e.state.activeIndex===l?"icon-edit-hover":"icon-edit",className:N.default["btn-icon"]})))}}],page:{pageNumber:1,pageSize:10}},e}return(0,c.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.queryUserList()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.messageTemplate,l=this.state,n=l.groupTitle,i=l.deleteVisible,p=l.groupMenuInfo,m=l.updateFlag,d=this.state,c=d.typeOptions,f=d.columns,g=d.page,y=d.modifyVisible,h=Object.assign([],c);return h.shift(),v.default.createElement(M.PageHeaderWrapper,null,v.default.createElement(w,{search:this.queryLog,ref:this.searchForm,typeOptions:c}),v.default.createElement(u.default,{closable:!1,title:n,width:700,onClose:this.onClose,visible:y},y&&v.default.createElement(k.default,{onCancel:this.onClose,onSave:this.onSave,groupMenuInfo:p,updateFlag:m,typeOptions:h})),v.default.createElement(r.default,{title:"CONFIRM",visible:i,onOk:this.deleteConfirm,onCancel:this.deleteCancel,cancelText:(0,b.formatMessage)({id:"app.common.cancel"}),okText:(0,b.formatMessage)({id:"app.common.confirm"})},v.default.createElement("span",null,"Please confirm that you want to delete this record?")),v.default.createElement("div",{className:N.default.content},v.default.createElement(o.default,{loading:t["messageContentTemplate/getTemplateList"],dataSource:a.items,columns:f,pagination:!1}),a.items&&a.items.length>0&&v.default.createElement(s.default,{showSizeChanger:!0,current:g.pageNumber,showTotal:function(){return"Page ".concat(a.totalCount?g.pageNumber.toString():0," of ").concat(Math.ceil((a.totalCount||0)/g.pageSize).toString())},onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,total:a.totalCount,pageSize:g.pageSize})))}}]),t}(v.Component),g=y))||g);t.default=S},d8wp:function(e,t,a){e.exports={inputValue:"antd-pro-pages-system-management-message-content-template-message-content-template-inputValue",content:"antd-pro-pages-system-management-message-content-template-message-content-template-content",tableTop:"antd-pro-pages-system-management-message-content-template-message-content-template-tableTop",title:"antd-pro-pages-system-management-message-content-template-message-content-template-title",userGroup:"antd-pro-pages-system-management-message-content-template-message-content-template-userGroup",groupTitle:"antd-pro-pages-system-management-message-content-template-message-content-template-groupTitle",treeWraper:"antd-pro-pages-system-management-message-content-template-message-content-template-treeWraper"}},sf48:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var s=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("+L6B");var r=l(a("2/Rp"));a("miYZ");var u=l(a("tsqr"));a("y8nQ");var i=l(a("Vl3Y")),p=l(a("2Taf")),m=l(a("vZ4D")),d=l(a("l4Ni")),c=l(a("ujKo")),f=l(a("MhPg"));a("OaEy");var g=l(a("2fM7"));a("5NDa");var y,h,v,M=l(a("5rEg")),b=n(a("q1tI")),E=a("LLXN"),I=a("MuoO"),C=M.default.TextArea,N=g.default.Option,T=function(e){function t(){var e;return(0,p.default)(this,t),e=(0,d.default)(this,(0,c.default)(t).call(this)),e.state={},e}return(0,f.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.groupMenuInfo,l=t.typeOptions;return b.default.createElement(b.Fragment,null,b.default.createElement(i.default,null,b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.templateName"}),labelCol:{span:4},wrapperCol:{span:8}},e("templateName",{rules:[{required:!0,message:"Please input Name of Alert User Group"}],initialValue:a&&a.templateName})(b.default.createElement(M.default,{disabled:!0,placeholder:"Please input"}))),b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.templateId"}),labelCol:{span:4},wrapperCol:{span:8}},e("templateId",{initialValue:a&&a.templateId})(b.default.createElement(M.default,{disabled:!0,placeholder:"Please input"}))),b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.templateType"}),labelCol:{span:4},wrapperCol:{span:8}},e("type",{rules:[{required:!0,message:"Type of email should not be empty"}],initialValue:a&&a.type})(b.default.createElement(g.default,{placeholder:"Please Select"},l.map(function(e){return b.default.createElement(N,{key:e.key,value:e.value},e.title)})))),b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.templateTitle"}),labelCol:{span:4},wrapperCol:{span:16}},e("title",{rules:[{required:!0,message:"Title of email should not be empty"}],initialValue:a&&a.title})(b.default.createElement(M.default,{placeholder:"Please input"}))),b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.templateContent"}),labelCol:{span:4},wrapperCol:{span:16}},e("content",{rules:[{required:!0,message:"Content of email should not be empty"}],initialValue:a&&a.content})(b.default.createElement(C,{rows:8,placeholder:"Please input"}))),b.default.createElement(i.default.Item,{label:(0,E.formatMessage)({id:"systemManagement.template.keyword"}),labelCol:{span:4},wrapperCol:{span:8}},e("keyWord",{initialValue:a&&a.keyWord})(b.default.createElement(M.default,{disabled:!0,placeholder:"Please input"})))))}}]),t}(b.Component),k=i.default.create()(T),w=(y=(0,I.connect)(function(e){var t=e.messageContentTemplate,a=e.loading;return{loading:a.effects,userGroup:t.saveUser,updateGroup:t.updateData}}),y((v=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,d.default)(this,(0,c.default)(t).call(this,e)),a.newUserRef=b.default.createRef(),a.onCancel=function(){a.props.onCancel()},a.onSave=function(){var e=a.props,t=e.dispatch,l=e.updateFlag;a.newUserRef.current.validateFields(function(e,n){if(console.log("err=======",e),!e)if(l){var s={templateId:n.templateId,templateName:n.templateName,type:n.type,title:n.title,content:n.content};t({type:"messageContentTemplate/updateTemplate",payload:s,callback:function(){u.default.success("save success"),a.props.onSave()}})}else{var o={templateId:n.templateId,templateName:n.templateName,title:n.title,content:n.content,type:n.type};t({type:"messageContentTemplate/newAlertUser",payload:o,callback:function(){u.default.success("success"),a.props.onSave()}})}})},a.state={},a}return(0,f.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.groupMenuInfo,a=e.typeOptions;return b.default.createElement(b.Fragment,null,b.default.createElement(k,{ref:this.newUserRef,groupMenuInfo:t,typeOptions:a}),b.default.createElement(s.default,{type:"flex",justify:"end",style:{position:"absolute",right:0,bottom:0,width:"100%",padding:"10px 16px",background:"#fff",textAlign:"right"}},b.default.createElement(o.default,null,b.default.createElement(r.default,{onClick:this.onCancel},"CANCEL"),b.default.createElement(r.default,{type:"primary",onClick:this.onSave},"SAVE"))))}}]),t}(b.Component),h=v))||h),S=w;t.default=S}}]);