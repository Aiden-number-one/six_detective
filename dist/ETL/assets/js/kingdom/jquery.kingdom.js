var _extends=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if("undefined"==typeof jQuery)throw new Error("jquery.kingdom requires jQuery");define(function(require,exports,module){$.extend({kingdom:{getSysType:function(){var e="--",a=location.hash;return a&&-1<a.indexOf("#")&&-1<a.indexOf("-")&&(e=a.substring(1,a.indexOf("-")).toUpperCase()),e},kconfig:function(){return{theme:"",root:"applications//",fileserver:"/fileserver",developer:!0}},setValue:function(e,a){window.localStorage?window.localStorage.setItem(e,a):$.cookie(e,a)},getValue:function(e){return window.localStorage?window.localStorage.getItem(e):$.cookie(e)},testMode:!0,logShow:!1,tempParams:{},log:function(){$.kingdom.logShow&&console&&console.log},getBrowser:function(e){var a,t,r,n,o,i,s=navigator.userAgent.toLowerCase();return o="ActiveXObject"in self?(n=(r=s.match(/msie ([\d.]+)/))?r[1]:(r=s.match(/rv:([\d.]+)/))?r[1]:0,0<((a={"trident/7.0":11,"trident/6.0":10,"trident/5.0":9,"trident/4.0":8})[t=(r=s.match(/(trident\/[\d.]+|edge\/[\d.]+)/))?r[1]:void 0]||n)?"ie":void 0):(r=s.match(/edge\/([\d.]+)/))?"edge":(r=s.match(/firefox\/([\d.]+)/))?"firefox":(r=s.match(/chrome\/([\d.]+)/))?"chrome":(r=s.match(/opera.([\d.]+)/))?"opera":(r=s.match(/version\/([\d.]+).*safari/))?"safari":void 0,i=t&&a[t]?a[t]:r[1],null!=e?o+"/"+i:o},recommendBrowser:function(){var e=this.getBrowser(!0);(-1<e.indexOf("ie/")||-1<e.indexOf("edge/"))&&toastr.info("Google browser recommended^_^",{positionClass:"toast-top-right"})},uuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},clearDateFormat:function(e){return e.replace(/ /g,"").replace(/-/g,"").replace(/:/g,"")},dateFormat:function(e){var a=new Date,t={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e},timeFormat:function(e){function a(e){return e<10?"0"+e:e}var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes(),c=t.getSeconds();return r+"-"+a(n)+"-"+a(o)+" "+a(i)+":"+a(s)+":"+a(c)},doKoauthAPI:function(e,a,t,r){var n=this,o=$.kingdom.getAjaxParams(e,"v2.0",t);$.post("/api",o.param,function(e){if(r){var a=e.bcjson.flag;if("0"!=a&&"1"!=a)return n.logout(function(){document.location.href="/login.html"}),!1;r(e)}},"json")},doKoauthAdminAPI:function doKoauthAdminAPI(api_name,api_version,api_params,cbfunc,method){$.kingdom.log("\n\n\n======"+$.kingdom.dateFormat("yyyy-MM-dd hh:mm:ss")+"\t"+document.location.href+"\n======begin call api:"+api_name+" ,version:"+api_version),$.kingdom.log("======api params:"+JSON.stringify(api_params||{}));var $this=this,param=$.kingdom.getAjaxParams(api_name,"v2.0",api_params),url="/admin_api";url="bayconnect.superlop.file_info"===api_name?"/superlop/rest/admin/v2.0/"+$.trim(api_name)+".json":"/superlop/restv2/admin/v2.0/"+$.trim(api_name)+".json";var type="post",rid="RID"+$.kingdom.uuid().replace(/-/g,"");$.ajax({type:type,url:url,dataType:"json",data:param.param,timeout:12e4,async:!0,beforeSend:function(e){var a=$.kingdom.getRandowNVPS(),t=a.join(""),r="";a.forEach(function(e){r+=e+param.NVPS[e]}),r+="I"+rid;var n=t+$.md5(r,32).toUpperCase();e.setRequestHeader("X-Bc-S",n),e.setRequestHeader("X-Bc-T","BCT"+localStorage.getItem("BCTID")),e.setRequestHeader("X-Bc-I",rid)}}).done(function(data){if($.kingdom.log("======api return result:"+JSON.stringify(data||{})),data&&data.bcjson&&data.bcjson.flag){var flag=data.bcjson.flag;"0"==flag&&console}if("object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&data){if(!data.bcjson)return!1;var flag=data.bcjson.flag;if("001"==flag)return $this.logout(function(){document.location.href="/login.html"}),!1;if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API： "+api_name+",<br />入参："+JSON.stringify(api_params)+"<br/>";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}})},doKoauthAdminAPISync:function doKoauthAdminAPISync(api_name,api_version,api_params,cbfunc,method){$.kingdom.log("\n\n\n======"+$.kingdom.dateFormat("yyyy-MM-dd hh:mm:ss")+"\t"+document.location.href+"\n======begin call api:"+api_name+" ,version:"+api_version),$.kingdom.log("======api params:"+JSON.stringify(api_params||{}));var $this=this,param=$.kingdom.getAjaxParams(api_name,"v2.0",api_params),url="/admin_api";url="/superlop/restv2/admin/v2.0/"+$.trim(api_name)+".json";var type="post",rid="RID"+$.kingdom.uuid().replace(/-/g,"");$.ajax({type:type,url:url,dataType:"json",data:param.param,timeout:12e4,async:!1,beforeSend:function(e){var a=$.kingdom.getRandowNVPS(),t=a.join(""),r="";a.forEach(function(e){r+=e+param.NVPS[e]}),r+="I"+rid;var n=t+$.md5(r,32).toUpperCase();e.setRequestHeader("X-Bc-S",n),e.setRequestHeader("X-Bc-T","BCT"+localStorage.getItem("BCTID")),e.setRequestHeader("X-Bc-I",rid)}}).done(function(data){if($.kingdom.log("======api return result:"+JSON.stringify(data||{})),data&&data.bcjson&&data.bcjson.flag){var flag=data.bcjson.flag;"0"==flag&&console}if("object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&data){if(!data.bcjson)return!1;var flag=data.bcjson.flag;if("001"==flag)return $this.logout(function(){document.location.href="/login.html"}),!1;if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API： "+api_name+",<br />入参："+JSON.stringify(api_params)+"<br/>";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}})},doKoauthCode:function(e,a){var t=$.kingdom.getCodeAjaxParams(e,a);$.post("/code",t,function(e){a&&a(e)},"json")},doKoauthAPISync:function doKoauthAPISync(api_name,api_version,api_params,cbfunc){var param=$.kingdom.getAjaxParams(api_name,"v2.0",api_params);$.ajax({type:"post",url:"/api",dataType:"json",data:param.param,async:!1}).done(function(data){"object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&cbfunc(data)})},doCloudKoauthAPI:function(e,a,t,r){var n=$.kingdom.getAjaxParams(e,"v2.0",t);$.post("/api_cloud",n.param,function(e){r&&r(e)},"json")},doCloudKoauthAPISync:function doCloudKoauthAPISync(api_name,api_version,api_params,cbfunc){var param=$.kingdom.getAjaxParams(api_name,"v2.0",api_params);$.ajax({type:"post",url:"/api_cloud",dataType:"json",data:param.param,async:!1}).done(function(data){"object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&cbfunc(data)})},doDevToolApi:function doDevToolApi(api_service,api_params,cbfunc){var param=$.kingdom.getAjaxParams("api_name","api_version",api_params),reqUrl="/retl/rest/common/devtool/"+api_service+".json";$.ajax({type:"post",url:reqUrl,dataType:"json",data:param.param,async:!0}).done(function(data){"object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&cbfunc(data)})},doDevToolApiTest:function doDevToolApiTest(api_service,api_params,cbfunc){var param=$.kingdom.getAjaxParams("api_name","api_version",api_params),reqUrl="/retl/rest/common/"+api_service+".json";$.ajax({type:"post",url:reqUrl,dataType:"json",data:param.param,async:!0}).done(function(data){"object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&cbfunc(data)})},getRandowNVPS:function(){for(var e=["N","V","P","S"],a=[];0<e.length;){var t=Math.floor(Math.random()*e.length);a.push(e.splice(t,1)[0])}return a},getLoginName:function(a){console.log(window.location.hash.split("?")[1].split("=")[1]);var o=$.kingdom.getAjaxParams("bayconnect.superlop.get_login_name","v4.0",{}),i="RID"+$.kingdom.uuid().replace(/-/g,"");$.ajax({url:"/superlop/restv2/admin/v4.0/bayconnect.superlop.get_login_name.json",data:o.param,type:"post",beforeSend:function(e){var a=$.kingdom.getRandowNVPS(),t=a.join(""),r="";a.forEach(function(e){r+=e+o.NVPS[e]}),r+="I"+i;var n=t+$.md5(r,32).toUpperCase();e.setRequestHeader("X-Bc-S",n),e.setRequestHeader("X-Bc-T","BCT"+localStorage.getItem("BCTID")),e.setRequestHeader("X-Bc-I",i)},success:function(e){a&&a(e)},error:function(e,a){if("timeout"==a)return!(window.location.href="/login.html")}})},getRedirect:function(t){$.ajax({type:"post",url:"/redirect",dataType:"json",async:!0}).done(function(e){var a="";"1"==e.bcjson.flag&&(a=e.bcjson.items[0].redirect),t&&t(a)})},logout:function logout(cbfunc){api_name="bayconnect.superlop.set_sys_logout",api_version="v2.0",api_params={},$.kingdom.log("\n\n\n======"+$.kingdom.dateFormat("yyyy-MM-dd hh:mm:ss")+"\t"+document.location.href+"\n======begin call api:"+api_name+" ,version:"+api_version),$.kingdom.log("======api params:"+JSON.stringify(api_params||{}));var $this=this,param=$.kingdom.getAjaxParams(api_name,"v2.0",api_params),url="/admin_api";url="/retl/rest/admin/v2.0/"+$.trim(api_name)+".json",$.ajax({type:"get",url:url,dataType:"json",data:param.param,async:!1,beforeSend:function(e){var a=$.kingdom.getValue("x-trace-user-id");""==$.trim(a)&&(a=$.kingdom.uuid(),$.kingdom.setValue("x-trace-user-id",a)),e.setRequestHeader("X-Kweb-Menu-Id","id1122333"),e.setRequestHeader("X-Kweb-Op-Id","op_id1122333"),e.setRequestHeader("X-Kweb-Req-Trace-Id","rt1122333"),e.setRequestHeader("X-Kweb-Trace-User-Id",a),e.setRequestHeader("X-Kweb-Location-Href",document.location.href),e.setRequestHeader("X-Kweb-Timestamp",(new Date).getTime()+""),e.setRequestHeader("X-Kweb-Sign",$.md5(document.location.href)),e.setRequestHeader("X-Kweb-Api-Name",$.trim(api_name)),e.setRequestHeader("X-Kweb-Api-Version",$.trim(api_version)),e.setRequestHeader("X-Kweb-Api-Async",!1)}}).done(function(data){if($.kingdom.log("======api return result:"+JSON.stringify(data||{})),data&&data.bcjson&&data.bcjson.flag){var flag=data.bcjson.flag;"0"==flag&&console}if("object"!=(void 0===data?"undefined":_typeof(data))&&(data=eval("("+data+")")),cbfunc&&data){if(!data.bcjson)return!1;var flag=data.bcjson.flag;if("0"!=flag&&"1"!=flag)return document.location.href="/login.html",!1;if(-1<data.bcjson.msg.indexOf("请求处理异常")&&1==$.kingdom.logShow){$("#message_info_all").modal("show");var items=data.bcjson.msg,params={};params.titleIndex=items.indexOf("请求处理异常"),params.paramIndex=items.indexOf("入参"),params.contentIndex=items.indexOf("异常堆栈");var title=items.substring(params.titleIndex,params.paramIndex),param=items.substring(params.paramIndex,params.contentIndex),content=items.substring(params.contentIndex,items.length);return 50<title.length&&(title=title.substring(0,50)+"..."),param="请求API: "+api_name+" <br />"+param,param=param.replace(/,/g,",<br />"),content=content.replace(/at /g," <br /> at "),$("#message_info_all_title").html(title),$("#message_info_all_params").html(param),$("#message_info_all_content").html(content),!1}cbfunc(data)}})},getAjaxParams:function(e,a,t){var r=Date.now(),n=JSON.stringify(_extends({},{bcLangType:"ZHCN"},t)),o=window.btoa(unescape(encodeURIComponent(n)));return{param:{bcp:o,s:r},NVPS:{N:e,V:a,P:o,S:r}}},getCodeAjaxParams:function(e){var a={};return a["kingdom"+(new Date).getTime()]=$.base64.encode(encodeURIComponent(JSON.stringify(e))),a},get16:function(e,a,t){var r={},n=(new Date).getTime()+"",o=JSON.stringify(t);return r._0x0111=$.base64.encode(n),r._0x1011=$.base64.encode(e),r._0x1100=$.base64.encode(a),r._0x1110=$.base64.encode(encodeURIComponent(o)),r._0x1001=$.md5(r._0x0111+r._0x1011+r._0x1100+r._0x1110).toUpperCase(),r._0x1101=$.base64.encode(document.location.href),r},getK:function(e,a,t){var r={},n=(new Date).getTime()+"",o=JSON.stringify(t);return r.KInGDOM=$.base64.encode(n),r.KINGdOM=$.base64.encode(e),r.KINGDoM=$.base64.encode(a),r.KiNGDOM=$.base64.encode(encodeURIComponent(o)),r.kINGDOM=$.md5(r.KiNGDOM+r.KINGDoM+r.KInGDOM+r.KINGdOM).toUpperCase(),r.KINgDOM=$.base64.encode(document.location.href),r.KINGDOm=$.base64.encode(document.location.protocol),r},getL:function(e,a,t){var r={},n=(new Date).getTime()+"",o=JSON.stringify(t);return r.css=$.base64.encode(n),r.android=$.base64.encode(e),r.html=$.base64.encode(a),r.ios=$.base64.encode(encodeURIComponent(o)),r.js=$.md5(r.ios+r.android+r.css+r.html).toUpperCase(),r.wp=$.base64.encode(document.location.href),r},upload:function upload(form_id,cbfunc){var options={url:"/krcs/file/upload",type:"POST",dataType:"json",success:function success(data){var jsondata={};if(jsondata="string"==typeof data?eval("("+data+")"):data,cbfunc){if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API: "+options.url+",<br />";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}},error:function error(e){var jsondata={};if(jsondata="string"==typeof e.responseText?eval("("+e.responseText+")"):e,cbfunc){if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API: "+options.url+",<br />";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}}};$("#"+form_id).ajaxSubmit(options)},uploadWithApi:function uploadWithApi(form_id,api,cbfunc){var x_trace_user_id=$.kingdom.getValue("x-trace-user-id");""==$.trim(x_trace_user_id)&&(x_trace_user_id=$.kingdom.uuid(),$.kingdom.setValue("x-trace-user-id",x_trace_user_id));var x_trace_page_id=window.x_trace_page_id;""==$.trim(x_trace_page_id)&&(x_trace_page_id=$.kingdom.uuid(),window.x_trace_page_id=x_trace_page_id);var formData=new FormData(document.getElementById(form_id)),options={url:"/retl/rest/admin/v4.0/bayconnect.superlop."+api+".json",type:"post",dataType:"json",data:formData,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-Kweb-Menu-Id",document.location.href),e.setRequestHeader("X-Kweb-Trace-Req-Id",$.kingdom.uuid()),e.setRequestHeader("X-Kweb-Trace-Page-Id",x_trace_page_id),e.setRequestHeader("X-Kweb-Trace-User-Id",x_trace_user_id),e.setRequestHeader("X-Kweb-Location-Href",document.location.href),e.setRequestHeader("X-Kweb-Timestamp",(new Date).getTime()+""),e.setRequestHeader("X-Kweb-Sign",$.md5(document.location.href)),e.setRequestHeader("X-Kweb-Api-Name",$.trim("bayconnect.superlop.file_sys_config_import.json")),e.setRequestHeader("X-Kweb-Api-Version",$.trim("4.0"))},success:function success(data){var jsondata={};if(jsondata="string"==typeof data?eval("("+data+")"):data,cbfunc){if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API: bayconnect.superlop.file_sys_config_import.json,<br />";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}},error:function error(e){var jsondata={};if(jsondata="string"==typeof e.responseText?eval("("+e.responseText+")"):e,cbfunc){if("0000"==data.bcjson.flag){var errorData={bcjson:{flag:"0",msg:data.bcjson.items[0].message}};if(cbfunc(errorData),"block"===$("#catch-error-basic-modal").css("display"))return!1;$(".bootbox-confirm").hide(),$(".modal-backdrop").hide(),App.unblockUI(),$("#catch-error-basic-modal").modal("show");var params={};$("#catch-error-basic-msg").html(data.bcjson.items[0].message);var paramApi="请求API: bayconnect.superlop.file_sys_config_import.json,<br />入参：<br/>";return data.bcjson.msg?$("#catch-error-detail-msg").html(paramApi+data.bcjson.msg.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")):$("#catch-error-detail-msg").html(""),!1}cbfunc(data)}}};$.ajax(options)},cutimage:function cutimage(form_id,cbfunc){var options={url:"/cutimage",type:"POST",dataType:"json",success:function success(data){var jsondata={};jsondata="string"==typeof data?eval("("+data+")"):data,cbfunc&&cbfunc(jsondata)},error:function error(e){var jsondata={};jsondata="string"==typeof e.responseText?eval("("+e.responseText+")"):data,cbfunc&&cbfunc(jsondata)}};$("#"+form_id).ajaxSubmit(options)},getUrlParameter:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(a);return null!=t?decodeURI(t[2]):null},getCookieParameter:function(e){var a=new RegExp(e+"=([^;]*)(;|$)","i"),t=document.cookie.match(a);return null!=t?$.base64.decode(decodeURI(t[1])):null},setParameter:function(e,a){window.sessionStorage.setItem(e,a)},getParameter:function(e){var a=window.sessionStorage.getItem(e);return a&&""!=a?a:""},delParameter:function(e){window.sessionStorage.removeItem(e)},fixMoney:function(e,a){if(!e)return"0.00";a=0<a&&a<=20?a:2;var r=(e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(a)+"").split(".")[0].split("").reverse(),n=e.split(".")[1];for(t="",i=0;i<r.length;i++)t+=r[i]+((i+1)%3==0&&i+1!=r.length?",":"");return t.split("").reverse().join("")+"."+n},toDate:function(e){if(!e)return"";var a=(e=e.toString()).length;return 4===a?e.substring(0,4):6===a?e.substring(0,4)+"-"+e.substring(4,6):e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)},toDateTime:function(e){return e?(e=e.toString()).substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)+" "+e.substring(8,10)+":"+e.substring(10,12)+":"+e.substring(12,14):""},toStandardDateObj:function(e){if(!e)return"";var a=new Date(parseInt(e.substring(0,4)),parseInt(e.substring(4,6))-1,parseInt(e.substring(6,8))),t=e.substring(8,10)+":"+e.substring(10,12)+":"+e.substring(12,14);return new Date(a.toDateString()+" "+t)},formatDuring:function(e){var a=parseInt(e/864e5),t=parseInt(e%864e5/36e5),r=parseInt(e%36e5/6e4),n=parseInt(e%6e4/1e3);return n<10&&(n="0"+n),r<10&&(r="0"+r),t<10&&(t="0"+t),a<10&&(a="0"+a),t+":"+r+":"+n},replaceString:function(e,a,t){t=t||"*";var r=e.length;j="";for(var n=r-a;0<n;n--)j=t.concat(j);return e.replace(e.substr(a,r-a),j)},uniqueArray:function(e){for(var a={},t=[],r=0;r<e.length;r++)a[e[r]]||(a[e[r]]=!0,t.push(e[r]));return t},formatMillisecond:function(e){return e=parseInt(e),isNaN(e)?"--":36e5<e?(e/36e5).toFixed(2)+"h":6e4<e?(e/6e4).toFixed(2)+"m":1e3<e?(e/1e3).toFixed(2)+"s":e+"ms"},generateMenuTree:function(e,i,s,o){i=i||"id",s=s||"parentId",o=o||"children";var c={},t="",d={},u=[];for(key in $.each(e,function(e,a){var t=a[s],r=a[i],n=c[t];(n=n||[]).push(a),c[t]=n;var o=d[r];(o=o||[]).push(t),d[r]=o}),d){var a=d[key];$.each(a,function(e,a){d[a]||(t=a)})}var r=c[t];return $.each(r,function(e,a){var t=a[i],r=a,n=c[t];n&&0<n.length&&(r=$.kingdom.addChildrenMenu(c,i,o,r,n)),u.push(r)}),u},addChildrenMenu:function(i,s,c,d,e){return $.each(e,function(e,a){var t=a,r=a[s],n=i[r];n&&0<n.length&&(t=$.kingdom.addChildrenMenu(i,s,c,t,n));var o=d[c];(o=o||[]).push(t),d[c]=o}),d},generateTree:function(e,n,o,i,a,t){n=n||"id",o=o||"parentId",i=i||"children",t=t||"asc";var s=[],r=[],c={};return $.each(e,function(e,a){c[a[o]]||(c[a[o]]=1)}),$.each(e,function(e,a){void 0===a[i]&&(a[i]=[]),1==c[a[n]]?s.push(a):r.push(a)}),a&&$.kingdom.quickSort(r,0,r.length-1,a,t),r.length==e.length?($.each(r,function(e,a){a.children&&0!=a.children.length||(a.type="leaf")}),r):($.each(r,function(e,t){var r=!1;$.each(s,function(e,a){if(t[o]==a[n])return a[i].push(t),a.type="node",!(r=!0)}),$.each(s,function(e,a){$.kingdom.quickSort(a[i],0,a[i].length-1,n,"asc")}),0==r&&s.push(t)}),$.kingdom.generateTree(s,n,o,i,a,t))},quickSort:function(e,a,t,r,n){if(a<t){var o=function(e,a,t,r,n){if(e[t][r]=isNaN(e[t][r])?e[t][r]:parseFloat(e[t][r]),e[a][r]=isNaN(e[a][r])?e[a][r]:parseFloat(e[a][r]),"asc"==n){for(;a<t;){for(;a<t&&e[a][r]<=e[t][r];)t--;var o=e[a];for(e[a]=e[t],e[t]=o;a<t&&e[a][r]<=e[t][r];)a++;o=e[a],e[a]=e[t],e[t]=o}return a}if("desc"==n){for(;t<a;){for(;t<a&&e[a][r]>=e[t][r];)t--;o=e[a];for(e[a]=e[t],e[t]=o;t<a&&e[a][r]>=e[t][r];)a++;o=e[a],e[a]=e[t],e[t]=o}return a}}(e,a,t,r,n);$.kingdom.quickSort(e,a,o-1,r,n),$.kingdom.quickSort(e,o+1,t,r,n)}},generateTreeData:function(){this.menus="",this.index=-1,this.iconArray=["fa fa-folder icon-state-primary icon-lg","fa fa-folder icon-state-primary","fa fa-file icon-state-primary","fa fa-file icon-state-primary","fa fa-file icon-state-primary"],this.init=function(e,a,t,r){var n=this.getChildArry(e,a,t);if(0<n.length){for(var o in this.menus+="<ul>",this.index++,n)this.menus+='<li data-jstree=\'{"icon" : "'+this.iconArray[this.index]+"\"}' "+r+"='"+n[o][r]+"'>"+n[o][t].replace(e,""),this.init(n[o][t]+"/",a,t,r),this.menus+="</li>";return this.menus+="</ul>",this.index--,this.menus}},this.getChildArry=function(e,a,t){var r=new Array;for(var n in a)-1===a[n][t].replace(e,"").indexOf("/")&&-1!==a[n][t].indexOf(e)&&r.push(a[n]);return r}},filterFoldName:function(e,a){var t=[],r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)for(var c=i.value,d=c.foldName.split("/"),u=0,m=d.length;u<m;u++)if(d[u].includes(a)){if(0===u)return t=e;if(1===u){t.push(c);var p=y(e,t,d[0]);p&&t.push(p)}else if(2===u){t.push(c);var l=y(e,t,d[0]+"/"+d[1]);l&&t.push(l);var f=y(e,t,d[0]);f&&t.push(f)}else{t.push(c);var g=y(e,t,d[0]+"/"+d[1]+"/"+d[2]);g&&t.push(g);var b=y(e,t,d[0]+"/"+d[1]);b&&t.push(b);var h=y(e,t,d[0]);h&&t.push(h)}}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return t;function v(e,a){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(o.value.foldName===a)return!1}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return!0}function y(e,a,t){var r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(c.foldName===t&&v(a,t))return c}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}},getDateStr:function(e,a){a=a||"";var t=new Date;t.setDate(t.getDate()+e);var r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate();return r+""+a+(n<=9?"0"+n:n)+a+(o<=9?"0"+o:o)},fixMoneyBig:function(e){var a="",t="仟佰拾亿仟佰拾万仟佰拾圆角分",r=(e+="00").indexOf(".");0<=r&&(e=e.substring(0,r)+e.substr(r+1,2)),t=t.substr(t.length-e.length);for(var n=0;n<e.length;n++)a+="零壹贰叁肆伍陆柒捌玖".substr(e.substr(n,1),1)+t.substr(n,1);return a.replace(/零角零分$/,"整").replace(/零[仟佰拾]/g,"零").replace(/零{2,}/g,"零").replace(/零([亿|万])/g,"$1").replace(/零+圆/,"圆").replace(/亿零{0,3}万/,"亿").replace(/^圆/,"零圆")},openWin:function(e){var a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("id","openwin"),document.body.appendChild(a),a.click(),$(a).remove()},draggable:function(e,a){var t=$(e);t.draggable({cursor:"move",handle:".modal-header"}),a?t.modal(a):t.modal("hide")},textCounter:function(e,a){$(e).after(" 还可输入<span>"+a+"</span>/<span>"+a+"</span>个字符"),$(e).on("input","",function(e){!function(e,a){var t=$(e).next();e.val().length>a?e.val(e.val().substring(0,a)):t.text(a-e.val().length)}($(this),$(this).next().next().text())})},animateMarginLeft:function(e,a){var t=a||300;$("#J_sheet_tabs").animate({"margin-left":e},t)},ls:{set:function(e,a,t){var r={};r.data=a,r.expire=t&&0<t?(new Date).getTime()/6e4+t:0,window.localStorage.setItem(e,JSON.stringify(r))},get:function(e){try{(a=JSON.parse(window.localStorage.getItem(e)))?0<a.expire&&a.expire<=(new Date).getTime()/6e4?(a="",window.localStorage.removeItem(e)):a=a.data:a=""}catch(e){var a=""}return a},del:function(e){window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()}},getList:function(e,c){var a=e.apiName,t=e.apiVision,r=e.params,d=e.tableId,u=e.pageId,m=e.template,n=e.formName,p=e.cb,l=e.isChangeSize,f=e.isGoPage,o=e.pageSize,g=(e.pageNumber,_extends({pageNumber:$("#"+u+" input[name='pager_number']").val()||"1",pageSize:$("#"+u+" select[name='pager_size']").val()||o||"10"},r));n&&(g=_extends(App.getFormParams(n),g),$.each($("form[name="+n+"] input.date-time-picker,form[name="+n+"] input.date-picker"),function(e,a){var t=$(a).attr("name"),r=$(a).val();g[t]=r.replace(/[-: ]/g,"")})),$.kingdom.doKoauthAdminAPI(a,t,g,function(a){if("0"==a.bcjson.flag)return toastr.error(a.bcjson.msg),$("#"+d+" tbody").html('<tr><td class="t-c" colspan="20">No Data</td></tr>'),u&&App.initPagination(0,0,0,u),void App.initCheckableTable($("#"+d));if(0<a.bcjson.totalCount){var t=a.bcjson.items;if(!t[0].hasOwnProperty("ROWNUM_")){var e=parseInt(g.pageSize)*parseInt(g.pageNumber);e=Math.floor(t.length/e)*parseInt(g.pageSize);for(var r=0,n=t.length;r<n;r++)t[r].ROWNUM_=e+r+1}require.async($.kingdom.kconfig().root+m,function(e){$("#"+d+" tbody").html(e(t)),App.initCheckableTable($("#"+d)),"function"==typeof c&&c(a)});var o=g.pageNumber,i=a.bcjson.totalCount,s=Math.ceil(parseInt(i)/parseInt(g.pageSize));u&&App.initPagination(o,s,i,u,g.pageSize,p,l,f)}else $("#"+d+" tbody").html('<tr><td class="t-c" colspan="20">No Data</td></tr>'),u&&App.initPagination(0,0,0,u),App.initCheckableTable($("#"+d))})},getDict:function(o,i,s,c,t){var e=sessionStorage.getItem("dictData");if(e){var a=JSON.parse(e),r=[];for(var n in a[o]){var d={id:n,text:a[o][n],dictTypeName:s};r.push(d)}return i?(c=c||"common-template/dict-option.handlebars",void i.split(",").forEach(function(a){require.async($.kingdom.kconfig().root+c,function(e){$(a).html(e(r)),t&&t()})})):r}$.kingdom.doKoauthAdminAPI("bayconnect.superlop.get_all_dict_data_list","v4.0",{},function(e){if("1"==e.bcjson.flag){var a=e.bcjson.items;sessionStorage.setItem("dictData",JSON.stringify(a[0]));var t=[];for(var r in a[0][o]){var n={id:r,text:a[0][o][r],dictTypeName:s};t.push(n)}if(!i)return t;c=c||"common-template/dict-option.handlebars",i.split(",").forEach(function(a){require.async($.kingdom.kconfig().root+c,function(e){$(a).html(e(t))})})}else toastr.error(e.bcjson.msg)})},getTreeData:function(){this.menus="",this.index=-1,this.iconArray=["fa fa-folder icon-state-primary icon-lg","fa fa-folder icon-state-primary","fa fa-file icon-state-primary","fa fa-file icon-state-primary","fa fa-file icon-state-primary"],this.GetData=function(e,a,t,r,n,o){var i=this.GetParentArry(e,n,a);if(0<i.length){for(var s in this.menus+="<ul>",this.index++,i){var c="";o&&o.forEach(function(e){i[s][e]&&(c+=e+'="'+i[s][e]+'"')}),this.menus+="<li "+c+' data-jstree=\'{"icon" : "'+this.iconArray[this.index]+"\"}'> "+i[s][t],this.GetData(i[s][r],a,t,r,n,o),this.menus+="</li>"}return this.menus+="</ul>",this.index--,this.menus}},this.GetParentArry=function(e,a,t){var r=new Array;for(var n in t)t[n][a]+""===e&&r.push(t[n]);return r}},debounce:function(t,r,n){return function(){var e=this,a=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(e,a)},r)}}}}),module.exports=jQuery.kingdom});